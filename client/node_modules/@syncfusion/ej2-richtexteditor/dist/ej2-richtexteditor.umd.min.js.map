{"version":3,"file":"ej2-richtexteditor.umd.min.js","sources":["../src/rich-text-editor/models/items.js","../src/rich-text-editor/base/util.js","../src/common/util.js","../src/rich-text-editor/actions/html-attributes.js","../src/rich-text-editor/base/constant.js","../src/rich-text-editor/base/classes.js","../src/rich-text-editor/base/enum.js","../src/rich-text-editor/models/default-locale.js","../src/rich-text-editor/renderer/toolbar-renderer.js","../src/rich-text-editor/actions/base-toolbar.js","../src/rich-text-editor/actions/dropdown-buttons.js","../src/rich-text-editor/services/service-locator.js","../src/rich-text-editor/services/renderer-factory.js","../src/rich-text-editor/actions/toolbar-action.js","../src/rich-text-editor/actions/toolbar.js","../src/rich-text-editor/actions/keyboard.js","../src/rich-text-editor/actions/color-picker.js","../src/rich-text-editor/actions/base-quick-toolbar.js","../src/rich-text-editor/renderer/popup-renderer.js","../src/rich-text-editor/actions/quick-toolbar.js","../src/rich-text-editor/actions/count.js","../src/markdown-parser/plugin/markdown-selection.js","../src/rich-text-editor/actions/markdown-toolbar-status.js","../src/rich-text-editor/actions/execute-command-callback.js","../src/common/constant.js","../src/rich-text-editor/formatter/formatter.js","../src/markdown-parser/base/constant.js","../src/markdown-parser/plugin/lists.js","../src/markdown-parser/plugin/formats.js","../src/markdown-parser/plugin/md-selection-formats.js","../src/common/config.js","../src/markdown-parser/plugin/undo.js","../src/markdown-parser/plugin/link.js","../src/markdown-parser/plugin/table.js","../src/markdown-parser/plugin/clearformat.js","../src/markdown-parser/plugin/insert-text.js","../src/markdown-parser/base/markdown-parser.js","../src/rich-text-editor/formatter/markdown-formatter.js","../src/rich-text-editor/renderer/markdown-renderer.js","../src/rich-text-editor/actions/markdown-editor.js","../src/editor-manager/base/constant.js","../src/selection/selection.js","../src/editor-manager/plugin/dom-node.js","../src/editor-manager/plugin/lists.js","../src/editor-manager/plugin/insert-methods.js","../src/editor-manager/plugin/nodecutter.js","../src/editor-manager/plugin/formats.js","../src/editor-manager/plugin/inserthtml.js","../src/editor-manager/plugin/link.js","../src/editor-manager/plugin/alignments.js","../src/editor-manager/plugin/indents.js","../src/editor-manager/base/classes.js","../src/editor-manager/plugin/image.js","../src/editor-manager/plugin/audio.js","../src/editor-manager/plugin/video.js","../src/editor-manager/plugin/table.js","../src/editor-manager/plugin/isformatted.js","../src/editor-manager/plugin/selection-commands.js","../src/editor-manager/plugin/selection-exec.js","../src/editor-manager/plugin/inserthtml-exec.js","../src/editor-manager/plugin/clearformat.js","../src/editor-manager/plugin/clearformat-exec.js","../src/editor-manager/plugin/undo.js","../src/editor-manager/plugin/ms-word-clean-up.js","../src/editor-manager/plugin/insert-text.js","../src/editor-manager/plugin/toolbar-status.js","../src/editor-manager/plugin/emoji-picker-action.js","../src/editor-manager/plugin/format-painter-actions.js","../src/editor-manager/base/editor-manager.js","../src/rich-text-editor/formatter/html-formatter.js","../src/rich-text-editor/actions/html-toolbar-status.js","../src/rich-text-editor/renderer/content-renderer.js","../src/rich-text-editor/renderer/iframe-content-renderer.js","../src/rich-text-editor/actions/xhtml-validation.js","../src/rich-text-editor/actions/html-editor.js","../src/rich-text-editor/actions/paste-clean-up.js","../src/rich-text-editor/actions/resize.js","../src/rich-text-editor/actions/file-manager.js","../src/rich-text-editor/actions/full-screen.js","../src/rich-text-editor/actions/format-painter.js","../src/rich-text-editor/actions/emoji-picker.js","../src/rich-text-editor/renderer/render.js","../src/rich-text-editor/renderer/link-module.js","../src/rich-text-editor/renderer/image-module.js","../src/rich-text-editor/renderer/audio-module.js","../src/rich-text-editor/renderer/video-module.js","../src/rich-text-editor/renderer/view-source.js","../src/rich-text-editor/renderer/table-module.js","../src/rich-text-editor/renderer/dialog-renderer.js","../src/rich-text-editor/base/interface.js","../src/rich-text-editor/models/toolbar-settings.js","../src/rich-text-editor/models/iframe-settings.js","../src/rich-text-editor/models/inline-mode.js","../src/rich-text-editor/actions/enter-key.js","../src/rich-text-editor/base/rich-text-editor.js"],"sourcesContent":["/* eslint-disable */\n/**\n * Export items model\n */\nexport var templateItems = ['alignments', 'formats', 'fontname', 'fontsize', 'fontcolor', 'backgroundcolor', 'align', 'display', 'audiolayoutoption', 'videolayoutoption', 'videoalign', 'tablerows', 'tablecolumns', 'tablecell', 'tablecellhorizontalalign', 'tablecellverticalalign', 'styles', 'numberformatlist', 'bulletformatlist'];\nexport var tools = {\n    'alignments': {\n        'id': 'Alignments',\n        'icon': 'e-alignments',\n        'tooltip': 'Alignments',\n        'command': 'Alignments',\n        'subCommand': 'Alignments'\n    },\n    'justifyleft': {\n        'id': 'JustifyLeft',\n        'icon': 'e-justify-left',\n        'tooltip': 'JustifyLeft',\n        'command': 'Alignments',\n        'subCommand': 'JustifyLeft'\n    },\n    'justifycenter': {\n        'id': 'JustifyCenter',\n        'icon': 'e-justify-center',\n        'tooltip': 'JustifyCenter',\n        'command': 'Alignments',\n        'subCommand': 'JustifyCenter'\n    },\n    'justifyright': {\n        'id': 'JustifyRight',\n        'icon': 'e-justify-right',\n        'tooltip': 'JustifyRight',\n        'command': 'Alignments',\n        'subCommand': 'JustifyRight'\n    },\n    'justifyfull': {\n        'id': 'JustifyFull',\n        'icon': 'e-justify-full',\n        'tooltip': 'JustifyFull',\n        'command': 'Alignments',\n        'subCommand': 'JustifyFull'\n    },\n    'fontname': {\n        'id': 'FontName',\n        'icon': 'e-font-name',\n        'tooltip': 'Font Name',\n        'command': 'Font',\n        'subCommand': 'FontName'\n    },\n    'fontsize': {\n        'id': 'FontSize',\n        'icon': 'e-font-size',\n        'tooltip': 'Font Size',\n        'command': 'Font',\n        'subCommand': 'FontSize'\n    },\n    'fontcolor': {\n        'id': 'FontColor',\n        'icon': 'e-rte-font-color',\n        'tooltip': 'Font Color',\n        'command': 'Font',\n        'subCommand': 'FontColor',\n        'value': '#ff0000ff'\n    },\n    'backgroundcolor': {\n        'id': 'BackgroundColor',\n        'icon': 'e-background-color',\n        'tooltip': 'Background Color',\n        'command': 'Font',\n        'subCommand': 'BackgroundColor',\n        'value': '#ffff00ff'\n    },\n    'bold': {\n        'id': 'Bold',\n        'icon': 'e-bold',\n        'tooltip': 'Bold',\n        'command': 'Style',\n        'subCommand': 'Bold'\n    },\n    'italic': {\n        'id': 'Italic',\n        'icon': 'e-italic',\n        'tooltip': 'Italic',\n        'command': 'Style',\n        'subCommand': 'Italic'\n    },\n    'underline': {\n        'id': 'Underline',\n        'icon': 'e-underline',\n        'tooltip': 'Underline',\n        'command': 'Style',\n        'subCommand': 'Underline'\n    },\n    'strikethrough': {\n        'id': 'StrikeThrough',\n        'icon': 'e-strike-through',\n        'tooltip': 'StrikeThrough',\n        'command': 'Style',\n        'subCommand': 'StrikeThrough'\n    },\n    'clearformat': {\n        'id': 'ClearFormat',\n        'icon': 'e-clear-format',\n        'tooltip': 'Clear Format',\n        'command': 'Clear',\n        'subCommand': 'ClearFormat'\n    },\n    'clearall': {\n        'id': 'ClearAll',\n        'icon': 'e-clear-all',\n        'tooltip': 'Clear All',\n        'command': 'Clear',\n        'subCommand': 'ClearAll'\n    },\n    'cut': {\n        'id': 'Cut',\n        'icon': 'e-cut',\n        'tooltip': 'Cut',\n        'command': 'ClipBoard',\n        'subCommand': 'Cut'\n    },\n    'copy': {\n        'id': 'Copy',\n        'icon': 'e-copy',\n        'tooltip': 'Copy',\n        'command': 'ClipBoard',\n        'subCommand': 'Copy'\n    },\n    'paste': {\n        'id': 'Paste',\n        'icon': 'e-paste',\n        'tooltip': 'Paste',\n        'command': 'ClipBoard',\n        'subCommand': 'Paste'\n    },\n    'unorderedlist': {\n        'id': 'UnorderedList',\n        'icon': 'e-unorder-list',\n        'tooltip': 'Bulleted List',\n        'command': 'Lists',\n        'subCommand': 'UL'\n    },\n    'orderedlist': {\n        'id': 'OrderedList',\n        'icon': 'e-order-list',\n        'tooltip': 'Numbered List',\n        'command': 'Lists',\n        'subCommand': 'OL'\n    },\n    'numberformatlist': {\n        'id': 'NumberFormatList',\n        'icon': 'e-order-list',\n        'tooltip': 'Number Format List',\n        'command': 'NumberFormatList',\n        'subCommand': 'NumberFormatList'\n    },\n    'bulletformatlist': {\n        'id': 'BulletFormatList',\n        'icon': 'e-unorder-list',\n        'tooltip': 'Bullet Format List',\n        'command': 'BulletFormatList',\n        'subCommand': 'BulletFormatList'\n    },\n    'indent': {\n        'id': 'Indent',\n        'icon': 'e-indent',\n        'tooltip': 'Increase Indent',\n        'command': 'Indents',\n        'subCommand': 'Indent'\n    },\n    'outdent': {\n        'id': 'Outdent',\n        'icon': 'e-outdent',\n        'tooltip': 'Decrease Indent',\n        'command': 'Indents',\n        'subCommand': 'Outdent'\n    },\n    'undo': {\n        'id': 'Undo',\n        'icon': 'e-undo',\n        'tooltip': 'Undo',\n        'command': 'Actions',\n        'subCommand': 'Undo'\n    },\n    'redo': {\n        'id': 'Redo',\n        'icon': 'e-redo',\n        'tooltip': 'Redo',\n        'command': 'Actions',\n        'subCommand': 'Redo'\n    },\n    'superscript': {\n        'id': 'SuperScript',\n        'icon': 'e-super-script',\n        'tooltip': 'Superscript',\n        'command': 'Effects',\n        'subCommand': 'SuperScript'\n    },\n    'subscript': {\n        'id': 'SubScript',\n        'icon': 'e-sub-script',\n        'tooltip': 'Subscript',\n        'command': 'Effects',\n        'subCommand': 'SubScript'\n    },\n    'createlink': {\n        'id': 'CreateLink',\n        'icon': 'e-create-link',\n        'tooltip': 'Insert Hyperlink',\n        'command': 'Links',\n        'subCommand': 'CreateLink'\n    },\n    'openlink': {\n        'id': 'OpenLink',\n        'icon': 'e-open-link',\n        'tooltip': 'Open Link',\n        'command': 'Links',\n        'subCommand': 'OpenLink'\n    },\n    'editlink': {\n        'id': 'EditLink',\n        'icon': 'e-edit-link',\n        'tooltip': 'Edit Link',\n        'command': 'Links',\n        'subCommand': 'EditLink'\n    },\n    'removelink': {\n        'id': 'RemoveLink',\n        'icon': 'e-remove-link',\n        'tooltip': 'Remove Link',\n        'command': 'Links',\n        'subCommand': 'RemoveLink'\n    },\n    'image': {\n        'id': 'Image',\n        'icon': 'e-image',\n        'tooltip': 'Insert Image',\n        'command': 'Images',\n        'subCommand': 'Image'\n    },\n    'audio': {\n        'id': 'Audio',\n        'icon': 'e-audio',\n        'tooltip': 'Insert Audio',\n        'command': 'Audios',\n        'subCommand': 'Audio'\n    },\n    'video': {\n        'id': 'Video',\n        'icon': 'e-video',\n        'tooltip': 'Insert Video',\n        'command': 'Videos',\n        'subCommand': 'Video'\n    },\n    'filemanager': {\n        'id': 'FileManager',\n        'icon': 'e-rte-file-manager',\n        'tooltip': 'File Manager',\n        'command': 'Files',\n        'subCommand': 'File'\n    },\n    'createtable': {\n        'id': 'CreateTable',\n        'icon': 'e-create-table',\n        'tooltip': 'Create Table',\n        'command': 'Table',\n        'subCommand': 'CreateTable'\n    },\n    'removetable': {\n        'id': 'removeTable',\n        'icon': 'e-remove-table',\n        'tooltip': 'Remove Table',\n        'command': 'removeTable',\n        'subCommand': 'removeTable'\n    },\n    'replace': {\n        'id': 'Replace',\n        'icon': 'e-replace',\n        'tooltip': 'Replace',\n        'command': 'Images',\n        'subCommand': 'Replace'\n    },\n    'audioreplace': {\n        'id': 'AudioReplace',\n        'icon': 'e-audio-replace',\n        'tooltip': 'Audio Replace',\n        'command': 'Audios',\n        'subCommand': 'AudioReplace'\n    },\n    'audioremove': {\n        'id': 'AudioRemove',\n        'icon': 'e-audio-remove',\n        'tooltip': 'Audio Remove',\n        'command': 'Audios',\n        'subCommand': 'AudioRemove'\n    },\n    'audiolayoutoption': {\n        'id': 'AudioLayoutOption',\n        'icon': 'e-audio-display',\n        'tooltip': 'Audio LayoutOption',\n        'command': 'Audios',\n        'subCommand': 'AudioLayoutOption'\n    },\n    'videoreplace': {\n        'id': 'VideoReplace',\n        'icon': 'e-video-replace',\n        'tooltip': 'Video Replace',\n        'command': 'Videos',\n        'subCommand': 'VideoReplace'\n    },\n    'videoalign': {\n        'id': 'VideoAlign',\n        'icon': 'e-video-align',\n        'tooltip': 'Video Align',\n        'command': 'Videos',\n        'subCommand': 'VideoAlign'\n    },\n    'videoremove': {\n        'id': 'VideoRemove',\n        'icon': 'e-video-remove',\n        'tooltip': 'Video Remove',\n        'command': 'Videos',\n        'subCommand': 'VideoRemove'\n    },\n    'videolayoutoption': {\n        'id': 'VideoLayoutOption',\n        'icon': 'e-video-display',\n        'tooltip': 'Video LayoutOption',\n        'command': 'Videos',\n        'subCommand': 'VideoLayoutOption'\n    },\n    'videodimension': {\n        'id': 'VideoDimension',\n        'icon': 'e-video-dimension',\n        'tooltip': 'Video Dimension',\n        'command': 'Videos',\n        'subCommand': 'VideoDimension'\n    },\n    'align': {\n        'id': 'Align',\n        'icon': 'e-align',\n        'tooltip': 'Align',\n        'command': 'Images',\n        'subCommand': 'Align'\n    },\n    'caption': {\n        'id': 'Caption',\n        'icon': 'e-caption',\n        'tooltip': 'Image Caption',\n        'command': 'Images',\n        'subCommand': 'Caption'\n    },\n    'remove': {\n        'id': 'Remove',\n        'icon': 'e-remove',\n        'tooltip': 'Remove',\n        'command': 'Images',\n        'subCommand': 'Remove'\n    },\n    'openimagelink': {\n        'id': 'OpenImageLink',\n        'icon': 'e-open-link',\n        'tooltip': 'Open Link',\n        'command': 'Images',\n        'subCommand': 'OpenImageLink'\n    },\n    'editimagelink': {\n        'id': 'EditImageLink',\n        'icon': 'e-edit-link',\n        'tooltip': 'Edit Link',\n        'command': 'Images',\n        'subCommand': 'EditImageLink'\n    },\n    'removeimagelink': {\n        'id': 'RemoveImageLink',\n        'icon': 'e-remove-link',\n        'tooltip': 'Remove Link',\n        'command': 'Images',\n        'subCommand': 'RemoveImageLink'\n    },\n    'insertlink': {\n        'id': 'InsertLink',\n        'icon': 'e-insert-link',\n        'tooltip': 'Insert Link',\n        'command': 'Images',\n        'subCommand': 'InsertLink'\n    },\n    'display': {\n        'id': 'Display',\n        'icon': 'e-display',\n        'tooltip': 'Display',\n        'command': 'Images',\n        'subCommand': 'Display'\n    },\n    'alttext': {\n        'id': 'AltText',\n        'icon': 'e-alt-text',\n        'tooltip': 'Alternative Text',\n        'command': 'Images',\n        'subCommand': 'AltText'\n    },\n    'dimension': {\n        'id': 'Dimension',\n        'icon': 'e-img-dimension',\n        'tooltip': 'Change Size',\n        'command': 'Images',\n        'subCommand': 'Dimension'\n    },\n    'fullscreen': {\n        'id': 'Maximize',\n        'icon': 'e-maximize',\n        'tooltip': 'Maximize',\n        'command': 'View',\n        'subCommand': 'Maximize'\n    },\n    'maximize': {\n        'id': 'Maximize',\n        'icon': 'e-maximize',\n        'tooltip': 'Maximize',\n        'command': 'FullScreen',\n        'subCommand': 'Maximize'\n    },\n    'minimize': {\n        'id': 'Minimize',\n        'icon': 'e-minimize',\n        'tooltip': 'Minimize',\n        'command': 'FullScreen',\n        'subCommand': 'Minimize'\n    },\n    'lowercase': {\n        'id': 'LowerCase',\n        'icon': 'e-lower-case',\n        'tooltip': 'Lower Case',\n        'command': 'Casing',\n        'subCommand': 'LowerCase'\n    },\n    'uppercase': {\n        'id': 'UpperCase',\n        'icon': 'e-upper-case',\n        'tooltip': 'Upper Case',\n        'command': 'Casing',\n        'subCommand': 'UpperCase'\n    },\n    'print': {\n        'id': 'Print',\n        'icon': 'e-print',\n        'tooltip': 'Print',\n        'command': 'Print',\n        'subCommand': 'Print'\n    },\n    'formats': {\n        'id': 'Formats',\n        'icon': 'e-formats',\n        'tooltip': 'Formats',\n        'command': 'Formats',\n        'subCommand': 'Formats'\n    },\n    'sourcecode': {\n        'id': 'SourceCode',\n        'icon': 'e-source-code',\n        'tooltip': 'Source Code',\n        'command': 'SourceCode',\n        'subCommand': 'SourceCode'\n    },\n    'preview': {\n        'id': 'Preview',\n        'icon': 'e-preview',\n        'tooltip': 'Preview',\n        'command': 'Preview',\n        'subCommand': 'Preview'\n    },\n    'viewside': {\n        'id': 'ViewSide',\n        'icon': 'e-view-side',\n        'tooltip': 'ViewSide',\n        'command': 'ViewSide',\n        'subCommand': 'ViewSide'\n    },\n    'insertcode': {\n        'id': 'InsertCode',\n        'icon': 'e-insert-code',\n        'tooltip': 'Insert Code',\n        'command': 'Formats',\n        'subCommand': 'Pre'\n    },\n    'tableheader': {\n        'id': 'TableHeader',\n        'icon': 'e-table-header',\n        'tooltip': 'Table Header',\n        'command': 'Table',\n        'subCommand': 'TableHeader'\n    },\n    'tableremove': {\n        'id': 'TableRemove',\n        'icon': 'e-table-remove',\n        'tooltip': 'Table Remove',\n        'command': 'Table',\n        'subCommand': 'TableRemove'\n    },\n    'tablerows': {\n        'id': 'TableRows',\n        'icon': 'e-table-rows',\n        'tooltip': 'Table Rows',\n        'command': 'Table',\n        'subCommand': 'TableRows'\n    },\n    'tablecolumns': {\n        'id': 'TableColumns',\n        'icon': 'e-table-columns',\n        'tooltip': 'Table Columns',\n        'command': 'Table',\n        'subCommand': 'TableColumns'\n    },\n    'tablecell': {\n        'id': 'TableCell',\n        'icon': 'e-table-cell',\n        'tooltip': 'Table Cell',\n        'command': 'Table',\n        'subCommand': 'TableCell'\n    },\n    'tablecellbackground': {\n        'id': 'TableCellBackground',\n        'icon': 'e-table-cell-background',\n        'tooltip': 'Table Cell Background',\n        'command': 'Table',\n        'subCommand': 'TableCellBackground'\n    },\n    'tablecellhorizontalalign': {\n        'id': 'TableCellHorizontalAlign',\n        'icon': 'e-table-cell-horizontalAlign',\n        'tooltip': 'Table Cell HorizontalAlign',\n        'command': 'Table',\n        'subCommand': 'TableCellHorizontalAlign'\n    },\n    'tablecellverticalalign': {\n        'id': 'TableCellVerticalAlign',\n        'icon': 'e-table-cell-verticalAlign',\n        'tooltip': 'Table Cell VerticalAlign',\n        'command': 'Table',\n        'subCommand': 'TableCellVerticalAlign'\n    },\n    'tableeditproperties': {\n        'id': 'TableEditProperties',\n        'icon': 'e-table-edit-properties',\n        'tooltip': 'Table Edit Properties',\n        'command': 'Table',\n        'subCommand': 'TableEditProperties'\n    },\n    'styles': {\n        'id': 'Styles',\n        'icon': 'e-table-styles',\n        'tooltip': 'Styles',\n        'command': 'Table',\n        'subCommand': 'Styles'\n    },\n    'formatpainter': {\n        'id': 'FormatPainter',\n        'icon': 'e-rte-format-painter',\n        'tooltip': 'Format Painter',\n        'command': 'FormatPainter',\n        'subCommand': 'FormatPainter'\n    },\n    'emojipicker': {\n        'id': 'EmojiPicker',\n        'icon': 'e-emoji',\n        'tooltip': 'Emoji Icon',\n        'command': 'EmojiPicker',\n        'subCommand': 'EmojiPicker'\n    }\n};\nvar alignmentLocale = [\n    { locale: 'alignmentsDropDownLeft', value: 'JustifyLeft' },\n    { locale: 'alignmentsDropDownCenter', value: 'JustifyCenter' },\n    { locale: 'alignmentsDropDownRight', value: 'JustifyRight' },\n    { locale: 'alignmentsDropDownJustify', value: 'JustifyFull' }\n];\nexport var alignmentItems = [\n    { iconCss: 'e-icons e-justify-left', text: 'Align Left', command: 'Alignments', subCommand: 'JustifyLeft' },\n    { iconCss: 'e-icons e-justify-center', text: 'Align Center', command: 'Alignments', subCommand: 'JustifyCenter' },\n    { iconCss: 'e-icons e-justify-right', text: 'Align Right', command: 'Alignments', subCommand: 'JustifyRight' },\n    { iconCss: 'e-icons e-justify-full', text: 'Align Justify', command: 'Alignments', subCommand: 'JustifyFull' }\n];\nexport var imageAlignItems = [\n    { iconCss: 'e-icons e-justify-left', command: 'Images', subCommand: 'JustifyLeft' },\n    { iconCss: 'e-icons e-justify-center', command: 'Images', subCommand: 'JustifyCenter' },\n    { iconCss: 'e-icons e-justify-right', command: 'Images', subCommand: 'JustifyRight' },\n];\nexport var videoAlignItems = [\n    { iconCss: 'e-icons e-justify-left', command: 'Videos', subCommand: 'JustifyLeft' },\n    { iconCss: 'e-icons e-justify-center', command: 'Videos', subCommand: 'JustifyCenter' },\n    { iconCss: 'e-icons e-justify-right', command: 'Videos', subCommand: 'JustifyRight' },\n];\nvar displayLocale = [\n    { locale: 'imageDisplayDropDownInline', value: 'Inline' },\n    { locale: 'imageDisplayDropDownBreak', value: 'Break' }\n];\nvar audioLayoutOptionLocale = [\n    { locale: 'audioLayoutOptionDropDownInline', value: 'Inline' },\n    { locale: 'audioLayoutOptionDropDownBreak', value: 'Break' }\n];\nvar videoLayoutOptionLocale = [\n    { locale: 'videoLayoutOptionDropDownInline', value: 'Inline' },\n    { locale: 'videoLayoutOptionDropDownBreak', value: 'Break' }\n];\nexport var imageDisplayItems = [\n    { text: 'Inline', cssClass: 'e-inline', command: 'Images', subCommand: 'Inline' },\n    { text: 'Break', cssClass: 'e-break', command: 'Images', subCommand: 'Break' },\n];\nexport var audioLayoutOptionItems = [\n    { text: 'Inline', cssClass: 'e-audio-inline', command: 'Audios', subCommand: 'Inline' },\n    { text: 'Break', cssClass: 'e-audio-break', command: 'Audios', subCommand: 'Break' },\n];\nexport var videoLayoutOptionItems = [\n    { text: 'Inline', cssClass: 'e-video-inline', command: 'Videos', subCommand: 'Inline' },\n    { text: 'Break', cssClass: 'e-video-break', command: 'Videos', subCommand: 'Break' },\n];\nexport var tableCellItems = [\n    { iconCss: 'e-icons e-cell-merge', text: 'Merge cells', command: 'Table', subCommand: 'Merge' },\n    { iconCss: 'e-icons e-cell-horizontal-split', text: 'Horizontal split', command: 'Table', subCommand: 'HorizontalSplit' },\n    { iconCss: 'e-icons e-cell-vertical-split', text: 'Vertical split', command: 'Table', subCommand: 'VerticalSplit' },\n];\nvar tableRowLocale = [\n    { locale: 'tableInsertRowDropDownBefore', value: 'InsertRowBefore' },\n    { locale: 'tableInsertRowDropDownAfter', value: 'InsertRowAfter' },\n    { locale: 'tableInsertRowDropDownDelete', value: 'DeleteRow' }\n];\nexport var tableRowsItems = [\n    { iconCss: 'e-icons e-insert-row-before', text: 'Insert row before', command: 'Table', subCommand: 'InsertRowBefore' },\n    { iconCss: 'e-icons e-insert-row-after', text: 'Insert row after', command: 'Table', subCommand: 'InsertRowAfter' },\n    { iconCss: 'e-icons e-delete-row', text: 'Delete row', command: 'Table', subCommand: 'DeleteRow' },\n];\nvar tableColumnLocale = [\n    { locale: 'tableInsertColumnDropDownLeft', value: 'InsertColumnLeft' },\n    { locale: 'tableInsertColumnDropDownRight', value: 'InsertColumnRight' },\n    { locale: 'tableInsertColumnDropDownDelete', value: 'DeleteColumn' }\n];\nexport var tableColumnsItems = [\n    { iconCss: 'e-icons e-insert-column-left', text: 'Insert column left', command: 'Table', subCommand: 'InsertColumnLeft' },\n    { iconCss: 'e-icons e-insert-column-right', text: 'Insert column right', command: 'Table', subCommand: 'InsertColumnRight' },\n    { iconCss: 'e-icons e-delete-column', text: 'Delete column', command: 'Table', subCommand: 'DeleteColumn' },\n];\nvar tableVerticalLocale = [\n    { locale: 'tableVerticalAlignDropDownTop', value: 'AlignTop' },\n    { locale: 'tableVerticalAlignDropDownMiddle', value: 'AlignMiddle' },\n    { locale: 'tableVerticalAlignDropDownBottom', value: 'AlignBottom' }\n];\nexport var TableCellVerticalAlignItems = [\n    { iconCss: 'e-icons e-align-top', text: 'Align Top', command: 'Table', subCommand: 'AlignTop' },\n    { iconCss: 'e-icons e-align-middle', text: 'Align Middle', command: 'Table', subCommand: 'AlignMiddle' },\n    { iconCss: 'e-icons e-align-bottom', text: 'Align Bottom', command: 'Table', subCommand: 'AlignBottom' },\n];\nvar tableStyleLocale = [\n    { locale: 'tableStylesDropDownDashedBorder', value: 'Dashed' },\n    { locale: 'tableStylesDropDownAlternateRows', value: 'Alternate' }\n];\nexport var TableStyleItems = [\n    { text: 'Dashed Borders', cssClass: 'e-dashed-borders', command: 'Table', subCommand: 'Dashed' },\n    { text: 'Alternate Rows', cssClass: 'e-alternate-rows', command: 'Table', subCommand: 'Alternate' }\n];\nexport var predefinedItems = ['Bold', 'Italic', 'Underline', '|', 'Formats', 'Alignments',\n    'OrderedList', 'UnorderedList', '|', 'CreateLink', 'Image', '|', 'SourceCode', 'Undo', 'Redo'];\nexport var fontFamily = [\n    { cssClass: 'e-segoe-ui', text: 'Segoe UI', command: 'Font', subCommand: 'FontName', value: 'Segoe UI' },\n    { cssClass: 'e-arial', text: 'Arial', command: 'Font', subCommand: 'FontName', value: 'Arial,Helvetica,sans-serif' },\n    { cssClass: 'e-georgia', text: 'Georgia', command: 'Font', subCommand: 'FontName', value: 'Georgia,serif' },\n    { cssClass: 'e-impact', text: 'Impact', command: 'Font', subCommand: 'FontName', value: 'Impact,Charcoal,sans-serif' },\n    { cssClass: 'e-tahoma', text: 'Tahoma', command: 'Font', subCommand: 'FontName', value: 'Tahoma,Geneva,sans-serif' },\n    { cssClass: 'e-times-new-roman', text: 'Times New Roman', command: 'Font', subCommand: 'FontName', value: 'Times New Roman,Times,serif' },\n    { cssClass: 'e-verdana', text: 'Verdana', command: 'Font', subCommand: 'FontName', value: 'Verdana,Geneva,sans-serif' }\n];\nexport var fontSize = [\n    { text: '8 pt', value: '8pt' },\n    { text: '10 pt', value: '10pt' },\n    { text: '12 pt', value: '12pt' },\n    { text: '14 pt', value: '14pt' },\n    { text: '18 pt', value: '18pt' },\n    { text: '24 pt', value: '24pt' },\n    { text: '36 pt', value: '36pt' }\n];\nexport var formatItems = [\n    { cssClass: 'e-paragraph', text: 'Paragraph', command: 'Formats', subCommand: 'P', value: 'P' },\n    { cssClass: 'e-code', text: 'Code', command: 'Formats', subCommand: 'Pre', value: 'Pre' },\n    { cssClass: 'e-quote', text: 'Quotation', command: 'Formats', subCommand: 'BlockQuote', value: 'BlockQuote' },\n    { cssClass: 'e-h1', text: 'Heading 1', command: 'Formats', subCommand: 'H1', value: 'H1' },\n    { cssClass: 'e-h2', text: 'Heading 2', command: 'Formats', subCommand: 'H2', value: 'H2' },\n    { cssClass: 'e-h3', text: 'Heading 3', command: 'Formats', subCommand: 'H3', value: 'H3' },\n    { cssClass: 'e-h4', text: 'Heading 4', command: 'Formats', subCommand: 'H4', value: 'H4' }\n];\nexport var fontColor = {\n    'Custom': [\n        '', '#000000', '#e7e6e6', '#44546a', '#4472c4', '#ed7d31', '#a5a5a5', '#ffc000', '#70ad47', '#ff0000',\n        '#f2f2f2', '#808080', '#cfcdcd', '#d5dce4', '#d9e2f3', '#fbe4d5', '#ededed', '#fff2cc', '#e2efd9', '#ffcccc',\n        '#d9d9d9', '#595959', '#aeaaaa', '#acb9ca', '#b4c6e7', '#f7caac', '#dbdbdb', '#ffe599', '#c5e0b3', '#ff8080',\n        '#bfbfbf', '#404040', '#747070', '#8496b0', '#8eaadb', '#f4b083', '#c9c9c9', '#ffd966', '#a8d08d', '#ff3333',\n        '#a6a6a6', '#262626', '#3b3838', '#323e4f', '#2f5496', '#c45911', '#7b7b7b', '#bf8f00', '#538135', '#b30000',\n        '#7f7f7f', '#0d0d0d', '#161616', '#212934', '#1f3763', '#823b0b', '#525252', '#7f5f00', '#375623', '#660000'\n    ]\n};\nexport var backgroundColor = {\n    'Custom': [\n        '', '#000000', '#ffff00', '#00ff00', '#00ffff', '#0000ff', '#ff0000', '#000080', '#800080', '#996633',\n        '#f2f2f2', '#808080', '#ffffcc', '#b3ffb3', '#ccffff', '#ccccff', '#ffcccc', '#ccccff', '#ff80ff', '#f2e6d9',\n        '#d9d9d9', '#595959', '#ffff80', '#80ff80', '#b3ffff', '#8080ff', '#ff8080', '#8080ff', '#ff00ff', '#dfbf9f',\n        '#bfbfbf', '#404040', '#ffff33', '#33ff33', '#33ffff', '#3333ff', '#ff3333', '#0000b3', '#b300b3', '#c68c53',\n        '#a6a6a6', '#262626', '#e6e600', '#00b300', '#009999', '#000099', '#b30000', '#000066', '#660066', '#86592d',\n        '#7f7f7f', '#0d0d0d', '#999900', '#006600', '#006666', '#000066', '#660000', '#00004d', '#4d004d', '#734d26'\n    ]\n};\nexport var numberFormatList = [\n    { text: 'None', command: 'Lists', subCommand: 'NumberFormatList', value: 'none' },\n    { text: 'Number', command: 'Lists', subCommand: 'NumberFormatList', value: 'decimal' },\n    { text: 'Lower Greek', command: 'Lists', subCommand: 'NumberFormatList', value: 'lowerGreek' },\n    { text: 'Lower Roman', command: 'Lists', subCommand: 'NumberFormatList', value: 'lowerRoman' },\n    { text: 'Upper Alpha', command: 'Lists', subCommand: 'NumberFormatList', value: 'upperAlpha' },\n    { text: 'Lower Alpha', command: 'Lists', subCommand: 'NumberFormatList', value: 'lowerAlpha' },\n    { text: 'Upper Roman', command: 'Lists', subCommand: 'NumberFormatList', value: 'upperRoman' },\n];\nexport var bulletFormatList = [\n    { text: 'None', command: 'Lists', subCommand: 'BulletFormatList', value: 'none' },\n    { text: 'Disc', command: 'Lists', subCommand: 'BulletFormatList', value: 'disc' },\n    { text: 'Circle', command: 'Lists', subCommand: 'BulletFormatList', value: 'circle' },\n    { text: 'Square', command: 'Lists', subCommand: 'BulletFormatList', value: 'square' },\n];\nfunction getLocale(self, localeItems, item) {\n    for (var i = 0; localeItems.length > i; i++) {\n        if (localeItems[i].value === item.subCommand) {\n            return self.localeObj.getConstant(localeItems[i].locale);\n        }\n    }\n    return item.text;\n}\nexport function updateDropDownLocale(self) {\n    alignmentItems.forEach(function (item, i) {\n        alignmentItems[i].text = getLocale(self, alignmentLocale, alignmentItems[i]);\n    });\n    imageDisplayItems.forEach(function (item, i) {\n        imageDisplayItems[i].text = getLocale(self, displayLocale, imageDisplayItems[i]);\n    });\n    audioLayoutOptionItems.forEach(function (item, i) {\n        audioLayoutOptionItems[i].text = getLocale(self, audioLayoutOptionLocale, audioLayoutOptionItems[i]);\n    });\n    videoLayoutOptionItems.forEach(function (item, i) {\n        videoLayoutOptionItems[i].text = getLocale(self, videoLayoutOptionLocale, videoLayoutOptionItems[i]);\n    });\n    tableRowsItems.forEach(function (item, i) {\n        tableRowsItems[i].text = getLocale(self, tableRowLocale, tableRowsItems[i]);\n    });\n    tableColumnsItems.forEach(function (item, i) {\n        tableColumnsItems[i].text = getLocale(self, tableColumnLocale, tableColumnsItems[i]);\n    });\n    TableCellVerticalAlignItems.forEach(function (item, i) {\n        TableCellVerticalAlignItems[i].text = getLocale(self, tableVerticalLocale, TableCellVerticalAlignItems[i]);\n    });\n    TableStyleItems.forEach(function (item, i) {\n        TableStyleItems[i].text = getLocale(self, tableStyleLocale, TableStyleItems[i]);\n    });\n}\nexport var windowKeys = {\n    'Insert Link': 'Ctrl+K',\n    'Insert Image': 'Ctrl+Shift+I',\n    'Create Table': 'Ctrl+Shift+E',\n    'Undo': 'Ctrl+Z',\n    'Redo': 'Ctrl+Y',\n    'Copy': 'Ctrl+C',\n    'Cut': 'Ctrl+X',\n    'Paste': 'Ctrl+V',\n    'Bold': 'Ctrl+B',\n    'Italic': 'Ctrl+I',\n    'Underline': 'Ctrl+U',\n    'Strikethrough': 'Ctrl+Shift+S',\n    'Upper Case': 'Ctrl+Shift+U',\n    'Lower Case': 'Ctrl+Shift+L',\n    'Superscript': 'Ctrl+Shift+=',\n    'Subscript': 'Ctrl+=',\n    'Code View': 'Ctrl+Shift+H',\n    'Maximize': 'Ctrl+Shift+F',\n    'Minimize': 'Esc',\n    'Clear Format': 'Ctrl+Shift+R',\n    'Numbered List': 'Ctrl+Shift+O',\n    'Bulleted List': 'Ctrl+Alt+O',\n    'Number Format List': 'Ctrl+Shift+O',\n    'Bullet Format List': 'Ctrl+Alt+O',\n    'Insert Audio': 'Ctrl+Shift+A',\n    'Insert Video': 'Ctrl+Shift+V',\n    'Increase Indent': 'Ctrl+]',\n    'Decrease Indent': 'Ctrl+[',\n    'Decrease Fontsize': 'Ctrl+Shift+<',\n    'Increase Fontsize': 'Ctrl+Shift+>',\n    'Justify Center': 'Ctrl+E',\n    'Justify Full': 'Ctrl+J',\n    'Justify Left': 'Ctrl+L',\n    'Justify Right': 'Ctrl+R',\n    'Format Painter': 'Alt+Shift+C, Alt+Shift+V'\n};\nexport var defaultEmojiIcons = [{\n        name: 'Smilies & People', code: '1F600', iconCss: 'e-emoji', icons: [{ code: '1F600', desc: 'Grinning face' },\n            { code: '1F603', desc: 'Grinning face with big eyes' },\n            { code: '1F604', desc: 'Grinning face with smiling eyes' },\n            { code: '1F606', desc: 'Grinning squinting face' },\n            { code: '1F605', desc: 'Grinning face with sweat' },\n            { code: '1F602', desc: 'Face with tears of joy' },\n            { code: '1F923', desc: 'Rolling on the floor laughing' },\n            { code: '1F60A', desc: 'Smiling face with smiling eyes' },\n            { code: '1F607', desc: 'Smiling face with halo' },\n            { code: '1F642', desc: 'Slightly smiling face' },\n            { code: '1F643', desc: 'Upside-down face' },\n            { code: '1F60D', desc: 'Smiling face with heart-eyes' },\n            { code: '1F618', desc: 'Face blowing a kiss' },\n            { code: '1F61B', desc: 'Face with tongue' },\n            { code: '1F61C', desc: 'Winking face with tongue' },\n            { code: '1F604', desc: 'Grinning face with smiling eyes' },\n            { code: '1F469', desc: 'Woman' },\n            { code: '1F468', desc: 'Man' },\n            { code: '1F467', desc: 'Girl' },\n            { code: '1F466', desc: 'Boy' },\n            { code: '1F476', desc: 'Baby' },\n            { code: '1F475', desc: 'Old woman' },\n            { code: '1F474', desc: 'Old man' },\n            { code: '1F46E', desc: 'Police officer' },\n            { code: '1F477', desc: 'Construction worker' },\n            { code: '1F482', desc: 'Guard' },\n            { code: '1F575', desc: 'Detective' },\n            { code: '1F9D1', desc: 'Cook' }]\n    }, {\n        name: 'Animals & Nature', code: '1F435', iconCss: 'e-animals', icons: [{ code: '1F436', desc: 'Dog face' },\n            { code: '1F431', desc: 'Cat face' },\n            { code: '1F42D', desc: 'Mouse face' },\n            { code: '1F439', desc: 'Hamster face' },\n            { code: '1F430', desc: 'Rabbit face' },\n            { code: '1F98A', desc: 'Fox face' },\n            { code: '1F43B', desc: 'Bear face' },\n            { code: '1F43C', desc: 'Panda face' },\n            { code: '1F428', desc: 'Koala' },\n            { code: '1F42F', desc: 'Tiger face' },\n            { code: '1F981', desc: 'Lion face' },\n            { code: '1F42E', desc: 'Cow face' },\n            { code: '1F437', desc: 'Pig face' },\n            { code: '1F43D', desc: 'Pig nose' },\n            { code: '1F438', desc: 'Frog face' },\n            { code: '1F435', desc: 'Monkey face' },\n            { code: '1F649', desc: 'Hear-no-evil monkey' },\n            { code: '1F64A', desc: 'Speak-no-evil monkey' },\n            { code: '1F412', desc: 'Monkey' },\n            { code: '1F414', desc: 'Chicken' },\n            { code: '1F427', desc: 'Penguin' },\n            { code: '1F426', desc: 'Bird' },\n            { code: '1F424', desc: 'Baby chick' },\n            { code: '1F986', desc: 'Duck' },\n            { code: '1F985', desc: 'Eagle' }]\n    }, {\n        name: 'Food & Drink', code: '1F347', iconCss: 'e-food-and-drinks', icons: [{ code: '1F34E', desc: 'Red apple' },\n            { code: '1F34C', desc: 'Banana' },\n            { code: '1F347', desc: 'Grapes' },\n            { code: '1F353', desc: 'Strawberry' },\n            { code: '1F35E', desc: 'Bread' },\n            { code: '1F950', desc: 'Croissant' },\n            { code: '1F955', desc: 'Carrot' },\n            { code: '1F354', desc: 'Hamburger' },\n            { code: '1F355', desc: 'Pizza' },\n            { code: '1F32D', desc: 'Hot dog' },\n            { code: '1F35F', desc: 'French fries' },\n            { code: '1F37F', desc: 'Popcorn' },\n            { code: '1F366', desc: 'Soft ice cream' },\n            { code: '1F367', desc: 'Shaved ice' },\n            { code: '1F36A', desc: 'Cookie' },\n            { code: '1F382', desc: 'Birthday cake' },\n            { code: '1F370', desc: 'Shortcake' },\n            { code: '1F36B', desc: 'Chocolate bar' },\n            { code: '1F369', desc: 'Donut' },\n            { code: '1F36E', desc: 'Custard' },\n            { code: '1F36D', desc: 'Lollipop' },\n            { code: '1F36C', desc: 'Candy' },\n            { code: '1F377', desc: 'Wine glass' },\n            { code: '1F37A', desc: 'Beer mug' },\n            { code: '1F37E', desc: 'Bottle with popping cork' }]\n    }, {\n        name: 'Activities', code: '1F383', iconCss: 'e-activities', icons: [{ code: '26BD', desc: 'Soccer ball' },\n            { code: '1F3C0', desc: 'Basketball' },\n            { code: '1F3C8', desc: 'American football' },\n            { code: '26BE', desc: 'Baseball' },\n            { code: '1F3BE', desc: 'Tennis' },\n            { code: '1F3D0', desc: 'Volleyball' },\n            { code: '1F3C9', desc: 'Rugby football' },\n            { code: '1F3B1', desc: 'Pool 8 ball' },\n            { code: '1F3D3', desc: 'Ping pong' },\n            { code: '1F3F8', desc: 'Badminton' },\n            { code: '1F94A', desc: 'Boxing glove' },\n            { code: '1F3CA', desc: 'Swimmer' },\n            { code: '1F3CB', desc: 'Weightlifter' },\n            { code: '1F6B4', desc: 'Bicyclist' },\n            { code: '1F6F9', desc: 'Skateboard' },\n            { code: '1F3AE', desc: 'Video game' },\n            { code: '1F579', desc: 'Joystick' },\n            { code: '1F3CF', desc: 'Cricket' },\n            { code: '1F3C7', desc: 'Horse racing' },\n            { code: '1F3AF', desc: 'Direct hit' },\n            { code: '1F3D1', desc: 'Field hockey' },\n            { code: '1F3B0', desc: 'Slot machine' },\n            { code: '1F3B3', desc: 'Bowling' },\n            { code: '1F3B2', desc: 'Game die' },\n            { code: '265F', desc: 'Chess pawn' }]\n    }, {\n        name: 'Travel & Places', code: '1F30D', iconCss: 'e-travel-and-places', icons: [{ code: '2708', desc: 'Airplane' },\n            { code: '1F697', desc: 'Automobile' },\n            { code: '1F695', desc: 'Taxi' },\n            { code: '1F6B2', desc: 'Bicycle' },\n            { code: '1F68C', desc: 'Bus' },\n            { code: '1F682', desc: 'Locomotive' },\n            { code: '1F6F3', desc: 'Passenger ship' },\n            { code: '1F680', desc: 'Rocket' },\n            { code: '1F681', desc: 'Helicopter' },\n            { code: '1F6A2', desc: 'Ship' },\n            { code: '1F3DF', desc: 'Stadium' },\n            { code: '1F54C', desc: 'Mosque' },\n            { code: '26EA', desc: 'Church' },\n            { code: '1F6D5', desc: 'Hindu Temple' },\n            { code: '1F3D4', desc: 'Snow-capped mountain' },\n            { code: '1F3EB', desc: 'School' },\n            { code: '1F30B', desc: 'Volcano' },\n            { code: '1F3D6', desc: 'Beach with umbrella' },\n            { code: '1F3DD', desc: 'Desert island' },\n            { code: '1F3DE', desc: 'National park' },\n            { code: '1F3F0', desc: 'Castle' },\n            { code: '1F5FC', desc: 'Tokyo tower' },\n            { code: '1F5FD', desc: 'Statue of liberty' },\n            { code: '26E9', desc: 'Shinto shrine' },\n            { code: '1F3EF', desc: 'Japanese castle' },\n            { code: '1F3A2', desc: 'Roller coaster' }]\n    }, {\n        name: 'Objects', code: '1F507', iconCss: 'e-objects', icons: [{ code: '1F4A1', desc: 'Light bulb' },\n            { code: '1F526', desc: 'Flashlight' },\n            { code: '1F4BB', desc: 'Laptop computer' },\n            { code: '1F5A5', desc: 'Desktop computer' },\n            { code: '1F5A8', desc: 'Printer' },\n            { code: '1F4F7', desc: 'Camera' },\n            { code: '1F4F8', desc: 'Camera with flash' },\n            { code: '1F4FD', desc: 'Film projector' },\n            { code: '1F3A5', desc: 'Movie camera' },\n            { code: '1F4FA', desc: 'Television' },\n            { code: '1F4FB', desc: 'Radio' },\n            { code: '1F50B', desc: 'Battery' },\n            { code: '231A', desc: 'Watch' },\n            { code: '1F4F1', desc: 'Mobile phone' },\n            { code: '260E', desc: 'Telephone' },\n            { code: '1F4BE', desc: 'Floppy disk' },\n            { code: '1F4BF', desc: 'Optical disk' },\n            { code: '1F4C0', desc: 'Digital versatile disc' },\n            { code: '1F4BD', desc: 'Computer disk' },\n            { code: '1F3A7', desc: 'Headphone' },\n            { code: '1F3A4', desc: 'Microphone' },\n            { code: '1F3B6', desc: 'Multiple musical notes' },\n            { code: '1F4DA', desc: 'Books' }]\n    }, {\n        name: 'Symbols', code: '1F3E7', iconCss: 'e-symbols', icons: [{ code: '274C', desc: 'Cross mark' },\n            { code: '2714', desc: 'Check mark' },\n            { code: '26A0', desc: 'Warning sign' },\n            { code: '1F6AB', desc: 'Prohibited' },\n            { code: '2139', desc: 'Information' },\n            { code: '267B', desc: 'Recycling symbol' },\n            { code: '1F6AD', desc: 'No smoking' },\n            { code: '1F4F5', desc: 'No mobile phones' },\n            { code: '1F6AF', desc: 'No littering' },\n            { code: '1F6B3', desc: 'No bicycles' },\n            { code: '1F6B7', desc: 'No pedestrians' },\n            { code: '2795', desc: 'Plus' },\n            { code: '2796', desc: 'Minus' },\n            { code: '2797', desc: 'Divide' },\n            { code: '2716', desc: 'Multiplication' },\n            { code: '1F4B2', desc: 'Dollar banknote' },\n            { code: '1F4AC', desc: 'Speech balloon' },\n            { code: '2755', desc: 'White exclamation mark' },\n            { code: '2754', desc: 'White question mark' },\n            { code: '2764', desc: 'Red heart' }]\n    }];\n","/**\n * Defines util methods used by Rich Text Editor.\n */\nimport { isNullOrUndefined as isNOU, addClass, removeClass, selectAll, createElement } from '@syncfusion/ej2-base';\nimport { Browser, detach, SanitizeHtmlHelper, extend } from '@syncfusion/ej2-base';\nimport * as classes from '../base/classes';\nimport * as CONSTANT from '../base/constant';\nimport * as model from '../models/items';\nimport { toolsLocale, fontNameLocale, formatsLocale, numberFormatListLocale, bulletFormatListLocale } from '../models/default-locale';\nvar undoRedoItems = ['Undo', 'Redo'];\nvar inlineNode = ['a', 'abbr', 'acronym', 'audio', 'b', 'bdi', 'bdo', 'big', 'br', 'button',\n    'canvas', 'cite', 'code', 'data', 'datalist', 'del', 'dfn', 'em', 'embed', 'font', 'i', 'iframe', 'img', 'input',\n    'ins', 'kbd', 'label', 'map', 'mark', 'meter', 'noscript', 'object', 'output', 'picture', 'progress',\n    'q', 'ruby', 's', 'samp', 'script', 'select', 'slot', 'small', 'span', 'strong', 'strike', 'sub', 'sup', 'svg',\n    'template', 'textarea', 'time', 'u', 'tt', 'var', 'video', 'wbr'];\n/**\n * @param {string} val - specifies the string value\n * @param {string} items - specifies the value\n * @returns {number} - returns the number value\n * @hidden\n */\nexport function getIndex(val, items) {\n    var index = -1;\n    items.some(function (item, i) {\n        if (typeof item === 'string' && val === item.toLocaleLowerCase()) {\n            index = i;\n            return true;\n        }\n        return false;\n    });\n    return index;\n}\n/**\n * @param {Element} element - specifies the element\n * @param {string} className - specifies the string value\n * @returns {boolean} - returns the boolean value\n * @hidden\n */\nexport function hasClass(element, className) {\n    var hasClass = false;\n    if (element.classList.contains(className)) {\n        hasClass = true;\n    }\n    return hasClass;\n}\n/**\n * @param {IDropDownItemModel} items - specifies the item model\n * @param {string} value - specifies the string value\n * @param {string} type - specifies the string value\n * @param {string} returnType - specifies the return type\n * @returns {string} - returns the string value\n * @hidden\n */\nexport function getDropDownValue(items, value, type, returnType) {\n    var data;\n    var result;\n    for (var k = 0; k < items.length; k++) {\n        if (type === 'value' && items[k].value.toLocaleLowerCase() === value.toLocaleLowerCase()) {\n            data = items[k];\n            break;\n        }\n        else if (type === 'text' && items[k].text.toLocaleLowerCase() === value.toLocaleLowerCase()) {\n            data = items[k];\n            break;\n        }\n        else if (type === 'subCommand' && items[k].subCommand.toLocaleLowerCase() === value.toLocaleLowerCase()) {\n            data = items[k];\n            break;\n        }\n    }\n    if (!isNOU(data)) {\n        switch (returnType) {\n            case 'text':\n                result = data.text;\n                break;\n            case 'value':\n                result = data.value;\n                break;\n            case 'iconCss':\n                result = data.iconCss;\n                break;\n        }\n    }\n    return result;\n}\n/**\n * @returns {boolean} - returns the boolean value\n * @hidden\n */\nexport function isIDevice() {\n    var result = false;\n    if (Browser.isDevice && Browser.isIos) {\n        result = true;\n    }\n    return result;\n}\n/**\n * @param {string} value - specifies the value\n * @returns {string} - returns the string value\n * @hidden\n */\nexport function getFormattedFontSize(value) {\n    if (isNOU(value)) {\n        return '';\n    }\n    return value;\n}\n/**\n * @param {MouseEvent} e - specifies the mouse event\n * @param {HTMLElement} parentElement - specifies the parent element\n * @param {boolean} isIFrame - specifies the boolean value\n * @returns {number} - returns the number\n * @hidden\n */\nexport function pageYOffset(e, parentElement, isIFrame) {\n    var y = 0;\n    if (isIFrame) {\n        y = window.pageYOffset + parentElement.getBoundingClientRect().top + e.clientY;\n    }\n    else {\n        y = e.pageY;\n    }\n    return y;\n}\n/**\n * @param {string} item - specifies the string\n * @param {ServiceLocator} serviceLocator - specifies the service locator\n * @returns {string} - returns the string\n * @hidden\n */\nexport function getTooltipText(item, serviceLocator) {\n    var i10n = serviceLocator.getService('rteLocale');\n    var itemLocale = toolsLocale[\"\" + item];\n    var tooltipText = i10n.getConstant(itemLocale);\n    return tooltipText;\n}\n/**\n * @param {ISetToolbarStatusArgs} e - specifies the e element\n * @param {boolean} isPopToolbar - specifies the boolean value\n * @param {IRichTextEditor} self - specifies the parent element\n * @returns {void}\n * @hidden\n */\nexport function setToolbarStatus(e, isPopToolbar, self) {\n    updateDropDownFontFormatLocale(self);\n    var dropDown = e.dropDownModule;\n    var data = e.args;\n    var keys = Object.keys(e.args);\n    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n        var key = keys_1[_i];\n        for (var j = 0; j < e.tbItems.length; j++) {\n            var item = e.tbItems[j].subCommand;\n            var itemStr = item && item.toLocaleLowerCase();\n            if (item && (itemStr === key) || (item === 'UL' && key === 'unorderedlist') || (item === 'OL' && key === 'orderedlist') ||\n                (itemStr === 'pre' && key === 'insertcode') || (item === 'NumberFormatList' && key === 'numberFormatList' ||\n                item === 'BulletFormatList' && key === 'bulletFormatList')) {\n                if (typeof data[\"\" + key] === 'boolean') {\n                    if (data[\"\" + key] === true) {\n                        addClass([e.tbElements[j]], [classes.CLS_ACTIVE]);\n                    }\n                    else {\n                        removeClass([e.tbElements[j]], [classes.CLS_ACTIVE]);\n                    }\n                }\n                else if ((typeof data[\"\" + key] === 'string' || data[\"\" + key] === null) &&\n                    getIndex(key, e.parent.toolbarSettings.items) >= -1) {\n                    var value = ((data[\"\" + key]) ? data[\"\" + key] : '');\n                    var result = '';\n                    switch (key) {\n                        case 'formats': {\n                            if (isNOU(dropDown.formatDropDown) || isPopToolbar ||\n                                (!isNOU(dropDown.formatDropDown) && dropDown.formatDropDown.isDestroyed)) {\n                                break;\n                            }\n                            var formatItems = e.parent.format.types;\n                            var formatContent = isNOU(e.parent.format.default) ? formatItems[0].text :\n                                e.parent.format.default;\n                            result = value === 'empty' ? '' : getDropDownValue(formatItems, value, 'subCommand', 'text');\n                            dropDown.formatDropDown.content = ('<span style=\"display: inline-flex;' +\n                                'width:' + e.parent.format.width + '\" >' +\n                                '<span class=\"e-rte-dropdown-btn-text' + (isNOU(e.parent.cssClass) ? '' : ' ' + e.parent.cssClass) + '\">'\n                                + (isNOU(result) ? formatContent : result) +\n                                '</span></span>');\n                            dropDown.formatDropDown.dataBind();\n                            break;\n                        }\n                        case 'alignments': {\n                            if (isNOU(dropDown.alignDropDown) ||\n                                (!isNOU(dropDown.alignDropDown) && dropDown.alignDropDown.isDestroyed)) {\n                                break;\n                            }\n                            var alignItems = model.alignmentItems;\n                            result = getDropDownValue(alignItems, value, 'subCommand', 'iconCss');\n                            dropDown.alignDropDown.iconCss = isNOU(result) ? 'e-icons e-justify-left' : result;\n                            dropDown.alignDropDown.dataBind();\n                            break;\n                        }\n                        case 'fontname': {\n                            if (isNOU(dropDown.fontNameDropDown) || isPopToolbar ||\n                                (!isNOU(dropDown.fontNameDropDown) && dropDown.fontNameDropDown.isDestroyed)) {\n                                break;\n                            }\n                            var fontNameItems = e.parent.fontFamily.items;\n                            result = value === 'empty' ? '' : getDropDownValue(fontNameItems, value, 'value', 'text');\n                            var fontNameContent = isNOU(e.parent.fontFamily.default) ? fontNameItems[0].text :\n                                e.parent.fontFamily.default;\n                            var name_1 = (isNOU(result) ? fontNameContent : result);\n                            dropDown.fontNameDropDown.content = ('<span style=\"display: inline-flex;' +\n                                'width:' + e.parent.fontFamily.width + '\" >' +\n                                '<span class=\"e-rte-dropdown-btn-text' + (isNOU(e.parent.cssClass) ? '' : ' ' + e.parent.cssClass) + '\">'\n                                + name_1 + '</span></span>');\n                            dropDown.fontNameDropDown.dataBind();\n                            break;\n                        }\n                        case 'fontsize': {\n                            if (isNOU(dropDown.fontSizeDropDown) ||\n                                (!isNOU(dropDown.fontSizeDropDown) && dropDown.fontSizeDropDown.isDestroyed)) {\n                                break;\n                            }\n                            var fontSizeItems = e.parent.fontSize.items;\n                            var fontSizeContent = isNOU(e.parent.fontSize.default) ? fontSizeItems[1].text :\n                                e.parent.fontSize.default;\n                            result = value === 'empty' ? '' : getDropDownValue(fontSizeItems, (value === '' ? fontSizeContent.replace(/\\s/g, '') : value), 'value', 'text');\n                            dropDown.fontSizeDropDown.content = ('<span style=\"display: inline-flex;' +\n                                'width:' + e.parent.fontSize.width + '\" >' +\n                                '<span class=\"e-rte-dropdown-btn-text' + (isNOU(e.parent.cssClass) ? '' : ' ' + e.parent.cssClass) + '\">'\n                                + getFormattedFontSize(result) + '</span></span>');\n                            dropDown.fontSizeDropDown.dataBind();\n                            break;\n                        }\n                        case 'bulletFormatList':\n                        case 'numberFormatList': {\n                            removeClass([e.tbElements[j]], [classes.CLS_ACTIVE]);\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n/**\n * @param {string} items - specifies the string value\n * @returns {string[]} - returns the array value\n * @hidden\n */\nexport function getCollection(items) {\n    if (typeof items === 'object') {\n        return items;\n    }\n    else {\n        return [items];\n    }\n}\n/**\n * @param {string[]} items - specifies the array of string value\n * @param {IToolbarItemModel} toolbarItems - specifies the tool bar model\n * @returns {number} - returns the number\n * @hidden\n */\nexport function getTBarItemsIndex(items, toolbarItems) {\n    var itemsIndex = [];\n    for (var i = 0; i < items.length; i++) {\n        for (var j = 0; j < toolbarItems.length; j++) {\n            if (toolbarItems[j].type === 'Separator') {\n                continue;\n            }\n            else {\n                if (items[i] === 'OrderedList' && toolbarItems[j].subCommand === 'OL') {\n                    itemsIndex.push(j);\n                    break;\n                }\n                else if (items[i] === 'UnorderedList' && toolbarItems[j].subCommand === 'UL') {\n                    itemsIndex.push(j);\n                    break;\n                }\n                else if (items[i] === 'InsertCode' && toolbarItems[j].subCommand === 'Pre') {\n                    itemsIndex.push(j);\n                    break;\n                }\n                else if (items[i] === 'FileManager' && toolbarItems[j].subCommand === 'File') {\n                    itemsIndex.push(j);\n                    break;\n                }\n                else if (typeof (items[i]) === 'object' && items[i].command === 'Custom') {\n                    itemsIndex.push(i);\n                    break;\n                }\n                else if (items[i] === toolbarItems[j].subCommand) {\n                    itemsIndex.push(j);\n                    break;\n                }\n            }\n        }\n    }\n    return itemsIndex;\n}\n/**\n * @param {BaseToolbar} baseToolbar - specifies the base\n * @param {boolean} undoRedoStatus - specifies the boolean value\n * @returns {void}\n * @hidden\n */\nexport function updateUndoRedoStatus(baseToolbar, undoRedoStatus) {\n    var i = 0;\n    var trgItems = getTBarItemsIndex(getCollection(undoRedoItems), baseToolbar.toolbarObj.items);\n    var tbItems = selectAll('.' + classes.CLS_TB_ITEM, baseToolbar.toolbarObj.element);\n    var keys = Object.keys(undoRedoStatus);\n    for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {\n        var key = keys_2[_i];\n        var target = tbItems[trgItems[i]];\n        if (target) {\n            baseToolbar.toolbarObj.enableItems(target, undoRedoStatus[\"\" + key]);\n        }\n        i++;\n    }\n}\n/**\n * To dispatch the event manually\n *\n * @param {Element} element - specifies the element.\n * @param {string} type - specifies the string type.\n * @returns {void}\n * @hidden\n * @deprecated\n */\nexport function dispatchEvent(element, type) {\n    var evt = document.createEvent('HTMLEvents');\n    evt.initEvent(type, false, true);\n    element.dispatchEvent(evt);\n}\n/**\n * To parse the HTML\n *\n * @param {string} value - specifies the string value\n * @returns {DocumentFragment} - returns the document\n * @hidden\n */\nexport function parseHtml(value) {\n    var tempNode = createElement('template');\n    tempNode.innerHTML = value;\n    if (tempNode.content instanceof DocumentFragment) {\n        return tempNode.content;\n    }\n    else {\n        return document.createRange().createContextualFragment(value);\n    }\n}\n/**\n * @param {Document} docElement - specifies the document element\n * @param {Element} node - specifies the node\n * @returns {Node[]} - returns the node array\n * @hidden\n */\nexport function getTextNodesUnder(docElement, node) {\n    var nodes = [];\n    for (node = node.firstChild; node; node = node.nextSibling) {\n        if (node.nodeType === 3) {\n            nodes.push(node);\n        }\n        else {\n            nodes = nodes.concat(getTextNodesUnder(docElement, node));\n        }\n    }\n    return nodes;\n}\n/**\n * @param {IToolsItemConfigs} obj - specifies the configuration\n * @returns {void}\n * @hidden\n */\nexport function toObjectLowerCase(obj) {\n    var convertedValue = {};\n    var keys = Object.keys(obj);\n    for (var i = 0; i < Object.keys(obj).length; i++) {\n        convertedValue[keys[i].toLocaleLowerCase()] = obj[keys[i]];\n    }\n    return convertedValue;\n}\n/**\n * @param {string} value - specifies the string value\n * @param {IRichTextEditor} rteObj - specifies the rte object\n * @returns {string} - returns the string\n * @hidden\n */\nexport function getEditValue(value, rteObj) {\n    var val;\n    if (value !== null && value !== '') {\n        val = rteObj.enableHtmlEncode ? updateTextNode(decode(value), rteObj) : updateTextNode(value, rteObj);\n        rteObj.setProperties({ value: val }, true);\n    }\n    else {\n        if (rteObj.enterKey === 'DIV') {\n            val = rteObj.enableHtmlEncode ? '&lt;div&gt;&lt;br/&gt;&lt;/div&gt;' : '<div><br/></div>';\n        }\n        else if (rteObj.enterKey === 'BR') {\n            val = rteObj.enableHtmlEncode ? '&lt;br/&gt;' : '<br/>';\n        }\n        else {\n            val = rteObj.enableHtmlEncode ? '&lt;p&gt;&lt;br/&gt;&lt;/p&gt;' : '<p><br/></p>';\n        }\n    }\n    return val;\n}\n/**\n * @param {string} value - specifies the value\n * @param {IRichTextEditor} rteObj - specifies the rich text editor instance.\n * @returns {string} - returns the string\n * @hidden\n */\nexport function updateTextNode(value, rteObj) {\n    var tempNode = document.createElement('div');\n    var resultElm = document.createElement('div');\n    var childNodes = tempNode.childNodes;\n    tempNode.innerHTML = value;\n    tempNode.setAttribute('class', 'tempDiv');\n    if (childNodes.length > 0) {\n        var isPreviousInlineElem = void 0;\n        var previousParent = void 0;\n        var insertElem = void 0;\n        while (tempNode.firstChild) {\n            var emptyBlockElem = tempNode.querySelectorAll(CONSTANT.blockEmptyNodes);\n            for (var i = 0; i < emptyBlockElem.length; i++) {\n                emptyBlockElem[i].innerHTML = '<br>';\n            }\n            var emptyInlineElem = tempNode.querySelectorAll(CONSTANT.inlineEmptyNodes);\n            for (var i = 0; i < emptyInlineElem.length; i++) {\n                emptyInlineElem[i].innerHTML = '&ZeroWidthSpace;';\n            }\n            if (rteObj.enterKey !== 'BR' && ((tempNode.firstChild.nodeName === '#text' &&\n                (tempNode.firstChild.textContent.indexOf('\\n') < 0 || tempNode.firstChild.textContent.trim() !== '')) ||\n                inlineNode.indexOf(tempNode.firstChild.nodeName.toLocaleLowerCase()) >= 0)) {\n                if (!isPreviousInlineElem) {\n                    if (rteObj.enterKey === 'DIV') {\n                        insertElem = createElement('div');\n                    }\n                    else {\n                        insertElem = createElement('p');\n                    }\n                    resultElm.appendChild(insertElem);\n                    insertElem.appendChild(tempNode.firstChild);\n                }\n                else {\n                    previousParent.appendChild(tempNode.firstChild);\n                }\n                previousParent = insertElem;\n                isPreviousInlineElem = true;\n            }\n            else if (tempNode.firstChild.nodeName === '#text' && (tempNode.firstChild.textContent === '\\n' ||\n                (tempNode.firstChild.textContent.indexOf('\\n') >= 0 && tempNode.firstChild.textContent.trim() === ''))) {\n                detach(tempNode.firstChild);\n            }\n            else {\n                resultElm.appendChild(tempNode.firstChild);\n                isPreviousInlineElem = false;\n            }\n        }\n        var imageElm = resultElm.querySelectorAll('img');\n        for (var i = 0; i < imageElm.length; i++) {\n            if (!imageElm[i].classList.contains(classes.CLS_RTE_IMAGE)) {\n                imageElm[i].classList.add(classes.CLS_RTE_IMAGE);\n            }\n            if (!(imageElm[i].classList.contains(classes.CLS_IMGINLINE) ||\n                imageElm[i].classList.contains(classes.CLS_IMGBREAK))) {\n                imageElm[i].classList.add(classes.CLS_IMGINLINE);\n            }\n        }\n    }\n    return resultElm.innerHTML;\n}\n/**\n * @param {IRichTextEditor} rteObj - specifies the rte object\n * @returns {string} - returns the value based on enter configuration.\n * @hidden\n */\nexport function getDefaultValue(rteObj) {\n    var currentVal;\n    if (rteObj.enterKey === 'DIV') {\n        currentVal = rteObj.enableHtmlEncode ? '&lt;div&gt;&lt;br/&gt;&lt;/div&gt;' : '<div><br/></div>';\n    }\n    else if (rteObj.enterKey === 'BR') {\n        currentVal = rteObj.enableHtmlEncode ? '&lt;br/&gt;' : '<br/>';\n    }\n    else {\n        currentVal = rteObj.enableHtmlEncode ? '&lt;p&gt;&lt;br/&gt;&lt;/p&gt;' : '<p><br/></p>';\n    }\n    return currentVal;\n}\n/**\n * @param {string} value - specifies the value\n * @returns {boolean} - returns the boolean value\n * @hidden\n */\nexport function isEditableValueEmpty(value) {\n    return (value === '<p><br></p>' || value === '&lt;p&gt;&lt;br&gt;&lt;/p&gt;'\n        || value === '<div><br></div>' || value === '&lt;div&gt;&lt;br&gt;&lt;/div&gt;'\n        || value === '<br>' || value === '&lt;br&gt;'\n        || value === '') ? true : false;\n}\n/**\n * @param {string} value - specifies the string value\n * @returns {string} - returns the string\n * @hidden\n */\nexport function decode(value) {\n    return value.replace(/&amp;/g, '&').replace(/&amp;lt;/g, '<')\n        .replace(/&lt;/g, '<').replace(/&amp;gt;/g, '>')\n        .replace(/&gt;/g, '>').replace(/&nbsp;/g, ' ')\n        .replace(/&amp;nbsp;/g, ' ').replace(/&quot;/g, '');\n}\n/**\n * @param {string} value - specifies the string value\n * @param {IRichTextEditor} parent - specifies the rte\n * @returns {string} - returns the string value\n * @hidden\n */\nexport function sanitizeHelper(value, parent) {\n    if (parent.enableHtmlSanitizer) {\n        var item = SanitizeHtmlHelper.beforeSanitize();\n        if (item.selectors.tags[2] && item.selectors.tags[2].indexOf('iframe') > -1) {\n            item.selectors.tags[2] = 'iframe:not(.e-rte-embed-url)';\n        }\n        var beforeEvent = {\n            cancel: false,\n            helper: null\n        };\n        extend(item, item, beforeEvent);\n        parent.trigger('beforeSanitizeHtml', item);\n        if (item.cancel && !isNOU(item.helper)) {\n            value = item.helper(value);\n        }\n        else if (!item.cancel) {\n            value = SanitizeHtmlHelper.serializeValue(item, value);\n        }\n    }\n    return value;\n}\n/**\n * @param {string} dataUrl - specifies the string value\n * @returns {BaseToolbar} - returns the value\n * @hidden\n */\n//Converting the base64 url to blob\nexport function convertToBlob(dataUrl) {\n    var arr = dataUrl.split(',');\n    var mime = arr[0].match(/:(.*?);/)[1];\n    var bstr = atob(arr[1]);\n    var n = bstr.length;\n    var u8arr = new Uint8Array(n);\n    while (n--) {\n        u8arr[n] = bstr.charCodeAt(n);\n    }\n    return new Blob([u8arr], { type: mime });\n}\n/**\n * @param {IRichTextEditor} self - specifies the rte\n * @param {string} localeItems - specifies the locale items\n * @param {IDropDownItemModel} item - specifies the dropdown item\n * @returns {string} - returns the value\n * @hidden\n */\nexport function getLocaleFontFormat(self, localeItems, item) {\n    for (var i = 0; localeItems.length > i; i++) {\n        if (localeItems[i].value === item.value || localeItems[i].value === item.subCommand) {\n            return self.localeObj.getConstant(localeItems[i].locale);\n        }\n    }\n    return item.text;\n}\n/**\n * @param {IRichTextEditor} self - specifies the rte\n * @returns {void}\n * @hidden\n */\nexport function updateDropDownFontFormatLocale(self) {\n    model.fontFamily.forEach(function (item, i) {\n        model.fontFamily[i].text = getLocaleFontFormat(self, fontNameLocale, model.fontFamily[i]);\n    });\n    model.formatItems.forEach(function (item, i) {\n        model.formatItems[i].text = getLocaleFontFormat(self, formatsLocale, model.formatItems[i]);\n    });\n    model.numberFormatList.forEach(function (item, i) {\n        model.numberFormatList[i].text = getLocaleFontFormat(self, numberFormatListLocale, model.numberFormatList[i]);\n    });\n    model.bulletFormatList.forEach(function (item, i) {\n        model.bulletFormatList[i].text = getLocaleFontFormat(self, bulletFormatListLocale, model.bulletFormatList[i]);\n    });\n}\n","/**\n * Defines common util methods used by Rich Text Editor.\n */\nimport { isNullOrUndefined, Browser, createElement, detach } from '@syncfusion/ej2-base';\nvar inlineNode = ['a', 'abbr', 'acronym', 'audio', 'b', 'bdi', 'bdo', 'big', 'br', 'button',\n    'canvas', 'cite', 'code', 'data', 'datalist', 'del', 'dfn', 'em', 'embed', 'font', 'i', 'iframe', 'img', 'input',\n    'ins', 'kbd', 'label', 'map', 'mark', 'meter', 'noscript', 'object', 'output', 'picture', 'progress',\n    'q', 'ruby', 's', 'samp', 'script', 'select', 'slot', 'small', 'span', 'strong', 'strike', 'sub', 'sup', 'svg',\n    'template', 'textarea', 'time', 'u', 'tt', 'var', 'video', 'wbr'];\n/**\n * @returns {void}\n * @hidden\n */\nexport function isIDevice() {\n    var result = false;\n    if (Browser.isDevice && Browser.isIos) {\n        result = true;\n    }\n    return result;\n}\n/**\n * @param {Element} editableElement - specifies the editable element.\n * @param {string} selector - specifies the string values.\n * @returns {void}\n * @hidden\n */\nexport function setEditFrameFocus(editableElement, selector) {\n    if (editableElement.nodeName === 'BODY' && !isNullOrUndefined(selector)) {\n        var iframe = top.window.document.querySelector(selector);\n        if (!isNullOrUndefined(iframe)) {\n            iframe.contentWindow.focus();\n        }\n    }\n}\n/**\n * @param {string} value - specifies the string value\n * @param {string} enterAction - specifies the enter key action API\n * @returns {void}\n * @hidden\n */\nexport function updateTextNode(value, enterAction) {\n    var tempNode = document.createElement('div');\n    tempNode.innerHTML = value;\n    tempNode.setAttribute('class', 'tempDiv');\n    var resultElm = document.createElement('div');\n    var childNodes = tempNode.childNodes;\n    if (childNodes.length > 0) {\n        var isPreviousInlineElem = void 0;\n        var previousParent = void 0;\n        var paraElm = void 0;\n        while (tempNode.firstChild) {\n            if ((tempNode.firstChild.nodeName === '#text' &&\n                (tempNode.firstChild.textContent.indexOf('\\n') < 0 || tempNode.firstChild.textContent.trim() !== '')) ||\n                inlineNode.indexOf(tempNode.firstChild.nodeName.toLocaleLowerCase()) >= 0) {\n                if (!isPreviousInlineElem) {\n                    if (enterAction === 'BR') {\n                        resultElm.appendChild(tempNode.firstChild);\n                        previousParent = resultElm;\n                    }\n                    else {\n                        paraElm = createElement('p');\n                        resultElm.appendChild(paraElm);\n                        paraElm.appendChild(tempNode.firstChild);\n                        previousParent = paraElm;\n                        isPreviousInlineElem = true;\n                    }\n                }\n                else {\n                    previousParent.appendChild(tempNode.firstChild);\n                    previousParent = paraElm;\n                    isPreviousInlineElem = true;\n                }\n            }\n            else if (tempNode.firstChild.nodeName === '#text' && (tempNode.firstChild.textContent === '\\n' ||\n                (tempNode.firstChild.textContent.indexOf('\\n') >= 0 && tempNode.firstChild.textContent.trim() === ''))) {\n                detach(tempNode.firstChild);\n            }\n            else {\n                resultElm.appendChild(tempNode.firstChild);\n                isPreviousInlineElem = false;\n            }\n        }\n        var tableElm = resultElm.querySelectorAll('table');\n        for (var i = 0; i < tableElm.length; i++) {\n            if (tableElm[i].getAttribute('border') === '0') {\n                tableElm[i].removeAttribute('border');\n            }\n            var tdElm = tableElm[i].querySelectorAll('td');\n            for (var j = 0; j < tdElm.length; j++) {\n                if (tdElm[j].style.borderLeft === 'none') {\n                    tdElm[j].style.removeProperty('border-left');\n                }\n                if (tdElm[j].style.borderRight === 'none') {\n                    tdElm[j].style.removeProperty('border-right');\n                }\n                if (tdElm[j].style.borderBottom === 'none') {\n                    tdElm[j].style.removeProperty('border-bottom');\n                }\n                if (tdElm[j].style.borderTop === 'none') {\n                    tdElm[j].style.removeProperty('border-top');\n                }\n                if (tdElm[j].style.border === 'none') {\n                    tdElm[j].style.removeProperty('border');\n                }\n            }\n            if (!tableElm[i].classList.contains('e-rte-table')) {\n                tableElm[i].classList.add('e-rte-table');\n            }\n        }\n        var imageElm = resultElm.querySelectorAll('img');\n        for (var i = 0; i < imageElm.length; i++) {\n            if (!imageElm[i].classList.contains('e-rte-image')) {\n                imageElm[i].classList.add('e-rte-image');\n            }\n            if (!(imageElm[i].classList.contains('e-imginline') ||\n                imageElm[i].classList.contains('e-imgbreak'))) {\n                imageElm[i].classList.add('e-imginline');\n            }\n        }\n    }\n    return resultElm.innerHTML;\n}\n/**\n * @param {Node} startChildNodes - specifies the node\n * @returns {void}\n * @hidden\n */\nexport function getLastTextNode(startChildNodes) {\n    var finalNode = startChildNodes;\n    do {\n        if (finalNode.childNodes.length > 0) {\n            finalNode = finalNode.childNodes[0];\n        }\n    } while (finalNode.childNodes.length > 0);\n    return finalNode;\n}\n/**\n * @returns {void}\n * @hidden\n */\nexport function getDefaultHtmlTbStatus() {\n    return {\n        bold: false,\n        italic: false,\n        subscript: false,\n        superscript: false,\n        strikethrough: false,\n        orderedlist: false,\n        unorderedlist: false,\n        numberFormatList: false,\n        bulletFormatList: false,\n        underline: false,\n        alignments: null,\n        backgroundcolor: null,\n        fontcolor: null,\n        fontname: null,\n        fontsize: null,\n        formats: null,\n        createlink: false,\n        insertcode: false\n    };\n}\n/**\n * @returns {void}\n * @hidden\n */\nexport function getDefaultMDTbStatus() {\n    return {\n        bold: false,\n        italic: false,\n        subscript: false,\n        superscript: false,\n        strikethrough: false,\n        orderedlist: false,\n        uppercase: false,\n        lowercase: false,\n        inlinecode: false,\n        unorderedlist: false,\n        formats: null\n    };\n}\n","/**\n * @param {string} htmlAttributes - specifies the string value\n * @param {IRichTextEditor} rte - specifies the rte value\n * @param {boolean} isFrame - specifies the boolean value\n * @param {boolean} initial - specifies the boolean value\n * @returns {void}\n * @hidden\n */\nexport function setAttributes(htmlAttributes, rte, isFrame, initial) {\n    var target;\n    if (isFrame) {\n        var iFrame = rte.contentModule.getDocument();\n        target = iFrame.querySelector('body');\n    }\n    else {\n        target = rte.element;\n    }\n    if (Object.keys(htmlAttributes).length) {\n        for (var _i = 0, _a = Object.keys(htmlAttributes); _i < _a.length; _i++) {\n            var htmlAttr = _a[_i];\n            if (htmlAttr === 'class') {\n                target.classList.add(htmlAttributes[\"\" + htmlAttr]);\n            }\n            else if (htmlAttr === 'disabled' && htmlAttributes[\"\" + htmlAttr] === 'disabled') {\n                rte.enabled = false;\n                rte.setEnable();\n            }\n            else if (htmlAttr === 'readonly' && htmlAttributes[\"\" + htmlAttr] === 'readonly') {\n                rte.readonly = true;\n                rte.setReadOnly(initial);\n            }\n            else if (htmlAttr === 'style') {\n                target.setAttribute('style', htmlAttributes[\"\" + htmlAttr]);\n            }\n            else if (htmlAttr === 'tabindex') {\n                rte.inputElement.setAttribute('tabindex', htmlAttributes[\"\" + htmlAttr]);\n            }\n            else if (htmlAttr === 'placeholder') {\n                rte.placeholder = htmlAttributes[\"\" + htmlAttr];\n                rte.setPlaceHolder();\n            }\n            else {\n                var validateAttr = ['name', 'required'];\n                if (validateAttr.indexOf(htmlAttr) > -1) {\n                    rte.valueContainer.setAttribute(htmlAttr, htmlAttributes[\"\" + htmlAttr]);\n                }\n                else {\n                    target.setAttribute(htmlAttr, htmlAttributes[\"\" + htmlAttr]);\n                }\n            }\n        }\n    }\n}\n","/**\n * @hidden\n * @deprecated\n */\nexport var created = 'create';\n/**\n * @hidden\n * @deprecated\n */\nexport var destroyed = 'destroy';\n/**\n * @hidden\n * @deprecated\n */\nexport var tableclass = 'tableclass';\n/**\n * @hidden\n * @deprecated\n */\nexport var load = 'load';\n/**\n * Specifies Rich Text Editor internal events\n */\n/**\n * @hidden\n * @deprecated\n */\nexport var initialLoad = 'initial-load';\n/**\n * @hidden\n * @deprecated\n */\nexport var contentChanged = 'content-changed';\n/**\n * @hidden\n * @deprecated\n */\nexport var initialEnd = 'initial-end';\n/**\n * @hidden\n * @deprecated\n */\nexport var iframeMouseDown = 'iframe-click';\n/**\n * @hidden\n * @deprecated\n */\nexport var destroy = 'destroy';\n/**\n * @hidden\n * @deprecated\n */\nexport var toolbarClick = 'toolbarClick';\n/**\n * @hidden\n * @deprecated\n */\nexport var toolbarRefresh = 'toolbar-refresh';\n/**\n * @hidden\n * @deprecated\n */\nexport var refreshBegin = 'refresh-begin';\n/**\n * @hidden\n * @deprecated\n */\nexport var toolbarUpdated = 'toolbar-updated';\n/**\n * @hidden\n * @deprecated\n */\nexport var bindOnEnd = 'bind-on-end';\n/**\n * @hidden\n * @deprecated\n */\nexport var renderColorPicker = 'render-color-picker';\n/**\n * @hidden\n * @deprecated\n */\nexport var htmlToolbarClick = 'html-toolbar-click';\n/**\n * @hidden\n * @deprecated\n */\nexport var markdownToolbarClick = 'markdown-toolbar-click';\n/**\n * @hidden\n * @deprecated\n */\nexport var destroyColorPicker = 'destroy-color-picker';\n/**\n * @hidden\n * @deprecated\n */\nexport var modelChanged = 'model-changed';\n/**\n * @hidden\n * @deprecated\n */\nexport var tableModulekeyUp = 'tableModulekeyUp';\n/**\n * @hidden\n * @deprecated\n */\nexport var keyUp = 'keyUp';\n/**\n * @hidden\n * @deprecated\n */\nexport var keyDown = 'keyDown';\n/**\n * @hidden\n * @deprecated\n */\nexport var mouseUp = 'mouseUp';\n/**\n * @hidden\n * @deprecated\n */\nexport var toolbarCreated = 'toolbarCreated';\n/**\n * @hidden\n * @deprecated\n */\nexport var toolbarRenderComplete = 'toolbarRenderComplete';\n/**\n * @hidden\n * @deprecated\n */\nexport var enableFullScreen = 'enableFullScreen';\n/**\n * @hidden\n * @deprecated\n */\nexport var disableFullScreen = 'disableFullScreen';\n/**\n * @hidden\n * @deprecated\n */\nexport var dropDownSelect = 'dropDownSelect';\n/**\n * @hidden\n * @deprecated\n */\nexport var beforeDropDownItemRender = 'beforeDropDownItemRender';\n/**\n * @hidden\n * @deprecated\n */\nexport var execCommandCallBack = 'execCommandCallBack';\n/**\n * @hidden\n * @deprecated\n */\nexport var imageToolbarAction = 'image-toolbar-action';\n/**\n * @hidden\n * @deprecated\n */\nexport var audioToolbarAction = 'audio-toolbar-action';\n/**\n * @hidden\n * @deprecated\n */\nexport var videoToolbarAction = 'video-toolbar-action';\n/**\n * @hidden\n * @deprecated\n */\nexport var linkToolbarAction = 'link-toolbar-action';\n/**\n * @hidden\n * @deprecated\n */\nexport var windowResize = 'resize';\n/**\n * @hidden\n * @deprecated\n */\nexport var resizeStart = 'resizeStart';\n/**\n * @hidden\n * @deprecated\n */\nexport var onResize = 'resizing';\n/**\n * @hidden\n * @deprecated\n */\nexport var resizeStop = 'resizeStop';\n/**\n * @hidden\n * @deprecated\n */\nexport var undo = 'undo';\n/**\n * @hidden\n * @deprecated\n */\nexport var redo = 'redo';\n/**\n * @hidden\n * @deprecated\n */\nexport var insertLink = 'insertLink';\n/**\n * @hidden\n * @deprecated\n */\nexport var unLink = 'unLink';\n/**\n * @hidden\n * @deprecated\n */\nexport var editLink = 'editLink';\n/**\n * @hidden\n * @deprecated\n */\nexport var openLink = 'openLink';\n/**\n * @hidden\n * @deprecated\n */\nexport var actionBegin = 'actionBegin';\n/**\n * @hidden\n * @deprecated\n */\nexport var actionComplete = 'actionComplete';\n/**\n * @hidden\n * @deprecated\n */\nexport var updatedToolbarStatus = 'updatedToolbarStatus';\n/**\n * @hidden\n * @deprecated\n */\nexport var actionSuccess = 'actionSuccess';\n/**\n * @hidden\n * @deprecated\n */\nexport var updateToolbarItem = 'updateToolbarItem';\n/**\n * @hidden\n * @deprecated\n */\nexport var insertImage = 'insertImage';\n/**\n * @hidden\n * @deprecated\n */\nexport var insertAudio = 'insertAudio';\n/**\n * @hidden\n * @deprecated\n */\nexport var insertVideo = 'insertVideo';\n/**\n * @hidden\n * @deprecated\n */\nexport var insertCompleted = 'insertCompleted';\n/**\n * @hidden\n * @deprecated\n */\nexport var imageLeft = 'justifyLeft';\n/**\n * @hidden\n * @deprecated\n */\nexport var imageRight = 'justifyRight';\n/**\n * @hidden\n * @deprecated\n */\nexport var imageCenter = 'justifyCenter';\n/**\n * @hidden\n * @deprecated\n */\nexport var imageBreak = 'break';\n/**\n * @hidden\n * @deprecated\n */\nexport var imageInline = 'inline';\n/**\n * @hidden\n * @deprecated\n */\nexport var imageLink = 'insertImgLink';\n/**\n * @hidden\n * @deprecated\n */\nexport var imageAlt = 'imgAltText';\n/**\n * @hidden\n * @deprecated\n */\nexport var imageDelete = 'delete';\n/**\n * @hidden\n * @deprecated\n */\nexport var audioDelete = 'delete';\n/**\n * @hidden\n * @deprecated\n */\nexport var videoDelete = 'delete';\n/**\n * @hidden\n * @deprecated\n */\nexport var imageCaption = 'caption';\n/**\n * @hidden\n * @deprecated\n */\nexport var imageSize = 'imageSize';\n/**\n * @hidden\n * @deprecated\n */\nexport var videoSize = 'videoSize';\n/**\n * @hidden\n * @deprecated\n */\nexport var sourceCode = 'sourceCode';\n/**\n * @hidden\n * @deprecated\n */\nexport var updateSource = 'updateSource';\n/**\n * @hidden\n * @deprecated\n */\nexport var toolbarOpen = 'toolbarOpen';\n/**\n * @hidden\n * @deprecated\n */\nexport var beforeDropDownOpen = 'beforeDropDownOpen';\n/**\n * @hidden\n * @deprecated\n */\nexport var selectionSave = 'selection-save';\n/**\n * @hidden\n * @deprecated\n */\nexport var selectionRestore = 'selection-restore';\n/**\n * @hidden\n * @deprecated\n */\nexport var expandPopupClick = 'expandPopupClick';\n/**\n * @hidden\n * @deprecated\n */\nexport var count = 'count';\n/**\n * @hidden\n * @deprecated\n */\nexport var contentFocus = 'contentFocus';\n/**\n * @hidden\n * @deprecated\n */\nexport var contentBlur = 'contentBlur';\n/**\n * @hidden\n * @deprecated\n */\nexport var mouseDown = 'mouseDown';\n/**\n * @hidden\n * @deprecated\n */\nexport var sourceCodeMouseDown = 'sourceCodeMouseDown';\n/**\n * @hidden\n * @deprecated\n */\nexport var editAreaClick = 'editAreaClick';\n/**\n * @hidden\n * @deprecated\n */\nexport var scroll = 'scroll';\n/**\n * @hidden\n * @deprecated\n */\nexport var contentscroll = 'contentscroll';\n/**\n * @hidden\n * @deprecated\n */\nexport var colorPickerChanged = 'colorPickerChanged';\n/**\n * @hidden\n * @deprecated\n */\nexport var tableColorPickerChanged = 'tableColorPickerChanged';\n/**\n * @hidden\n * @deprecated\n */\nexport var focusChange = 'focusChange';\n/**\n * @hidden\n * @deprecated\n */\nexport var selectAll = 'selectAll';\n/**\n * @hidden\n * @deprecated\n */\nexport var selectRange = 'selectRange';\n/**\n * @hidden\n * @deprecated\n */\nexport var getSelectedHtml = 'getSelectedHtml';\n/**\n * @hidden\n * @deprecated\n */\nexport var renderInlineToolbar = 'renderInlineToolbar';\n/**\n * @hidden\n * @deprecated\n */\nexport var paste = 'paste-content';\n/**\n * @hidden\n * @deprecated\n */\nexport var imgModule = 'imageModule';\n/**\n * @hidden\n * @deprecated\n */\nexport var rtlMode = 'rtl-mode';\n/**\n * @hidden\n * @deprecated\n */\nexport var createTable = 'createTable';\n/**\n * @hidden\n * @deprecated\n */\nexport var docClick = 'docClick';\n/**\n * @hidden\n * @deprecated\n */\nexport var tableToolbarAction = 'table-toolbar-action';\n/**\n * @hidden\n * @deprecated\n */\nexport var checkUndo = 'checkUndoStack';\n/**\n * @hidden\n * @deprecated\n */\nexport var readOnlyMode = 'readOnlyMode';\n/**\n * @hidden\n * @deprecated\n */\nexport var moduleDestroy = 'moduleDestroy';\n/**\n * @hidden\n * @deprecated\n */\nexport var pasteClean = 'pasteClean';\n/**\n * @hidden\n * @deprecated\n */\nexport var enterHandler = 'enterHandler';\n/**\n * @hidden\n * @deprecated\n */\nexport var beforeDialogOpen = 'beforeDialogOpen';\n/**\n * @hidden\n * @deprecated\n */\nexport var clearDialogObj = 'clearDialogObj';\n/**\n * @hidden\n * @deprecated\n */\nexport var dialogOpen = 'dialogOpen';\n/**\n * @hidden\n * @deprecated\n */\nexport var beforeDialogClose = 'beforeDialogClose';\n/**\n * @hidden\n * @deprecated\n */\nexport var dialogClose = 'dialogClose';\n/**\n * @hidden\n * @deprecated\n */\nexport var beforeQuickToolbarOpen = 'beforeQuickToolbarOpen';\n/**\n * @hidden\n * @deprecated\n */\nexport var quickToolbarOpen = 'quickToolbarOpen';\n/**\n * @hidden\n * @deprecated\n */\nexport var quickToolbarClose = 'quickToolbarClose';\n/**\n * @hidden\n * @deprecated\n */\nexport var popupHide = 'popupHide';\n/**\n * @hidden\n * @deprecated\n */\nexport var imageSelected = 'imageSelected';\n/**\n * @hidden\n * @deprecated\n */\nexport var imageUploading = 'imageUploading';\n/**\n * @hidden\n * @deprecated\n */\nexport var imageUploadSuccess = 'imageUploadSuccess';\n/**\n * @hidden\n * @deprecated\n */\nexport var imageUploadFailed = 'imageUploadFailed';\n/**\n * @hidden\n * @deprecated\n */\nexport var imageRemoving = 'imageRemoving';\n/**\n * @hidden\n * @deprecated\n */\nexport var fileSelected = 'fileSelected';\n/**\n * @hidden\n * @deprecated\n */\nexport var fileUploading = 'fileUploading';\n/**\n * @hidden\n * @deprecated\n */\nexport var fileUploadSuccess = 'fileUploadSuccess';\n/**\n * @hidden\n * @deprecated\n */\nexport var fileUploadFailed = 'fileUploadFailed';\n/**\n * @hidden\n * @deprecated\n */\nexport var fileRemoving = 'fileRemoving';\n/**\n * @hidden\n * @deprecated\n */\nexport var afterImageDelete = 'afterImageDelete';\n/**\n * @hidden\n * @deprecated\n */\nexport var afterMediaDelete = 'afterMediaDelete';\n/**\n * @hidden\n * @deprecated\n */\nexport var drop = 'drop';\n/**\n * @hidden\n * @deprecated\n */\nexport var xhtmlValidation = 'xhtmlValidation';\n/**\n * @hidden\n * @deprecated\n */\nexport var beforeImageUpload = 'beforeImageUpload';\n/**\n * @hidden\n * @deprecated\n */\nexport var beforeFileUpload = 'beforeFileUpload';\n/**\n * @hidden\n * @deprecated\n */\nexport var resizeInitialized = 'resizeInitialized';\n/**\n * @hidden\n * @deprecated\n */\nexport var renderFileManager = 'renderFileManager';\n/**\n * @hidden\n * @deprecated\n */\nexport var beforeImageDrop = 'beforeImageDrop';\n/**\n * @hidden\n * @deprecated\n */\nexport var dynamicModule = 'dynamicModule';\n/**\n * @hidden\n * @deprecated\n */\nexport var beforePasteCleanup = 'beforePasteCleanup';\n/**\n * @hidden\n * @deprecated\n */\nexport var afterPasteCleanup = 'afterPasteCleanup';\n/**\n * @hidden\n * @deprecated\n */\nexport var updateTbItemsStatus = 'updateTbItemsStatus';\n/**\n * @hidden\n * @deprecated\n */\nexport var showLinkDialog = 'showLinkDialog';\n/**\n * @hidden\n * @deprecated\n */\nexport var closeLinkDialog = 'closeLinkDialog';\n/**\n * @hidden\n * @deprecated\n */\nexport var showImageDialog = 'showImageDialog';\n/**\n * @hidden\n * @deprecated\n */\nexport var showAudioDialog = 'showAudioDialog';\n/**\n * @hidden\n * @deprecated\n */\nexport var showVideoDialog = 'showVideoDialog';\n/**\n * @hidden\n * @deprecated\n */\nexport var closeImageDialog = 'closeImageDialog';\n/**\n * @hidden\n * @deprecated\n */\nexport var closeAudioDialog = 'closeAudioDialog';\n/**\n * @hidden\n * @deprecated\n */\nexport var closeVideoDialog = 'closeVideoDialog';\n/**\n * @hidden\n * @deprecated\n */\nexport var showTableDialog = 'showTableDialog';\n/**\n * @hidden\n * @deprecated\n */\nexport var closeTableDialog = 'closeTableDialog';\n/**\n * @hidden\n * @deprecated\n */\nexport var bindCssClass = 'closeTableDialog';\n/**\n * @hidden\n * @deprecated\n */\nexport var formatPainterClick = 'formatPainterClick';\n/**\n * @hidden\n * @deprecated\n */\nexport var formatPainterDoubleClick = 'formatPainterDoubleClick';\n/**\n * @hidden\n * @deprecated\n */\nexport var emojiPicker = 'emojiPicker';\n/**\n * @hidden\n * @deprecated\n */\nexport var maximizeMinimizeClick = 'maximizeMinimizeClick';\n/**\n * @hidden\n * @deprecated\n */\nexport var hidePopup = 'hidePopup';\n/**\n * @hidden\n * @deprecated\n */\nexport var blockEmptyNodes = \"address:empty, article:empty, aside:empty, blockquote:empty,\\n details:empty, dd:empty, div:empty, dl:empty, dt:empty, fieldset:empty, footer:empty,form:empty, h1:empty,\\n h2:empty, h3:empty, h4:empty, h5:empty, h6:empty, header:empty, hgroup:empty, li:empty, main:empty, nav:empty,\\n noscript:empty, output:empty, p:empty, pre:empty, section:empty, td:empty, th:empty\";\n/**\n * @hidden\n * @deprecated\n */\nexport var inlineEmptyNodes = \"a:empty, abbr:empty, acronym:empty, b:empty, bdi:empty, bdo:empty, big:empty, button:empty,\\ncanvas:empty, cite:empty, code:empty, data:empty, datalist:empty, del:empty, dfn:empty, em:empty, font:empty, i:empty, iframe:empty,\\nins:empty, kbd:empty, label:empty, map:empty, mark:empty, meter:empty, noscript:empty, object:empty, output:empty, picture:empty, progress:empty,\\nq:empty, ruby:empty, s:empty, samp:empty, script:empty, select:empty, slot:empty, small:empty, span:empty, strong:empty, strike:empty, sub:empty, sup:empty, svg:empty,\\ntemplate:empty, textarea:empty, time:empty, u:empty, tt:empty, var:empty, wbr:empty\";\n","/**\n * Rich Text Editor classes defined here.\n */\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RTE = 'e-richtexteditor';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RTL = 'e-rtl';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_CONTENT = 'e-content';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_DISABLED = 'e-disabled';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_SCRIPT_SHEET = 'rte-iframe-script-sheet';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_STYLE_SHEET = 'rte-iframe-style-sheet';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_TOOLBAR = 'e-rte-toolbar';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_TB_FIXED = 'e-rte-tb-fixed';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_TB_FLOAT = 'e-rte-tb-float';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_TB_ABS_FLOAT = 'e-rte-tb-abs-float';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_INLINE = 'e-rte-inline';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_TB_INLINE = 'e-rte-tb-inline';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RTE_EXPAND_TB = 'e-rte-tb-expand';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_FULL_SCREEN = 'e-rte-full-screen';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_QUICK_TB = 'e-rte-quick-toolbar';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_POP = 'e-rte-pop';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_TB_STATIC = 'e-tb-static';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_QUICK_POP = 'e-rte-quick-popup';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_QUICK_DROPDOWN = 'e-quick-dropdown';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_IMAGE_POP = 'e-rte-image-popup';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_TEXT_POP = 'e-rte-text-popup';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_INLINE_POP = 'e-rte-inline-popup';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_INLINE_DROPDOWN = 'e-rte-inline-dropdown';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_DROPDOWN_POPUP = 'e-rte-dropdown-popup';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_DROPDOWN_ICONS = 'e-rte-dropdown-icons';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_DROPDOWN_ITEMS = 'e-rte-dropdown-items';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_DROPDOWN_BTN = 'e-rte-dropdown-btn';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RTE_CONTENT = 'e-rte-content';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_TB_ITEM = 'e-toolbar-item';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_TB_EXTENDED = 'e-toolbar-extended';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_TB_WRAP = 'e-toolbar-wrapper';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_POPUP = 'e-popup';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_SEPARATOR = 'e-separator';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_MINIMIZE = 'e-minimize';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_MAXIMIZE = 'e-maximize';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_BACK = 'e-back';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_SHOW = 'e-show';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_HIDE = 'e-hide';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_VISIBLE = 'e-visible';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_FOCUS = 'e-focused';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RM_WHITE_SPACE = 'e-remove-white-space';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_IMGRIGHT = 'e-imgright';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_IMGLEFT = 'e-imgleft';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_IMGCENTER = 'e-imgcenter';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_IMGBREAK = 'e-imgbreak';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_AUDIOBREAK = 'e-audio-break';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_CLICKELEM = 'e-clickelem';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_VID_CLICK_ELEM = 'e-video-clickelem';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_AUDIOWRAP = 'e-audio-wrap';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_VIDEOWRAP = 'e-video-wrap';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_VIDEOBREAK = 'e-video-break';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_CAPTION = 'e-img-caption';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RTE_CAPTION = 'e-rte-img-caption';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_CAPINLINE = 'e-caption-inline';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_IMGINLINE = 'e-imginline';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_AUDIOINLINE = 'e-audio-inline';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_VIDEOINLINE = 'e-video-inline';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_COUNT = 'e-rte-character-count';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_WARNING = 'e-warning';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_ERROR = 'e-error';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_ICONS = 'e-icons';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_ACTIVE = 'e-active';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_EXPAND_OPEN = 'e-expand-open';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RTE_ELEMENTS = 'e-rte-elements';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_TB_BTN = 'e-tbar-btn';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_HR_SEPARATOR = 'e-rte-horizontal-separator';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_TB_IOS_FIX = 'e-tbar-ios-fixed';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_LIST_PRIMARY_CONTENT = 'e-rte-list-primary-content';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_NUMBERFORMATLIST_TB_BTN = 'e-rte-numberformatlist-dropdown';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_BULLETFORMATLIST_TB_BTN = 'e-rte-bulletformatlist-dropdown';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_FORMATS_TB_BTN = 'e-formats-tbar-btn';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_FONT_NAME_TB_BTN = 'e-font-name-tbar-btn';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_FONT_SIZE_TB_BTN = 'e-font-size-tbar-btn';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_ALIGN_TB_BTN = 'e-alignment-tbar-btn';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_FONT_COLOR_TARGET = 'e-rte-fontcolor-element';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_BACKGROUND_COLOR_TARGET = 'e-rte-backgroundcolor-element';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_COLOR_CONTENT = 'e-rte-color-content';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_FONT_COLOR_DROPDOWN = 'e-rte-fontcolor-dropdown';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_BACKGROUND_COLOR_DROPDOWN = 'e-rte-backgroundcolor-dropdown';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_COLOR_PALETTE = 'e-rte-square-palette';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_FONT_COLOR_PICKER = 'e-rte-fontcolor-colorpicker';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_BACKGROUND_COLOR_PICKER = 'e-rte-backgroundcolor-colorpicker';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RTE_READONLY = 'e-rte-readonly';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_TABLE_SEL = 'e-cell-select';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_TB_DASH_BOR = 'e-dashed-border';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_TB_ALT_BOR = 'e-alternate-border';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_TB_COL_RES = 'e-column-resize';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_TB_ROW_RES = 'e-row-resize';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_TB_BOX_RES = 'e-table-box';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RTE_HIDDEN = 'e-rte-hidden';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RTE_PASTE_KEEP_FORMAT = 'e-rte-keepformat';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RTE_PASTE_REMOVE_FORMAT = 'e-rte-removeformat';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RTE_PASTE_PLAIN_FORMAT = 'e-rte-plainformat';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RTE_PASTE_OK = 'e-rte-pasteok';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RTE_PASTE_CANCEL = 'e-rte-pastecancel';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RTE_DIALOG_MIN_HEIGHT = 'e-rte-dialog-minheight';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RTE_RES_HANDLE = 'e-resize-handle';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RTE_RES_EAST = 'e-south-east';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RTE_IMAGE = 'e-rte-image';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RESIZE = 'e-resize';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_IMG_FOCUS = 'e-img-focus';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_AUD_FOCUS = 'e-audio-focus';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_VID_FOCUS = 'e-video-focus';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RTE_DRAG_IMAGE = 'e-rte-drag-image';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RTE_UPLOAD_POPUP = 'e-rte-upload-popup';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_POPUP_OPEN = 'e-popup-open';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_IMG_RESIZE = 'e-img-resize';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_DROPAREA = 'e-droparea';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_IMG_INNER = 'e-img-inner';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_UPLOAD_FILES = 'e-upload-files';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RTE_DIALOG_UPLOAD = 'e-rte-dialog-upload';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RTE_RES_CNT = 'e-rte-resize';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_CUSTOM_TILE = 'e-custom-tile';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_NOCOLOR_ITEM = 'e-nocolor-item';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_TABLE = 'e-rte-table';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_TABLE_BORDER = 'e-rte-table-border';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RTE_TABLE_RESIZE = 'e-rte-table-resize';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RTE_FIXED_TB_EXPAND = 'e-rte-fixed-tb-expand';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RTE_TB_ENABLED = 'e-rte-toolbar-enabled';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RTE_RES_WEST = 'e-south-west';\n/**\n * @hidden\n * @deprecated\n */\nexport var CLS_RTE_SOURCE_CODE_TXTAREA = 'e-rte-srctextarea';\n","/**\n * Defines types of Render\n *\n * @hidden\n * @deprecated\n */\nexport var RenderType;\n(function (RenderType) {\n    /* eslint-disable */\n    /** Defines RenderType as Toolbar */\n    RenderType[RenderType[\"Toolbar\"] = 0] = \"Toolbar\";\n    /** Defines RenderType as Content */\n    RenderType[RenderType[\"Content\"] = 1] = \"Content\";\n    /** Defines RenderType as Popup */\n    RenderType[RenderType[\"Popup\"] = 2] = \"Popup\";\n    /** Defines RenderType as LinkToolbar */\n    RenderType[RenderType[\"LinkToolbar\"] = 3] = \"LinkToolbar\";\n    /** Defines RenderType as TextToolbar */\n    RenderType[RenderType[\"TextToolbar\"] = 4] = \"TextToolbar\";\n    /** Defines RenderType as ImageToolbar */\n    RenderType[RenderType[\"ImageToolbar\"] = 5] = \"ImageToolbar\";\n    /** Defines RenderType as AudioToolbar */\n    RenderType[RenderType[\"AudioToolbar\"] = 6] = \"AudioToolbar\";\n    /** Defines RenderType as AudioToolbar */\n    RenderType[RenderType[\"VideoToolbar\"] = 7] = \"VideoToolbar\";\n    /** Defines RenderType as InlineToolbar */\n    RenderType[RenderType[\"InlineToolbar\"] = 8] = \"InlineToolbar\";\n    /** Defines RenderType as TableToolbar */\n    RenderType[RenderType[\"TableToolbar\"] = 9] = \"TableToolbar\";\n    /* eslint-enable */\n})(RenderType || (RenderType = {}));\n/**\n * Defines types to be used as Toolbar.\n */\nexport var ToolbarType;\n(function (ToolbarType) {\n    /* eslint-disable */\n    /** Defines ToolbarType as Standard */\n    ToolbarType[\"Expand\"] = \"Expand\";\n    /** Defines ToolbarType as MultiRow */\n    ToolbarType[\"MultiRow\"] = \"MultiRow\";\n    /** Defines ToolbarType as Scrollable */\n    ToolbarType[\"Scrollable\"] = \"Scrollable\";\n    /* eslint-enable */\n})(ToolbarType || (ToolbarType = {}));\n/**\n * Defines the type of dialog, which open or close in the Rich Text Editor.\n */\nexport var DialogType;\n(function (DialogType) {\n    /* eslint-disable */\n    /** Defines ToolbarType as Standard */\n    DialogType[\"InsertLink\"] = \"InsertLink\";\n    /** Defines ToolbarType as MultiRow */\n    DialogType[\"InsertImage\"] = \"InsertImage\";\n    /** Defines DialogType as Audio*/\n    DialogType[\"InsertAudio\"] = \"InsertAudio\";\n    /** Defines DialogType as Video*/\n    DialogType[\"InsertVideo\"] = \"InsertVideo\";\n    /** Defines ToolbarType as Scrollable */\n    DialogType[\"InsertTable\"] = \"InsertTable\";\n    /* eslint-enable */\n})(DialogType || (DialogType = {}));\n","/* eslint-disable */\n/**\n * Export default locale\n */\nexport var defaultLocale = {\n    'alignments': 'Alignments',\n    'justifyLeft': 'Align Left',\n    'justifyCenter': 'Align Center',\n    'justifyRight': 'Align Right',\n    'justifyFull': 'Align Justify',\n    'fontName': 'Font Name',\n    'fontSize': 'Font Size',\n    'fontColor': 'Font Color',\n    'backgroundColor': 'Background Color',\n    'bold': 'Bold',\n    'italic': 'Italic',\n    'underline': 'Underline',\n    'strikethrough': 'Strikethrough',\n    'clearFormat': 'Clear Format',\n    'clearAll': 'Clear All',\n    'cut': 'Cut',\n    'copy': 'Copy',\n    'paste': 'Paste',\n    'unorderedList': 'Bulleted List',\n    'orderedList': 'Numbered List',\n    'indent': 'Increase Indent',\n    'outdent': 'Decrease Indent',\n    'undo': 'Undo',\n    'redo': 'Redo',\n    'superscript': 'Superscript',\n    'subscript': 'Subscript',\n    'createLink': 'Insert Link',\n    'openLink': 'Open Link',\n    'editLink': 'Edit Link',\n    'removeLink': 'Remove Link',\n    'image': 'Insert Image',\n    'audio': 'Insert Audio',\n    'video': 'Insert Video',\n    'replace': 'Replace',\n    'numberFormatList': 'Number Format List',\n    'bulletFormatList': 'Bullet Format List',\n    'audioReplace': 'Replace',\n    'videoReplace': 'Replace',\n    'videoAlign': 'Align',\n    'videoDimension': 'Dimension',\n    'audioRemove': 'Remove',\n    'videoRemove': 'Remove',\n    'audioLayoutOption': 'Layout option',\n    'videoLayoutOption': 'Layout option',\n    'align': 'Align',\n    'caption': 'Image Caption',\n    'remove': 'Remove',\n    'insertLink': 'Insert Link',\n    'display': 'Display',\n    'altText': 'Alternative Text',\n    'dimension': 'Change Size',\n    'fullscreen': 'Maximize',\n    'maximize': 'Maximize',\n    'minimize': 'Minimize',\n    'lowerCase': 'Lower Case',\n    'upperCase': 'Upper Case',\n    'print': 'Print',\n    'formats': 'Formats',\n    'sourcecode': 'Code View',\n    'preview': 'Preview',\n    'viewside': 'ViewSide',\n    'insertCode': 'Insert Code',\n    'linkText': 'Display Text',\n    'linkTooltipLabel': 'Title',\n    'linkWebUrl': 'Web Address',\n    'linkTitle': 'Enter a title',\n    'linkurl': 'http://example.com',\n    'linkOpenInNewWindow': 'Open Link in New Window',\n    'linkHeader': 'Insert Link',\n    'dialogInsert': 'Insert',\n    'dialogCancel': 'Cancel',\n    'dialogUpdate': 'Update',\n    'imageHeader': 'Insert Image',\n    'audioHeader': 'Insert Audio',\n    'videoHeader': 'Insert Video',\n    'imageLinkHeader': 'You can also provide a link from the web',\n    'audioLinkHeader': 'You can also provide a link from the web',\n    'videoLinkHeader': 'Web URL',\n    'embedVideoLinkHeader': 'Media Embed URL',\n    'mdimageLink': 'Please provide a URL for your image',\n    'imageUploadMessage': 'Drop image here or browse to upload',\n    'audioUploadMessage': 'Drop an audio file or browse to upload',\n    'videoUploadMessage': 'Drop a video file or browse to upload',\n    'imageDeviceUploadMessage': 'Click here to upload',\n    'audioDeviceUploadMessage': 'Click here to upload',\n    'videoDeviceUploadMessage': 'Click here to upload',\n    'imageAlternateText': 'Alternate Text',\n    'alternateHeader': 'Alternative Text',\n    'browse': 'Browse',\n    'imageUrl': 'http://example.com/image.png',\n    'audioUrl': 'http://example.com/audio.mp3',\n    'videoUrl': 'http://example.com/video.mp3',\n    'webUrl': 'Web URL',\n    'embedUrl': 'Embed Code',\n    'imageCaption': 'Caption',\n    'imageSizeHeader': 'Image Size',\n    'videoSizeHeader': 'Video Size',\n    'imageHeight': 'Height',\n    'imageWidth': 'Width',\n    'videoHeight': 'Height',\n    'videoWidth': 'Width',\n    'textPlaceholder': 'Enter Text',\n    'inserttablebtn': 'Insert Table',\n    'tabledialogHeader': 'Insert Table',\n    'tableWidth': 'Width',\n    'cellpadding': 'Cell Padding',\n    'cellspacing': 'Cell Spacing',\n    'columns': 'Number of columns',\n    'rows': 'Number of rows',\n    'tableRows': 'Table Rows',\n    'tableColumns': 'Table Columns',\n    'tableCellHorizontalAlign': 'Table Cell Horizontal Align',\n    'tableCellVerticalAlign': 'Table Cell Vertical Align',\n    'createTable': 'Create Table',\n    'removeTable': 'Remove Table',\n    'tableHeader': 'Table Header',\n    'tableRemove': 'Table Remove',\n    'tableCellBackground': 'Table Cell Background',\n    'tableEditProperties': 'Table Edit Properties',\n    'styles': 'Styles',\n    'insertColumnLeft': 'Insert Column Left',\n    'insertColumnRight': 'Insert Column Right',\n    'deleteColumn': 'Delete Column',\n    'insertRowBefore': 'Insert Row Before',\n    'insertRowAfter': 'Insert Row After',\n    'deleteRow': 'Delete Row',\n    'tableEditHeader': 'Edit Table',\n    'TableHeadingText': 'Heading',\n    'TableColText': 'Col',\n    'imageInsertLinkHeader': 'Insert Link',\n    'editImageHeader': 'Edit Image',\n    'editAudioHeader': 'Edit Audio',\n    'editVideoHeader': 'Edit Video',\n    \"alignmentsDropDownLeft\": 'Align Left',\n    \"alignmentsDropDownCenter\": 'Align Center',\n    \"alignmentsDropDownRight\": 'Align Right',\n    \"alignmentsDropDownJustify\": 'Align Justify',\n    \"imageDisplayDropDownInline\": 'Inline',\n    \"imageDisplayDropDownBreak\": 'Break',\n    \"audioLayoutOptionDropDownInline\": 'Inline',\n    \"audioLayoutOptionDropDownBreak\": 'Break',\n    \"videoLayoutOptionDropDownInline\": 'Inline',\n    \"videoLayoutOptionDropDownBreak\": 'Break',\n    \"tableInsertRowDropDownBefore\": 'Insert row before',\n    \"tableInsertRowDropDownAfter\": 'Insert row after',\n    \"tableInsertRowDropDownDelete\": 'Delete row',\n    \"tableInsertColumnDropDownLeft\": 'Insert column left',\n    \"tableInsertColumnDropDownRight\": 'Insert column right',\n    \"tableInsertColumnDropDownDelete\": 'Delete column',\n    \"tableVerticalAlignDropDownTop\": 'Align Top',\n    \"tableVerticalAlignDropDownMiddle\": 'Align Middle',\n    \"tableVerticalAlignDropDownBottom\": 'Align Bottom',\n    \"tableStylesDropDownDashedBorder\": 'Dashed Borders',\n    \"tableStylesDropDownAlternateRows\": 'Alternate Rows',\n    'pasteFormat': 'Paste Format',\n    'pasteFormatContent': 'Choose the formatting action',\n    'plainText': 'Plain Text',\n    'cleanFormat': 'Clean',\n    'keepFormat': 'Keep',\n    'pasteDialogOk': 'OK',\n    'pasteDialogCancel': 'Cancel',\n    'fileManager': 'File Manager',\n    'fileDialogHeader': 'File Browser',\n    \"formatsDropDownParagraph\": 'Paragraph',\n    'formatsDropDownCode': 'Code',\n    'formatsDropDownQuotation': 'Quotation',\n    'formatsDropDownHeading1': 'Heading 1',\n    'formatsDropDownHeading2': 'Heading 2',\n    'formatsDropDownHeading3': 'Heading 3',\n    'formatsDropDownHeading4': 'Heading 4',\n    'fontNameSegoeUI': 'Segoe UI',\n    'fontNameArial': 'Arial',\n    'fontNameGeorgia': 'Georgia',\n    'fontNameImpact': 'Impact',\n    'fontNameTahoma': 'Tahoma',\n    'fontNameTimesNewRoman': 'Times New Roman',\n    'fontNameVerdana': 'Verdana',\n    'numberFormatListNumber': 'Number',\n    'numberFormatListLowerAlpha': 'LowerAlpha',\n    'numberFormatListUpperAlpha': 'UpperAlpha',\n    'numberFormatListLowerRoman': 'LowerRoman',\n    'numberFormatListUpperRoman': 'UpperRoman',\n    'numberFormatListLowerGreek': 'LowerGreek',\n    'bulletFormatListDisc': 'Disc',\n    'bulletFormatListCircle': 'Circle',\n    'bulletFormatListSquare': 'Square',\n    'numberFormatListNone': 'None',\n    'bulletFormatListNone': 'None',\n    'formatPainter': 'Format Painter',\n    'emojiPicker': 'Emoji Picker',\n    'embeddedCode': 'Embedded Code',\n    'pasteEmbeddedCodeHere': 'Paste Embedded Code here',\n    'emojiPickerTypeToFind': 'Type to find',\n    'emojiPickerNoResultFound': 'No results found',\n    'emojiPickerTrySomethingElse': 'Try something else',\n    'linkAriaLabel': 'Open in new window',\n};\nexport var toolsLocale = {\n    'alignments': 'alignments',\n    'justifyleft': 'justifyLeft',\n    'justifycenter': 'justifyCenter',\n    'justifyright': 'justifyRight',\n    'justifyfull': 'justifyFull',\n    'fontname': 'fontName',\n    'fontsize': 'fontSize',\n    'fontcolor': 'fontColor',\n    'backgroundcolor': 'backgroundColor',\n    'bold': 'bold',\n    'italic': 'italic',\n    'underline': 'underline',\n    'strikethrough': 'strikethrough',\n    'clearformat': 'clearFormat',\n    'clearall': 'clearAll',\n    'cut': 'cut',\n    'copy': 'copy',\n    'paste': 'paste',\n    'unorderedlist': 'unorderedList',\n    'orderedlist': 'orderedList',\n    'indent': 'indent',\n    'outdent': 'outdent',\n    'numberformatlist': 'numberFormatList',\n    'bulletformatlist': 'bulletFormatList',\n    'undo': 'undo',\n    'redo': 'redo',\n    'superscript': 'superscript',\n    'subscript': 'subscript',\n    'createlink': 'createLink',\n    'openlink': 'openLink',\n    'editlink': 'editLink',\n    'removelink': 'removeLink',\n    'openimagelink': 'openLink',\n    'editimagelink': 'editLink',\n    'removeimagelink': 'removeLink',\n    'image': 'image',\n    'audio': 'audio',\n    'video': 'video',\n    'replace': 'replace',\n    'audioreplace': 'audioReplace',\n    'videoreplace': 'videoReplace',\n    'videoalign': 'videoAlign',\n    'videodimension': 'videoDimension',\n    'audioremove': 'audioRemove',\n    'videoremove': 'videoRemove',\n    'audiolayoutoption': 'audioLayoutOption',\n    'videolayoutoption': 'videoLayoutOption',\n    'align': 'align',\n    'caption': 'caption',\n    'remove': 'remove',\n    'insertlink': 'insertLink',\n    'display': 'display',\n    'alttext': 'altText',\n    'dimension': 'dimension',\n    'fullscreen': 'fullscreen',\n    'maximize': 'maximize',\n    'minimize': 'minimize',\n    'lowercase': 'lowerCase',\n    'uppercase': 'upperCase',\n    'print': 'print',\n    'formats': 'formats',\n    'sourcecode': 'sourcecode',\n    'preview': 'preview',\n    'viewside': 'viewside',\n    'insertcode': 'insertCode',\n    'tablerows': 'tableRows',\n    'tablecolumns': 'tableColumns',\n    'tablecellhorizontalalign': 'tableCellHorizontalAlign',\n    'tablecellverticalalign': 'tableCellVerticalAlign',\n    'createtable': 'createTable',\n    'removetable': 'removeTable',\n    'tableheader': 'tableHeader',\n    'tableremove': 'tableRemove',\n    'tablecellbackground': 'tableCellBackground',\n    'tableeditproperties': 'tableEditProperties',\n    'styles': 'styles',\n    'insertcolumnleft': 'insertColumnLeft',\n    'insertcolumnright': 'insertColumnRight',\n    'deletecolumn': 'deleteColumn',\n    'aligntop': 'AlignTop',\n    'alignmiddle': 'AlignMiddle',\n    'alignbottom': 'AlignBottom',\n    'insertrowbefore': 'insertRowBefore',\n    'insertrowafter': 'insertRowAfter',\n    'deleterow': 'deleteRow',\n    'formatpainter': 'formatPainter',\n    'emojipicker': 'emojiPicker',\n    'embeddedCode': 'Embedded Code',\n    'pasteEmbeddedCodeHere': 'Paste Embedded Code here',\n    'emojiPickerTypeToFind': 'Type to find',\n    'emojiPickerNoResultFound': 'No results found',\n    'emojiPickerTrySomethingElse': 'Try something else',\n};\nexport var fontNameLocale = [\n    { locale: 'fontNameSegoeUI', value: 'Segoe UI' },\n    { locale: 'fontNameArial', value: 'Arial,Helvetica,sans-serif' },\n    { locale: 'fontNameGeorgia', value: 'Georgia,serif' },\n    { locale: 'fontNameImpact', value: 'Impact,Charcoal,sans-serif' },\n    { locale: 'fontNameTahoma', value: 'Tahoma,Geneva,sans-serif' },\n    { locale: 'fontNameTimesNewRoman', value: 'Times New Roman,Times,serif' },\n    { locale: 'fontNameVerdana', value: 'Verdana,Geneva,sans-serif' }\n];\nexport var formatsLocale = [\n    { locale: 'formatsDropDownParagraph', value: 'P' },\n    { locale: 'formatsDropDownCode', value: 'Pre' },\n    { locale: 'formatsDropDownQuotation', value: 'BlockQuote' },\n    { locale: 'formatsDropDownHeading1', value: 'H1' },\n    { locale: 'formatsDropDownHeading2', value: 'H2' },\n    { locale: 'formatsDropDownHeading3', value: 'H3' },\n    { locale: 'formatsDropDownHeading4', value: 'H4' }\n];\nexport var numberFormatListLocale = [\n    { locale: 'numberFormatListNone', value: 'none' },\n    { locale: 'numberFormatListNumber', value: 'decimal' },\n    { locale: 'numberFormatListLowerAlpha', value: 'lower-alpha' },\n    { locale: 'numberFormatListUpperAlpha', value: 'upper-alpha' },\n    { locale: 'numberFormatListLowerRoman', value: 'lower-roman' },\n    { locale: 'numberFormatListUpperRoman', value: 'upper-roman' },\n    { locale: 'numberFormatListLowerGreek', value: 'lower-greek' }\n];\nexport var bulletFormatListLocale = [\n    { locale: 'bulletFormatListNone', value: 'none' },\n    { locale: 'bulletFormatListDisc', value: 'disc' },\n    { locale: 'bulletFormatListCircle', value: 'circle' },\n    { locale: 'bulletFormatListSquare', value: 'square' },\n];\n","import { addClass, Browser, removeClass, EventHandler, formatUnit, isNullOrUndefined, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { getInstance, closest, selectAll, detach } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { Popup, Tooltip } from '@syncfusion/ej2-popups';\nimport * as classes from '../base/classes';\nimport * as events from '../base/constant';\nimport { CLS_TOOLBAR, CLS_DROPDOWN_BTN, CLS_RTE_ELEMENTS, CLS_TB_BTN, CLS_INLINE_DROPDOWN, CLS_COLOR_CONTENT, CLS_FONT_COLOR_DROPDOWN, CLS_BACKGROUND_COLOR_DROPDOWN, CLS_COLOR_PALETTE, CLS_FONT_COLOR_PICKER, CLS_BACKGROUND_COLOR_PICKER, CLS_CUSTOM_TILE, CLS_NOCOLOR_ITEM, CLS_BULLETFORMATLIST_TB_BTN, CLS_NUMBERFORMATLIST_TB_BTN, CLS_LIST_PRIMARY_CONTENT } from '../base/classes';\nimport { ColorPicker } from '@syncfusion/ej2-inputs';\nimport { hasClass } from '../base/util';\n/**\n * `Toolbar renderer` module is used to render toolbar in RichTextEditor.\n *\n * @hidden\n * @deprecated\n */\nvar ToolbarRenderer = /** @class */ (function () {\n    /**\n     * Constructor for toolbar renderer module\n     *\n     * @param {IRichTextEditor} parent - specifies the parent element.\n     * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n     */\n    function ToolbarRenderer(parent, serviceLocator) {\n        this.parent = parent;\n        if (serviceLocator) {\n            this.l10n = serviceLocator.getService('rteLocale');\n        }\n        this.wireEvent();\n    }\n    ToolbarRenderer.prototype.wireEvent = function () {\n        this.parent.on(events.destroy, this.unWireEvent, this);\n        this.parent.on(events.maximizeMinimizeClick, this.destroyTooltip, this);\n    };\n    ToolbarRenderer.prototype.destroyTooltip = function () {\n        if (!isNullOrUndefined(document.querySelector('.e-tooltip-wrap')) && !isNullOrUndefined(document.querySelector(' [data-tooltip-id]'))) {\n            var tooltipTargetEle = this.parent.element.querySelector('[data-tooltip-id]');\n            var event_1 = new MouseEvent('mouseleave', { bubbles: true, cancelable: true });\n            tooltipTargetEle.dispatchEvent(event_1);\n        }\n    };\n    ToolbarRenderer.prototype.unWireEvent = function () {\n        this.parent.off(events.destroy, this.unWireEvent);\n        if (this.popupOverlay) {\n            EventHandler.remove(this.popupOverlay, 'click touchmove', this.onPopupOverlay);\n        }\n        this.removePopupContainer();\n    };\n    ToolbarRenderer.prototype.toolbarBeforeCreate = function (e) {\n        if (this.mode === 'Extended') {\n            e.enableCollision = false;\n        }\n    };\n    ToolbarRenderer.prototype.toolbarCreated = function () {\n        this.parent.notify(events.toolbarCreated, this);\n    };\n    ToolbarRenderer.prototype.toolbarClicked = function (args) {\n        if (!this.parent.enabled) {\n            return;\n        }\n        this.parent.trigger('toolbarClick', args);\n        if (!this.parent.readonly || isNullOrUndefined(args.item)) {\n            this.parent.notify(events.toolbarClick, args);\n        }\n    };\n    ToolbarRenderer.prototype.dropDownSelected = function (args) {\n        this.parent.notify(events.dropDownSelect, args);\n        this.onPopupOverlay();\n    };\n    ToolbarRenderer.prototype.beforeDropDownItemRender = function (args) {\n        if (this.parent.readonly || !this.parent.enabled) {\n            return;\n        }\n        this.parent.notify(events.beforeDropDownItemRender, args);\n    };\n    ToolbarRenderer.prototype.tooltipBeforeRender = function (args) {\n        if (!isNOU(args.target.getAttribute('title'))) {\n            var tooltipTarget = args.target.getAttribute('title');\n            var tooltipText = void 0;\n            switch (tooltipTarget) {\n                case 'Minimize':\n                    tooltipText = this.l10n.getConstant('minimize');\n                    args.target.setAttribute('title', tooltipText + ' (Esc)');\n                    break;\n                case 'Maximize':\n                    tooltipText = this.l10n.getConstant('maximize');\n                    args.target.setAttribute('title', tooltipText + ' (Ctrl+Shift+F)');\n                    break;\n            }\n        }\n    };\n    ToolbarRenderer.prototype.dropDownOpen = function (args) {\n        if (args.element.parentElement.getAttribute('id').indexOf('TableCell') > -1 && !isNOU(args.element.parentElement.querySelector('.e-cell-merge')) &&\n            (!isNOU(args.element.parentElement.querySelector('.e-cell-horizontal-split')) || !isNOU(args.element.parentElement.querySelector('.e-cell-vertical-split')))) {\n            var listEle = args.element.querySelectorAll('li');\n            if (this.parent.inputElement.querySelectorAll('.e-cell-select').length === 1) {\n                addClass([listEle[0]], 'e-disabled');\n                removeClass([listEle[1], listEle[2]], 'e-disabled');\n            }\n            else if (this.parent.inputElement.querySelectorAll('.e-cell-select').length > 1) {\n                removeClass([listEle[0]], 'e-disabled');\n                addClass([listEle[1], listEle[2]], 'e-disabled');\n            }\n        }\n        if (Browser.isDevice && !args.element.parentElement.classList.contains(classes.CLS_QUICK_DROPDOWN)) {\n            this.popupModal(args.element.parentElement);\n        }\n        this.parent.notify(events.selectionSave, args);\n    };\n    ToolbarRenderer.prototype.dropDownClose = function (args) {\n        this.removePopupContainer();\n        this.parent.notify(events.selectionRestore, args);\n    };\n    ToolbarRenderer.prototype.removePopupContainer = function () {\n        if (Browser.isDevice && !isNullOrUndefined(this.popupContainer)) {\n            var popupEle = this.popupContainer.querySelector('.e-dropdown-popup.e-tbar-btn.e-control');\n            if (popupEle) {\n                this.popupContainer.parentNode.insertBefore(popupEle, this.popupContainer.nextSibling);\n                popupEle.style.removeProperty('position');\n                removeClass([popupEle], 'e-popup-modal');\n            }\n            detach(this.popupContainer);\n            this.popupContainer = undefined;\n        }\n    };\n    /**\n     * renderToolbar method\n     *\n     * @param {IToolbarOptions} args - specifies the arguments.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    ToolbarRenderer.prototype.renderToolbar = function (args) {\n        this.setPanel(args.target);\n        this.renderPanel();\n        this.mode = args.overflowMode;\n        args.rteToolbarObj.toolbarObj = new Toolbar({\n            items: args.items,\n            width: '100%',\n            overflowMode: args.overflowMode,\n            beforeCreate: this.toolbarBeforeCreate.bind(this),\n            created: this.toolbarCreated.bind(this),\n            clicked: this.toolbarClicked.bind(this),\n            enablePersistence: args.enablePersistence,\n            enableRtl: args.enableRtl,\n            cssClass: args.cssClass\n        });\n        args.rteToolbarObj.toolbarObj.isStringTemplate = true;\n        args.rteToolbarObj.toolbarObj.createElement = this.parent.createElement;\n        args.rteToolbarObj.toolbarObj.appendTo(args.target);\n        if (this.parent.showTooltip) {\n            this.tooltip = new Tooltip({\n                target: '#' + this.parent.getID() + '_toolbar_wrapper [title]',\n                showTipPointer: true,\n                openDelay: 400,\n                opensOn: 'Hover',\n                beforeRender: this.tooltipBeforeRender.bind(this),\n                cssClass: this.parent.cssClass,\n                windowCollision: true,\n                position: 'BottomCenter'\n            });\n            this.tooltip.appendTo(args.target);\n        }\n    };\n    /**\n     * renderDropDownButton method\n     *\n     * @param {IDropDownModel} args - specifies the the arguments.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    ToolbarRenderer.prototype.renderDropDownButton = function (args) {\n        var _this = this;\n        var css;\n        args.element.classList.add(CLS_DROPDOWN_BTN);\n        css = args.cssClass + ' ' + CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN;\n        if (this.parent.inlineMode.enable && Browser.isDevice) {\n            css = css + ' ' + CLS_INLINE_DROPDOWN;\n        }\n        // eslint-disable-next-line\n        var proxy = this;\n        var dropDown = new DropDownButton({\n            items: args.items,\n            iconCss: args.iconCss,\n            cssClass: css,\n            content: args.content,\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            select: this.dropDownSelected.bind(this),\n            beforeOpen: function (args) {\n                if (proxy.parent.readonly || !proxy.parent.enabled) {\n                    args.cancel = true;\n                    return;\n                }\n                // eslint-disable-next-line\n                // Table styles dropdown preselect\n                if (proxy.parent.editorMode !== 'Markdown') {\n                    var startNode = proxy.parent.getRange().startContainer.parentElement;\n                    var tableEle = startNode.closest('table');\n                    var trow = startNode.closest('tr');\n                    if (!isNOU(tableEle) && tableEle.classList.contains('e-dashed-border')) {\n                        for (var index = 0; index < args.element.childNodes.length; index++) {\n                            if (args.element.childNodes[index].classList.contains('e-dashed-borders')) {\n                                addClass([args.element.childNodes[index]], 'e-active');\n                            }\n                        }\n                    }\n                    else if (!isNOU(tableEle) && !tableEle.classList.contains('e-dashed-border') && tableEle.classList.contains('e-alternate-rows') && window.getComputedStyle(trow).backgroundColor !== '') {\n                        for (var index = 0; index < args.element.childNodes.length; index++) {\n                            if (args.element.childNodes[index].classList.contains('e-alternate-rows')) {\n                                addClass([args.element.childNodes[index]], 'e-active');\n                            }\n                        }\n                    }\n                    //Alignments preselect\n                    var alignEle = proxy.parent.getRange().startContainer;\n                    while (alignEle !== proxy.parent.element.querySelector('.e-content') && !isNOU(alignEle.parentElement)) {\n                        if (alignEle.nodeName === '#text') {\n                            alignEle = alignEle.parentElement;\n                        }\n                        var alignStyle = window.getComputedStyle(alignEle).textAlign;\n                        if (args.items[0].command === 'Alignments') {\n                            if ((args.items[0].text === 'Align Left' && (alignStyle === 'left') || alignStyle === 'start')) {\n                                addClass([args.element.childNodes[0]], 'e-active');\n                                break;\n                            }\n                            else if (args.items[1].text === 'Align Center' && alignStyle === 'center') {\n                                addClass([args.element.childNodes[1]], 'e-active');\n                                break;\n                            }\n                            else if (args.items[2].text === 'Align Right' && alignStyle === 'right') {\n                                addClass([args.element.childNodes[2]], 'e-active');\n                                break;\n                            }\n                            else if (args.items[3].text === 'Align Justify' && alignStyle === 'justify') {\n                                addClass([args.element.childNodes[3]], 'e-active');\n                                break;\n                            }\n                        }\n                        alignEle = alignEle.parentElement;\n                    }\n                    //image preselect\n                    var imageEle = startNode.closest('img') ? startNode.closest('img') : startNode.querySelector('img');\n                    if (args.items[0].command === 'Images') {\n                        if (!isNOU(imageEle)) {\n                            var index = void 0;\n                            if (imageEle.classList.contains('e-imgleft') || imageEle.classList.contains('e-imginline')) {\n                                index = 0;\n                            }\n                            else if (imageEle.classList.contains('e-imgcenter') || imageEle.classList.contains('e-imgbreak')) {\n                                index = 1;\n                            }\n                            else if (imageEle.classList.contains('e-imgright')) {\n                                index = 2;\n                            }\n                            if (!isNOU(args.element.childNodes[index])) {\n                                addClass([args.element.childNodes[index]], 'e-active');\n                            }\n                        }\n                    }\n                    //Formats preselect\n                    if (args.items[0].command === 'Formats') {\n                        for (var index = 0; index < args.element.childNodes.length; index++) {\n                            var divNode = _this.parent.createElement('div');\n                            divNode.innerHTML = dropDown.content.trim();\n                            if (divNode.textContent.trim() !== ''\n                                && args.element.childNodes[index].textContent.trim() === divNode.textContent.trim()) {\n                                if (!args.element.childNodes[index].classList.contains('e-active')) {\n                                    addClass([args.element.childNodes[index]], 'e-active');\n                                }\n                            }\n                            else {\n                                removeClass([args.element.childNodes[index]], 'e-active');\n                            }\n                        }\n                    }\n                }\n                proxy.parent.notify(events.beforeDropDownOpen, args);\n            },\n            close: this.dropDownClose.bind(this),\n            open: this.dropDownOpen.bind(this),\n            beforeItemRender: this.beforeDropDownItemRender.bind(this)\n        });\n        dropDown.isStringTemplate = true;\n        dropDown.createElement = proxy.parent.createElement;\n        dropDown.appendTo(args.element);\n        args.element.tabIndex = -1;\n        var popupElement = document.getElementById(dropDown.element.id + '-popup');\n        popupElement.setAttribute('aria-owns', this.parent.getID());\n        return dropDown;\n    };\n    /**\n     * renderListDropDown method\n     *\n     * @param {IDropDownModel} args - specifies the the arguments.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    ToolbarRenderer.prototype.renderListDropDown = function (args) {\n        // eslint-disable-next-line\n        var proxy = this;\n        var css = CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN + ((this.parent.inlineMode) ? (' ' + CLS_INLINE_DROPDOWN) : '');\n        css += (' ' + ((args.itemName === 'NumberFormatList') ? CLS_NUMBERFORMATLIST_TB_BTN : CLS_BULLETFORMATLIST_TB_BTN));\n        var content = proxy.parent.createElement('span', { className: CLS_LIST_PRIMARY_CONTENT });\n        var inlineEle = proxy.parent.createElement('span', { className: args.cssClass });\n        content.appendChild(inlineEle);\n        var dropDown = new DropDownButton({\n            items: args.items,\n            cssClass: css,\n            content: args.content,\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            select: this.dropDownSelected.bind(this),\n            beforeOpen: function (args) {\n                if (proxy.parent.readonly || !proxy.parent.enabled) {\n                    args.cancel = true;\n                    return;\n                }\n                proxy.parent.notify(events.selectionRestore, {});\n                var element = (args.event) ? args.event.target : null;\n                proxy.currentElement = dropDown.element;\n                proxy.currentDropdown = dropDown;\n                if (args.event && args.event.type === 'click' && (element.classList.contains(CLS_LIST_PRIMARY_CONTENT)\n                    || element.parentElement.classList.contains(CLS_LIST_PRIMARY_CONTENT))) {\n                    args.cancel = true;\n                    return;\n                }\n                proxy.parent.notify(events.beforeDropDownOpen, args);\n            },\n            close: this.dropDownClose.bind(this),\n            open: this.dropDownOpen.bind(this),\n            beforeItemRender: this.beforeDropDownItemRender.bind(this)\n        });\n        dropDown.isStringTemplate = true;\n        dropDown.createElement = proxy.parent.createElement;\n        dropDown.appendTo(args.element);\n        args.element.tabIndex = -1;\n        args.element.setAttribute('role', 'button');\n        var popupElement = document.getElementById(dropDown.element.id + '-popup');\n        popupElement.setAttribute('aria-owns', this.parent.getID());\n        if (args.element.childElementCount === 1) {\n            dropDown.element.insertBefore(content, dropDown.element.querySelector('.e-caret'));\n        }\n        args.element.tabIndex = -1;\n        dropDown.element.removeAttribute('type');\n        dropDown.element.onmousedown = function () {\n            proxy.parent.notify(events.selectionSave, {});\n        };\n        dropDown.element.onkeydown = function () {\n            proxy.parent.notify(events.selectionSave, {});\n        };\n        return dropDown;\n    };\n    // eslint-disable-next-line\n    ToolbarRenderer.prototype.onPopupOverlay = function (args) {\n        if (!isNullOrUndefined(this.popupOverlay)) {\n            closest(this.popupOverlay, '.e-popup-container').style.display = 'none';\n            this.popupOverlay.style.display = 'none';\n            removeClass([this.popupOverlay], 'e-popup-overlay');\n        }\n    };\n    ToolbarRenderer.prototype.setIsModel = function (element) {\n        if (!closest(element, '.e-popup-container')) {\n            this.popupContainer = this.parent.createElement('div', {\n                className: 'e-rte-modal-popup e-popup-container e-center'\n            });\n            element.parentNode.insertBefore(this.popupContainer, element);\n            this.popupContainer.appendChild(element);\n            this.popupContainer.style.zIndex = element.style.zIndex;\n            this.popupContainer.style.display = 'flex';\n            element.style.position = 'relative';\n            addClass([element], 'e-popup-modal');\n            this.popupOverlay = this.parent.createElement('div', { className: 'e-popup-overlay' });\n            // eslint-disable-next-line\n            this.popupOverlay.style.zIndex = (parseInt(element.style.zIndex, null) - 1).toString();\n            this.popupOverlay.style.display = 'block';\n            this.popupContainer.appendChild(this.popupOverlay);\n            EventHandler.add(this.popupOverlay, 'click touchmove', this.onPopupOverlay, this);\n        }\n        else {\n            element.parentElement.style.display = 'flex';\n            this.popupOverlay = element.nextElementSibling;\n            this.popupOverlay.style.display = 'block';\n            addClass([this.popupOverlay], 'e-popup-overlay');\n        }\n    };\n    ToolbarRenderer.prototype.paletteSelection = function (dropDownArgs, currentElement) {\n        var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n        var colorbox = [].slice.call(selectAll('.e-tile', ele.parentElement));\n        removeClass(colorbox, 'e-selected');\n        var style = currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n        (colorbox.filter(function (colorbox) {\n            if (colorbox.style.backgroundColor === style) {\n                addClass([colorbox], 'e-selected');\n            }\n        }));\n    };\n    /**\n     * renderColorPickerDropDown method\n     *\n     * @param {IColorPickerModel} args - specifies the arguments.\n     * @param {string} item - specifies the item.\n     * @param {ColorPicker} colorPicker - specifies the colorpicker.\n     * @param {string} defaultColor -specifies the defaultColor.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    ToolbarRenderer.prototype.renderColorPickerDropDown = function (args, item, colorPicker, defaultColor) {\n        var _this = this;\n        // eslint-disable-next-line\n        var proxy = this;\n        var css = CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN + ((this.parent.inlineMode) ? (' ' + CLS_INLINE_DROPDOWN) : '');\n        css += (' ' + ((item === 'backgroundcolor') ? CLS_BACKGROUND_COLOR_DROPDOWN : CLS_FONT_COLOR_DROPDOWN));\n        css += ' ' + this.parent.cssClass;\n        var content = proxy.parent.createElement('span', { className: CLS_COLOR_CONTENT });\n        var inlineEle = proxy.parent.createElement('span', { className: args.cssClass });\n        var range;\n        var initialBackgroundColor = (isNullOrUndefined(defaultColor)) ? proxy.parent.backgroundColor.default : defaultColor;\n        inlineEle.style.borderBottomColor = (item === 'backgroundcolor') ?\n            initialBackgroundColor : proxy.parent.fontColor.default;\n        content.appendChild(inlineEle);\n        var dropDown = new DropDownButton({\n            target: colorPicker.element.parentElement, cssClass: css,\n            enablePersistence: this.parent.enablePersistence, enableRtl: this.parent.enableRtl,\n            beforeOpen: function (dropDownArgs) {\n                colorPicker.inline = true;\n                colorPicker.dataBind();\n                if (proxy.parent.readonly || !proxy.parent.enabled) {\n                    dropDownArgs.cancel = true;\n                    return;\n                }\n                var element = (dropDownArgs.event) ? dropDownArgs.event.target : null;\n                proxy.currentElement = dropDown.element;\n                proxy.currentDropdown = dropDown;\n                proxy.paletteSelection(dropDownArgs, proxy.currentElement);\n                if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT)\n                    || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n                    dropDownArgs.cancel = true;\n                    var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor :\n                        element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n                    proxy.parent.notify(events.selectionRestore, {});\n                    range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                    var parentNode = range.startContainer.parentNode;\n                    var closestElement = closest(range.startContainer.parentNode, 'table');\n                    if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' ||\n                        (closest(range.startContainer.parentNode, 'td,th')) ||\n                        (proxy.parent.iframeSettings.enable && !hasClass(parentNode.ownerDocument.querySelector('body'), 'e-lib')))\n                        && range.collapsed && args.subCommand === 'BackgroundColor' && closest(closestElement, '.' + classes.CLS_RTE)) {\n                        proxy.parent.notify(events.tableColorPickerChanged, {\n                            item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    else {\n                        proxy.parent.notify(events.colorPickerChanged, { item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    return;\n                }\n                else {\n                    var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n                    var inst = getInstance(ele, ColorPicker);\n                    inst.showButtons = (dropDownArgs.element.querySelector('.e-color-palette')) ? false : true;\n                    inst.dataBind();\n                }\n                dropDownArgs.element.onclick = function (args) {\n                    if (args.target.classList.contains('e-cancel')) {\n                        dropDown.toggle();\n                    }\n                };\n            },\n            open: function (dropDownArgs) {\n                _this.setColorPickerContentWidth(colorPicker);\n                var focusEle;\n                var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n                if (dropDownArgs.element.querySelector('.e-color-palette')) {\n                    focusEle = ele.parentElement.querySelector('.e-palette');\n                }\n                else {\n                    focusEle = ele.parentElement.querySelector('e-handler');\n                }\n                if (focusEle) {\n                    focusEle.focus();\n                }\n                if (Browser.isDevice) {\n                    _this.popupModal(dropDownArgs.element.parentElement);\n                }\n                _this.pickerRefresh(dropDownArgs);\n            },\n            beforeClose: function (dropDownArgs) {\n                var element = (dropDownArgs.event) ? dropDownArgs.event.target : null;\n                if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT)\n                    || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n                    var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor :\n                        element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n                    range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                    if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' ||\n                        closest(range.startContainer.parentNode, 'td,th')) && range.collapsed) {\n                        proxy.parent.notify(events.tableColorPickerChanged, { item: {\n                                command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue\n                            }\n                        });\n                    }\n                    else {\n                        proxy.parent.notify(events.colorPickerChanged, { item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    return;\n                }\n            },\n            close: function (dropDownArgs) {\n                proxy.parent.notify(events.selectionRestore, {});\n                var dropElement = closest(dropDownArgs.element.parentElement, '.e-popup-container');\n                if (dropElement) {\n                    dropElement.style.display = 'none';\n                    dropElement.lastElementChild.style.display = 'none';\n                    removeClass([dropElement.lastElementChild], 'e-popup-overlay');\n                }\n                if (Browser.isDevice && !isNullOrUndefined(dropElement)) {\n                    var popupEle = dropElement.querySelector('.e-dropdown-popup.e-tbar-btn.e-control');\n                    if (popupEle) {\n                        dropElement.parentNode.insertBefore(popupEle, dropElement.nextSibling);\n                        popupEle.style.removeProperty('position');\n                        removeClass([popupEle], 'e-popup-modal');\n                    }\n                    detach(dropElement);\n                    proxy.popupContainer = undefined;\n                }\n            }\n        });\n        dropDown.isStringTemplate = true;\n        dropDown.createElement = proxy.parent.createElement;\n        args.element.setAttribute('role', 'button');\n        dropDown.appendTo(args.element);\n        var popupElement = document.getElementById(dropDown.element.id + '-popup');\n        popupElement.setAttribute('aria-owns', this.parent.getID());\n        dropDown.element.insertBefore(content, dropDown.element.querySelector('.e-caret'));\n        args.element.tabIndex = -1;\n        dropDown.element.removeAttribute('type');\n        dropDown.element.onmousedown = function () {\n            proxy.parent.notify(events.selectionSave, {});\n        };\n        dropDown.element.onkeydown = function () {\n            proxy.parent.notify(events.selectionSave, {});\n        };\n        return dropDown;\n    };\n    ToolbarRenderer.prototype.pickerRefresh = function (dropDownArgs) {\n        if (this.parent.backgroundColor.mode === 'Picker') {\n            var popupElem = dropDownArgs.element.parentElement;\n            popupElem.style.width = (popupElem.offsetWidth + 5).toString() + 'px';\n            getInstance(popupElem, Popup).refreshPosition(popupElem);\n            popupElem.style.width = (popupElem.offsetWidth - 5).toString() + 'px';\n        }\n    };\n    ToolbarRenderer.prototype.popupModal = function (element) {\n        var popupInst = getInstance(element, Popup);\n        popupInst.relateTo = document.body;\n        popupInst.position = { X: 0, Y: 0 };\n        popupInst.targetType = 'container';\n        popupInst.collision = { X: 'fit', Y: 'fit' };\n        popupInst.offsetY = 4;\n        popupInst.dataBind();\n        this.setIsModel(element);\n    };\n    ToolbarRenderer.prototype.setColorPickerContentWidth = function (colorPicker) {\n        var colorPickerContent = colorPicker.element.nextSibling;\n        if (colorPickerContent.style.width === '0px') {\n            colorPickerContent.style.width = '';\n            var borderWidth = parseInt(getComputedStyle(colorPickerContent).borderBottomWidth, 10);\n            colorPickerContent.style.width = formatUnit(colorPickerContent.children[0].offsetWidth\n                + borderWidth + borderWidth);\n        }\n    };\n    /**\n     * renderColorPicker method\n     *\n     * @param {IColorPickerModel} args - specifies the arguments\n     * @param {string} item - specifies the string values\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    ToolbarRenderer.prototype.renderColorPicker = function (args, item) {\n        var _this = this;\n        // eslint-disable-next-line\n        var proxy = this;\n        var value;\n        var colorPicker = new ColorPicker({\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            inline: false,\n            value: '#fff',\n            created: function () {\n                var value = (item === 'backgroundcolor') ? proxy.parent.backgroundColor.default : proxy.parent.fontColor.default;\n                colorPicker.setProperties({ value: value });\n            },\n            mode: ((item === 'backgroundcolor') ? proxy.parent.backgroundColor.mode : proxy.parent.fontColor.mode),\n            modeSwitcher: ((item === 'backgroundcolor') ? proxy.parent.backgroundColor.modeSwitcher : proxy.parent.fontColor.modeSwitcher),\n            beforeTileRender: function (args) {\n                args.element.classList.add(CLS_COLOR_PALETTE);\n                args.element.classList.add(CLS_CUSTOM_TILE);\n                if (!isNullOrUndefined(_this.parent.cssClass)) {\n                    var allClassName = _this.parent.cssClass.split(' ');\n                    for (var i = 0; i < allClassName.length; i++) {\n                        if (allClassName[i].trim() !== '') {\n                            args.element.classList.add(allClassName[i]);\n                        }\n                    }\n                }\n                if (args.value === '') {\n                    args.element.classList.add(CLS_NOCOLOR_ITEM);\n                }\n            },\n            change: function (colorPickerArgs) {\n                var colorpickerValue = colorPickerArgs.currentValue.rgba;\n                colorPickerArgs.item = {\n                    command: args.command,\n                    subCommand: args.subCommand,\n                    value: colorpickerValue\n                };\n                proxy.parent.notify(events.selectionRestore, {});\n                proxy.currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor = colorpickerValue;\n                var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                var closestElement = closest(range.startContainer.parentNode, 'table');\n                if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' || range.startContainer.nodeName === 'BODY' ||\n                    closest(range.startContainer.parentNode, 'td,th')) && range.collapsed && args.subCommand === 'BackgroundColor' && closest(closestElement, '.' + classes.CLS_RTE)) {\n                    proxy.parent.notify(events.tableColorPickerChanged, colorPickerArgs);\n                }\n                else {\n                    proxy.parent.notify(events.colorPickerChanged, colorPickerArgs);\n                }\n                proxy.currentDropdown.toggle();\n            },\n            beforeModeSwitch: function (args) {\n                value = colorPicker.value;\n                if (value === '') {\n                    colorPicker.setProperties({ value: ((args.mode === 'Picker') ? '#008000ff' : '') }, true);\n                }\n                colorPicker.showButtons = args.mode === 'Palette' ? false : true;\n            }\n        });\n        colorPicker.isStringTemplate = true;\n        colorPicker.columns = (item === 'backgroundcolor') ? this.parent.backgroundColor.columns : this.parent.fontColor.columns;\n        colorPicker.presetColors = (item === 'backgroundcolor') ? this.parent.backgroundColor.colorCode :\n            this.parent.fontColor.colorCode;\n        colorPicker.cssClass = ((item === 'backgroundcolor') ? CLS_BACKGROUND_COLOR_PICKER : CLS_FONT_COLOR_PICKER) + ' ' + args.cssClass;\n        colorPicker.createElement = this.parent.createElement;\n        colorPicker.appendTo(document.getElementById(args.target));\n        return colorPicker;\n    };\n    /**\n     * The function is used to render Rich Text Editor toolbar\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    ToolbarRenderer.prototype.renderPanel = function () {\n        this.getPanel().classList.add(CLS_TOOLBAR);\n    };\n    /**\n     * Get the toolbar element of RichTextEditor\n     *\n     * @returns {Element} - specifies the element.\n     * @hidden\n     * @deprecated\n     */\n    ToolbarRenderer.prototype.getPanel = function () {\n        return this.toolbarPanel;\n    };\n    /**\n     * Set the toolbar element of RichTextEditor\n     *\n     * @returns {void}\n     * @param  {Element} panel - specifies the element.\n     * @hidden\n     * @deprecated\n     */\n    ToolbarRenderer.prototype.setPanel = function (panel) {\n        this.toolbarPanel = panel;\n    };\n    return ToolbarRenderer;\n}());\nexport { ToolbarRenderer };\n","import { RenderType } from '../base/enum';\nimport { CLS_HR_SEPARATOR } from '../base/classes';\nimport * as events from '../base/constant';\nimport { getTooltipText, isIDevice, toObjectLowerCase } from '../base/util';\nimport { tools, templateItems, windowKeys } from '../models/items';\nimport { isNullOrUndefined, extend, Browser } from '@syncfusion/ej2-base';\n/**\n * `Toolbar` module is used to handle Toolbar actions.\n */\nvar BaseToolbar = /** @class */ (function () {\n    function BaseToolbar(parent, serviceLocator) {\n        this.tools = {};\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.addEventListener();\n        if (this.parent.toolbarSettings && Object.keys(this.parent.toolbarSettings.itemConfigs).length > 0) {\n            extend(this.tools, tools, toObjectLowerCase(this.parent.toolbarSettings.itemConfigs), true);\n        }\n        else {\n            this.tools = tools;\n        }\n    }\n    BaseToolbar.prototype.addEventListener = function () {\n        this.parent.on(events.rtlMode, this.setRtl, this);\n        this.parent.on(events.bindCssClass, this.setCssClass, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    BaseToolbar.prototype.removeEventListener = function () {\n        this.parent.off(events.rtlMode, this.setRtl);\n        this.parent.off(events.bindCssClass, this.setCssClass);\n        this.parent.off(events.destroy, this.removeEventListener);\n    };\n    BaseToolbar.prototype.setCssClass = function (e) {\n        if (!isNullOrUndefined(this.toolbarObj)) {\n            if (isNullOrUndefined(e.oldCssClass)) {\n                this.toolbarObj.setProperties({ cssClass: (this.toolbarObj.cssClass + ' ' + e.cssClass).trim() });\n            }\n            else {\n                this.toolbarObj.setProperties({ cssClass: (this.toolbarObj.cssClass.replace(e.oldCssClass, '').trim() + ' ' + e.cssClass).trim() });\n            }\n        }\n    };\n    BaseToolbar.prototype.setRtl = function (args) {\n        if (!isNullOrUndefined(this.toolbarObj)) {\n            this.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n    };\n    BaseToolbar.prototype.getClass = function (item) {\n        var classes;\n        switch (item) {\n            case 'fontsize':\n                classes = 'e-rte-inline-size-template';\n                break;\n            case 'fontcolor':\n            case 'backgroundcolor':\n                classes = 'e-rte-inline-color-template';\n                break;\n            default:\n                classes = 'e-rte-inline-template';\n                break;\n        }\n        return classes;\n    };\n    BaseToolbar.prototype.getTemplateObject = function (itemStr, container) {\n        var tagName;\n        switch (itemStr) {\n            case 'fontcolor':\n            case 'backgroundcolor':\n            case 'numberformatlist':\n            case 'bulletformatlist':\n                tagName = 'span';\n                break;\n            default:\n                tagName = 'button';\n                break;\n        }\n        return {\n            command: this.tools[itemStr.toLocaleLowerCase()].command,\n            subCommand: this.tools[itemStr.toLocaleLowerCase()].subCommand,\n            template: this.parent.createElement(tagName, {\n                id: this.parent.getID() + '_' + container\n                    + '_' + this.tools[itemStr.toLocaleLowerCase()].id\n            }).outerHTML,\n            cssClass: this.parent.inlineMode.enable ? this.getClass(itemStr) : '',\n            tooltipText: getTooltipText(itemStr, this.locator)\n        };\n    };\n    /**\n     * getObject method\n     *\n     * @param {string} item - specifies the string value\n     * @param {string} container - specifies the value of string\n     * @returns {IToolbarItemModel} - returns the model element\n     * @hidden\n     * @deprecated\n     */\n    BaseToolbar.prototype.getObject = function (item, container) {\n        var itemStr = item.toLowerCase();\n        if (templateItems.indexOf(itemStr) !== -1) {\n            return this.getTemplateObject(itemStr, container);\n        }\n        else {\n            switch (itemStr) {\n                case '|':\n                    return { type: 'Separator' };\n                case '-':\n                    return { type: 'Separator', cssClass: CLS_HR_SEPARATOR };\n                default:\n                    if (this.parent.showTooltip) {\n                        return {\n                            id: this.parent.getID() + '_' + container + '_' + this.tools[itemStr.toLocaleLowerCase()].id,\n                            prefixIcon: this.tools[itemStr.toLocaleLowerCase()].icon,\n                            tooltipText: getTooltipText(itemStr, this.locator),\n                            command: this.tools[itemStr.toLocaleLowerCase()].command,\n                            subCommand: this.tools[itemStr.toLocaleLowerCase()].subCommand\n                        };\n                    }\n                    else {\n                        return {\n                            id: this.parent.getID() + '_' + container + '_' + this.tools[itemStr.toLocaleLowerCase()].id,\n                            prefixIcon: this.tools[itemStr.toLocaleLowerCase()].icon,\n                            command: this.tools[itemStr.toLocaleLowerCase()].command,\n                            subCommand: this.tools[itemStr.toLocaleLowerCase()].subCommand\n                        };\n                    }\n            }\n        }\n    };\n    /**\n     * @param {string} tbItems - specifies the string value\n     * @param {string} container - specifies the container value\n     * @returns {ItemModel} - retunrs the model element\n     * @hidden\n     * @deprecated\n     */\n    BaseToolbar.prototype.getItems = function (tbItems, container) {\n        var _this = this;\n        if (this.parent.toolbarSettings.items.length < 1) {\n            return [];\n        }\n        var items = [];\n        var _loop_1 = function (item) {\n            switch (typeof item) {\n                case 'string':\n                    items.push(this_1.getObject(item, container));\n                    break;\n                default:\n                    if (!isNullOrUndefined(item.click)) {\n                        var proxy_1 = item;\n                        var callback_1 = proxy_1.click;\n                        proxy_1.click = function () {\n                            if (proxy_1.undo && _this.parent.formatter.getUndoRedoStack().length === 0) {\n                                _this.parent.formatter.saveData();\n                            }\n                            callback_1.call(_this);\n                            var currentContentElem = _this.parent.createElement('div');\n                            currentContentElem.appendChild(_this.parent.formatter.getUndoRedoStack()[_this.parent.formatter.getUndoRedoStack().length - 1].text);\n                            if (currentContentElem.innerHTML.trim() === _this.parent.inputElement.innerHTML.trim()) {\n                                return;\n                            }\n                            if (proxy_1.undo) {\n                                _this.parent.formatter.saveData();\n                            }\n                        };\n                    }\n                    items.push(item);\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, tbItems_1 = tbItems; _i < tbItems_1.length; _i++) {\n            var item = tbItems_1[_i];\n            _loop_1(item);\n        }\n        for (var num = 0; num < items.length; num++) {\n            var tooltipText = items[num].tooltipText;\n            var shortCutKey = void 0;\n            if (windowKeys[\"\" + tooltipText]) {\n                shortCutKey = Browser.isDevice && isIDevice() ? windowKeys[\"\" + tooltipText].replace('Ctrl', 'Cmd') : windowKeys[\"\" + tooltipText];\n            }\n            else {\n                shortCutKey = tooltipText;\n            }\n            if (shortCutKey) {\n                items[num].tooltipText = (tooltipText !== shortCutKey) ? tooltipText + ' (' + shortCutKey + ')' : tooltipText;\n            }\n        }\n        return items;\n    };\n    BaseToolbar.prototype.getToolbarOptions = function (args) {\n        return {\n            target: args.target,\n            rteToolbarObj: this,\n            items: this.getItems(args.items, args.container),\n            overflowMode: args.mode,\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            cssClass: args.cssClass\n        };\n    };\n    /**\n     * render method\n     *\n     * @param {IToolbarRenderOptions} args - specifies the toolbar options\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    BaseToolbar.prototype.render = function (args) {\n        this.toolbarRenderer = this.renderFactory.getRenderer(RenderType.Toolbar);\n        this.toolbarRenderer.renderToolbar(this.getToolbarOptions(args));\n    };\n    return BaseToolbar;\n}());\nexport { BaseToolbar };\n","import { addClass, isNullOrUndefined, removeClass, select, closest } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\nimport { getIndex } from '../base/util';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { getDropDownValue, getFormattedFontSize, getTooltipText } from '../base/util';\nimport * as model from '../models/items';\nimport { dispatchEvent } from '../base/util';\n/**\n * `Toolbar` module is used to handle Toolbar actions.\n */\nvar DropDownButtons = /** @class */ (function () {\n    function DropDownButtons(parent, serviceLocator) {\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    DropDownButtons.prototype.initializeInstance = function () {\n        this.toolbarRenderer = this.renderFactory.getRenderer(RenderType.Toolbar);\n    };\n    DropDownButtons.prototype.beforeRender = function (args) {\n        var item = args.item;\n        if (item.cssClass) {\n            addClass([args.element], item.cssClass);\n        }\n        if (item.command === 'Alignments' || item.subCommand === 'JustifyLeft'\n            || item.subCommand === 'JustifyRight' || item.subCommand === 'JustifyCenter') {\n            args.element.setAttribute('title', getTooltipText(item.subCommand.toLocaleLowerCase(), this.locator));\n        }\n    };\n    DropDownButtons.prototype.dropdownContent = function (width, type, content) {\n        return ('<span style=\"display: inline-flex;' + 'width:' + ((type === 'quick') ? 'auto' : width) + '\" >' +\n            '<span class=\"e-rte-dropdown-btn-text\">' + content + '</span></span>');\n    };\n    /**\n     * renderDropDowns method\n     *\n     * @param {IDropDownRenderArgs} args - specifies the arguments\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    DropDownButtons.prototype.renderDropDowns = function (args) {\n        var _this = this;\n        this.initializeInstance();\n        var type = args.containerType;\n        var tbElement = args.container;\n        model.templateItems.forEach(function (item) {\n            var targetElement = undefined;\n            if (getIndex(item, args.items) !== -1) {\n                switch (item) {\n                    case 'numberformatlist': {\n                        targetElement = select('#' + _this.parent.getID() + '_' + type + '_NumberFormatList', tbElement);\n                        if (isNullOrUndefined(targetElement) || targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n                            return;\n                        }\n                        var formatOLItem = _this.parent.numberFormatList.types.slice();\n                        formatOLItem.forEach(function (item) {\n                            Object.defineProperties(item, {\n                                command: { value: 'Lists', enumerable: true }, subCommand: { value: 'NumberFormatList', enumerable: true }\n                            });\n                        });\n                        _this.numberFormatListDropDown = _this.toolbarRenderer.renderListDropDown({\n                            cssClass: 'e-order-list' + ' ' + classes.CLS_RTE_ELEMENTS + ' ' + classes.CLS_ICONS,\n                            itemName: 'NumberFormatList', items: formatOLItem, element: targetElement\n                        });\n                        break;\n                    }\n                    case 'bulletformatlist': {\n                        targetElement = select('#' + _this.parent.getID() + '_' + type + '_BulletFormatList', tbElement);\n                        if (isNullOrUndefined(targetElement) || targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n                            return;\n                        }\n                        var formatULItem = _this.parent.bulletFormatList.types.slice();\n                        formatULItem.forEach(function (item) {\n                            Object.defineProperties(item, {\n                                command: { value: 'Lists', enumerable: true }, subCommand: { value: 'BulletFormatList', enumerable: true }\n                            });\n                        });\n                        _this.bulletFormatListDropDown = _this.toolbarRenderer.renderListDropDown({\n                            cssClass: 'e-unorder-list' + ' ' + classes.CLS_RTE_ELEMENTS + ' ' + classes.CLS_ICONS,\n                            itemName: 'BulletFormatList', items: formatULItem, element: targetElement\n                        });\n                        break;\n                    }\n                    case 'formats': {\n                        targetElement = select('#' + _this.parent.getID() + '_' + type + '_Formats', tbElement);\n                        if (isNullOrUndefined(targetElement) || targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n                            return;\n                        }\n                        var formatItem = _this.parent.format.types.slice();\n                        formatItem.forEach(function (item) {\n                            Object.defineProperties(item, {\n                                command: { value: 'Formats', enumerable: true }, subCommand: { value: item.value, enumerable: true }\n                            });\n                        });\n                        var formatContent = isNullOrUndefined(_this.parent.format.default) ? formatItem[0].text :\n                            _this.parent.format.default;\n                        _this.formatDropDown = _this.toolbarRenderer.renderDropDownButton({\n                            iconCss: ((type === 'quick') ? 'e-formats e-icons' : ''),\n                            content: _this.dropdownContent(_this.parent.format.width, type, ((type === 'quick') ? '' : getDropDownValue(formatItem, formatContent, 'text', 'text'))),\n                            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_FORMATS_TB_BTN,\n                            itemName: 'Formats', items: formatItem, element: targetElement\n                        });\n                        break;\n                    }\n                    case 'fontname': {\n                        targetElement = select('#' + _this.parent.getID() + '_' + type + '_FontName', tbElement);\n                        if (isNullOrUndefined(targetElement) || targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n                            return;\n                        }\n                        var fontItem = _this.parent.fontFamily.items.slice();\n                        fontItem.forEach(function (item) {\n                            Object.defineProperties(item, {\n                                command: { value: 'Font', enumerable: true }, subCommand: { value: 'FontName', enumerable: true }\n                            });\n                        });\n                        var fontNameContent = isNullOrUndefined(_this.parent.fontFamily.default) ? fontItem[0].text :\n                            _this.parent.fontFamily.default;\n                        _this.fontNameDropDown = _this.toolbarRenderer.renderDropDownButton({\n                            iconCss: ((type === 'quick') ? 'e-font-name e-icons' : ''),\n                            content: _this.dropdownContent(_this.parent.fontFamily.width, type, ((type === 'quick') ? '' : getDropDownValue(fontItem, fontNameContent, 'text', 'text'))),\n                            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_FONT_NAME_TB_BTN,\n                            itemName: 'FontName', items: fontItem, element: targetElement\n                        });\n                        if (!isNullOrUndefined(_this.parent.fontFamily.default)) {\n                            _this.getEditNode().style.fontFamily = _this.parent.fontFamily.default;\n                        }\n                        break;\n                    }\n                    case 'fontsize': {\n                        targetElement = select('#' + _this.parent.getID() + '_' + type + '_FontSize', tbElement);\n                        if (isNullOrUndefined(targetElement) || targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n                            return;\n                        }\n                        var fontsize = _this.parent.fontSize.items.slice();\n                        fontsize.forEach(function (item) {\n                            Object.defineProperties(item, {\n                                command: { value: 'Font', enumerable: true }, subCommand: { value: 'FontSize', enumerable: true }\n                            });\n                        });\n                        var fontSizeContent = isNullOrUndefined(_this.parent.fontSize.default) ? fontsize[1].text :\n                            _this.parent.fontSize.default;\n                        _this.fontSizeDropDown = _this.toolbarRenderer.renderDropDownButton({\n                            content: _this.dropdownContent(_this.parent.fontSize.width, type, getFormattedFontSize(getDropDownValue(fontsize, fontSizeContent.replace(/\\s/g, ''), 'value', 'text'))),\n                            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_FONT_SIZE_TB_BTN,\n                            itemName: 'FontSize', items: fontsize, element: targetElement\n                        });\n                        if (!isNullOrUndefined(_this.parent.fontSize.default)) {\n                            _this.getEditNode().style.fontSize = _this.parent.fontSize.default;\n                        }\n                        break;\n                    }\n                    case 'alignments':\n                        targetElement = select('#' + _this.parent.getID() + '_' + type + '_Alignments', tbElement);\n                        if (isNullOrUndefined(targetElement) || targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n                            return;\n                        }\n                        _this.alignDropDown = _this.toolbarRenderer.renderDropDownButton({\n                            iconCss: 'e-justify-left e-icons',\n                            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_ALIGN_TB_BTN,\n                            itemName: 'Alignments', items: model.alignmentItems, element: targetElement\n                        });\n                        break;\n                    case 'align':\n                    case 'videoalign':\n                        _this.renderAlignmentDropDown(type, tbElement, targetElement, item);\n                        break;\n                    case 'display':\n                    case 'audiolayoutoption':\n                    case 'videolayoutoption':\n                        _this.renderDisplayDropDown(type, tbElement, targetElement, item);\n                        break;\n                    case 'tablerows':\n                        _this.rowDropDown(type, tbElement, targetElement);\n                        break;\n                    case 'tablecolumns':\n                        _this.columnDropDown(type, tbElement, targetElement);\n                        break;\n                    case 'tablecell':\n                        _this.cellDropDown(type, tbElement, targetElement);\n                        break;\n                    case 'tablecellverticalalign':\n                        _this.verticalAlignDropDown(type, tbElement, targetElement);\n                        break;\n                    case 'styles':\n                        _this.tableStylesDropDown(type, tbElement, targetElement);\n                        break;\n                }\n            }\n        });\n        if (this.parent.inlineMode.enable) {\n            this.setCssClass({ cssClass: this.parent.cssClass });\n        }\n    };\n    DropDownButtons.prototype.getUpdateItems = function (items, value) {\n        var dropDownItems = items.slice();\n        dropDownItems.forEach(function (item) {\n            Object.defineProperties(item, {\n                command: { value: (value === 'Format' ? 'Formats' : 'Font'), enumerable: true },\n                subCommand: { value: (value === 'Format' ? item.value : value), enumerable: true }\n            });\n        });\n        return dropDownItems;\n    };\n    DropDownButtons.prototype.onPropertyChanged = function (model) {\n        var newProp = model.newProp;\n        var type;\n        var content;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'fontFamily':\n                    if (this.fontNameDropDown) {\n                        for (var _b = 0, _c = Object.keys(newProp.fontFamily); _b < _c.length; _b++) {\n                            var fontFamily = _c[_b];\n                            switch (fontFamily) {\n                                case 'default':\n                                case 'width': {\n                                    var fontItems = this.fontNameDropDown.items;\n                                    type = !isNullOrUndefined(closest(this.fontNameDropDown.element, '.' + classes.CLS_QUICK_TB)) ?\n                                        'quick' : 'toolbar';\n                                    var fontNameContent = isNullOrUndefined(this.parent.fontFamily.default) ? fontItems[0].text :\n                                        this.parent.fontFamily.default;\n                                    content = this.dropdownContent(this.parent.fontFamily.width, type, ((type === 'quick') ? '' : getDropDownValue(fontItems, fontNameContent, 'text', 'text')));\n                                    this.fontNameDropDown.setProperties({ content: content });\n                                    if (!isNullOrUndefined(this.parent.fontFamily.default)) {\n                                        this.getEditNode().style.fontFamily = this.parent.fontFamily.default;\n                                    }\n                                    else {\n                                        this.getEditNode().style.removeProperty('font-family');\n                                    }\n                                    break;\n                                }\n                                case 'items':\n                                    this.fontNameDropDown.setProperties({\n                                        items: this.getUpdateItems(newProp.fontFamily.items, 'FontName')\n                                    });\n                                    break;\n                            }\n                        }\n                    }\n                    break;\n                case 'fontSize':\n                    if (this.fontSizeDropDown) {\n                        for (var _d = 0, _e = Object.keys(newProp.fontSize); _d < _e.length; _d++) {\n                            var fontSize = _e[_d];\n                            switch (fontSize) {\n                                case 'default':\n                                case 'width': {\n                                    var fontsize = this.fontSizeDropDown.items;\n                                    type = !isNullOrUndefined(closest(this.fontSizeDropDown.element, '.' + classes.CLS_QUICK_TB)) ? 'quick' : 'toolbar';\n                                    var fontSizeContent = isNullOrUndefined(this.parent.fontSize.default) ? fontsize[1].text :\n                                        this.parent.fontSize.default;\n                                    content = this.dropdownContent(this.parent.fontSize.width, type, getFormattedFontSize(getDropDownValue(fontsize, fontSizeContent.replace(/\\s/g, ''), 'value', 'text')));\n                                    this.fontSizeDropDown.setProperties({ content: content });\n                                    if (!isNullOrUndefined(this.parent.fontSize.default)) {\n                                        this.getEditNode().style.fontSize = this.parent.fontSize.default;\n                                    }\n                                    else {\n                                        this.getEditNode().style.removeProperty('font-size');\n                                    }\n                                    break;\n                                }\n                                case 'items':\n                                    this.fontSizeDropDown.setProperties({\n                                        items: this.getUpdateItems(newProp.fontSize.items, 'FontSize')\n                                    });\n                                    break;\n                            }\n                        }\n                    }\n                    break;\n                case 'format':\n                    if (this.formatDropDown) {\n                        for (var _f = 0, _g = Object.keys(newProp.format); _f < _g.length; _f++) {\n                            var format = _g[_f];\n                            switch (format) {\n                                case 'default':\n                                case 'width': {\n                                    var formatItems = this.formatDropDown.items;\n                                    type = !isNullOrUndefined(closest(this.formatDropDown.element, '.' + classes.CLS_QUICK_TB)) ? 'quick' : 'toolbar';\n                                    var formatContent = isNullOrUndefined(this.parent.format.default) ? formatItems[0].text :\n                                        this.parent.format.default;\n                                    content = this.dropdownContent(this.parent.format.width, type, ((type === 'quick') ? '' : getDropDownValue(formatItems, formatContent, 'text', 'text')));\n                                    this.formatDropDown.setProperties({ content: content });\n                                    break;\n                                }\n                                case 'types':\n                                    this.formatDropDown.setProperties({\n                                        items: this.getUpdateItems(newProp.format.types, 'Format')\n                                    });\n                                    break;\n                            }\n                        }\n                    }\n                    break;\n            }\n        }\n    };\n    DropDownButtons.prototype.getEditNode = function () {\n        return this.parent.contentModule.getEditPanel();\n    };\n    DropDownButtons.prototype.rowDropDown = function (type, tbElement, targetElement) {\n        targetElement = select('#' + this.parent.getID() + '_' + type + '_TableRows', tbElement);\n        if (targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n            return;\n        }\n        this.tableRowsDropDown = this.toolbarRenderer.renderDropDownButton({\n            iconCss: 'e-table-rows e-icons',\n            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_QUICK_DROPDOWN,\n            itemName: 'TableRows',\n            items: model.tableRowsItems,\n            element: targetElement\n        });\n    };\n    DropDownButtons.prototype.columnDropDown = function (type, tbElement, targetElement) {\n        targetElement = select('#' + this.parent.getID() + '_' + type + '_TableColumns', tbElement);\n        if (targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n            return;\n        }\n        this.tableColumnsDropDown = this.toolbarRenderer.renderDropDownButton({\n            iconCss: 'e-table-columns e-icons',\n            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_QUICK_DROPDOWN,\n            itemName: 'TableColumns',\n            items: model.tableColumnsItems,\n            element: targetElement\n        });\n    };\n    DropDownButtons.prototype.cellDropDown = function (type, tbElement, targetElement) {\n        targetElement = select('#' + this.parent.getID() + '_' + type + '_TableCell', tbElement);\n        if (targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n            return;\n        }\n        this.tableRowsDropDown = this.toolbarRenderer.renderDropDownButton({\n            iconCss: 'e-table-cell e-icons',\n            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_QUICK_DROPDOWN,\n            itemName: 'TableCell',\n            items: model.tableCellItems,\n            element: targetElement\n        });\n    };\n    DropDownButtons.prototype.verticalAlignDropDown = function (type, tbElement, targetElement) {\n        targetElement = select('#' + this.parent.getID() + '_' + type + '_TableCellVerticalAlign', tbElement);\n        if (targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n            return;\n        }\n        this.tableCellVerticalAlignDropDown = this.toolbarRenderer.renderDropDownButton({\n            iconCss: 'e-table-cell-ver-align e-icons',\n            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_QUICK_DROPDOWN,\n            itemName: 'TableCellVerticalAlign',\n            items: model.TableCellVerticalAlignItems,\n            element: targetElement\n        });\n    };\n    DropDownButtons.prototype.renderDisplayDropDown = function (type, tbElement, targetElement, item) {\n        targetElement = select('#' + this.parent.getID() + '_' + type + (item === 'display' ? '_Display' : item === 'videolayoutoption' ? '_VideoLayoutOption' : '_AudioLayoutOption'), tbElement);\n        if (targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n            return;\n        }\n        this.displayDropDown = this.toolbarRenderer.renderDropDownButton({\n            iconCss: item === 'display' ? 'e-display e-icons' : item === 'videolayoutoption' ? 'e-video-display e-icons' : 'e-audio-display e-icons',\n            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_QUICK_DROPDOWN,\n            itemName: item === 'display' ? 'Display' : item === 'videolayoutoption' ? 'VideoLayoutOption' : 'AudioLayoutOption',\n            items: item === 'display' ? model.imageDisplayItems : item === 'videolayoutoption' ? model.videoLayoutOptionItems : model.audioLayoutOptionItems,\n            element: targetElement\n        });\n    };\n    DropDownButtons.prototype.renderAlignmentDropDown = function (type, tbElement, targetElement, item) {\n        targetElement = select('#' + this.parent.getID() + '_' + type + (item === 'align' ? '_Align' : '_VideoAlign'), tbElement);\n        if (targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n            return;\n        }\n        this.imageAlignDropDown = this.toolbarRenderer.renderDropDownButton({\n            iconCss: 'e-justify-left e-icons',\n            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ICONS + ' ' + classes.CLS_QUICK_DROPDOWN,\n            itemName: item === 'align' ? 'Align' : 'VideoAlign',\n            items: item === 'align' ? model.imageAlignItems : model.videoAlignItems,\n            element: targetElement\n        });\n    };\n    DropDownButtons.prototype.tableStylesDropDown = function (type, tbElement, targetElement) {\n        targetElement = select('#' + this.parent.getID() + '_' + type + '_Styles', tbElement);\n        if (targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n            return;\n        }\n        this.imageAlignDropDown = this.toolbarRenderer.renderDropDownButton({\n            iconCss: 'e-style e-icons',\n            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ICONS + ' ' + classes.CLS_QUICK_DROPDOWN,\n            itemName: 'Styles',\n            items: this.parent.tableSettings.styles,\n            element: targetElement\n        });\n    };\n    DropDownButtons.prototype.removeDropDownClasses = function (target) {\n        removeClass([target], [\n            classes.CLS_DROPDOWN_BTN,\n            classes.CLS_DROPDOWN_POPUP,\n            classes.CLS_DROPDOWN_ICONS,\n            classes.CLS_DROPDOWN_ITEMS\n        ]);\n    };\n    /**\n     * destroyDropDowns method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    DropDownButtons.prototype.destroyDropDowns = function () {\n        if (this.formatDropDown) {\n            this.removeDropDownClasses(this.formatDropDown.element);\n            this.formatDropDown.destroy();\n        }\n        if (this.fontNameDropDown) {\n            this.removeDropDownClasses(this.fontNameDropDown.element);\n            this.fontNameDropDown.destroy();\n        }\n        if (this.fontSizeDropDown) {\n            this.removeDropDownClasses(this.fontSizeDropDown.element);\n            this.fontSizeDropDown.destroy();\n        }\n        if (this.alignDropDown) {\n            this.removeDropDownClasses(this.alignDropDown.element);\n            this.alignDropDown.destroy();\n        }\n        if (this.imageAlignDropDown) {\n            this.removeDropDownClasses(this.imageAlignDropDown.element);\n            this.imageAlignDropDown.destroy();\n        }\n        if (this.displayDropDown) {\n            this.removeDropDownClasses(this.displayDropDown.element);\n            this.displayDropDown.destroy();\n        }\n        if (this.tableRowsDropDown) {\n            this.removeDropDownClasses(this.tableRowsDropDown.element);\n            this.tableRowsDropDown.destroy();\n        }\n        if (this.tableColumnsDropDown) {\n            this.removeDropDownClasses(this.tableColumnsDropDown.element);\n            this.tableColumnsDropDown.destroy();\n        }\n        if (this.tableCellVerticalAlignDropDown) {\n            this.removeDropDownClasses(this.tableCellVerticalAlignDropDown.element);\n            this.tableCellVerticalAlignDropDown.destroy();\n        }\n        if (this.numberFormatListDropDown) {\n            this.removeDropDownClasses(this.numberFormatListDropDown.element);\n            this.numberFormatListDropDown.destroy();\n        }\n        if (this.bulletFormatListDropDown) {\n            this.removeDropDownClasses(this.bulletFormatListDropDown.element);\n            this.bulletFormatListDropDown.destroy();\n        }\n    };\n    DropDownButtons.prototype.setRtl = function (args) {\n        if (this.formatDropDown) {\n            this.formatDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.fontNameDropDown) {\n            this.fontNameDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.fontSizeDropDown) {\n            this.fontSizeDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.alignDropDown) {\n            this.alignDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.imageAlignDropDown) {\n            this.imageAlignDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.displayDropDown) {\n            this.displayDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.numberFormatListDropDown) {\n            this.numberFormatListDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.bulletFormatListDropDown) {\n            this.bulletFormatListDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n    };\n    DropDownButtons.prototype.updateCss = function (dropDownObj, e) {\n        if (dropDownObj && e.cssClass) {\n            if (isNullOrUndefined(e.oldCssClass)) {\n                dropDownObj.setProperties({ cssClass: (dropDownObj.cssClass + ' ' + e.cssClass).trim() });\n            }\n            else {\n                dropDownObj.setProperties({ cssClass: (dropDownObj.cssClass.replace(e.oldCssClass, '').trim() + ' ' + e.cssClass).trim() });\n            }\n        }\n    };\n    DropDownButtons.prototype.setCssClass = function (e) {\n        var dropDownObj = [\n            this.formatDropDown, this.fontNameDropDown, this.fontSizeDropDown, this.alignDropDown, this.imageAlignDropDown,\n            this.displayDropDown, this.numberFormatListDropDown, this.bulletFormatListDropDown, this.tableRowsDropDown,\n            this.tableColumnsDropDown, this.tableCellVerticalAlignDropDown\n        ];\n        for (var i = 0; i < dropDownObj.length; i++) {\n            this.updateCss(dropDownObj[i], e);\n        }\n    };\n    DropDownButtons.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.beforeDropDownItemRender, this.beforeRender, this);\n        this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n        this.parent.on(events.rtlMode, this.setRtl, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.bindCssClass, this.setCssClass, this);\n    };\n    DropDownButtons.prototype.onIframeMouseDown = function () {\n        dispatchEvent(document, 'mousedown');\n    };\n    DropDownButtons.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n        this.parent.off(events.rtlMode, this.setRtl);\n        this.parent.off(events.beforeDropDownItemRender, this.beforeRender);\n        this.parent.off(events.destroy, this.removeEventListener);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        this.parent.off(events.bindCssClass, this.setCssClass);\n    };\n    return DropDownButtons;\n}());\nexport { DropDownButtons };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * ServiceLocator\n *\n * @hidden\n * @deprecated\n */\nvar ServiceLocator = /** @class */ (function () {\n    function ServiceLocator() {\n        this.services = {};\n    }\n    /* eslint-disable */\n    /**\n     * register method\n     *\n     * @param {string} name - specifies the name.\n     * @param {T} type - specifies the type.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    /* eslint-enable */\n    ServiceLocator.prototype.register = function (name, type) {\n        if (isNullOrUndefined(this.services[\"\" + name])) {\n            this.services[\"\" + name] = type;\n        }\n    };\n    /**\n     * getService method\n     *\n     * @param {string} name - specifies the name.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    ServiceLocator.prototype.getService = function (name) {\n        if (isNullOrUndefined(this.services[\"\" + name])) {\n            // eslint-disable-next-line\n            throw \"The service \" + name + \" is not registered\";\n        }\n        return this.services[\"\" + name];\n    };\n    return ServiceLocator;\n}());\nexport { ServiceLocator };\n","import { isNullOrUndefined, getEnumValue } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\n/**\n * RendererFactory\n *\n * @hidden\n * @deprecated\n */\nvar RendererFactory = /** @class */ (function () {\n    function RendererFactory() {\n        this.rendererMap = {};\n    }\n    /**\n     * addRenderer method\n     *\n     * @param {RenderType} name - specifies the render type\n     * @param {IRenderer} type - specifies the renderer.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    RendererFactory.prototype.addRenderer = function (name, type) {\n        var rName = getEnumValue(RenderType, name);\n        if (isNullOrUndefined(this.rendererMap[\"\" + rName])) {\n            this.rendererMap[\"\" + rName] = type;\n        }\n    };\n    /**\n     * getRenderer method\n     *\n     * @param {RenderType} name - specifies the render type\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    RendererFactory.prototype.getRenderer = function (name) {\n        var rName = getEnumValue(RenderType, name);\n        if (isNullOrUndefined(this.rendererMap[\"\" + rName])) {\n            // eslint-disable-next-line\n            throw \"The renderer \" + rName + \" is not found\";\n        }\n        else {\n            return this.rendererMap[\"\" + rName];\n        }\n    };\n    return RendererFactory;\n}());\nexport { RendererFactory };\n","import { isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { ServiceLocator } from '../services/service-locator';\nimport { RendererFactory } from '../services/renderer-factory';\n/**\n * `ToolbarAction` module is used to toolbar click action\n */\nvar ToolbarAction = /** @class */ (function () {\n    function ToolbarAction(parent) {\n        this.parent = parent;\n        this.addEventListener();\n        this.serviceLocator = new ServiceLocator;\n        this.serviceLocator.register('rendererFactory', new RendererFactory);\n    }\n    ToolbarAction.prototype.addEventListener = function () {\n        this.parent.on(events.toolbarClick, this.toolbarClick, this);\n        this.parent.on(events.dropDownSelect, this.dropDownSelect, this);\n        this.parent.on(events.colorPickerChanged, this.renderSelection, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    ToolbarAction.prototype.toolbarClick = function (args) {\n        if (isNOU(args.item)) {\n            return;\n        }\n        if (!isNOU(args.item.controlParent)) {\n            // eslint-disable-next-line\n            var activeEle = args.item.controlParent\n                .activeEle;\n            if (activeEle) {\n                activeEle.tabIndex = -1;\n            }\n        }\n        if (args.item.command === 'NumberFormatList' || args.item.command === 'BulletFormatList') {\n            if (args.originalEvent.target.classList.contains('e-order-list') || args.originalEvent.target.classList.contains('e-unorder-list')) {\n                args.item.command = 'Lists';\n                args.item.subCommand = args.item.subCommand === 'NumberFormatList' ? 'OL' : 'UL';\n            }\n        }\n        if (args.item.command === 'Lists') {\n            if (args.originalEvent.target.classList.contains('e-caret') &&\n                (args.originalEvent.target.parentElement.classList.contains('e-rte-bulletformatlist-dropdown') || args.originalEvent.target.parentElement.classList.contains('e-rte-numberformatlist-dropdown'))) {\n                args.item.command = args.item.subCommand = null;\n            }\n        }\n        this.parent.notify(events.htmlToolbarClick, args);\n        this.parent.notify(events.markdownToolbarClick, args);\n    };\n    ToolbarAction.prototype.dropDownSelect = function (e) {\n        this.parent.notify(events.selectionRestore, {});\n        if (!(document.body.contains(document.body.querySelector('.e-rte-quick-toolbar'))\n            && e.item && (e.item.command === 'Images' || e.item.command === 'Audios' || e.item.command === 'Videos' ||\n            e.item.command === 'VideoLayoutOption' || e.item.command === 'Display' || e.item.command === 'Table'))) {\n            var value = e.item.controlParent && this.parent.quickToolbarModule && this.parent.quickToolbarModule.tableQTBar\n                && this.parent.quickToolbarModule.tableQTBar.element.contains(e.item.controlParent.element) ? 'Table' : null;\n            if (e.item.command === 'Lists') {\n                var listItem = { listStyle: e.item.value, listImage: e.item.listImage, type: e.item.subCommand };\n                this.parent.formatter.process(this.parent, e, e.originalEvent, listItem);\n            }\n            else {\n                this.parent.formatter.process(this.parent, e, e.originalEvent, value);\n            }\n        }\n        this.parent.notify(events.selectionSave, {});\n    };\n    ToolbarAction.prototype.renderSelection = function (args) {\n        this.parent.notify(events.selectionRestore, {});\n        this.parent.formatter.process(this.parent, args, args.originalEvent, null);\n        this.parent.notify(events.selectionSave, {});\n    };\n    ToolbarAction.prototype.removeEventListener = function () {\n        this.parent.off(events.toolbarClick, this.toolbarClick);\n        this.parent.off(events.dropDownSelect, this.dropDownSelect);\n        this.parent.off(events.colorPickerChanged, this.renderSelection);\n        this.parent.off(events.destroy, this.removeEventListener);\n    };\n    return ToolbarAction;\n}());\nexport { ToolbarAction };\n","import { addClass, Browser, EventHandler, detach, removeClass, select, selectAll, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, extend } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { RenderType, ToolbarType } from '../base/enum';\nimport { setToolbarStatus, updateUndoRedoStatus, getTBarItemsIndex, getCollection, toObjectLowerCase, isIDevice, getTooltipText } from '../base/util';\nimport { updateDropDownFontFormatLocale } from '../base/util';\nimport * as model from '../models/items';\nimport { ToolbarRenderer } from '../renderer/toolbar-renderer';\nimport { BaseToolbar } from './base-toolbar';\nimport { DropDownButtons } from './dropdown-buttons';\nimport { ToolbarAction } from './toolbar-action';\n/**\n * `Toolbar` module is used to handle Toolbar actions.\n */\nvar Toolbar = /** @class */ (function () {\n    function Toolbar(parent, serviceLocator) {\n        this.tools = {};\n        this.parent = parent;\n        this.isToolbar = false;\n        this.locator = serviceLocator;\n        this.isTransformChild = false;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        model.updateDropDownLocale(this.parent);\n        updateDropDownFontFormatLocale(this.parent);\n        this.renderFactory.addRenderer(RenderType.Toolbar, new ToolbarRenderer(this.parent, this.locator));\n        this.toolbarRenderer = this.renderFactory.getRenderer(RenderType.Toolbar);\n        this.baseToolbar = new BaseToolbar(this.parent, this.locator);\n        this.addEventListener();\n        if (this.parent.toolbarSettings && Object.keys(this.parent.toolbarSettings.itemConfigs).length > 0) {\n            extend(this.tools, model.tools, toObjectLowerCase(this.parent.toolbarSettings.itemConfigs), true);\n        }\n        else {\n            this.tools = model.tools;\n        }\n    }\n    Toolbar.prototype.initializeInstance = function () {\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        this.editableElement = this.contentRenderer.getEditPanel();\n        this.editPanel = this.contentRenderer.getPanel();\n    };\n    Toolbar.prototype.toolbarBindEvent = function () {\n        if (!this.parent.inlineMode.enable) {\n            this.keyBoardModule = new KeyboardEvents(this.getToolbarElement(), {\n                keyAction: this.toolBarKeyDown.bind(this), keyConfigs: this.parent.formatter.keyConfig, eventName: 'keydown'\n            });\n        }\n    };\n    Toolbar.prototype.toolBarKeyDown = function (e) {\n        switch (e.action) {\n            case 'escape':\n                this.parent.contentModule.getEditPanel().focus();\n                break;\n        }\n    };\n    Toolbar.prototype.createToolbarElement = function () {\n        this.tbElement = this.parent.createElement('div', { id: this.parent.getID() + '_toolbar' });\n        if (!Browser.isDevice && this.parent.inlineMode.enable && isIDevice()) {\n            return;\n        }\n        else {\n            if (this.parent.toolbarSettings.enableFloating && !this.parent.inlineMode.enable) {\n                this.tbWrapper = this.parent.createElement('div', {\n                    id: this.parent.getID() + '_toolbar_wrapper',\n                    innerHTML: this.tbElement.outerHTML,\n                    className: classes.CLS_TB_WRAP\n                });\n                this.tbElement = this.tbWrapper.firstElementChild;\n                this.parent.element.insertBefore(this.tbWrapper, this.editPanel);\n            }\n            else {\n                this.parent.element.insertBefore(this.tbElement, this.editPanel);\n            }\n        }\n    };\n    Toolbar.prototype.getToolbarMode = function () {\n        var tbMode;\n        switch (this.parent.toolbarSettings.type) {\n            case ToolbarType.Expand:\n                tbMode = 'Extended';\n                break;\n            case ToolbarType.Scrollable:\n                tbMode = 'Scrollable';\n                break;\n            default:\n                tbMode = 'MultiRow';\n        }\n        if (isIDevice() && this.parent.toolbarSettings.type === ToolbarType.Expand) {\n            tbMode = ToolbarType.Scrollable;\n        }\n        return tbMode;\n    };\n    Toolbar.prototype.checkToolbarResponsive = function (ele) {\n        if (!Browser.isDevice || isIDevice()) {\n            return false;\n        }\n        var tBarMode;\n        if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n            tBarMode = ToolbarType.MultiRow;\n        }\n        else {\n            tBarMode = this.parent.toolbarSettings.type;\n        }\n        this.baseToolbar.render({\n            container: ((this.parent.inlineMode.enable) ? 'quick' : 'toolbar'),\n            items: this.parent.toolbarSettings.items,\n            mode: tBarMode,\n            target: ele,\n            cssClass: this.parent.cssClass\n        });\n        if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n            addClass([ele], ['e-rte-tb-mobile']);\n            if (this.parent.inlineMode.enable) {\n                this.addFixedTBarClass();\n            }\n            else {\n                addClass([ele], [classes.CLS_TB_STATIC]);\n            }\n        }\n        this.wireEvents();\n        this.dropDownModule.renderDropDowns({\n            container: ele,\n            containerType: ((this.parent.inlineMode.enable) ? 'quick' : 'toolbar'),\n            items: this.parent.toolbarSettings.items\n        });\n        this.parent.notify(events.renderColorPicker, {\n            container: this.tbElement,\n            containerType: ((this.parent.inlineMode.enable) ? 'quick' : 'toolbar'),\n            items: this.parent.toolbarSettings.items\n        });\n        return true;\n    };\n    Toolbar.prototype.checkIsTransformChild = function () {\n        this.isTransformChild = false;\n        var transformElements = selectAll('[style*=\"transform\"]', document);\n        for (var i = 0; i < transformElements.length; i++) {\n            // eslint-disable-next-line max-len\n            if (!isNullOrUndefined(transformElements[i].contains) && transformElements[i].contains(this.parent.element)) {\n                this.isTransformChild = true;\n                break;\n            }\n        }\n    };\n    Toolbar.prototype.toggleFloatClass = function (e) {\n        var topValue;\n        var isBody = false;\n        var isFloat = false;\n        var scrollParent;\n        var floatOffset = this.parent.floatingToolbarOffset;\n        if (e && this.parent.iframeSettings.enable && this.parent.inputElement.ownerDocument === e.target) {\n            scrollParent = e.target.body;\n        }\n        else if (e && e.target !== document) {\n            scrollParent = e.target;\n        }\n        else {\n            isBody = true;\n            scrollParent = document.body;\n        }\n        var tbHeight = this.getToolbarHeight() + this.getExpandTBarPopHeight();\n        if (this.isTransformChild) {\n            topValue = 0;\n            var scrollParentRelativeTop = 0;\n            var trgHeight = this.parent.element.offsetHeight;\n            if (isBody) {\n                var bodyStyle = window.getComputedStyle(scrollParent);\n                scrollParentRelativeTop = parseFloat(bodyStyle.marginTop.split('px')[0]) + parseFloat(bodyStyle.paddingTop.split('px')[0]);\n            }\n            var targetTop = this.parent.element.getBoundingClientRect().top;\n            var scrollParentYOffset = (Browser.isMSPointer && isBody) ? window.pageYOffset : scrollParent.parentElement.scrollTop;\n            var scrollParentRect = scrollParent.getBoundingClientRect();\n            var scrollParentTop = (!isBody) ? scrollParentRect.top : (scrollParentRect.top + scrollParentYOffset);\n            var outOfRange = ((targetTop - ((!isBody) ? scrollParentTop : 0))\n                + trgHeight > tbHeight + floatOffset) ? false : true;\n            if (targetTop > (scrollParentTop + floatOffset) || targetTop < -trgHeight || ((targetTop < 0) ? outOfRange : false)) {\n                isFloat = false;\n                removeClass([this.tbElement], [classes.CLS_TB_ABS_FLOAT]);\n            }\n            else if (targetTop < (scrollParentTop + floatOffset)) {\n                if (targetTop < 0) {\n                    topValue = (-targetTop) + scrollParentTop;\n                }\n                else {\n                    topValue = scrollParentTop - targetTop;\n                }\n                topValue = (isBody) ? topValue - scrollParentRelativeTop : topValue;\n                addClass([this.tbElement], [classes.CLS_TB_ABS_FLOAT]);\n                isFloat = true;\n            }\n        }\n        else {\n            var parent_1 = this.parent.element.getBoundingClientRect();\n            if (window.innerHeight < parent_1.top) {\n                return;\n            }\n            topValue = (e && e.target !== document) ? scrollParent.getBoundingClientRect().top : 0;\n            if ((parent_1.bottom < (floatOffset + tbHeight + topValue)) || parent_1.bottom < 0 || parent_1.top > floatOffset + topValue) {\n                isFloat = false;\n            }\n            else if (parent_1.top < floatOffset || parent_1.top < floatOffset + topValue) {\n                isFloat = true;\n            }\n        }\n        if (!isFloat) {\n            removeClass([this.tbElement], [classes.CLS_TB_FLOAT]);\n            setStyleAttribute(this.tbElement, { top: 0 + 'px', width: '100%' });\n        }\n        else {\n            addClass([this.tbElement], [classes.CLS_TB_FLOAT]);\n            setStyleAttribute(this.tbElement, { width: this.parent.element.offsetWidth + 'px', top: (floatOffset + topValue) + 'px' });\n        }\n    };\n    Toolbar.prototype.renderToolbar = function () {\n        this.initializeInstance();\n        this.createToolbarElement();\n        if (this.checkToolbarResponsive(this.tbElement)) {\n            return;\n        }\n        if (this.parent.inlineMode.enable) {\n            this.parent.notify(events.renderInlineToolbar, {});\n        }\n        else {\n            this.baseToolbar.render({\n                container: 'toolbar',\n                items: this.parent.toolbarSettings.items,\n                mode: this.getToolbarMode(),\n                target: this.tbElement,\n                cssClass: this.parent.cssClass\n            });\n            if (!this.parent.inlineMode.enable) {\n                if (this.parent.toolbarSettings.enableFloating) {\n                    this.checkIsTransformChild();\n                    this.toggleFloatClass();\n                }\n                addClass([this.parent.element], [classes.CLS_RTE_TB_ENABLED]);\n                if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n                    addClass([this.parent.element], [classes.CLS_RTE_EXPAND_TB]);\n                }\n            }\n        }\n        this.wireEvents();\n        if (this.parent.inlineMode.enable && !isIDevice()) {\n            this.addFixedTBarClass();\n        }\n        if (!this.parent.inlineMode.enable) {\n            this.dropDownModule.renderDropDowns({\n                container: this.tbElement,\n                containerType: 'toolbar',\n                items: this.parent.toolbarSettings.items\n            });\n            this.parent.notify(events.renderColorPicker, {\n                container: this.tbElement,\n                containerType: 'toolbar',\n                items: this.parent.toolbarSettings.items\n            });\n            this.refreshToolbarOverflow();\n        }\n        var divEle = this.parent.element.querySelector('.e-rte-srctextarea');\n        var iframeEle = this.parent.element.querySelector('.e-source-content');\n        if ((!this.parent.iframeSettings.enable && (!isNOU(divEle) && divEle.style.display === 'block')) ||\n            (this.parent.iframeSettings.enable && (!isNOU(iframeEle) && iframeEle.style.display === 'block'))) {\n            this.parent.notify(events.updateToolbarItem, {\n                targetItem: 'SourceCode', updateItem: 'Preview',\n                baseToolbar: this.parent.getBaseToolbarObject()\n            });\n            this.parent.disableToolbarItem(this.parent.toolbarSettings.items);\n        }\n    };\n    /**\n     * addFixedTBarClass method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    Toolbar.prototype.addFixedTBarClass = function () {\n        addClass([this.tbElement], [classes.CLS_TB_FIXED]);\n    };\n    /**\n     * removeFixedTBarClass method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    Toolbar.prototype.removeFixedTBarClass = function () {\n        removeClass([this.tbElement], [classes.CLS_TB_FIXED]);\n    };\n    Toolbar.prototype.showFixedTBar = function () {\n        addClass([this.tbElement], [classes.CLS_SHOW]);\n        if (Browser.isIos) {\n            addClass([this.tbElement], [classes.CLS_TB_IOS_FIX]);\n        }\n    };\n    Toolbar.prototype.hideFixedTBar = function () {\n        // eslint-disable-next-line\n        (!this.isToolbar) ? removeClass([this.tbElement], [classes.CLS_SHOW, classes.CLS_TB_IOS_FIX]) : this.isToolbar = false;\n    };\n    /**\n     * updateItem method\n     *\n     * @param {IUpdateItemsModel} args - specifies the arguments.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    Toolbar.prototype.updateItem = function (args) {\n        var item = this.tools[args.updateItem.toLocaleLowerCase()];\n        if (this.parent.locale !== 'en-US') {\n            item.tooltip = getTooltipText(args.updateItem.toLocaleLowerCase(), this.locator);\n        }\n        var trgItem = this.tools[args.targetItem.toLocaleLowerCase()];\n        var index = getTBarItemsIndex(getCollection(trgItem.subCommand), args.baseToolbar.toolbarObj.items)[0];\n        if (!isNOU(index)) {\n            var prefixId = this.parent.inlineMode.enable ? '_quick_' : '_toolbar_';\n            args.baseToolbar.toolbarObj.items[index].id = this.parent.getID() + prefixId + item.id;\n            args.baseToolbar.toolbarObj.items[index].prefixIcon = item.icon;\n            args.baseToolbar.toolbarObj.items[index].tooltipText = item.tooltip;\n            args.baseToolbar.toolbarObj.items[index].subCommand = item.subCommand;\n            args.baseToolbar.toolbarObj.dataBind();\n            args.baseToolbar.toolbarObj.refreshOverflow();\n        }\n        else {\n            this.addTBarItem(args, 0);\n        }\n    };\n    Toolbar.prototype.updateToolbarStatus = function (args) {\n        if (!this.tbElement || (this.parent.inlineMode.enable && (isIDevice() || !Browser.isDevice))) {\n            return;\n        }\n        var options = {\n            args: args,\n            dropDownModule: this.dropDownModule,\n            parent: this.parent,\n            tbElements: selectAll('.' + classes.CLS_TB_ITEM, this.tbElement),\n            tbItems: this.baseToolbar.toolbarObj.items\n        };\n        setToolbarStatus(options, (this.parent.inlineMode.enable ? true : false), this.parent);\n    };\n    Toolbar.prototype.fullScreen = function (e) {\n        this.parent.fullScreenModule.showFullScreen(e);\n    };\n    Toolbar.prototype.hideScreen = function (e) {\n        this.parent.fullScreenModule.hideFullScreen(e);\n    };\n    /**\n     * getBaseToolbar method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    Toolbar.prototype.getBaseToolbar = function () {\n        return this.baseToolbar;\n    };\n    /**\n     * addTBarItem method\n     *\n     * @param {IUpdateItemsModel} args - specifies the arguments.\n     * @param {number} index - specifies the index value.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    Toolbar.prototype.addTBarItem = function (args, index) {\n        args.baseToolbar.toolbarObj.addItems([args.baseToolbar.getObject(args.updateItem, 'toolbar')], index);\n    };\n    /**\n     * enableTBarItems method\n     *\n     * @param {BaseToolbar} baseToolbar - specifies the toolbar.\n     * @param {string} items - specifies the string value.\n     * @param {boolean} isEnable - specifies the boolean value.\n     * @param {boolean} muteToolbarUpdate - specifies the toolbar.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    Toolbar.prototype.enableTBarItems = function (baseToolbar, items, isEnable, muteToolbarUpdate) {\n        var trgItems = getTBarItemsIndex(getCollection(items), baseToolbar.toolbarObj.items);\n        this.tbItems = selectAll('.' + classes.CLS_TB_ITEM, baseToolbar.toolbarObj.element);\n        for (var i = 0; i < trgItems.length; i++) {\n            var item = this.tbItems[trgItems[i]];\n            if (item) {\n                baseToolbar.toolbarObj.enableItems(item, isEnable);\n            }\n        }\n        if (!select('.e-rte-srctextarea', this.parent.element) && !muteToolbarUpdate) {\n            updateUndoRedoStatus(baseToolbar, this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n        }\n    };\n    /**\n     * removeTBarItems method\n     *\n     * @param {string} items - specifies the string value.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    Toolbar.prototype.removeTBarItems = function (items) {\n        if (isNullOrUndefined(this.baseToolbar.toolbarObj)) {\n            this.baseToolbar = this.parent.getBaseToolbarObject();\n        }\n        var trgItems = getTBarItemsIndex(getCollection(items), this.baseToolbar.toolbarObj.items);\n        this.tbItems = (this.parent.inlineMode.enable) ? selectAll('.' + classes.CLS_TB_ITEM, this.baseToolbar.toolbarObj.element)\n            : selectAll('.' + classes.CLS_TB_ITEM, this.parent.element);\n        for (var i = 0; i < trgItems.length; i++) {\n            this.baseToolbar.toolbarObj.removeItems(this.tbItems[trgItems[i]]);\n        }\n    };\n    /**\n     * getExpandTBarPopHeight method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    Toolbar.prototype.getExpandTBarPopHeight = function () {\n        var popHeight = 0;\n        if (this.parent.toolbarSettings.type === ToolbarType.Expand && this.tbElement.classList.contains('e-extended-toolbar')) {\n            var expandPopup = select('.e-toolbar-extended', this.tbElement);\n            if (expandPopup && this.tbElement.classList.contains('e-expand-open')\n                || expandPopup && expandPopup.classList.contains('e-popup-open')) {\n                addClass([expandPopup], [classes.CLS_VISIBLE]);\n                popHeight = popHeight + expandPopup.offsetHeight;\n                removeClass([expandPopup], [classes.CLS_VISIBLE]);\n            }\n            else {\n                removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n            }\n        }\n        return popHeight;\n    };\n    /**\n     * getToolbarHeight method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    Toolbar.prototype.getToolbarHeight = function () {\n        return this.tbElement.offsetHeight;\n    };\n    /**\n     * getToolbarElement method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    Toolbar.prototype.getToolbarElement = function () {\n        return select('.' + classes.CLS_TOOLBAR, this.parent.element);\n    };\n    /**\n     * refreshToolbarOverflow method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    Toolbar.prototype.refreshToolbarOverflow = function () {\n        this.parent.element.classList.remove(classes.CLS_RTL);\n        this.baseToolbar.toolbarObj.refreshOverflow();\n        if (this.parent.enableRtl) {\n            this.parent.element.classList.add(classes.CLS_RTL);\n        }\n    };\n    Toolbar.prototype.isToolbarDestroyed = function () {\n        return this.baseToolbar.toolbarObj && !this.baseToolbar.toolbarObj.isDestroyed;\n    };\n    Toolbar.prototype.destroyToolbar = function () {\n        if (this.isToolbarDestroyed()) {\n            this.parent.unWireScrollElementsEvents();\n            this.unWireEvents();\n            this.parent.notify(events.destroyColorPicker, {});\n            this.dropDownModule.destroyDropDowns();\n            this.baseToolbar.toolbarObj.destroy();\n            this.removeEventListener();\n            removeClass([this.parent.element], [classes.CLS_RTE_TB_ENABLED]);\n            removeClass([this.parent.element], [classes.CLS_RTE_EXPAND_TB]);\n            var tbWrapper = select('.' + classes.CLS_TB_WRAP, this.parent.element);\n            var tbElement = select('.' + classes.CLS_TOOLBAR, this.parent.element);\n            if (!isNullOrUndefined(tbWrapper)) {\n                detach(tbWrapper);\n            }\n            else if (!isNullOrUndefined(tbElement)) {\n                detach(tbElement);\n            }\n        }\n    };\n    /**\n     * Destroys the ToolBar.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    Toolbar.prototype.destroy = function () {\n        if (isNOU(this.parent)) {\n            return;\n        }\n        if (this.isToolbarDestroyed()) {\n            this.destroyToolbar();\n            if (this.keyBoardModule) {\n                this.keyBoardModule.destroy();\n            }\n        }\n    };\n    Toolbar.prototype.moduleDestroy = function () {\n        this.parent = null;\n        this.baseToolbar.parent = null;\n        this.toolbarActionModule.parent = null;\n        this.dropDownModule.parent = null;\n    };\n    Toolbar.prototype.scrollHandler = function (e) {\n        if (!this.parent.inlineMode.enable) {\n            if (this.parent.toolbarSettings.enableFloating && this.getDOMVisibility(this.tbElement)) {\n                this.toggleFloatClass(e.args);\n            }\n        }\n    };\n    Toolbar.prototype.getDOMVisibility = function (el) {\n        if (!el.offsetParent && el.offsetWidth === 0 && el.offsetHeight === 0) {\n            return false;\n        }\n        return true;\n    };\n    Toolbar.prototype.mouseDownHandler = function () {\n        if (Browser.isDevice && this.parent.inlineMode.enable && !isIDevice()) {\n            this.showFixedTBar();\n        }\n    };\n    Toolbar.prototype.focusChangeHandler = function () {\n        if (Browser.isDevice && this.parent.inlineMode.enable && !isIDevice()) {\n            this.isToolbar = false;\n            this.hideFixedTBar();\n        }\n    };\n    Toolbar.prototype.dropDownBeforeOpenHandler = function () {\n        this.isToolbar = true;\n    };\n    // eslint-disable-next-line\n    Toolbar.prototype.tbFocusHandler = function (e) {\n        var activeElm = document.activeElement;\n        var isToolbaractive = closest(activeElm, '.e-rte-toolbar');\n        if (activeElm === this.parent.getToolbarElement() || isToolbaractive === this.parent.getToolbarElement()) {\n            var toolbarItem = this.parent.getToolbarElement().querySelectorAll('.e-expended-nav');\n            for (var i = 0; i < toolbarItem.length; i++) {\n                if (isNOU(this.parent.getToolbarElement().querySelector('.e-insert-table-btn'))) {\n                    toolbarItem[i].setAttribute('tabindex', '0');\n                }\n                else {\n                    toolbarItem[i].setAttribute('tabindex', '1');\n                }\n            }\n        }\n    };\n    Toolbar.prototype.toolbarClickHandler = function (e) {\n        var trg = closest(e.originalEvent.target, '.e-hor-nav');\n        if (trg && this.parent.toolbarSettings.type === ToolbarType.Expand && !isNOU(trg)) {\n            var extendedTbar = this.tbElement.querySelector('.e-toolbar-extended');\n            if (!isNOU(extendedTbar)) {\n                setStyleAttribute(extendedTbar, { maxHeight: '', display: 'block' });\n                setStyleAttribute(extendedTbar, { maxHeight: extendedTbar.offsetHeight + 'px', display: '' });\n            }\n            if (!trg.classList.contains('e-nav-active')) {\n                removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n                this.parent.setContentHeight('toolbar', false);\n            }\n            else {\n                addClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n                this.parent.setContentHeight('toolbar', true);\n            }\n        }\n        else if (Browser.isDevice || this.parent.inlineMode.enable) {\n            this.isToolbar = true;\n        }\n        if (isNOU(trg) && this.parent.toolbarSettings.type === ToolbarType.Expand) {\n            removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n        }\n    };\n    Toolbar.prototype.wireEvents = function () {\n        if (this.parent.inlineMode.enable && isIDevice()) {\n            return;\n        }\n        EventHandler.add(this.tbElement, 'focusin', this.tbFocusHandler, this);\n    };\n    Toolbar.prototype.unWireEvents = function () {\n        EventHandler.remove(this.tbElement, 'focusin', this.tbFocusHandler);\n    };\n    Toolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.dropDownModule = new DropDownButtons(this.parent, this.locator);\n        this.toolbarActionModule = new ToolbarAction(this.parent);\n        this.parent.on(events.initialEnd, this.renderToolbar, this);\n        this.parent.on(events.scroll, this.scrollHandler, this);\n        this.parent.on(events.bindOnEnd, this.toolbarBindEvent, this);\n        this.parent.on(events.toolbarUpdated, this.updateToolbarStatus, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.refreshBegin, this.onRefresh, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.enableFullScreen, this.fullScreen, this);\n        this.parent.on(events.disableFullScreen, this.hideScreen, this);\n        this.parent.on(events.updateToolbarItem, this.updateItem, this);\n        this.parent.on(events.beforeDropDownOpen, this.dropDownBeforeOpenHandler, this);\n        this.parent.on(events.expandPopupClick, this.parent.setContentHeight, this.parent);\n        this.parent.on(events.focusChange, this.focusChangeHandler, this);\n        this.parent.on(events.mouseDown, this.mouseDownHandler, this);\n        this.parent.on(events.sourceCodeMouseDown, this.mouseDownHandler, this);\n        this.parent.on(events.bindCssClass, this.setCssClass, this);\n        this.parent.on(events.moduleDestroy, this.moduleDestroy, this);\n        if (!this.parent.inlineMode.enable && !isIDevice()) {\n            this.parent.on(events.toolbarClick, this.toolbarClickHandler, this);\n        }\n    };\n    Toolbar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.renderToolbar);\n        this.parent.off(events.scroll, this.scrollHandler);\n        this.parent.off(events.bindOnEnd, this.toolbarBindEvent);\n        this.parent.off(events.toolbarUpdated, this.updateToolbarStatus);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        this.parent.off(events.refreshBegin, this.onRefresh);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.enableFullScreen, this.parent.fullScreenModule.showFullScreen);\n        this.parent.off(events.disableFullScreen, this.parent.fullScreenModule.hideFullScreen);\n        this.parent.off(events.updateToolbarItem, this.updateItem);\n        this.parent.off(events.beforeDropDownOpen, this.dropDownBeforeOpenHandler);\n        this.parent.off(events.expandPopupClick, this.parent.setContentHeight);\n        this.parent.off(events.focusChange, this.focusChangeHandler);\n        this.parent.off(events.mouseDown, this.mouseDownHandler);\n        this.parent.off(events.sourceCodeMouseDown, this.mouseDownHandler);\n        this.parent.off(events.bindCssClass, this.setCssClass);\n        this.parent.off(events.moduleDestroy, this.moduleDestroy);\n        if (!this.parent.inlineMode.enable && !isIDevice()) {\n            this.parent.off(events.toolbarClick, this.toolbarClickHandler);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/tslint/config\n    Toolbar.prototype.setCssClass = function (e) {\n        if (this.toolbarObj && e.cssClass) {\n            if (isNullOrUndefined(e.oldCssClass)) {\n                this.toolbarObj.setProperties({ cssClass: (this.toolbarObj.cssClass + ' ' + e.cssClass).trim() });\n            }\n            else {\n                this.toolbarObj.setProperties({ cssClass: (this.toolbarObj.cssClass.replace(e.oldCssClass, '').trim() + ' ' + e.cssClass).trim() });\n            }\n        }\n    };\n    Toolbar.prototype.onRefresh = function () {\n        if (!this.parent.inlineMode.enable) {\n            this.refreshToolbarOverflow();\n        }\n        this.parent.setContentHeight('', true);\n    };\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {RichTextEditorModel} e - specifies the string value\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    Toolbar.prototype.onPropertyChanged = function (e) {\n        if (!isNullOrUndefined(e.newProp.inlineMode)) {\n            for (var _i = 0, _a = Object.keys(e.newProp.inlineMode); _i < _a.length; _i++) {\n                var prop = _a[_i];\n                switch (prop) {\n                    case 'enable':\n                        this.refreshToolbar();\n                        break;\n                }\n            }\n        }\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        this.refreshToolbar();\n    };\n    Toolbar.prototype.refreshToolbar = function () {\n        if (isNullOrUndefined(this.baseToolbar.toolbarObj)) {\n            this.baseToolbar = this.parent.getBaseToolbarObject();\n        }\n        var tbWrapper = select('.' + classes.CLS_TB_WRAP, this.parent.element);\n        var tbElement = select('.' + classes.CLS_TOOLBAR, this.parent.element);\n        if (tbElement || tbWrapper) {\n            this.destroyToolbar();\n        }\n        if (this.parent.toolbarSettings.enable) {\n            this.addEventListener();\n            this.renderToolbar();\n            this.parent.wireScrollElementsEvents();\n            if (!select('.e-rte-srctextarea', this.parent.element)) {\n                updateUndoRedoStatus(this.baseToolbar, this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n            }\n            this.parent.notify(events.dynamicModule, {});\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, NotifyPropertyChanges, Event } from '@syncfusion/ej2-base';\nimport { Base } from '@syncfusion/ej2-base';\nvar keyCode = {\n    'backspace': 8,\n    'tab': 9,\n    'enter': 13,\n    'shift': 16,\n    'control': 17,\n    'alt': 18,\n    'pause': 19,\n    'capslock': 20,\n    'space': 32,\n    'escape': 27,\n    'pageup': 33,\n    'pagedown': 34,\n    'end': 35,\n    'home': 36,\n    'leftarrow': 37,\n    'uparrow': 38,\n    'rightarrow': 39,\n    'downarrow': 40,\n    'insert': 45,\n    'delete': 46,\n    'f1': 112,\n    'f2': 113,\n    'f3': 114,\n    'f4': 115,\n    'f5': 116,\n    'f6': 117,\n    'f7': 118,\n    'f8': 119,\n    'f9': 120,\n    'f10': 121,\n    'f11': 122,\n    'f12': 123,\n    'semicolon': 186,\n    'plus': 187,\n    'comma': 188,\n    'minus': 189,\n    'dot': 190,\n    'forwardslash': 191,\n    'graveaccent': 192,\n    'openbracket': 219,\n    'backslash': 220,\n    'closebracket': 221,\n    'singlequote': 222,\n    ']': 221,\n    '[': 219,\n    '=': 187\n};\n/**\n * KeyboardEvents class enables you to bind key action desired key combinations for ex., Ctrl+A, Delete, Alt+Space etc.\n * ```html\n * <div id='testEle'>  </div>;\n * <script>\n *   let node: HTMLElement = document.querySelector('#testEle');\n *   let kbInstance = new KeyboardEvents({\n *       element: node,\n *       keyConfigs:{ selectAll : 'ctrl+a' },\n *       keyAction: function (e:KeyboardEvent, action:string) {\n *           // handler function code\n *       }\n *   });\n * </script>\n * ```\n *\n * @hidden\n * @deprecated\n */\nvar KeyboardEvents = /** @class */ (function (_super) {\n    __extends(KeyboardEvents, _super);\n    /**\n     * Initializes the KeyboardEvents\n     *\n     * @param {HTMLElement} element - specifies the elements.\n     * @param {KeyboardEventsModel} options - specify the options\n     */\n    function KeyboardEvents(element, options) {\n        var _this = _super.call(this, options, element) || this;\n        /**\n         * To handle a key press event returns null\n         *\n         * @param {KeyboardEventArgs} e - specifies the event arguments.\n         * @returns {void}\n         */\n        _this.keyPressHandler = function (e) {\n            /* eslint-disable */\n            var isAltKey = e.altKey;\n            var isCtrlKey = e.ctrlKey;\n            var isShiftKey = e.shiftKey;\n            var isMetaKey = e.metaKey;\n            /* eslint-enable */\n            var curkeyCode = e.which;\n            var keys = Object.keys(_this.keyConfigs);\n            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n                var key = keys_1[_i];\n                var configCollection = _this.keyConfigs[\"\" + key].split(',');\n                for (var _a = 0, configCollection_1 = configCollection; _a < configCollection_1.length; _a++) {\n                    var rconfig = configCollection_1[_a];\n                    var rKeyObj = KeyboardEvents_1.getKeyConfigData(rconfig.trim());\n                    if (isAltKey === rKeyObj.altKey && (isCtrlKey === rKeyObj.ctrlKey || isMetaKey) &&\n                        isShiftKey === rKeyObj.shiftKey && curkeyCode === rKeyObj.keyCode) {\n                        e.action = key;\n                    }\n                }\n            }\n            if (_this.keyAction) {\n                _this.keyAction(e);\n            }\n        };\n        _this.bind();\n        return _this;\n    }\n    KeyboardEvents_1 = KeyboardEvents;\n    /**\n     * Unwire bound events and destroy the instance.\n     *\n     * @returns {void}\n     */\n    KeyboardEvents.prototype.destroy = function () {\n        this.unwireEvents();\n        _super.prototype.destroy.call(this);\n    };\n    /**\n     * Function can be used to specify certain action if a property is changed\n     *\n     * @param {KeyboardEventsModel} newProp - specifies the keyboard event.\n     * @param {KeyboardEventsModel} oldProp - specifies the old property.\n     * @returns {void}\n     * @private\n     */\n    // eslint-disable-next-line\n    KeyboardEvents.prototype.onPropertyChanged = function (newProp, oldProp) {\n        // No code are needed\n    };\n    KeyboardEvents.prototype.bind = function () {\n        this.wireEvents();\n    };\n    /**\n     * To get the module name, returns 'keyboard'.\n     *\n     * @returns {void}\n     */\n    KeyboardEvents.prototype.getModuleName = function () {\n        return 'keyboard';\n    };\n    /**\n     * Wiring event handlers to events\n     *\n     * @returns {void}\n     */\n    KeyboardEvents.prototype.wireEvents = function () {\n        this.element.addEventListener(this.eventName, this.keyPressHandler);\n    };\n    /**\n     * Unwiring event handlers to events\n     *\n     * @returns {void}\n     */\n    KeyboardEvents.prototype.unwireEvents = function () {\n        this.element.removeEventListener(this.eventName, this.keyPressHandler);\n    };\n    /**\n     * To get the key configuration data\n     *\n     * @param {string} config - configuration data\n     * @returns {KeyData} - specifies the key data\n     */\n    KeyboardEvents.getKeyConfigData = function (config) {\n        if (config in this.configCache) {\n            return this.configCache[\"\" + config];\n        }\n        var keys = config.toLowerCase().split('+');\n        var keyData = {\n            altKey: (keys.indexOf('alt') !== -1 ? true : false),\n            ctrlKey: (keys.indexOf('ctrl') !== -1 ? true : false),\n            shiftKey: (keys.indexOf('shift') !== -1 ? true : false),\n            keyCode: null\n        };\n        if (keys[keys.length - 1].length > 1 && !!Number(keys[keys.length - 1])) {\n            keyData.keyCode = Number(keys[keys.length - 1]);\n        }\n        else {\n            keyData.keyCode = KeyboardEvents_1.getKeyCode(keys[keys.length - 1]);\n        }\n        KeyboardEvents_1.configCache[\"\" + config] = keyData;\n        return keyData;\n    };\n    // Return the keycode value as string\n    KeyboardEvents.getKeyCode = function (keyVal) {\n        return keyCode[\"\" + keyVal] || keyVal.toUpperCase().charCodeAt(0);\n    };\n    var KeyboardEvents_1;\n    KeyboardEvents.configCache = {};\n    __decorate([\n        Property({})\n    ], KeyboardEvents.prototype, \"keyConfigs\", void 0);\n    __decorate([\n        Property('keyup')\n    ], KeyboardEvents.prototype, \"eventName\", void 0);\n    __decorate([\n        Event()\n    ], KeyboardEvents.prototype, \"keyAction\", void 0);\n    KeyboardEvents = KeyboardEvents_1 = __decorate([\n        NotifyPropertyChanges\n    ], KeyboardEvents);\n    return KeyboardEvents;\n}(Base));\nexport { KeyboardEvents };\n","import { select, detach, extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { getIndex, toObjectLowerCase } from '../base/util';\nimport { templateItems, tools } from '../models/items';\n/**\n * `Color Picker` module is used to handle ColorPicker actions.\n */\nvar ColorPickerInput = /** @class */ (function () {\n    function ColorPickerInput(parent, serviceLocator) {\n        this.tools = {};\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.addEventListener();\n        if (this.parent.toolbarSettings && Object.keys(this.parent.toolbarSettings.itemConfigs).length > 0) {\n            extend(this.tools, tools, toObjectLowerCase(this.parent.toolbarSettings.itemConfigs), true);\n        }\n        else {\n            this.tools = tools;\n        }\n    }\n    ColorPickerInput.prototype.initializeInstance = function () {\n        this.toolbarRenderer = this.renderFactory.getRenderer(RenderType.Toolbar);\n    };\n    /**\n     * renderColorPickerInput method\n     *\n     * @param {IColorPickerRenderArgs} args - specify the arguments.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    ColorPickerInput.prototype.renderColorPickerInput = function (args) {\n        var _this = this;\n        this.initializeInstance();\n        var suffixID = args.containerType;\n        var tbElement = args.container;\n        var targetID;\n        var options;\n        templateItems.forEach(function (item) {\n            if (getIndex(item, args.items) !== -1) {\n                switch (item) {\n                    case 'fontcolor': {\n                        targetID = _this.parent.getID() + '_' + suffixID + '_FontColor_Target';\n                        var fontNode = _this.parent.createElement('input');\n                        fontNode.id = targetID;\n                        fontNode.classList.add(classes.CLS_FONT_COLOR_TARGET);\n                        if (!isNullOrUndefined(_this.parent.cssClass)) {\n                            var allClassName = _this.parent.cssClass.split(' ');\n                            for (var i = 0; i < allClassName.length; i++) {\n                                if (allClassName[i].trim() !== '') {\n                                    fontNode.classList.add(allClassName[i]);\n                                }\n                            }\n                        }\n                        document.body.appendChild(fontNode);\n                        options = {\n                            cssClass: _this.tools[item.toLocaleLowerCase()].icon\n                                + ' ' + classes.CLS_RTE_ELEMENTS + ' ' + classes.CLS_ICONS + ' ' + _this.parent.cssClass,\n                            value: _this.tools[item.toLocaleLowerCase()].value,\n                            command: _this.tools[item.toLocaleLowerCase()].command,\n                            subCommand: _this.tools[item.toLocaleLowerCase()].subCommand,\n                            element: select('#' + _this.parent.getID() + '_' + suffixID + '_FontColor', tbElement),\n                            target: (targetID)\n                        };\n                        _this.fontColorPicker = _this.toolbarRenderer.renderColorPicker(options, 'fontcolor');\n                        _this.fontColorDropDown = _this.toolbarRenderer.renderColorPickerDropDown(options, 'fontcolor', _this.fontColorPicker);\n                        break;\n                    }\n                    case 'backgroundcolor': {\n                        targetID = _this.parent.getID() + '_' + suffixID + '_BackgroundColor_Target';\n                        var backNode = _this.parent.createElement('input');\n                        backNode.id = targetID;\n                        backNode.classList.add(classes.CLS_BACKGROUND_COLOR_TARGET);\n                        if (!isNullOrUndefined(_this.parent.cssClass)) {\n                            var allClassName = _this.parent.cssClass.split(' ');\n                            for (var i = 0; i < allClassName.length; i++) {\n                                if (allClassName[i].trim() !== '') {\n                                    backNode.classList.add(allClassName[i]);\n                                }\n                            }\n                        }\n                        document.body.appendChild(backNode);\n                        options = {\n                            cssClass: _this.tools[item.toLocaleLowerCase()].icon\n                                + ' ' + classes.CLS_RTE_ELEMENTS + ' ' + classes.CLS_ICONS + ' ' + _this.parent.cssClass,\n                            value: _this.tools[item.toLocaleLowerCase()].value,\n                            command: _this.tools[item.toLocaleLowerCase()].command,\n                            subCommand: _this.tools[item.toLocaleLowerCase()].subCommand,\n                            element: select('#' + _this.parent.getID() + '_' + suffixID + '_BackgroundColor', tbElement),\n                            target: (targetID)\n                        };\n                        _this.backgroundColorPicker = _this.toolbarRenderer.renderColorPicker(options, 'backgroundcolor');\n                        _this.backgroundColorDropDown = _this.toolbarRenderer.renderColorPickerDropDown(options, 'backgroundcolor', _this.backgroundColorPicker, _this.defaultColorPicker);\n                        break;\n                    }\n                }\n            }\n        });\n        if (this.parent.inlineMode.enable) {\n            this.setCssClass({ cssClass: this.parent.cssClass });\n        }\n    };\n    ColorPickerInput.prototype.destroy = function () {\n        this.removeEventListener();\n        this.destroyColorPicker();\n    };\n    /**\n     * destroyColorPicker method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    ColorPickerInput.prototype.destroyColorPicker = function () {\n        if (this.fontColorPicker && !this.fontColorPicker.isDestroyed) {\n            this.fontColorPicker.destroy();\n        }\n        if (this.backgroundColorPicker && !this.backgroundColorPicker.isDestroyed) {\n            this.backgroundColorPicker.destroy();\n        }\n        if (this.fontColorDropDown && !this.fontColorDropDown.isDestroyed) {\n            var innerEle = this.fontColorDropDown.element.querySelector('.e-rte-color-content');\n            if (innerEle) {\n                detach(innerEle);\n            }\n            this.fontColorDropDown.destroy();\n        }\n        if (this.backgroundColorDropDown && !this.backgroundColorDropDown.isDestroyed) {\n            var innerEle = this.backgroundColorDropDown.element.querySelector('.e-rte-color-content');\n            if (innerEle) {\n                this.defaultColorPicker = innerEle.children[0].style.borderBottomColor;\n                detach(innerEle);\n            }\n            this.backgroundColorDropDown.destroy();\n        }\n    };\n    ColorPickerInput.prototype.setRtl = function (args) {\n        if (this.fontColorPicker) {\n            this.fontColorPicker.setProperties({ enableRtl: args.enableRtl });\n            this.fontColorDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.backgroundColorPicker) {\n            this.backgroundColorPicker.setProperties({ enableRtl: args.enableRtl });\n            this.backgroundColorDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n    };\n    ColorPickerInput.prototype.setCssClass = function (e) {\n        this.updateCss(this.fontColorPicker, this.fontColorDropDown, e);\n        this.updateCss(this.backgroundColorPicker, this.backgroundColorDropDown, e);\n    };\n    ColorPickerInput.prototype.updateCss = function (colorPickerObj, dropDownObj, e) {\n        if (colorPickerObj && e.cssClass) {\n            if (isNullOrUndefined(e.oldCssClass)) {\n                colorPickerObj.setProperties({ cssClass: (colorPickerObj.cssClass + ' ' + e.cssClass).trim() });\n                dropDownObj.setProperties({ cssClass: (dropDownObj.cssClass + ' ' + e.cssClass).trim() });\n            }\n            else {\n                colorPickerObj.setProperties({ cssClass: (colorPickerObj.cssClass.replace(e.oldCssClass, '').replace('  ', ' ').trim() + ' ' + e.cssClass).trim() });\n                dropDownObj.setProperties({ cssClass: (dropDownObj.cssClass.replace(e.oldCssClass, '').replace('  ', ' ').trim() + ' ' + e.cssClass).trim() });\n            }\n        }\n    };\n    ColorPickerInput.prototype.addEventListener = function () {\n        this.parent.on(events.toolbarRenderComplete, this.renderColorPickerInput, this);\n        this.parent.on(events.rtlMode, this.setRtl, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.destroyColorPicker, this.destroyColorPicker, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.bindCssClass, this.setCssClass, this);\n    };\n    ColorPickerInput.prototype.onPropertyChanged = function (model) {\n        var newProp = model.newProp;\n        var element;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'fontColor':\n                    if (this.fontColorPicker) {\n                        for (var _b = 0, _c = Object.keys(newProp.fontColor); _b < _c.length; _b++) {\n                            var font = _c[_b];\n                            switch (font) {\n                                case 'default': {\n                                    this.fontColorPicker.setProperties({ value: newProp.fontColor.default });\n                                    element = this.fontColorDropDown.element;\n                                    var fontBorder = element.querySelector('.' + this.tools['fontcolor'].icon);\n                                    fontBorder.style.borderBottomColor = newProp.fontColor.default;\n                                    break;\n                                }\n                                case 'mode':\n                                    this.fontColorPicker.setProperties({ mode: newProp.fontColor.mode });\n                                    break;\n                                case 'columns':\n                                    this.fontColorPicker.setProperties({ columns: newProp.fontColor.columns });\n                                    break;\n                                case 'colorCode':\n                                    this.fontColorPicker.setProperties({ presetColors: newProp.fontColor.colorCode });\n                                    break;\n                                case 'modeSwitcher':\n                                    this.fontColorPicker.setProperties({ modeSwitcher: newProp.fontColor.modeSwitcher });\n                                    break;\n                            }\n                        }\n                    }\n                    break;\n                case 'backgroundColor':\n                    if (this.backgroundColorPicker) {\n                        for (var _d = 0, _e = Object.keys(newProp.backgroundColor); _d < _e.length; _d++) {\n                            var background = _e[_d];\n                            switch (background) {\n                                case 'default': {\n                                    this.backgroundColorPicker.setProperties({ value: newProp.backgroundColor.default });\n                                    element = this.backgroundColorDropDown.element;\n                                    var backgroundBorder = element.querySelector('.' + this.tools['backgroundcolor'].icon);\n                                    backgroundBorder.style.borderBottomColor = newProp.backgroundColor.default;\n                                    break;\n                                }\n                                case 'mode':\n                                    this.backgroundColorPicker.setProperties({ mode: newProp.backgroundColor.mode });\n                                    break;\n                                case 'columns':\n                                    this.backgroundColorPicker.setProperties({ columns: newProp.backgroundColor.columns });\n                                    break;\n                                case 'colorCode':\n                                    this.backgroundColorPicker.setProperties({ presetColors: newProp.backgroundColor.colorCode });\n                                    break;\n                                case 'modeSwitcher':\n                                    this.backgroundColorPicker.setProperties({ modeSwitcher: newProp.backgroundColor.modeSwitcher });\n                                    break;\n                            }\n                        }\n                    }\n                    break;\n            }\n        }\n    };\n    ColorPickerInput.prototype.removeEventListener = function () {\n        this.parent.off(events.toolbarRenderComplete, this.renderColorPickerInput);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.rtlMode, this.setRtl);\n        this.parent.off(events.destroyColorPicker, this.destroyColorPicker);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        this.parent.off(events.bindCssClass, this.setCssClass);\n    };\n    return ColorPickerInput;\n}());\nexport { ColorPickerInput };\n","import { detach, getUniqueID, append, closest, selectAll, select, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, Browser, isNullOrUndefined, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { isCollide, Tooltip } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { RenderType } from '../base/enum';\nimport { setToolbarStatus, updateUndoRedoStatus, isIDevice } from '../base/util';\nimport { BaseToolbar } from './base-toolbar';\nimport { DropDownButtons } from './dropdown-buttons';\nimport { ColorPickerInput } from './color-picker';\n/**\n * `Quick toolbar` module is used to handle Quick toolbar actions.\n */\nvar BaseQuickToolbar = /** @class */ (function () {\n    function BaseQuickToolbar(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.isDOMElement = false;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        this.popupRenderer = this.renderFactory.getRenderer(RenderType.Popup);\n        this.dropDownButtons = new DropDownButtons(this.parent, this.locator);\n        this.colorPickerObj = new ColorPickerInput(this.parent, this.locator);\n    }\n    BaseQuickToolbar.prototype.appendPopupContent = function () {\n        this.toolbarElement = this.parent.createElement('div', { className: classes.CLS_QUICK_TB });\n        this.element.appendChild(this.toolbarElement);\n    };\n    /**\n     * render method\n     *\n     * @param {IQuickToolbarOptions} args - specifies the arguments\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    BaseQuickToolbar.prototype.render = function (args) {\n        var className;\n        if (args.popupType === 'Image') {\n            className = classes.CLS_IMAGE_POP;\n        }\n        else if (args.popupType === 'Inline') {\n            className = classes.CLS_INLINE_POP;\n        }\n        else if (args.popupType === 'Text') {\n            className = classes.CLS_TEXT_POP;\n        }\n        else {\n            className = '';\n        }\n        var popupId = getUniqueID(args.popupType + '_Quick_Popup');\n        this.stringItems = args.toolbarItems;\n        this.element = this.parent.createElement('div', { id: popupId, className: className + ' ' + classes.CLS_RTE_ELEMENTS });\n        this.element.setAttribute('aria-owns', this.parent.getID());\n        this.appendPopupContent();\n        this.createToolbar(args.toolbarItems, args.mode, args.cssClass);\n        this.popupRenderer.renderPopup(this);\n        this.addEventListener();\n    };\n    BaseQuickToolbar.prototype.createToolbar = function (items, mode, cssClass) {\n        this.quickTBarObj = new BaseToolbar(this.parent, this.locator);\n        this.quickTBarObj.render({\n            container: 'quick',\n            target: this.toolbarElement,\n            items: items,\n            mode: mode,\n            cssClass: cssClass\n        });\n        this.quickTBarObj.toolbarObj.refresh();\n    };\n    BaseQuickToolbar.prototype.setPosition = function (e) {\n        var x;\n        var y;\n        var imgWrapper = closest(e.target, '.e-img-caption');\n        var isAligned = (e.target.classList.contains('e-imginline') ||\n            e.target.classList.contains('e-imgbreak')) ? false : true;\n        var target = !isNOU(imgWrapper) ? imgWrapper : e.target;\n        addClass([this.toolbarElement], [classes.CLS_RM_WHITE_SPACE]);\n        var targetOffsetTop = target.offsetTop;\n        var parentOffsetTop = window.pageYOffset + e.parentData.top;\n        if ((targetOffsetTop - e.editTop) > e.popHeight) {\n            y = parentOffsetTop + e.tBarElementHeight + (targetOffsetTop - e.editTop) - e.popHeight - 5;\n        }\n        else if (((e.editTop + e.editHeight) - (targetOffsetTop + target.offsetHeight)) > e.popHeight) {\n            y = parentOffsetTop + e.tBarElementHeight + (targetOffsetTop - e.editTop) + target.offsetHeight + 5;\n        }\n        else {\n            y = e.y;\n        }\n        target = isAligned ? e.target : target;\n        if (target.offsetWidth > e.popWidth) {\n            x = (target.offsetWidth / 2) - (e.popWidth / 2) + e.parentData.left + target.offsetLeft;\n        }\n        else {\n            x = e.parentData.left + target.offsetLeft;\n        }\n        this.popupObj.position.X = ((x + e.popWidth) > e.parentData.right) ? e.parentData.right - e.popWidth : x;\n        this.popupObj.position.Y = (y >= 0) ? y : e.y + 5;\n        this.popupObj.dataBind();\n        removeClass([this.toolbarElement], [classes.CLS_RM_WHITE_SPACE]);\n    };\n    BaseQuickToolbar.prototype.checkCollision = function (e, viewPort, type) {\n        var x;\n        var y;\n        var parentTop = e.parentData.top;\n        var contentTop = e.windowY + parentTop + e.tBarElementHeight;\n        var collision = [];\n        if (viewPort === 'document') {\n            collision = isCollide(e.popup);\n        }\n        else {\n            collision = isCollide(e.popup, e.parentElement);\n        }\n        for (var i = 0; i < collision.length; i++) {\n            switch (collision[i]) {\n                case 'top':\n                    if (viewPort === 'document') {\n                        y = e.windowY;\n                    }\n                    else {\n                        y = (window.pageYOffset + parentTop) + e.tBarElementHeight;\n                    }\n                    break;\n                case 'bottom': {\n                    var posY = void 0;\n                    if (viewPort === 'document') {\n                        if (type === 'inline' || type === 'text') {\n                            posY = (e.y - e.popHeight - 10);\n                        }\n                        else {\n                            if ((e.windowHeight - (parentTop + e.tBarElementHeight)) > e.popHeight) {\n                                if ((contentTop - e.windowHeight) > e.popHeight) {\n                                    posY = (contentTop + (e.windowHeight - parentTop)) - e.popHeight;\n                                }\n                                else {\n                                    posY = contentTop;\n                                }\n                            }\n                            else {\n                                posY = e.windowY + (parentTop + e.tBarElementHeight);\n                            }\n                        }\n                    }\n                    else {\n                        if (e.target.tagName !== 'IMG') {\n                            posY = (e.parentData.bottom + window.pageYOffset) - e.popHeight - 10;\n                        }\n                        else {\n                            posY = (e.parentData.bottom + window.pageYOffset) - e.popHeight - 5;\n                        }\n                    }\n                    y = posY;\n                    break;\n                }\n                case 'right':\n                    if (type === 'inline' || type === 'text') {\n                        x = window.pageXOffset + (e.windowWidth - (e.popWidth + e.bodyRightSpace + 10));\n                    }\n                    else {\n                        x = e.x - e.popWidth;\n                    }\n                    break;\n                case 'left':\n                    if (type === 'inline' || type === 'text') {\n                        x = 0;\n                    }\n                    else {\n                        x = e.parentData.left;\n                    }\n                    break;\n            }\n        }\n        this.popupObj.position.X = (x) ? x : this.popupObj.position.X;\n        this.popupObj.position.Y = (y) ? y : this.popupObj.position.Y;\n        this.popupObj.dataBind();\n    };\n    /**\n     * showPopup method\n     *\n     * @param {number} x - specifies the x value\n     * @param {number} y - specifies the y value\n     * @param {Element} target - specifies the element\n     * @param {string} type - specifies the type\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    BaseQuickToolbar.prototype.showPopup = function (x, y, target, type) {\n        var _this = this;\n        var eventArgs = { popup: this.popupObj, cancel: false, targetElement: target,\n            positionX: x, positionY: y };\n        this.parent.trigger(events.beforeQuickToolbarOpen, eventArgs, function (beforeQuickToolbarArgs) {\n            if (!beforeQuickToolbarArgs.cancel) {\n                var editPanelTop = void 0;\n                var editPanelHeight = void 0;\n                var bodyStyle = window.getComputedStyle(document.body);\n                var bodyRight = parseFloat(bodyStyle.marginRight.split('px')[0]) + parseFloat(bodyStyle.paddingRight.split('px')[0]);\n                var windowHeight = window.innerHeight;\n                var windowWidth = window.innerWidth;\n                var parent_1 = _this.parent.element;\n                var toolbarAvail = !isNullOrUndefined(_this.parent.getToolbar());\n                var tbHeight = toolbarAvail && _this.parent.toolbarModule.getToolbarHeight();\n                var expTBHeight = toolbarAvail && _this.parent.toolbarModule.getExpandTBarPopHeight();\n                var tBarHeight = (toolbarAvail) ? (tbHeight + expTBHeight) : 0;\n                addClass([_this.element], [classes.CLS_HIDE]);\n                if (Browser.isDevice && !isIDevice()) {\n                    addClass([_this.parent.getToolbar()], [classes.CLS_HIDE]);\n                }\n                if (_this.parent.iframeSettings.enable) {\n                    var cntEle = _this.contentRenderer.getPanel().contentWindow;\n                    editPanelTop = cntEle.pageYOffset;\n                    editPanelHeight = cntEle.innerHeight;\n                }\n                else {\n                    var cntEle = closest(target, '.' + classes.CLS_RTE_CONTENT);\n                    editPanelTop = (cntEle) ? cntEle.scrollTop : 0;\n                    editPanelHeight = (cntEle) ? cntEle.offsetHeight : 0;\n                }\n                if (!_this.parent.inlineMode.enable && !closest(target, 'table') && type !== 'text') {\n                    _this.parent.disableToolbarItem(_this.parent.toolbarSettings.items);\n                    _this.parent.enableToolbarItem(['Undo', 'Redo']);\n                }\n                append([_this.element], document.body);\n                if (_this.parent.showTooltip) {\n                    _this.tooltip = new Tooltip({\n                        target: '#' + _this.element.id + ' [title]',\n                        openDelay: 400,\n                        showTipPointer: true,\n                        windowCollision: true,\n                        position: 'BottomCenter'\n                    });\n                    _this.tooltip.appendTo(_this.element);\n                }\n                _this.popupObj.position.X = beforeQuickToolbarArgs.positionX + 20;\n                _this.popupObj.position.Y = beforeQuickToolbarArgs.positionY + 20;\n                _this.popupObj.dataBind();\n                _this.popupObj.element.classList.add('e-popup-open');\n                _this.dropDownButtons.renderDropDowns({\n                    container: _this.toolbarElement,\n                    containerType: 'quick',\n                    items: _this.stringItems\n                });\n                _this.colorPickerObj.renderColorPickerInput({\n                    container: _this.toolbarElement,\n                    containerType: 'quick',\n                    items: _this.stringItems\n                });\n                var showPopupData = {\n                    x: x, y: y,\n                    target: target,\n                    editTop: editPanelTop,\n                    editHeight: editPanelHeight,\n                    popup: _this.popupObj.element,\n                    popHeight: _this.popupObj.element.offsetHeight,\n                    popWidth: _this.popupObj.element.offsetWidth,\n                    parentElement: parent_1,\n                    bodyRightSpace: bodyRight,\n                    windowY: window.pageYOffset,\n                    windowHeight: windowHeight,\n                    windowWidth: windowWidth,\n                    parentData: parent_1.getBoundingClientRect(),\n                    tBarElementHeight: tBarHeight\n                };\n                if (target.tagName === 'IMG' || target.tagName === 'AUDIO' || target.tagName === 'VIDEO' || target.tagName === 'IFRAME' || (target.classList &&\n                    (target.classList.contains(classes.CLS_AUDIOWRAP) || target.classList.contains(classes.CLS_CLICKELEM) ||\n                        target.classList.contains(classes.CLS_VID_CLICK_ELEM)))) {\n                    _this.setPosition(showPopupData);\n                }\n                if (!_this.parent.inlineMode.enable) {\n                    _this.checkCollision(showPopupData, 'parent', '');\n                }\n                _this.checkCollision(showPopupData, 'document', ((_this.parent.inlineMode.enable) ? 'inline' : (type === 'text') ? 'text' : ''));\n                _this.popupObj.element.classList.remove('e-popup-open');\n                removeClass([_this.element], [classes.CLS_HIDE]);\n                _this.popupObj.show({ name: 'ZoomIn', duration: (Browser.isIE ? 250 : 400) });\n                if (_this.popupObj && _this.parent.cssClass) {\n                    removeClass([_this.popupObj.element], _this.parent.cssClass);\n                    addClass([_this.popupObj.element], _this.parent.cssClass);\n                }\n                setStyleAttribute(_this.element, {\n                    maxWidth: window.outerWidth + 'px'\n                });\n                addClass([_this.element], [classes.CLS_POP]);\n                _this.isDOMElement = true;\n            }\n        });\n    };\n    /**\n     * hidePopup method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    BaseQuickToolbar.prototype.hidePopup = function () {\n        var viewSourcePanel = this.parent.sourceCodeModule.getViewPanel();\n        if (Browser.isDevice && !isIDevice()) {\n            removeClass([this.parent.getToolbar()], [classes.CLS_HIDE]);\n        }\n        if (!isNullOrUndefined(document.querySelector('.e-tooltip-wrap'))) {\n            if (!isNullOrUndefined(document.querySelector('#' + this.element.id + ' [data-tooltip-id]'))) {\n                var tooltipTargetEle = document.querySelector('#' + this.element.id + ' [data-tooltip-id]');\n                var dataContent = tooltipTargetEle.getAttribute('data-content');\n                tooltipTargetEle.removeAttribute('data-content');\n                tooltipTargetEle.setAttribute('title', dataContent);\n                tooltipTargetEle.removeAttribute('data-tooltip-id');\n            }\n            this.tooltip.destroy();\n        }\n        else {\n            if (!isNullOrUndefined(this.tooltip)) {\n                this.tooltip.destroy();\n            }\n        }\n        if (!isNullOrUndefined(this.parent.getToolbar()) && !this.parent.inlineMode.enable) {\n            if (isNullOrUndefined(viewSourcePanel) || viewSourcePanel.style.display === 'none') {\n                this.parent.enableToolbarItem(this.parent.toolbarSettings.items);\n            }\n        }\n        this.removeEleFromDOM();\n        this.isDOMElement = false;\n    };\n    /**\n     * @param {string} item - specifies the string value\n     * @param {number} index - specifies the index value\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    BaseQuickToolbar.prototype.addQTBarItem = function (item, index) {\n        this.quickTBarObj.toolbarObj.addItems(this.quickTBarObj.getItems(item, 'toolbar'), index);\n    };\n    /**\n     * @param {number} index - specifies the index value\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    BaseQuickToolbar.prototype.removeQTBarItem = function (index) {\n        this.quickTBarObj.toolbarObj.removeItems(index);\n    };\n    BaseQuickToolbar.prototype.removeEleFromDOM = function () {\n        var element = this.popupObj.element;\n        if (this.isDOMElement) {\n            this.dropDownButtons.destroyDropDowns();\n            this.colorPickerObj.destroyColorPicker();\n            removeClass([this.element], [classes.CLS_POP]);\n            detach(element);\n            var args = this.popupObj;\n            this.parent.trigger(events.quickToolbarClose, args);\n        }\n    };\n    BaseQuickToolbar.prototype.updateStatus = function (args) {\n        var options = {\n            args: args,\n            dropDownModule: this.dropDownButtons,\n            parent: this.parent,\n            tbElements: selectAll('.' + classes.CLS_TB_ITEM, this.element),\n            tbItems: this.quickTBarObj.toolbarObj.items\n        };\n        setToolbarStatus(options, true, this.parent);\n        if (!select('.e-rte-srctextarea', this.parent.element)) {\n            updateUndoRedoStatus(this.parent.getBaseToolbarObject(), this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n        }\n    };\n    /**\n     * Destroys the Quick toolbar.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    BaseQuickToolbar.prototype.destroy = function () {\n        if (this.popupObj && !this.popupObj.isDestroyed) {\n            this.popupObj.destroy();\n            this.removeEleFromDOM();\n        }\n        this.removeEventListener();\n    };\n    /**\n     * addEventListener method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    BaseQuickToolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        if (this.parent.inlineMode.enable) {\n            this.parent.on(events.toolbarUpdated, this.updateStatus, this);\n        }\n    };\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {RichTextEditorModel} e - specifies the model element\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    BaseQuickToolbar.prototype.onPropertyChanged = function (e) {\n        if (!isNullOrUndefined(e.newProp.inlineMode)) {\n            for (var _i = 0, _a = Object.keys(e.newProp.inlineMode); _i < _a.length; _i++) {\n                var prop = _a[_i];\n                switch (prop) {\n                    case 'enable':\n                        if (e.newProp.inlineMode.enable) {\n                            this.parent.on(events.toolbarUpdated, this.updateStatus, this);\n                        }\n                        else {\n                            this.parent.off(events.toolbarUpdated, this.updateStatus);\n                        }\n                        break;\n                }\n            }\n        }\n    };\n    /**\n     * removeEventListener method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    BaseQuickToolbar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        if (this.parent.inlineMode.enable) {\n            this.parent.off(events.toolbarUpdated, this.updateStatus);\n        }\n    };\n    return BaseQuickToolbar;\n}());\nexport { BaseQuickToolbar };\n","import { Popup } from '@syncfusion/ej2-popups';\nimport { CLS_QUICK_POP } from '../base/classes';\nimport * as events from '../base/constant';\n/**\n * `Popup renderer` module is used to render popup in RichTextEditor.\n *\n * @hidden\n * @deprecated\n */\nvar PopupRenderer = /** @class */ (function () {\n    /**\n     * Constructor for popup renderer module\n     *\n     * @param {IRichTextEditor} parent - specifies the parent.\n     */\n    function PopupRenderer(parent) {\n        this.parent = parent;\n    }\n    PopupRenderer.prototype.quickToolbarOpen = function () {\n        var args = this.popupObj;\n        this.parent.trigger(events.quickToolbarOpen, args);\n    };\n    /**\n     * renderPopup method\n     *\n     * @param {BaseQuickToolbar} args - specifies  the arguments.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    PopupRenderer.prototype.renderPopup = function (args) {\n        this.setPanel(args.element);\n        this.renderPanel();\n        args.popupObj = new Popup(args.element, {\n            targetType: 'relative',\n            relateTo: this.parent.element,\n            open: this.quickToolbarOpen.bind(this)\n        });\n        this.popupObj = args.popupObj;\n        args.popupObj.hide();\n    };\n    /**\n     * The function is used to add popup class in Quick Toolbar\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    PopupRenderer.prototype.renderPanel = function () {\n        this.getPanel().classList.add(CLS_QUICK_POP);\n    };\n    /**\n     * Get the popup element of RichTextEditor\n     *\n     * @returns {Element} - specifies the element\n     * @hidden\n     * @deprecated\n     */\n    PopupRenderer.prototype.getPanel = function () {\n        return this.popupPanel;\n    };\n    /**\n     * Set the popup element of RichTextEditor\n     *\n     * @returns {void}\n     * @param  {Element} panel - specifies the element\n     * @hidden\n     * @deprecated\n     */\n    PopupRenderer.prototype.setPanel = function (panel) {\n        this.popupPanel = panel;\n    };\n    return PopupRenderer;\n}());\nexport { PopupRenderer };\n","import { select, isNullOrUndefined, Browser, addClass, removeClass, EventHandler, closest, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\nimport * as events from '../base/constant';\nimport { pageYOffset, hasClass, isIDevice } from '../base/util';\nimport { BaseQuickToolbar } from './base-quick-toolbar';\nimport { PopupRenderer } from '../renderer/popup-renderer';\nimport { CLS_INLINE_POP, CLS_INLINE } from '../base/classes';\n/**\n * `Quick toolbar` module is used to handle Quick toolbar actions.\n */\nvar QuickToolbar = /** @class */ (function () {\n    function QuickToolbar(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.renderFactory.addRenderer(RenderType.Popup, new PopupRenderer(this.parent));\n        this.addEventListener();\n    }\n    QuickToolbar.prototype.formatItems = function (items) {\n        var formattedItems = [];\n        items.forEach(function (item) {\n            if (typeof item === 'string') {\n                switch (item.toLocaleLowerCase()) {\n                    case 'open':\n                        formattedItems.push('openLink');\n                        break;\n                    case 'edit':\n                        formattedItems.push('editLink');\n                        break;\n                    case 'unlink':\n                        formattedItems.push('removeLink');\n                        break;\n                    default:\n                        formattedItems.push(item);\n                        break;\n                }\n            }\n            else {\n                formattedItems.push(item);\n            }\n        });\n        return formattedItems;\n    };\n    QuickToolbar.prototype.getQTBarOptions = function (popType, mode, items, type) {\n        return {\n            popupType: popType,\n            toolbarItems: items,\n            mode: mode,\n            renderType: type,\n            cssClass: this.parent.cssClass\n        };\n    };\n    /**\n     * createQTBar method\n     *\n     * @param {string} popupType - specifies the string value\n     * @param {string} mode - specifies the string value.\n     * @param {string} items - specifies the string.\n     * @param {RenderType} type - specifies the render type.\n     * @returns {BaseQuickToolbar} - specifies the quick toolbar\n     * @hidden\n     * @deprecated\n     */\n    QuickToolbar.prototype.createQTBar = function (popupType, mode, items, type) {\n        if (items.length < 1) {\n            return null;\n        }\n        var qTBar = new BaseQuickToolbar(this.parent, this.locator);\n        qTBar.render(this.getQTBarOptions(popupType, mode, this.formatItems(items), type));\n        return qTBar;\n    };\n    QuickToolbar.prototype.initializeQuickToolbars = function () {\n        this.parent.quickToolbarModule = this;\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        if (this.parent.inlineMode.enable && this.parent.inlineMode.onSelection && isIDevice()) {\n            EventHandler.add(this.contentRenderer.getDocument(), 'selectionchange', this.selectionChangeHandler, this);\n        }\n    };\n    // eslint-disable-next-line\n    QuickToolbar.prototype.onMouseDown = function (e) {\n        this.parent.isBlur = false;\n        this.parent.isRTE = true;\n    };\n    QuickToolbar.prototype.keyUpQT = function (e) {\n        if (e.which === 27) {\n            this.hideQuickToolbars();\n        }\n    };\n    QuickToolbar.prototype.renderQuickToolbars = function () {\n        if (this.linkQTBar || this.imageQTBar || this.audioQTBar || this.videoQTBar || this.textQTBar || this.tableQTBar) {\n            return;\n        }\n        this.linkQTBar = this.createQTBar('Link', 'Scrollable', this.parent.quickToolbarSettings.link, RenderType.LinkToolbar);\n        this.renderFactory.addRenderer(RenderType.LinkToolbar, this.linkQTBar);\n        if (!isNOU(this.parent.quickToolbarSettings.text) && !this.parent.inlineMode.enable) {\n            this.textQTBar = this.createQTBar('Text', 'MultiRow', this.parent.quickToolbarSettings.text, RenderType.TextToolbar);\n            this.renderFactory.addRenderer(RenderType.TextToolbar, this.textQTBar);\n        }\n        this.imageQTBar = this.createQTBar('Image', 'MultiRow', this.parent.quickToolbarSettings.image, RenderType.ImageToolbar);\n        this.renderFactory.addRenderer(RenderType.ImageToolbar, this.imageQTBar);\n        this.audioQTBar = this.createQTBar('Audio', 'MultiRow', this.parent.quickToolbarSettings.audio, RenderType.AudioToolbar);\n        this.renderFactory.addRenderer(RenderType.AudioToolbar, this.audioQTBar);\n        this.videoQTBar = this.createQTBar('Video', 'MultiRow', this.parent.quickToolbarSettings.video, RenderType.VideoToolbar);\n        this.renderFactory.addRenderer(RenderType.VideoToolbar, this.videoQTBar);\n        this.tableQTBar = this.createQTBar('Table', 'MultiRow', this.parent.quickToolbarSettings.table, RenderType.TableToolbar);\n        this.renderFactory.addRenderer(RenderType.TableToolbar, this.tableQTBar);\n        if (this.linkQTBar) {\n            EventHandler.add(this.linkQTBar.element, 'mousedown', this.onMouseDown, this);\n            EventHandler.add(this.linkQTBar.element, 'keyup', this.keyUpQT, this);\n        }\n        if (this.imageQTBar) {\n            EventHandler.add(this.imageQTBar.element, 'mousedown', this.onMouseDown, this);\n            EventHandler.add(this.imageQTBar.element, 'keyup', this.keyUpQT, this);\n        }\n        if (this.audioQTBar) {\n            EventHandler.add(this.audioQTBar.element, 'mousedown', this.onMouseDown, this);\n            EventHandler.add(this.audioQTBar.element, 'keyup', this.keyUpQT, this);\n        }\n        if (this.videoQTBar) {\n            EventHandler.add(this.videoQTBar.element, 'mousedown', this.onMouseDown, this);\n            EventHandler.add(this.videoQTBar.element, 'keyup', this.keyUpQT, this);\n        }\n        if (this.textQTBar) {\n            EventHandler.add(this.textQTBar.element, 'mousedown', this.onMouseDown, this);\n            EventHandler.add(this.textQTBar.element, 'keyup', this.keyUpQT, this);\n        }\n        if (this.tableQTBar) {\n            EventHandler.add(this.tableQTBar.element, 'mousedown', this.onMouseDown, this);\n            EventHandler.add(this.tableQTBar.element, 'keyup', this.keyUpQT, this);\n        }\n    };\n    QuickToolbar.prototype.renderInlineQuickToolbar = function () {\n        if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            addClass([this.parent.element], [CLS_INLINE]);\n            this.inlineQTBar = this.createQTBar('Inline', 'MultiRow', this.parent.toolbarSettings.items, RenderType.InlineToolbar);\n            this.renderFactory.addRenderer(RenderType.InlineToolbar, this.inlineQTBar);\n            EventHandler.add(this.inlineQTBar.element, 'mousedown', this.onMouseDown, this);\n            EventHandler.add(this.inlineQTBar.element, 'keyup', this.keyUpQT, this);\n        }\n    };\n    /**\n     * Method for showing the inline quick toolbar\n     *\n     * @param {number} x -specifies the value of x.\n     * @param {number} y - specifies the y valu.\n     * @param {HTMLElement} target - specifies the target element.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    QuickToolbar.prototype.showInlineQTBar = function (x, y, target) {\n        if (isNOU(this.parent) || this.parent.readonly || target.tagName.toLowerCase() === 'img') {\n            return;\n        }\n        this.inlineQTBar.showPopup(x, y, target);\n    };\n    /**\n     * Method for hidding the inline quick toolbar\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    QuickToolbar.prototype.hideInlineQTBar = function () {\n        if (this.inlineQTBar && !hasClass(this.inlineQTBar.element, 'e-popup-close')) {\n            this.inlineQTBar.hidePopup();\n        }\n    };\n    /**\n     * Method for hidding the quick toolbar\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    QuickToolbar.prototype.hideQuickToolbars = function () {\n        if (this.linkQTBar && !hasClass(this.linkQTBar.element, 'e-popup-close') && document.body.contains(this.linkQTBar.element)) {\n            this.linkQTBar.hidePopup();\n        }\n        if (this.textQTBar && !hasClass(this.textQTBar.element, 'e-popup-close') && document.body.contains(this.textQTBar.element)) {\n            this.textQTBar.hidePopup();\n        }\n        if (this.imageQTBar && !hasClass(this.imageQTBar.element, 'e-popup-close') && document.body.contains(this.imageQTBar.element)) {\n            this.imageQTBar.hidePopup();\n        }\n        if (this.audioQTBar && !hasClass(this.audioQTBar.element, 'e-popup-close') && document.body.contains(this.audioQTBar.element)) {\n            this.audioQTBar.hidePopup();\n        }\n        if (this.videoQTBar && !hasClass(this.videoQTBar.element, 'e-popup-close') && document.body.contains(this.videoQTBar.element)) {\n            this.videoQTBar.hidePopup();\n        }\n        if (this.tableQTBar && !hasClass(this.tableQTBar.element, 'e-popup-close') && document.body.contains(this.tableQTBar.element)) {\n            this.tableQTBar.hidePopup();\n        }\n        if (!isNOU(this.parent) && this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            this.hideInlineQTBar();\n        }\n    };\n    QuickToolbar.prototype.deBounce = function (x, y, target) {\n        var _this = this;\n        clearTimeout(this.deBouncer);\n        this.deBouncer = window.setTimeout(function () {\n            _this.showInlineQTBar(x, y, target);\n        }, 1000);\n    };\n    QuickToolbar.prototype.mouseUpHandler = function (e) {\n        if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            var args = e.args.touches ?\n                e.args.changedTouches[0] : e.args;\n            var range = this.parent.getRange();\n            var target = e.args.target;\n            if (isNullOrUndefined(select('.' + CLS_INLINE_POP, document.body))) {\n                if (isIDevice() && e.touchData && e.touchData.prevClientX !== e.touchData.clientX\n                    && e.touchData.prevClientY !== e.touchData.clientY) {\n                    return;\n                }\n                this.hideInlineQTBar();\n                var parentLeft = this.parent.element.getBoundingClientRect().left;\n                this.offsetX = this.parent.iframeSettings.enable ? window.pageXOffset + parentLeft + args.clientX : args.pageX;\n                this.offsetY = pageYOffset(args, this.parent.element, this.parent.iframeSettings.enable);\n                if (target.nodeName === 'TEXTAREA') {\n                    this.showInlineQTBar(this.offsetX, this.offsetY, target);\n                }\n                else {\n                    var closestAnchor = closest(target, 'a');\n                    target = closestAnchor ? closestAnchor : target;\n                    var startNode = this.parent.getRange().startContainer.parentElement;\n                    var endNode = this.parent.getRange().endContainer.parentElement;\n                    if ((isNOU(closest(startNode, 'A')) || isNOU(closest(endNode, 'A'))) && (!closest(target, 'td,th') || !range.collapsed) &&\n                        (target.tagName !== 'IMG' || this.parent.getRange().startOffset !== this.parent.getRange().endOffset)) {\n                        if (this.parent.inlineMode.onSelection && range.collapsed) {\n                            return;\n                        }\n                        this.target = target;\n                        this.showInlineQTBar(this.offsetX, this.offsetY, target);\n                    }\n                }\n            }\n        }\n        if (!isNOU(this.textQTBar) && !isNOU(this.parent.quickToolbarSettings.text) && !this.parent.inlineMode.enable) {\n            var args = e.args.touches ?\n                e.args.changedTouches[0] : e.args;\n            var target = e.args.target;\n            this.hideQuickToolbars();\n            var parentLeft = this.parent.element.getBoundingClientRect().left;\n            this.offsetX = this.parent.iframeSettings.enable ? this.parent.element.ownerDocument.documentElement.scrollLeft\n                + parentLeft + args.clientX : args.pageX;\n            this.offsetY = pageYOffset(args, this.parent.element, this.parent.iframeSettings.enable);\n            var range = this.parent.getRange();\n            if ((range.endContainer.parentElement.tagName === range.startContainer.parentElement.tagName && (range.startContainer.parentElement.tagName === 'A' && range.endContainer.parentElement.tagName === 'A')) ||\n                (target.tagName === 'IMG') || (target.tagName === 'VIDEO') || (target.tagName === 'AUDIO') || (target.childNodes[0].nodeType === 1 && target.childNodes[0].classList.contains('e-rte-audio')) ||\n                (this.parent.getRange().startOffset === this.parent.getRange().endOffset)) {\n                return;\n            }\n            this.target = target;\n            this.textQTBar.showPopup(this.offsetX, this.offsetY, target, 'text');\n        }\n    };\n    QuickToolbar.prototype.keyDownHandler = function () {\n        if ((this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice()))\n            && !isNullOrUndefined(select('.' + CLS_INLINE_POP, document))) {\n            this.hideInlineQTBar();\n        }\n    };\n    QuickToolbar.prototype.inlineQTBarMouseDownHandler = function () {\n        if ((this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice()))\n            && !isNullOrUndefined(select('.' + CLS_INLINE_POP, document))) {\n            this.hideInlineQTBar();\n        }\n        if (!isNOU(this.parent.quickToolbarSettings.text)) {\n            if (this.textQTBar && !hasClass(this.textQTBar.element, 'e-popup-close') && document.body.contains(this.textQTBar.element)) {\n                this.textQTBar.hidePopup();\n            }\n        }\n    };\n    QuickToolbar.prototype.keyUpHandler = function (e) {\n        if (this.parent.inlineMode.enable && !Browser.isDevice) {\n            var args = e.args;\n            if (this.parent.inlineMode.onSelection) {\n                if (this.parent.getSelection().length > 0) {\n                    if ((args.ctrlKey && args.keyCode === 65) || (args.shiftKey && (args.keyCode === 33 || args.keyCode === 34 ||\n                        args.keyCode === 35 || args.keyCode === 36 || args.keyCode === 37 || args.keyCode === 38 ||\n                        args.keyCode === 39 || args.keyCode === 40))) {\n                        this.showInlineQTBar(this.offsetX, this.offsetY, args.target);\n                    }\n                }\n                return;\n            }\n            this.deBounce(this.offsetX, this.offsetY, args.target);\n        }\n    };\n    QuickToolbar.prototype.selectionChangeHandler = function (e) {\n        var _this = this;\n        clearTimeout(this.deBouncer);\n        this.deBouncer = window.setTimeout(function () {\n            _this.onSelectionChange(e);\n        }, 1000);\n    };\n    QuickToolbar.prototype.onSelectionChange = function (e) {\n        if (!isNullOrUndefined(select('.' + CLS_INLINE_POP, document.body))) {\n            return;\n        }\n        var selection = this.contentRenderer.getDocument().getSelection();\n        if (!selection.isCollapsed) {\n            this.mouseUpHandler({ args: e });\n        }\n    };\n    /**\n     * getInlineBaseToolbar method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    QuickToolbar.prototype.getInlineBaseToolbar = function () {\n        return this.inlineQTBar && this.inlineQTBar.quickTBarObj;\n    };\n    /**\n     * Destroys the ToolBar.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    QuickToolbar.prototype.destroy = function () {\n        if (isNOU(this.parent)) {\n            return;\n        }\n        if (this.linkQTBar) {\n            EventHandler.remove(this.linkQTBar.element, 'mousedown', this.onMouseDown);\n            EventHandler.remove(this.linkQTBar.element, 'keyup', this.keyUpQT);\n            this.linkQTBar.destroy();\n        }\n        if (this.textQTBar) {\n            EventHandler.remove(this.textQTBar.element, 'mousedown', this.onMouseDown);\n            EventHandler.remove(this.textQTBar.element, 'keyup', this.keyUpQT);\n            this.textQTBar.destroy();\n        }\n        if (this.imageQTBar) {\n            EventHandler.remove(this.imageQTBar.element, 'mousedown', this.onMouseDown);\n            EventHandler.remove(this.imageQTBar.element, 'keyup', this.keyUpQT);\n            this.imageQTBar.destroy();\n        }\n        if (this.audioQTBar) {\n            EventHandler.remove(this.audioQTBar.element, 'mousedown', this.onMouseDown);\n            EventHandler.remove(this.audioQTBar.element, 'keyup', this.keyUpQT);\n            this.audioQTBar.destroy();\n        }\n        if (this.videoQTBar) {\n            EventHandler.remove(this.videoQTBar.element, 'mousedown', this.onMouseDown);\n            EventHandler.remove(this.videoQTBar.element, 'keyup', this.keyUpQT);\n            this.videoQTBar.destroy();\n        }\n        if (this.tableQTBar) {\n            EventHandler.remove(this.tableQTBar.element, 'mousedown', this.onMouseDown);\n            EventHandler.remove(this.tableQTBar.element, 'keyup', this.keyUpQT);\n            this.tableQTBar.destroy();\n        }\n        if (this.inlineQTBar) {\n            EventHandler.remove(this.inlineQTBar.element, 'mousedown', this.onMouseDown);\n            EventHandler.remove(this.inlineQTBar.element, 'keyup', this.keyUpQT);\n            if (isIDevice()) {\n                EventHandler.remove(document, 'selectionchange', this.selectionChangeHandler);\n            }\n            this.inlineQTBar.destroy();\n        }\n        this.removeEventListener();\n    };\n    QuickToolbar.prototype.moduleDestroy = function () {\n        this.parent = null;\n    };\n    QuickToolbar.prototype.wireInlineQTBarEvents = function () {\n        this.parent.on(events.mouseUp, this.mouseUpHandler, this);\n        this.parent.on(events.mouseDown, this.inlineQTBarMouseDownHandler, this);\n        this.parent.on(events.keyDown, this.keyDownHandler, this);\n        this.parent.on(events.keyUp, this.keyUpHandler, this);\n        this.parent.on(events.sourceCodeMouseDown, this.mouseUpHandler, this);\n        this.parent.on(events.renderInlineToolbar, this.renderInlineQuickToolbar, this);\n        this.parent.on(events.moduleDestroy, this.moduleDestroy, this);\n    };\n    QuickToolbar.prototype.unWireInlineQTBarEvents = function () {\n        this.parent.off(events.mouseUp, this.mouseUpHandler);\n        this.parent.off(events.mouseDown, this.inlineQTBarMouseDownHandler);\n        this.parent.off(events.keyDown, this.keyDownHandler);\n        this.parent.off(events.keyUp, this.keyUpHandler);\n        this.parent.off(events.sourceCodeMouseDown, this.mouseUpHandler);\n        this.parent.off(events.renderInlineToolbar, this.renderInlineQuickToolbar);\n        this.parent.off(events.moduleDestroy, this.moduleDestroy);\n    };\n    // eslint-disable-next-line\n    QuickToolbar.prototype.toolbarUpdated = function (args) {\n        if (this.linkQTBar && !hasClass(this.linkQTBar.element, 'e-popup-close')) {\n            this.linkQTBar.hidePopup();\n        }\n        if (this.imageQTBar && !hasClass(this.imageQTBar.element, 'e-popup-close')) {\n            this.imageQTBar.hidePopup();\n        }\n        if (this.audioQTBar && !hasClass(this.audioQTBar.element, 'e-popup-close')) {\n            this.audioQTBar.hidePopup();\n        }\n        if (this.videoQTBar && !hasClass(this.videoQTBar.element, 'e-popup-close')) {\n            this.videoQTBar.hidePopup();\n        }\n        if (this.tableQTBar && !hasClass(this.tableQTBar.element, 'e-popup-close')) {\n            this.tableQTBar.hidePopup();\n        }\n    };\n    /**\n     * addEventListener\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    QuickToolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.initializeQuickToolbars, this);\n        this.parent.on(events.mouseDown, this.renderQuickToolbars, this);\n        this.parent.on(events.toolbarUpdated, this.toolbarUpdated, this);\n        this.parent.on(events.drop, this.renderQuickToolbars, this);\n        this.wireInlineQTBarEvents();\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        if (this.parent.quickToolbarSettings.actionOnScroll === 'hide') {\n            this.parent.on(events.scroll, this.hideQuickToolbars, this);\n            this.parent.on(events.contentscroll, this.hideQuickToolbars, this);\n        }\n        this.parent.on(events.focusChange, this.hideQuickToolbars, this);\n        this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.rtlMode, this.setRtl, this);\n        this.parent.on(events.bindCssClass, this.setCssClass, this);\n        this.parent.on(events.hidePopup, this.hideQuickToolbars, this);\n    };\n    QuickToolbar.prototype.onKeyDown = function (e) {\n        var args = e.args;\n        if (args.which === 8 || args.which === 46) {\n            if (this.imageQTBar && !hasClass(this.imageQTBar.element, 'e-popup-close')) {\n                this.imageQTBar.hidePopup();\n            }\n            if (this.audioQTBar && !hasClass(this.audioQTBar.element, 'e-popup-close')) {\n                this.audioQTBar.hidePopup();\n            }\n            if (this.videoQTBar && !hasClass(this.videoQTBar.element, 'e-popup-close')) {\n                this.videoQTBar.hidePopup();\n            }\n        }\n    };\n    QuickToolbar.prototype.onIframeMouseDown = function () {\n        this.hideQuickToolbars();\n        this.hideInlineQTBar();\n    };\n    QuickToolbar.prototype.updateCss = function (baseQTObj, e) {\n        if (baseQTObj && e.cssClass) {\n            if (isNullOrUndefined(e.oldCssClass && baseQTObj.quickTBarObj.toolbarObj.cssClass !== e.cssClass)) {\n                baseQTObj.quickTBarObj.toolbarObj.setProperties({ cssClass: (baseQTObj.quickTBarObj.toolbarObj.cssClass + ' ' + e.cssClass).trim() });\n            }\n            else {\n                baseQTObj.quickTBarObj.toolbarObj.setProperties({ cssClass: (baseQTObj.quickTBarObj.toolbarObj.cssClass.replace(e.oldCssClass, '').trim() + ' ' + e.cssClass).trim() });\n            }\n        }\n    };\n    QuickToolbar.prototype.setCssClass = function (e) {\n        var baseQuickToolbarObj = [\n            this.inlineQTBar, this.imageQTBar, this.linkQTBar, this.textQTBar, this.tableQTBar\n        ];\n        for (var i = 0; i < baseQuickToolbarObj.length; i++) {\n            this.updateCss(baseQuickToolbarObj[i], e);\n        }\n    };\n    QuickToolbar.prototype.setRtl = function (args) {\n        if (this.inlineQTBar) {\n            this.inlineQTBar.quickTBarObj.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.imageQTBar) {\n            this.imageQTBar.quickTBarObj.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.audioQTBar) {\n            this.audioQTBar.quickTBarObj.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.videoQTBar) {\n            this.videoQTBar.quickTBarObj.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.linkQTBar) {\n            this.linkQTBar.quickTBarObj.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.textQTBar) {\n            this.textQTBar.quickTBarObj.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n    };\n    /**\n     * removeEventListener\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    QuickToolbar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.initializeQuickToolbars);\n        this.parent.off(events.mouseDown, this.renderQuickToolbars);\n        this.parent.off(events.toolbarUpdated, this.toolbarUpdated);\n        this.parent.off(events.drop, this.renderQuickToolbars);\n        this.unWireInlineQTBarEvents();\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        if (this.parent.quickToolbarSettings.actionOnScroll === 'hide') {\n            this.parent.off(events.scroll, this.hideQuickToolbars);\n            this.parent.off(events.contentscroll, this.hideQuickToolbars);\n        }\n        this.parent.off(events.focusChange, this.hideQuickToolbars);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n        this.parent.off(events.keyDown, this.onKeyDown);\n        this.parent.off(events.rtlMode, this.setRtl);\n        this.parent.off(events.bindCssClass, this.setCssClass);\n        this.parent.off(events.hidePopup, this.hideQuickToolbars);\n        if (this.deBouncer) {\n            clearTimeout(this.deBouncer);\n        }\n    };\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {RichTextEditorModel} e - specifies the element.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    QuickToolbar.prototype.onPropertyChanged = function (e) {\n        if (!isNullOrUndefined(e.newProp.quickToolbarSettings)) {\n            for (var _i = 0, _a = Object.keys(e.newProp.quickToolbarSettings); _i < _a.length; _i++) {\n                var prop = _a[_i];\n                switch (prop) {\n                    case 'actionOnScroll':\n                        if (e.newProp.quickToolbarSettings.actionOnScroll === 'none') {\n                            this.parent.off(events.scroll, this.hideQuickToolbars);\n                            this.parent.off(events.contentscroll, this.hideQuickToolbars);\n                        }\n                        else {\n                            this.parent.on(events.scroll, this.hideQuickToolbars, this);\n                            this.parent.on(events.contentscroll, this.hideQuickToolbars, this);\n                        }\n                        break;\n                }\n            }\n        }\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (this.inlineQTBar) {\n            removeClass([this.parent.element], [CLS_INLINE]);\n            this.unWireInlineQTBarEvents();\n            this.hideInlineQTBar();\n        }\n        if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            addClass([this.parent.element], [CLS_INLINE]);\n            this.wireInlineQTBarEvents();\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    QuickToolbar.prototype.getModuleName = function () {\n        return 'quickToolbar';\n    };\n    return QuickToolbar;\n}());\nexport { QuickToolbar };\n","import { detach, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { CLS_COUNT, CLS_WARNING, CLS_ERROR } from '../base/classes';\n/**\n * `Count` module is used to handle Count actions.\n */\nvar Count = /** @class */ (function () {\n    function Count(parent, serviceLocator) {\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    Count.prototype.initializeInstance = function () {\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        this.editPanel = this.contentRenderer.getEditPanel();\n        this.addEventListener();\n    };\n    /**\n     * renderCount method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    Count.prototype.renderCount = function () {\n        this.initializeInstance();\n        this.element = this.parent.createElement('span', { className: CLS_COUNT });\n        this.contentRenderer.getPanel().parentElement.appendChild(this.element);\n        this.appendCount();\n        if (this.parent.maxLength !== -1) {\n            this.charCountBackground(this.htmlLength);\n        }\n    };\n    Count.prototype.appendCount = function () {\n        var htmlText = this.parent.editorMode === 'Markdown' ? this.editPanel.value :\n            this.editPanel.textContent;\n        if (this.parent.editorMode !== 'Markdown' && htmlText.indexOf('\\u200B') !== -1) {\n            this.htmlLength = htmlText.replace(/\\u200B/g, '').length;\n        }\n        else {\n            this.htmlLength = htmlText.length;\n        }\n        var string = this.parent.maxLength === -1 ? this.htmlLength : this.htmlLength + ' / ' + this.parent.maxLength;\n        this.element.innerHTML = string;\n    };\n    Count.prototype.charCountBackground = function (htmlLength) {\n        var percentage = (htmlLength / this.parent.maxLength) * 100;\n        if (percentage < 85) {\n            this.element.classList.remove(CLS_WARNING);\n            this.element.classList.remove(CLS_ERROR);\n        }\n        else if (percentage > 85 && percentage <= 90) {\n            this.element.classList.remove(CLS_ERROR);\n            this.element.classList.add(CLS_WARNING);\n        }\n        else if (percentage > 90) {\n            this.element.classList.remove(CLS_WARNING);\n            this.element.classList.add(CLS_ERROR);\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    Count.prototype.refresh = function () {\n        if (!isNullOrUndefined(this.editPanel)) {\n            this.appendCount();\n            if (this.parent.maxLength !== -1) {\n                this.charCountBackground(this.htmlLength);\n            }\n        }\n    };\n    /**\n     * Destroys the Count.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    Count.prototype.destroy = function () {\n        if (this.element && !isNullOrUndefined(this.parent.element.querySelector('.' + CLS_COUNT))) {\n            detach(this.element);\n        }\n        this.removeEventListener();\n    };\n    Count.prototype.toggle = function (e) {\n        this.element.style.display = (e.member === 'viewSource') ? 'none' : 'block';\n    };\n    Count.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.renderCount, this);\n        this.parent.on(events.keyUp, this.refresh, this);\n        this.parent.on(events.count, this.refresh, this);\n        this.parent.on(events.refreshBegin, this.refresh, this);\n        this.parent.on(events.mouseDown, this.refresh, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.sourceCode, this.toggle, this);\n        this.parent.on(events.updateSource, this.toggle, this);\n    };\n    Count.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.renderCount);\n        this.parent.off(events.keyUp, this.refresh);\n        this.parent.off(events.refreshBegin, this.refresh);\n        this.parent.off(events.count, this.refresh);\n        this.parent.off(events.mouseDown, this.refresh);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.sourceCode, this.toggle);\n        this.parent.off(events.updateSource, this.toggle);\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} - returns the string value\n     */\n    Count.prototype.getModuleName = function () {\n        return 'count';\n    };\n    return Count;\n}());\nexport { Count };\n","/**\n * MarkdownSelection internal module\n *\n * @hidden\n * @deprecated\n */\nvar MarkdownSelection = /** @class */ (function () {\n    function MarkdownSelection() {\n    }\n    /**\n     * markdown getLineNumber method\n     *\n     * @param {HTMLTextAreaElement} textarea - specifies the text area element\n     * @param {number} point - specifies the number value\n     * @returns {number} - returns the value\n     * @hidden\n     * @deprecated\n     */\n    MarkdownSelection.prototype.getLineNumber = function (textarea, point) {\n        return textarea.value.substr(0, point).split('\\n').length;\n    };\n    /**\n     * markdown getSelectedText method\n     *\n     * @param {HTMLTextAreaElement} textarea - specifies the text area element\n     * @returns {string} - specifies the string value\n     * @hidden\n     * @deprecated\n     */\n    MarkdownSelection.prototype.getSelectedText = function (textarea) {\n        var start = textarea.selectionStart;\n        var end = textarea.selectionEnd;\n        return textarea.value.substring(start, end);\n    };\n    /**\n     * markdown getAllParents method\n     *\n     * @param {string} value - specifies the string value\n     * @returns {string[]} - returns the string value\n     * @hidden\n     * @deprecated\n     */\n    MarkdownSelection.prototype.getAllParents = function (value) {\n        return value.split('\\n');\n    };\n    /**\n     * markdown getSelectedLine method\n     *\n     * @param {HTMLTextAreaElement} textarea - specifies the text area element\n     * @returns {string} - returns the string value\n     * @hidden\n     * @deprecated\n     */\n    MarkdownSelection.prototype.getSelectedLine = function (textarea) {\n        var lines = this.getAllParents(textarea.value);\n        var index = this.getLineNumber(textarea, textarea.selectionStart);\n        return lines[index - 1];\n    };\n    /**\n     * markdown getLine method\n     *\n     * @param {HTMLTextAreaElement} textarea - specifies the text area element\n     * @param {number} index - specifies the number value\n     * @returns {string} - returns the string value\n     * @hidden\n     * @deprecated\n     */\n    MarkdownSelection.prototype.getLine = function (textarea, index) {\n        var lines = this.getAllParents(textarea.value);\n        return lines[index];\n    };\n    /**\n     * markdown getSelectedParentPoints method\n     *\n     * @param {HTMLTextAreaElement} textarea - specifies the text area element\n     * @returns {string} - returns the string value\n     * @hidden\n     * @deprecated\n     */\n    MarkdownSelection.prototype.getSelectedParentPoints = function (textarea) {\n        var lines = this.getAllParents(textarea.value);\n        var start = this.getLineNumber(textarea, textarea.selectionStart);\n        var end = this.getLineNumber(textarea, textarea.selectionEnd);\n        var parents = this.getSelectedText(textarea).split('\\n');\n        var selectedPoints = [];\n        var selectedLine = lines[start - 1];\n        var startLength = lines.slice(0, start - 1).join('').length;\n        var firstPoint = {};\n        firstPoint.line = start - 1;\n        firstPoint.start = startLength + firstPoint.line;\n        firstPoint.end = selectedLine !== '' ? firstPoint.start +\n            selectedLine.length + 1 : firstPoint.start + selectedLine.length;\n        firstPoint.text = selectedLine;\n        selectedPoints.push(firstPoint);\n        if (parents.length > 1) {\n            for (var i = 1; i < parents.length - 1; i++) {\n                var points = {};\n                points.line = selectedPoints[i - 1].line + 1;\n                points.start = parents[i] !== '' ? selectedPoints[i - 1].end : selectedPoints[i - 1].end;\n                points.end = points.start + parents[i].length + 1;\n                points.text = parents[i];\n                selectedPoints.push(points);\n            }\n            var lastPoint = {};\n            lastPoint.line = selectedPoints[selectedPoints.length - 1].line + 1;\n            lastPoint.start = selectedPoints[selectedPoints.length - 1].end;\n            lastPoint.end = lastPoint.start + lines[end - 1].length + 1;\n            lastPoint.text = lines[end - 1];\n            selectedPoints.push(lastPoint);\n        }\n        return selectedPoints;\n    };\n    /**\n     * markdown setSelection method\n     *\n     * @param {HTMLTextAreaElement} textarea - specifies the text area element\n     * @param {number} start - specifies the start vaulue\n     * @param {number} end - specifies the end value\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    MarkdownSelection.prototype.setSelection = function (textarea, start, end) {\n        textarea.setSelectionRange(start, end);\n        textarea.focus();\n    };\n    /**\n     * markdown save method\n     *\n     * @param {number} start - specifies the start vaulue\n     * @param {number} end - specifies the end value\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    MarkdownSelection.prototype.save = function (start, end) {\n        this.selectionStart = start;\n        this.selectionEnd = end;\n    };\n    /**\n     * markdown restore method\n     *\n     * @param {HTMLTextAreaElement} textArea - specifies the text area element\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    MarkdownSelection.prototype.restore = function (textArea) {\n        this.setSelection(textArea, this.selectionStart, this.selectionEnd);\n    };\n    /**\n     * markdown isStartWith method\n     *\n     * @param {string} line - specifies the string value\n     * @param {string} command - specifies the string value\n     * @returns {boolean} - returns the boolean value\n     * @hidden\n     * @deprecated\n     */\n    MarkdownSelection.prototype.isStartWith = function (line, command) {\n        var isStart = false;\n        if (line) {\n            var reg = line.trim() === command.trim() ?\n                // eslint-disable-next-line\n                new RegExp('^(' + this.replaceSpecialChar(command.trim()) + ')', 'gim') :\n                // eslint-disable-next-line\n                new RegExp('^(' + this.replaceSpecialChar(command) + ')', 'gim');\n            isStart = reg.test(line.trim());\n        }\n        return isStart;\n    };\n    /**\n     * markdown replaceSpecialChar method\n     *\n     * @param {string} value - specifies the string value\n     * @returns {string} - returns the value\n     * @hidden\n     * @deprecated\n     */\n    MarkdownSelection.prototype.replaceSpecialChar = function (value) {\n        // eslint-disable-next-line\n        return value.replace(/[`~!@#$%^&*()_|+\\-=?;:'\",.<>\\{\\}\\[\\]\\\\\\/]/g, '\\\\$&');\n    };\n    /**\n     * markdown isClear method\n     *\n     * @param {string} parents - specifies the parent element\n     * @param {string} regex - specifies the regex value\n     * @returns {boolean} - returns the boolean value\n     * @hidden\n     * @deprecated\n     */\n    MarkdownSelection.prototype.isClear = function (parents, regex) {\n        var isClear = false;\n        for (var i = 0; i < parents.length; i++) {\n            // eslint-disable-next-line\n            if (new RegExp(regex, 'gim').test(parents[i].text)) {\n                return true;\n            }\n        }\n        return isClear;\n    };\n    /**\n     * markdown getSelectedInlinePoints method\n     *\n     * @param {HTMLTextAreaElement} textarea - specifies the text area\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    MarkdownSelection.prototype.getSelectedInlinePoints = function (textarea) {\n        var start = textarea.selectionStart;\n        var end = textarea.selectionEnd;\n        var selection = this.getSelectedText(textarea);\n        return { start: start, end: end, text: selection };\n    };\n    return MarkdownSelection;\n}());\nexport { MarkdownSelection };\n","import { MarkdownSelection } from '../../markdown-parser/plugin/markdown-selection';\nimport * as events from '../base/constant';\nimport { getDefaultMDTbStatus } from '../../common/util';\n/**\n * MarkdownToolbarStatus module for refresh the toolbar status\n */\nvar MarkdownToolbarStatus = /** @class */ (function () {\n    function MarkdownToolbarStatus(parent) {\n        this.toolbarStatus = this.prevToolbarStatus = getDefaultMDTbStatus();\n        this.selection = new MarkdownSelection();\n        this.parent = parent;\n        this.element = this.parent.contentModule.getEditPanel();\n        this.addEventListener();\n    }\n    MarkdownToolbarStatus.prototype.addEventListener = function () {\n        this.parent.on(events.toolbarRefresh, this.onRefreshHandler, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    MarkdownToolbarStatus.prototype.removeEventListener = function () {\n        this.parent.off(events.toolbarRefresh, this.onRefreshHandler);\n        this.parent.off(events.destroy, this.removeEventListener);\n    };\n    MarkdownToolbarStatus.prototype.onRefreshHandler = function (args) {\n        var parentsLines = this.selection.getSelectedParentPoints(this.element);\n        this.toolbarStatus = {\n            orderedlist: args.documentNode ? false : this.isListsApplied(parentsLines, 'OL'),\n            unorderedlist: args.documentNode ? false : this.isListsApplied(parentsLines, 'UL'),\n            formats: this.currentFormat(parentsLines, args.documentNode),\n            bold: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('Bold'),\n            italic: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('Italic'),\n            inlinecode: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('InlineCode'),\n            strikethrough: args.documentNode ? false :\n                this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('StrikeThrough'),\n            subscript: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('SubScript'),\n            superscript: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('SuperScript'),\n            uppercase: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('UpperCase')\n        };\n        if (this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('InlineCode')) {\n            this.toolbarStatus.formats = 'pre';\n        }\n        var tbStatusString = JSON.stringify(this.toolbarStatus);\n        this.parent.notify(events.toolbarUpdated, this.toolbarStatus);\n        if (JSON.stringify(this.prevToolbarStatus) !== tbStatusString) {\n            this.parent.notify(events.updateTbItemsStatus, { html: null, markdown: JSON.parse(tbStatusString) });\n            this.prevToolbarStatus = JSON.parse(tbStatusString);\n        }\n    };\n    MarkdownToolbarStatus.prototype.isListsApplied = function (lines, type) {\n        var isApply = true;\n        if (type === 'OL') {\n            for (var i = 0; i < lines.length; i++) {\n                var lineSplit = lines[i].text.trim().split(' ', 2)[0] + ' ';\n                if (!/^[\\d.]+[ ]+$/.test(lineSplit)) {\n                    isApply = false;\n                    break;\n                }\n            }\n        }\n        else {\n            for (var i = 0; i < lines.length; i++) {\n                if (!this.selection.isStartWith(lines[i].text, this.parent.formatter.listTags[\"\" + type])) {\n                    isApply = false;\n                    break;\n                }\n            }\n        }\n        return isApply;\n    };\n    MarkdownToolbarStatus.prototype.currentFormat = function (lines, documentNode) {\n        var format = 'p';\n        var keys = Object.keys(this.parent.formatter.formatTags);\n        var direction = this.element.selectionDirection;\n        var checkLine = direction === 'backward' ? lines[0].text : lines[lines.length - 1].text;\n        for (var i = 0; !documentNode && i < keys.length; i++) {\n            if (keys[i] !== 'pre' && this.selection.isStartWith(checkLine, this.parent.formatter.formatTags[keys[i]])) {\n                format = keys[i];\n                break;\n            }\n            else if (keys[i] === 'pre') {\n                if (this.codeFormat()) {\n                    format = keys[i];\n                    break;\n                }\n            }\n        }\n        return format;\n    };\n    MarkdownToolbarStatus.prototype.codeFormat = function () {\n        var isFormat = false;\n        var textArea = this.parent.inputElement;\n        var start = textArea.selectionStart;\n        var splitAt = function (index) { return function (x) { return [x.slice(0, index), x.slice(index)]; }; };\n        var splitText = splitAt(start)(textArea.value);\n        var cmdPre = this.parent.formatter.formatTags.pre;\n        var selectedText = this.getSelectedText(textArea);\n        if (selectedText !== '' && selectedText === selectedText.toLocaleUpperCase()) {\n            return true;\n        }\n        else if (selectedText === '') {\n            var beforeText = textArea.value.substr(splitText[0].length - 1, 1);\n            var afterText = splitText[1].substr(0, 1);\n            if ((beforeText !== '' && afterText !== '' && beforeText.match(/[a-z]/i)) &&\n                beforeText === beforeText.toLocaleUpperCase() && afterText === afterText.toLocaleUpperCase()) {\n                return true;\n            }\n        }\n        if ((this.isCode(splitText[0], cmdPre) && this.isCode(splitText[1], cmdPre)) &&\n            (splitText[0].match(this.multiCharRegx(cmdPre)).length % 2 === 1 &&\n                splitText[1].match(this.multiCharRegx(cmdPre)).length % 2 === 1)) {\n            isFormat = true;\n        }\n        return isFormat;\n    };\n    MarkdownToolbarStatus.prototype.getSelectedText = function (textarea) {\n        return textarea.value.substring(textarea.selectionStart, textarea.selectionEnd);\n    };\n    MarkdownToolbarStatus.prototype.isCode = function (text, cmd) {\n        return text.search('\\\\' + cmd + '') !== -1;\n    };\n    MarkdownToolbarStatus.prototype.multiCharRegx = function (cmd) {\n        // eslint-disable-next-line\n        return new RegExp('(\\\\' + cmd + ')', 'g');\n    };\n    return MarkdownToolbarStatus;\n}());\nexport { MarkdownToolbarStatus };\n","import * as events from '../base/constant';\nimport { isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\n/**\n * `ExecCommandCallBack` module is used to run the editor manager command\n */\nvar ExecCommandCallBack = /** @class */ (function () {\n    function ExecCommandCallBack(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    ExecCommandCallBack.prototype.addEventListener = function () {\n        this.parent.on(events.execCommandCallBack, this.commandCallBack, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    ExecCommandCallBack.prototype.commandCallBack = function (args) {\n        var formatPainterCopy = !isNOU(args.requestType) && args.requestType === 'FormatPainter' && args.action === 'format-copy';\n        if (!isNOU(args) && !isNOU(args.requestType) && args.requestType !== 'Undo' && args.requestType !== 'Redo' && !formatPainterCopy) {\n            this.parent.formatter.saveData();\n        }\n        this.parent.notify(events.toolbarRefresh, { args: args });\n        this.parent.notify(events.count, {});\n    };\n    ExecCommandCallBack.prototype.removeEventListener = function () {\n        this.parent.off(events.execCommandCallBack, this.commandCallBack);\n        this.parent.off(events.destroy, this.removeEventListener);\n    };\n    return ExecCommandCallBack;\n}());\nexport { ExecCommandCallBack };\n","/**\n * Constant values for Common\n */\n/**\n * Keydown event trigger\n *\n * @hidden\n */\nexport var KEY_DOWN = 'keydown';\n/**\n * Undo and Redo action HTML plugin events\n *\n * @hidden\n */\nexport var ACTION = 'action';\n/**\n * Formats plugin events\n *\n * @hidden\n */\nexport var FORMAT_TYPE = 'format-type';\n/**\n * Keydown handler event trigger\n *\n * @hidden\n */\nexport var KEY_DOWN_HANDLER = 'keydown-handler';\n/**\n * List plugin events\n *\n * @hidden\n */\nexport var LIST_TYPE = 'list-type';\n/**\n * Keyup handler event trigger\n *\n * @hidden\n */\nexport var KEY_UP_HANDLER = 'keyup-handler';\n/**\n * Keyup event trigger\n *\n * @hidden\n */\nexport var KEY_UP = 'keyup';\n/**\n * Model changed plugin event trigger\n *\n * @hidden\n */\nexport var MODEL_CHANGED_PLUGIN = 'model_changed_plugin';\n/**\n * Model changed event trigger\n *\n * @hidden\n */\nexport var MODEL_CHANGED = 'model_changed';\n/**\n * PasteCleanup plugin for MSWord content\n *\n * @hidden\n */\nexport var MS_WORD_CLEANUP_PLUGIN = 'ms_word_cleanup_plugin';\n/**\n * PasteCleanup for MSWord content\n *\n * @hidden\n */\nexport var MS_WORD_CLEANUP = 'ms_word_cleanup';\n/**\n * ActionBegin event callback\n *\n * @hidden\n */\nexport var ON_BEGIN = 'onBegin';\n/**\n * Callback for spacelist action\n *\n * @hidden\n */\nexport var SPACE_ACTION = 'actionBegin';\n/**\n * Format painter event constant\n *\n * @hidden\n */\nexport var FORMAT_PAINTER_ACTIONS = 'format_painter_actions';\n/**\n * Emoji picker event constant\n *\n * @hidden\n */\nexport var EMOJI_PICKER_ACTIONS = 'emoji_picker_actions';\n","import { extend, isNullOrUndefined as isNOU, Browser } from '@syncfusion/ej2-base';\nimport * as CONSTANT from '../base/constant';\nimport { updateUndoRedoStatus, isIDevice } from '../base/util';\nimport { KEY_DOWN, KEY_UP } from './../../common/constant';\n/**\n * Formatter\n *\n * @hidden\n * @deprecated\n */\nvar Formatter = /** @class */ (function () {\n    function Formatter() {\n    }\n    /**\n     * To execute the command\n     *\n     * @param  {IRichTextEditor} self - specifies the self element.\n     * @param  {ActionBeginEventArgs} args - specifies the event arguments.\n     * @param  {MouseEvent|KeyboardEvent} event - specifies the keyboard event.\n     * @param  {IItemCollectionArgs} value - specifies the collection arguments\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    Formatter.prototype.process = function (self, args, event, value) {\n        var _this = this;\n        var selection = self.contentModule.getDocument().getSelection();\n        var range = (selection.rangeCount > 0) ? selection.getRangeAt(selection.rangeCount - 1) : null;\n        var saveSelection;\n        var isKeyboardVideoInsert = (!isNOU(value) && !isNOU(value.cssClass) &&\n            value.cssClass !== 'e-video-inline');\n        if (self.editorMode === 'HTML') {\n            if (!isNOU(args) && !isKeyboardVideoInsert) {\n                if (isNOU(args.name) || (!isNOU(args.name) && args.name !== 'showDialog')) {\n                    saveSelection = this.editorManager.nodeSelection.save(range, self.contentModule.getDocument());\n                }\n            }\n        }\n        if (!isNOU(args)\n            && args.item.command\n            && args.item.command !== 'Table'\n            && args.item.command !== 'Actions'\n            && args.item.command !== 'Links'\n            && args.item.command !== 'Images'\n            && args.item.command !== 'Files'\n            && args.item.command !== 'Audios'\n            && args.item.command !== 'Videos'\n            && args.item.command !== 'EmojiPicker'\n            && range\n            && !(self.contentModule.getEditPanel().contains(this.getAncestorNode(range.commonAncestorContainer))\n                || self.contentModule.getEditPanel() === range.commonAncestorContainer\n                || self.contentModule.getPanel() === range.commonAncestorContainer)) {\n            return;\n        }\n        if (!isNOU(args) && self.maxLength !== -1 && !isNOU(args.item.command)) {\n            var currentInsertContentLength = 0;\n            if (args.item.command === 'Links') {\n                currentInsertContentLength = value.text.length === 0 ? value.url.length : value.text.length;\n            }\n            if (args.item.command === 'Images' || args.item.command === 'Videos' || args.item.command === 'Table' || args.item.command === 'Files') {\n                currentInsertContentLength = 1;\n            }\n            var currentLength = self.getText().trim().length;\n            var selectionLength = self.getSelection().length;\n            var totalLength = (currentLength - selectionLength) + currentInsertContentLength;\n            if (!(self.maxLength === -1 || totalLength <= self.maxLength)) {\n                return;\n            }\n        }\n        if (isNOU(args)) {\n            var action_1 = event.action;\n            args = {};\n            var items = {\n                originalEvent: event, cancel: false,\n                requestType: action_1 || (event.key + 'Key'),\n                itemCollection: value\n            };\n            extend(args, args, items, true);\n            if (action_1 !== 'tab' && action_1 !== 'enter' && action_1 !== 'space' && action_1 !== 'escape') {\n                if (self.editorMode === 'Markdown' && action_1 === 'insert-table') {\n                    value = {\n                        'headingText': self.localeObj.getConstant('TableHeadingText'),\n                        'colText': self.localeObj.getConstant('TableColText')\n                    };\n                }\n                self.trigger(CONSTANT.actionBegin, args, function (actionBeginArgs) {\n                    if (actionBeginArgs.cancel) {\n                        if (action_1 === 'paste' || action_1 === 'cut' || action_1 === 'copy') {\n                            event.preventDefault();\n                        }\n                    }\n                });\n            }\n            if (!args.cancel) {\n                var isTableModule = isNOU(self.tableModule) ? true : self.tableModule ?\n                    self.tableModule.ensureInsideTableList : false;\n                if ((event.which === 9 && isTableModule) || event.which !== 9) {\n                    if (event.which === 13 && self.editorMode === 'HTML') {\n                        value = {\n                            'enterAction': self.enterKey\n                        };\n                    }\n                    this.editorManager.observer.notify((event.type === 'keydown' ? KEY_DOWN : KEY_UP), {\n                        event: event,\n                        callBack: this.onSuccess.bind(this, self),\n                        value: value,\n                        enterAction: self.enterKey\n                    });\n                }\n            }\n        }\n        else if (!isNOU(args) && args.item.command && args.item.subCommand && ((args.item.command !== args.item.subCommand\n            && args.item.command !== 'Font')\n            || ((args.item.subCommand === 'FontName' || args.item.subCommand === 'FontSize') && args.name === 'dropDownSelect')\n            || ((args.item.subCommand === 'BackgroundColor' || args.item.subCommand === 'FontColor')\n                && args.name === 'colorPickerChanged') || args.item.subCommand === 'FormatPainter' || args.item.subCommand === 'EmojiPicker')) {\n            extend(args, args, { requestType: args.item.subCommand, cancel: false, itemCollection: value, selectType: args.name }, true);\n            self.trigger(CONSTANT.actionBegin, args, function (actionBeginArgs) {\n                if (!actionBeginArgs.cancel) {\n                    var formatPainterCopy = !isNOU(actionBeginArgs.requestType) && actionBeginArgs.requestType === 'FormatPainter' && actionBeginArgs.name === 'format-copy';\n                    var formatPainterPaste = !isNOU(actionBeginArgs.requestType) && actionBeginArgs.requestType === 'FormatPainter' && actionBeginArgs.name === 'format-paste';\n                    if ((_this.getUndoRedoStack().length === 0 && actionBeginArgs.item.command !== 'Links' && actionBeginArgs.item.command !== 'Images' && !formatPainterCopy)\n                        || formatPainterPaste) {\n                        _this.saveData();\n                    }\n                    self.isBlur = false;\n                    self.contentModule.getEditPanel().focus();\n                    if (self.editorMode === 'HTML' && !isKeyboardVideoInsert) {\n                        if (isNOU(args.selectType) || (!isNOU(args.selectType) && args.selectType !== 'showDialog')) {\n                            saveSelection.restore();\n                        }\n                    }\n                    var command = actionBeginArgs.item.subCommand.toLocaleLowerCase();\n                    if (command === 'paste' || command === 'cut' || command === 'copy') {\n                        self.clipboardAction(command, event);\n                    }\n                    else {\n                        _this.editorManager.observer.notify(CONSTANT.checkUndo, { subCommand: actionBeginArgs.item.subCommand });\n                        _this.editorManager.execCommand(actionBeginArgs.item.command, actionBeginArgs.item.subCommand, event, _this.onSuccess.bind(_this, self), actionBeginArgs.item.value, actionBeginArgs.item.subCommand === 'Pre' && actionBeginArgs.selectType === 'dropDownSelect' ?\n                            { name: actionBeginArgs.selectType } : value, ('#' + self.getID() + ' iframe'), self.enterKey);\n                    }\n                }\n            });\n        }\n        if ((isNOU(event) || event && event.action !== 'copy')) {\n            this.enableUndo(self);\n        }\n    };\n    Formatter.prototype.getAncestorNode = function (node) {\n        node = node.nodeType === 3 ? node.parentNode : node;\n        return node;\n    };\n    /**\n     * onKeyHandler method\n     *\n     * @param {IRichTextEditor} self - specifies the self element.\n     * @param {KeyboardEvent} e - specifies the keyboard event.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    Formatter.prototype.onKeyHandler = function (self, e) {\n        var _this = this;\n        this.editorManager.observer.notify(KEY_UP, {\n            event: e, callBack: function () {\n                self.notify(CONSTANT.contentChanged, {});\n                _this.enableUndo(self);\n            }\n        });\n    };\n    /**\n     * onSuccess method\n     *\n     * @param {IRichTextEditor} self - specifies the self element.\n     * @param {IMarkdownFormatterCallBack} events - specifies the event call back\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    Formatter.prototype.onSuccess = function (self, events) {\n        self.notify(CONSTANT.contentChanged, {});\n        if (events && (isNOU(events.event) || events.event.action !== 'copy')) {\n            this.enableUndo(self);\n            self.notify(CONSTANT.execCommandCallBack, events);\n        }\n        self.trigger(CONSTANT.actionComplete, events, function (callbackArgs) {\n            self.setPlaceHolder();\n            if ((callbackArgs.requestType === 'Images' || callbackArgs.requestType === 'Links' || callbackArgs.requestType === 'Audios' || callbackArgs.requestType === 'Videos') && self.editorMode === 'HTML') {\n                var args = callbackArgs;\n                if (callbackArgs.requestType === 'Links' && callbackArgs.event &&\n                    callbackArgs.event.type === 'keydown' &&\n                    callbackArgs.event.keyCode === 32) {\n                    return;\n                }\n                self.notify(CONSTANT.insertCompleted, {\n                    args: args.event, type: callbackArgs.requestType, isNotify: true,\n                    elements: args.elements\n                });\n            }\n            if (callbackArgs.requestType === 'VideosPlayPause') {\n                self.notify('editAreaClick', { args: event });\n            }\n            self.autoResize();\n        });\n    };\n    /**\n     * Save the data for undo and redo action.\n     *\n     * @param {KeyboardEvent} e - specifies the keyboard event.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    Formatter.prototype.saveData = function (e) {\n        this.editorManager.undoRedoManager.saveData(e);\n    };\n    /**\n     * getUndoStatus method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    Formatter.prototype.getUndoStatus = function () {\n        return this.editorManager.undoRedoManager.getUndoStatus();\n    };\n    /* eslint-disable */\n    /**\n     * getUndoRedoStack method\n     *\n     * @param {IHtmlUndoRedoData}  - specifies the redo data.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    /* eslint-enable */\n    Formatter.prototype.getUndoRedoStack = function () {\n        return this.editorManager.undoRedoManager.undoRedoStack;\n    };\n    /**\n     * enableUndo method\n     *\n     * @param {IRichTextEditor} self - specifies the self element.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    Formatter.prototype.enableUndo = function (self) {\n        var status = this.getUndoStatus();\n        if (self.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            updateUndoRedoStatus(self.quickToolbarModule.inlineQTBar.quickTBarObj, status);\n        }\n        else {\n            if (self.toolbarModule) {\n                updateUndoRedoStatus(self.toolbarModule.baseToolbar, status);\n            }\n        }\n    };\n    return Formatter;\n}());\nexport { Formatter };\n","/**\n * Constant values for Markdown Parser\n */\n/**\n * List plugin events\n *\n * @hidden\n */\nexport var LISTS_COMMAND = 'lists-commands';\n/**\n * selectioncommand plugin events\n *\n * @hidden\n */\nexport var selectionCommand = 'command-type';\n/**\n * Link plugin events\n *\n * @hidden\n */\nexport var LINK_COMMAND = 'link-commands';\n/**\n * Clear plugin events\n *\n * @hidden\n */\nexport var CLEAR_COMMAND = 'clear-commands';\n/**\n * Table plugin events\n *\n * @hidden\n */\nexport var MD_TABLE = 'insert-table';\n/**\n * insertText plugin events\n *\n * @hidden\n */\nexport var INSERT_TEXT_COMMAND = 'insert-text';\n","import * as CONSTANT from './../base/constant';\nimport { extend } from '@syncfusion/ej2-base';\nimport * as EVENTS from './../../common/constant';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * Lists internal component\n *\n * @hidden\n */\nvar MDLists = /** @class */ (function () {\n    /**\n     * Constructor for creating the Lists plugin\n     *\n     * @param {IMDFormats} options - specifies the options\n     * @hidden\n     */\n    function MDLists(options) {\n        extend(this, this, options, true);\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    MDLists.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.LISTS_COMMAND, this.applyListsHandler, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDownHandler, this);\n        this.parent.observer.on(EVENTS.KEY_UP_HANDLER, this.keyUpHandler, this);\n    };\n    MDLists.prototype.keyDownHandler = function (event) {\n        switch (event.event.which) {\n            case 9:\n                this.tabKey(event);\n                break;\n        }\n        switch (event.event.action) {\n            case 'ordered-list':\n                this.applyListsHandler({ subCommand: 'OL', callBack: event.callBack });\n                event.event.preventDefault();\n                break;\n            case 'unordered-list':\n                this.applyListsHandler({ subCommand: 'UL', callBack: event.callBack });\n                event.event.preventDefault();\n                break;\n        }\n    };\n    MDLists.prototype.keyUpHandler = function (event) {\n        switch (event.event.which) {\n            case 13:\n                this.enterKey(event);\n                break;\n        }\n    };\n    MDLists.prototype.tabKey = function (event) {\n        var textArea = this.parent.element;\n        this.selection.save(textArea.selectionStart, textArea.selectionEnd);\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var parents = this.selection.getSelectedParentPoints(textArea);\n        var addedLength = 0;\n        var isNotFirst = this.isNotFirstLine(textArea, parents[0]);\n        if (!isNotFirst && !event.event.shiftKey) {\n            this.restore(textArea, start, end + addedLength, event);\n            return;\n        }\n        var listFormat = this.olListType();\n        var regex = this.getListRegex();\n        this.currentAction = this.getAction(parents[0].text);\n        for (var i = 0; i < parents.length; i++) {\n            // eslint-disable-next-line max-len\n            var prevIndex = event.event.shiftKey ? parents[i].line - 1 : parents[i].line - 1;\n            var prevLine = this.selection.getLine(textArea, prevIndex);\n            if (prevLine && (!event.event.shiftKey && isNotFirst || (event.event.shiftKey))) {\n                var prevLineSplit = prevLine.split('. ');\n                var tabSpace = '\\t';\n                var tabSpaceLength = event.event.shiftKey ? -tabSpace.length : tabSpace.length;\n                var splitTab = parents[i].text.split('\\t');\n                if (event.event.shiftKey && splitTab.length === 1) {\n                    break;\n                }\n                if (this.currentAction === 'OL' && /^\\d+$/.test(prevLineSplit[0].trim()) && listFormat) {\n                    event.event.preventDefault();\n                    parents[i].text = event.event.shiftKey ? splitTab.splice(1, splitTab.length).join('\\t') : tabSpace + parents[i].text;\n                    var curTabSpace = this.getTabSpace(parents[i].text);\n                    var prevTabSpace = this.getTabSpace(prevLine);\n                    var splitText = parents[i].text.split('. ');\n                    if (curTabSpace === prevTabSpace) {\n                        this.changeTextAreaValue(splitText, this.nextOrderedListValue(prevLineSplit[0].trim()), event, textArea, parents, i, end);\n                    }\n                    else if (prevTabSpace < curTabSpace) {\n                        this.changeTextAreaValue(splitText, '1. ', event, textArea, parents, i, end);\n                    }\n                    else {\n                        for (; prevTabSpace.length > curTabSpace.length; null) {\n                            prevIndex = prevIndex - 1;\n                            prevLine = this.selection.getLine(textArea, prevIndex);\n                            var prevLineSplit_1 = prevLine.trim().split('. ');\n                            if (/^\\d+$/.test(prevLineSplit_1[0])) {\n                                prevTabSpace = this.getTabSpace(prevLine);\n                                if (prevTabSpace.length <= curTabSpace.length) {\n                                    this.changeTextAreaValue(splitText, this.nextOrderedListValue(prevLineSplit_1[0]), event, textArea, parents, i, end);\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                }\n                else if (this.currentAction === 'UL' && regex.test(prevLine.trim()) || !listFormat) {\n                    event.event.preventDefault();\n                    parents[i].text = event.event.shiftKey ? splitTab.splice(1, splitTab.length).join('\\t') : tabSpace + parents[i].text;\n                    textArea.value = textArea.value.substr(0, parents[i].start) + parents[i].text + '\\n' +\n                        textArea.value.substr(parents[i].end, textArea.value.length);\n                }\n                start = i === 0 ? start + tabSpaceLength : start;\n                addedLength += tabSpaceLength;\n                if (parents.length !== 1) {\n                    for (var j = i; j < parents.length; j++) {\n                        // eslint-disable-next-line max-len\n                        parents[j].start = j !== 0 ? parents[j].start + tabSpaceLength : parents[j].start;\n                        parents[j].end = parents[j].end + tabSpaceLength;\n                    }\n                }\n            }\n        }\n        this.restore(textArea, start, end + addedLength, event);\n    };\n    MDLists.prototype.changeTextAreaValue = function (splitText, prefixValue, event, \n    // eslint-disable-next-line\n    textArea, parents, k, end) {\n        var prefix = prefixValue;\n        splitText.splice(0, 1);\n        var textAreaLength = this.selection.getAllParents(textArea.value).length;\n        var changedList = '';\n        var curTabSpace = this.getTabSpace(parents[k].text);\n        // eslint-disable-next-line\n        var prefixNumber = parseInt(prefix.split('.')[0], null);\n        var nestedTabSpace = this.getTabSpace(parents[k].text);\n        var nestedlistorder = true;\n        var nestedListStart = true;\n        var curTabSpaceLength;\n        var nextPrefixValue = -1;\n        var traversIncreased = true;\n        var nextLineLength = 0;\n        var lineBreak = '';\n        changedList = (this.selection.getLine(textArea, parents[0].line + 1) !== '') ?\n            '' : changedList + textArea.value.substr(parents[0].end, textArea.value.length);\n        for (var i = 1; i < textAreaLength &&\n            !isNullOrUndefined(this.selection.getLine(textArea, parents[0].line + i))\n            && this.selection.getLine(textArea, parents[0].line + i) !== ''; i++) {\n            var nextLine = this.selection.getLine(textArea, parents[0].line + i);\n            var nextTabSpace = this.getTabSpace(nextLine);\n            var nextLineSplit = nextLine.split('. ');\n            if (nextLineSplit.length === 1) {\n                changedList += textArea.value.substr(parents[0].end + nextLineLength, textArea.value.length);\n                break;\n            }\n            else {\n                nextLineLength += nextLine.length;\n                var shiftTabTargetList = false;\n                curTabSpaceLength = event.event.shiftKey ? curTabSpace.length + 1 : curTabSpace.length - 1;\n                if (nextTabSpace.length > nestedTabSpace.length) {\n                    traversIncreased = false;\n                }\n                if (curTabSpace.length !== nextTabSpace.length && nextTabSpace.length < nestedTabSpace.length) {\n                    nestedListStart = true;\n                    nestedlistorder = false;\n                    shiftTabTargetList = event.event.shiftKey &&\n                        curTabSpace.length === nextTabSpace.length ? (nestedListStart = false, true) : false;\n                }\n                else if (traversIncreased && event.event.shiftKey &&\n                    curTabSpace.length === nextTabSpace.length && nextTabSpace.length === nestedTabSpace.length) {\n                    nestedListStart = false;\n                    shiftTabTargetList = true;\n                }\n                lineBreak = changedList === '' ? '' : '\\n';\n                if (curTabSpaceLength === nextTabSpace.length && nestedListStart) {\n                    var nextPrefix = event.event.shiftKey ?\n                        (nextPrefixValue++, this.nextOrderedListValue(nextPrefixValue.toString()))\n                        : this.previousOrderedListValue(nextLineSplit[0]);\n                    nextLineSplit.splice(0, 1);\n                    changedList = changedList + lineBreak + nextTabSpace + nextPrefix + nextLineSplit.join('. ');\n                }\n                else if (curTabSpace.length === nextTabSpace.length && nestedlistorder || shiftTabTargetList) {\n                    var nextPrefix = this.nextOrderedListValue(prefixNumber.toString());\n                    prefixNumber++;\n                    nextLineSplit.splice(0, 1);\n                    changedList = changedList + lineBreak + nextTabSpace + nextPrefix + nextLineSplit.join('. ');\n                }\n                else {\n                    changedList = changedList + lineBreak + nextLine;\n                    nestedListStart = false;\n                }\n                nestedTabSpace = this.getTabSpace(nextLine);\n            }\n        }\n        parents[k].text = this.getTabSpace(parents[k].text) + prefix + splitText.join('. ') + '\\n';\n        textArea.value = textArea.value.substr(0, parents[k].start) + parents[k].text + changedList;\n    };\n    MDLists.prototype.getTabSpace = function (line) {\n        var split = line.split('\\t');\n        var tabs = '';\n        for (var i = 0; i < split.length; i++) {\n            if (split[i] === '') {\n                tabs += '\\t';\n            }\n            else {\n                break;\n            }\n        }\n        return tabs;\n    };\n    MDLists.prototype.isNotFirstLine = function (textArea, points) {\n        var currentLine = points.text;\n        var prevIndex = points.line - 1;\n        var prevLine = this.selection.getLine(textArea, prevIndex);\n        var regex = this.getListRegex();\n        var isNotFirst = false;\n        var regexFirstCondition;\n        if (prevLine) {\n            this.currentAction = this.getAction(prevLine);\n            var prevLineSplit = prevLine.split('. ');\n            regexFirstCondition = this.currentAction === 'OL' ? /^\\d+$/.test(prevLineSplit[0].trim()) : regex.test(prevLine.trim());\n        }\n        if (prevLine && regexFirstCondition) {\n            var curTabSpace = this.getTabSpace(currentLine);\n            var prevTabSpace = this.getTabSpace(prevLine);\n            isNotFirst = curTabSpace === prevTabSpace ? true : isNotFirst;\n            for (; prevTabSpace.length > curTabSpace.length; null) {\n                prevIndex = prevIndex - 1;\n                prevLine = this.selection.getLine(textArea, prevIndex);\n                var prevLineSplit = prevLine.trim().split('. ');\n                var regexSecondCondition = this.currentAction === 'OL' ?\n                    /^\\d+$/.test(prevLineSplit[0]) : regex.test(prevLine.trim());\n                if (regexSecondCondition) {\n                    prevTabSpace = this.getTabSpace(prevLine);\n                    if (prevTabSpace.length <= curTabSpace.length) {\n                        isNotFirst = true;\n                        break;\n                    }\n                }\n            }\n        }\n        return isNotFirst;\n    };\n    MDLists.prototype.getAction = function (line) {\n        var ol = line.split('. ')[0];\n        // eslint-disable-next-line\n        var currentState = /^\\d+$/.test(ol.trim());\n        // eslint-disable-next-line\n        var ul = line.trim().split(new RegExp('^(' + this.selection.replaceSpecialChar(this.syntax.UL).trim() + ')'))[1];\n        return (currentState ? 'OL' : ul ? 'UL' : 'NOTLIST');\n    };\n    MDLists.prototype.nextOrderedListValue = function (previousLine) {\n        // eslint-disable-next-line\n        var currentValue = parseInt(previousLine, null);\n        var nextValue = currentValue + 1;\n        return nextValue.toString() + '. ';\n    };\n    MDLists.prototype.previousOrderedListValue = function (previousLine) {\n        // eslint-disable-next-line\n        var currentValue = parseInt(previousLine, null);\n        var nextValue = currentValue - 1;\n        return nextValue.toString() + '. ';\n    };\n    MDLists.prototype.enterKey = function (event) {\n        var textArea = this.parent.element;\n        this.selection.save(textArea.selectionStart, textArea.selectionEnd);\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var parents = this.selection.getSelectedParentPoints(textArea);\n        var prevLine = this.selection.getLine(textArea, parents[0].line - 1);\n        var listFormat = this.olListType();\n        var regex = this.getListRegex();\n        var prevLineSplit = [];\n        if (!isNullOrUndefined(prevLine)) {\n            prevLineSplit = prevLine.split('. ');\n            this.currentAction = this.getAction(prevLine);\n        }\n        var addedLength = 0;\n        if (this.currentAction === 'OL' && prevLineSplit.length > 1 && /^\\d+$/.test(prevLineSplit[0].trim()) && listFormat\n            && prevLineSplit[1] !== '') {\n            var tabSpace = this.getTabSpace(prevLine);\n            this.currentAction = this.getAction(prevLine);\n            var prefix = this.nextOrderedListValue(prevLineSplit[0]);\n            parents[0].text = tabSpace + prefix + parents[0].text;\n            var textAreaLength = this.selection.getAllParents(textArea.value).length;\n            var changedList = '\\n';\n            var curTabSpace = this.getTabSpace(prevLine);\n            var nestedTabSpace = this.getTabSpace(parents[0].text);\n            var nestedListOrder = true;\n            for (var i = 1; i < textAreaLength &&\n                textArea.value.substr(parents[0].end, textArea.value.length) !== ''; i++) {\n                var nextLine = this.selection.getLine(textArea, parents[0].line + i);\n                if (isNullOrUndefined(nextLine)) {\n                    changedList = changedList + '';\n                }\n                else {\n                    var nextLineSplit = nextLine.split('. ');\n                    var nextTabSpace = this.getTabSpace(nextLine);\n                    if (nextTabSpace.length < nestedTabSpace.length) {\n                        nestedListOrder = false;\n                    }\n                    if (nextLineSplit.length > 1 && /^\\d+$/.test(nextLineSplit[0].trim()) &&\n                        curTabSpace.length === nextTabSpace.length && nestedListOrder) {\n                        var nextPrefix = this.nextOrderedListValue(nextLineSplit[0]);\n                        nextLineSplit.splice(0, 1);\n                        changedList = changedList + nextTabSpace + nextPrefix + nextLineSplit.join('. ') + '\\n';\n                    }\n                    else {\n                        changedList = changedList + nextLine + '\\n';\n                        nestedTabSpace = this.getTabSpace(nextLine);\n                    }\n                }\n            }\n            textArea.value = textArea.value.substr(0, parents[0].start) + curTabSpace +\n                prefix + this.selection.getLine(textArea, parents[0].line) + changedList;\n            start = start + prefix.length + tabSpace.length;\n            addedLength += prefix.length + tabSpace.length;\n        }\n        else if (this.currentAction === 'UL' && (prevLine && regex.test(prevLine.trim())) &&\n            prevLine.trim().replace(regex, '') !== '' || this.currentAction === 'OL' && !listFormat) {\n            var tabSpace = this.getTabSpace(prevLine);\n            var prefix = this.syntax[this.currentAction];\n            parents[0].text = tabSpace + prefix + parents[0].text +\n                (parents[0].text.trim().length > 0 ? '\\n' : '');\n            textArea.value = textArea.value.substr(0, parents[0].start) + parents[0].text +\n                textArea.value.substr(parents[0].end, textArea.value.length);\n            start = start + prefix.length + tabSpace.length;\n            addedLength += prefix.length + tabSpace.length;\n        }\n        this.restore(textArea, start, end + addedLength, event);\n    };\n    MDLists.prototype.olListType = function () {\n        var olSyntaxList = this.syntax.OL.split('.,');\n        var listType = olSyntaxList.length === 1 ? null :\n            // eslint-disable-next-line\n            parseInt(olSyntaxList[2].trim(), null) - parseInt(olSyntaxList[0].trim(), null);\n        if (listType) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    };\n    MDLists.prototype.applyListsHandler = function (e) {\n        var textArea = this.parent.element;\n        this.selection.save(textArea.selectionStart, textArea.selectionEnd);\n        this.currentAction = e.subCommand;\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var addedLength = 0;\n        var startLength = 0;\n        var endLength = 0;\n        var parents = this.selection.getSelectedParentPoints(textArea);\n        var prefix = '';\n        var listFormat = this.olListType();\n        var regex;\n        var perfixObj = {};\n        for (var i = 0; i < parents.length; i++) {\n            if (listFormat) {\n                regex = this.currentAction === 'OL' ? i + listFormat + '. ' : this.syntax[this.currentAction];\n            }\n            else {\n                regex = this.currentAction === 'OL' ? this.syntax.OL : this.syntax[this.currentAction];\n            }\n            if (!this.selection.isStartWith(parents[i].text, regex)) {\n                if (parents[i].text === '' && i === 0) {\n                    this.selection.save(start, end);\n                    if (parents.length !== 1) {\n                        for (var j = i; j < parents.length; j++) {\n                            parents[j].start = j !== 0 ? 1 + parents[j].start : parents[j].start;\n                            parents[j].end = 1 + parents[j].end;\n                        }\n                    }\n                }\n                var preLineTabSpaceLength = !isNullOrUndefined(parents[i - 1]) ?\n                    this.getTabSpace(parents[i - 1].text).length : 0;\n                var replace = this.appliedLine(parents[i].text, regex, perfixObj, preLineTabSpaceLength);\n                prefix = replace.line ? prefix : regex;\n                parents[i].text = replace.line ? replace.line : prefix + parents[i].text;\n                replace.space = replace.space ? replace.space : 0;\n                textArea.value = textArea.value.substr(0, parents[i].start + endLength) + parents[i].text + '\\n' +\n                    textArea.value.substr(parents[i].end, textArea.value.length);\n                start = i === 0 ? (start + prefix.length + replace.space) > 0 ?\n                    start + prefix.length + replace.space : 0 : start;\n                addedLength += prefix.length + replace.space;\n                if (parents.length !== 1) {\n                    for (var j = i; j < parents.length; j++) {\n                        parents[j].start = j !== 0 ? prefix.length +\n                            parents[j].start + replace.space : parents[j].start;\n                        parents[j].end = prefix.length + parents[j].end + replace.space;\n                    }\n                }\n                this.restore(textArea, start, end + addedLength, null);\n            }\n            else {\n                parents[i].text = parents[i].text.replace(regex, '');\n                textArea.value = textArea.value.substr(0, parents[i].start + endLength) + parents[i].text + '\\n' +\n                    textArea.value.substr(parents[i].end + endLength, textArea.value.length);\n                endLength -= regex.length;\n                startLength = regex.length;\n                this.restore(textArea, start - startLength, end + endLength, null);\n            }\n        }\n        this.restore(textArea, null, null, e);\n    };\n    MDLists.prototype.appliedLine = function (line, prefixPattern, perfixObj, preTabSpaceLength) {\n        var points = {};\n        // eslint-disable-next-line\n        var regex = new RegExp('^[' + this.syntax.UL.trim() + ']');\n        var lineSplit = line.split('. ');\n        var currentPrefix = lineSplit[0] + '. ';\n        var isExist = regex.test(line.trim()) || line.trim() === this.syntax.OL.trim()\n            || line.trim() === this.syntax.UL.trim() || /^\\d+$/.test(lineSplit[0].trim());\n        var listFormat = this.olListType();\n        var curTabSpaceLength = this.getTabSpace(line).length;\n        if (this.currentAction === 'OL' && listFormat) {\n            perfixObj[curTabSpaceLength.toString()] = !isNullOrUndefined(perfixObj[curTabSpaceLength.toString()]) ?\n                perfixObj[curTabSpaceLength.toString()].valueOf() + 1 : 1;\n            prefixPattern = perfixObj[curTabSpaceLength.toString()].valueOf().toString() + '. ';\n            if (!isNullOrUndefined(preTabSpaceLength) && preTabSpaceLength > curTabSpaceLength) {\n                perfixObj[preTabSpaceLength.toString()] = 0;\n            }\n        }\n        if (isExist) {\n            var replace = void 0;\n            var pattern = void 0;\n            // eslint-disable-next-line\n            var space = 0;\n            if (regex.test(line.trim())) {\n                pattern = this.syntax.UL;\n                replace = prefixPattern;\n                points.space = prefixPattern.trim().length - this.syntax.UL.trim().length;\n            }\n            else if (/^\\d+$/.test(lineSplit[0].trim()) && listFormat) {\n                pattern = lineSplit[0].trim() + '. ';\n                replace = prefixPattern;\n                points.space = this.syntax.UL.trim().length - currentPrefix.trim().length;\n            }\n            else if (/^\\d+$/.test(lineSplit[0].trim())) {\n                pattern = lineSplit[0].trim() + '. ';\n                replace = this.syntax.UL;\n                points.space = this.syntax.UL.trim().length - currentPrefix.trim().length;\n            }\n            points.line = line.replace(pattern, replace);\n        }\n        return points;\n    };\n    MDLists.prototype.restore = function (textArea, start, end, event) {\n        if (!isNullOrUndefined(start) && !isNullOrUndefined(start)) {\n            this.selection.save(start, end);\n        }\n        if (!isNullOrUndefined(event)) {\n            this.selection.restore(textArea);\n        }\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: this.currentAction,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    MDLists.prototype.getListRegex = function () {\n        var regex = '';\n        var configKey = Object.keys(this.syntax);\n        for (var j = 0; j < configKey.length; j++) {\n            var syntax = this.selection.replaceSpecialChar(this.syntax[configKey[j]]);\n            regex += regex === '' ? '^(' + syntax + ')|^(' + syntax.trim() + ')' :\n                '|^(' + syntax + ')|^(' + syntax.trim() + ')';\n        }\n        // eslint-disable-next-line\n        return new RegExp(regex);\n    };\n    return MDLists;\n}());\nexport { MDLists };\n","import { extend } from '@syncfusion/ej2-base';\nimport * as EVENTS from './../../common/constant';\nimport * as CONSTANT from './../../markdown-parser/base/constant';\n/**\n * MDFormats internal plugin\n *\n * @hidden\n * @deprecated\n */\nvar MDFormats = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     *\n     * @param {IMDFormats} options - specifies the formats\n     * @hidden\n     * @deprecated\n     */\n    function MDFormats(options) {\n        extend(this, this, options, true);\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    MDFormats.prototype.addEventListener = function () {\n        this.parent.observer.on(EVENTS.FORMAT_TYPE, this.applyFormats, this);\n    };\n    MDFormats.prototype.applyFormats = function (e) {\n        e.subCommand = e.subCommand.toLowerCase();\n        var textArea = this.parent.element;\n        this.selection.save(textArea.selectionStart, textArea.selectionEnd);\n        var parents = this.selection.getSelectedParentPoints(textArea);\n        if (this.isAppliedFormat(parents) === e.subCommand) {\n            if (e.subCommand === 'pre') {\n                if (parents.length > 1) {\n                    this.applyCodeBlock(textArea, e, parents);\n                }\n                else {\n                    return;\n                }\n            }\n            this.cleanFormat(textArea);\n            this.restore(textArea, textArea.selectionStart, textArea.selectionEnd, e);\n            return;\n        }\n        if (e.subCommand === 'p') {\n            this.cleanFormat(textArea);\n            this.restore(textArea, textArea.selectionStart, textArea.selectionEnd, e);\n            return;\n        }\n        else {\n            if ((e.subCommand === 'pre' && parents.length !== 1) || e.subCommand !== 'pre') {\n                this.cleanFormat(textArea, e.subCommand);\n            }\n        }\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var addedLength = 0;\n        parents = this.selection.getSelectedParentPoints(textArea);\n        if (e.subCommand === 'pre') {\n            if (parents.length > 1) {\n                this.applyCodeBlock(textArea, e, parents);\n            }\n            else {\n                extend(e, e, { subCommand: 'InlineCode' }, true);\n                this.parent.observer.notify(CONSTANT.selectionCommand, e);\n            }\n            return;\n        }\n        for (var i = 0; i < parents.length; i++) {\n            if (parents[i].text !== '' && !this.selection.isStartWith(parents[i].text, '\\\\' + this.syntax[e.subCommand])) {\n                parents[i].text = this.syntax[e.subCommand] + parents[i].text;\n                textArea.value = textArea.value.substr(0, parents[i].start) + parents[i].text + '\\n' +\n                    textArea.value.substr(parents[i].end, textArea.value.length);\n                start = i === 0 ? start + this.syntax[e.subCommand].length : start;\n                addedLength += this.syntax[e.subCommand].length;\n                if (parents.length !== 1) {\n                    for (var j = i; j < parents.length; j++) {\n                        parents[j].start = j !== 0 ?\n                            this.syntax[e.subCommand].length + parents[j].start : parents[j].start;\n                        parents[j].end = this.syntax[e.subCommand].length + parents[j].end;\n                    }\n                }\n            }\n            else if (parents[i].text === '' && i === 0) {\n                this.selection.save(start, end);\n                if (this.selection.getSelectedText(textArea).length === 0) {\n                    parents[i].text = this.syntax[e.subCommand];\n                    textArea.value = textArea.value.substr(0, parents[i].start) + this.syntax[e.subCommand] +\n                        textArea.value.substr(parents[i].end, textArea.value.length);\n                    start = i === 0 ? start + this.syntax[e.subCommand].length : start;\n                    addedLength += this.syntax[e.subCommand].length;\n                }\n                if (parents.length !== 1) {\n                    for (var j = i; j < parents.length; j++) {\n                        parents[j].start = j !== 0 ? 1 + parents[j].start : parents[j].start;\n                        parents[j].end = 1 + parents[j].end;\n                    }\n                }\n            }\n        }\n        this.restore(textArea, start, end + addedLength, e);\n    };\n    MDFormats.prototype.clearRegex = function () {\n        var regex = '';\n        var configKey = Object.keys(this.syntax);\n        for (var j = 0; j < configKey.length && configKey[j] !== 'pre' && configKey[j] !== 'p'; j++) {\n            regex += regex === '' ? '^(' + this.selection.replaceSpecialChar(this.syntax[configKey[j]].trim()) + ')' :\n                '|^(' + this.selection.replaceSpecialChar(this.syntax[configKey[j]].trim()) + ')';\n        }\n        return regex;\n    };\n    MDFormats.prototype.cleanFormat = function (textArea, command) {\n        var parents = this.selection.getSelectedParentPoints(textArea);\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var removeLength = 0;\n        if (this.selection.isClear(parents, this.clearRegex())) {\n            for (var i = 0; i < parents.length; i++) {\n                var configKey = Object.keys(this.syntax);\n                for (var j = 0; parents[i].text !== '' && j < configKey.length; j++) {\n                    var removeText = this.syntax[configKey[j]];\n                    if (configKey[j] === command) {\n                        continue;\n                    }\n                    // eslint-disable-next-line\n                    var regex = new RegExp('^(' + this.selection.replaceSpecialChar(removeText) + ')', 'gim');\n                    if (regex.test(parents[i].text)) {\n                        parents[i].text = parents[i].text.replace(regex, '');\n                        textArea.value = textArea.value.substr(0, parents[i].start) + parents[i].text + '\\n' +\n                            textArea.value.substr(parents[i].end, textArea.value.length);\n                        start = i === 0 ? (start - (removeText.length)) > 0 ? start - (removeText.length) : 0 : start;\n                        removeLength += removeText.length;\n                        if (parents.length !== 1) {\n                            for (var k = 0; k < parents.length; k++) {\n                                parents[k].start = k !== 0 ?\n                                    parents[k].start - removeText.length : parents[k].start;\n                                parents[k].end = parents[k].end - removeText.length;\n                            }\n                        }\n                        break;\n                    }\n                }\n                if (parents[i].text === '' && i === 0) {\n                    this.selection.save(start, end);\n                    if (parents.length !== 1) {\n                        for (var j = i; j < parents.length; j++) {\n                            parents[j].start = j !== 0 ? 1 + parents[j].start : parents[j].start;\n                            parents[j].end = 1 + parents[j].end;\n                        }\n                    }\n                }\n            }\n            this.restore(textArea, start, end - removeLength);\n        }\n    };\n    MDFormats.prototype.applyCodeBlock = function (textArea, event, parents) {\n        var command = event.subCommand;\n        var start = parents[0].start;\n        var end = parents[parents.length - 1].end;\n        var parentLines = this.selection.getAllParents(textArea.value);\n        var firstPrevText = parentLines[parents[0].line - 1];\n        var lastNextText = parentLines[(parents.length + 1) + 1];\n        // eslint-disable-next-line\n        var addedLength = 0;\n        if (!this.selection.isStartWith(firstPrevText, this.syntax.pre.split('\\n')[0]) &&\n            !this.selection.isStartWith(lastNextText, this.syntax.pre.split('\\n')[0])) {\n            var lines = textArea.value.substring(start, end).split('\\n');\n            var lastLine = lines[lines.length - 1] === '' ? '' : '\\n';\n            textArea.value = textArea.value.substr(0, start) + this.syntax[\"\" + command] + textArea.value.substring(start, end) +\n                lastLine + this.syntax[\"\" + command] +\n                textArea.value.substr(end, textArea.value.length);\n            start = this.selection.selectionStart + this.syntax[\"\" + command].length;\n            end = this.selection.selectionEnd + this.syntax[\"\" + command].length - 1;\n        }\n        else {\n            var cmd = this.syntax[\"\" + command];\n            var selection = this.parent.markdownSelection.getSelectedInlinePoints(textArea);\n            var startNo = textArea.value.substr(0, textArea.selectionStart).lastIndexOf(cmd);\n            var endNo = textArea.value.substr(textArea.selectionEnd, textArea.selectionEnd).indexOf(cmd);\n            endNo = endNo + selection.end;\n            var repStartText = this.replaceAt(textArea.value.substr(0, selection.start), cmd, '', startNo, selection.start);\n            var repEndText = this.replaceAt(textArea.value.substr(selection.end, textArea.value.length), cmd, '', 0, endNo);\n            textArea.value = repStartText + selection.text + repEndText;\n            start = this.selection.selectionStart - cmd.length;\n            end = this.selection.selectionEnd - cmd.length;\n        }\n        this.restore(textArea, start, end, event);\n    };\n    MDFormats.prototype.replaceAt = function (input, search, replace, start, end) {\n        return input.slice(0, start)\n            + input.slice(start, end).replace(search, replace)\n            + input.slice(end);\n    };\n    MDFormats.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: event.subCommand,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    MDFormats.prototype.isAppliedFormat = function (lines, documentNode) {\n        var format = 'p';\n        // eslint-disable-next-line\n        var configKey = Object.keys(this.syntax);\n        var keys = Object.keys(this.syntax);\n        var direction = this.parent.element.selectionDirection;\n        var checkLine = direction === 'backward' ? lines[0].text : lines[lines.length - 1].text;\n        for (var i = 0; !documentNode && i < keys.length; i++) {\n            if (keys[i] !== 'pre' && this.selection.isStartWith(checkLine, this.syntax[keys[i]])) {\n                format = keys[i];\n                break;\n            }\n            else if (keys[i] === 'pre') {\n                var parentLines = this.selection.getAllParents(this.parent.element.value);\n                var firstPrevText = parentLines[lines[0].line - 1];\n                var lastNextText = parentLines[lines.length + 1];\n                if (this.selection.isStartWith(firstPrevText, this.syntax[keys[i]].split('\\n')[0]) &&\n                    this.selection.isStartWith(lastNextText, this.syntax[keys[i]].split('\\n')[0])) {\n                    format = keys[i];\n                    break;\n                }\n            }\n        }\n        return format;\n    };\n    return MDFormats;\n}());\nexport { MDFormats };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as CONSTANT from './../base/constant';\nimport { extend } from '@syncfusion/ej2-base';\nimport * as EVENTS from './../../common/constant';\n/**\n * SelectionCommands internal component\n *\n * @hidden\n * @deprecated\n */\nvar MDSelectionFormats = /** @class */ (function () {\n    function MDSelectionFormats(parent) {\n        extend(this, this, parent, true);\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    MDSelectionFormats.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.selectionCommand, this.applyCommands, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDownHandler, this);\n    };\n    MDSelectionFormats.prototype.keyDownHandler = function (e) {\n        switch (e.event.action) {\n            case 'bold':\n                this.applyCommands({ subCommand: 'Bold', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'italic':\n                this.applyCommands({ subCommand: 'Italic', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'strikethrough':\n                this.applyCommands({ subCommand: 'StrikeThrough', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'uppercase':\n                this.applyCommands({ subCommand: 'UpperCase', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'lowercase':\n                this.applyCommands({ subCommand: 'LowerCase', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'superscript':\n                this.applyCommands({ subCommand: 'SuperScript', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'subscript':\n                this.applyCommands({ subCommand: 'SubScript', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n        }\n    };\n    MDSelectionFormats.prototype.isBold = function (text, cmd) {\n        return text.search('\\\\' + cmd + '\\\\' + cmd + '') !== -1;\n    };\n    MDSelectionFormats.prototype.isItalic = function (text, cmd) {\n        return text.search('\\\\' + cmd) !== -1;\n    };\n    MDSelectionFormats.prototype.isMatch = function (text, cmd) {\n        var matchText = [''];\n        switch (cmd) {\n            case this.syntax.Italic:\n                matchText = text.match(this.singleCharRegx(cmd));\n                break;\n            case this.syntax.InlineCode:\n                matchText = text.match(this.singleCharRegx(cmd));\n                break;\n            case this.syntax.StrikeThrough:\n                matchText = text.match(this.singleCharRegx(cmd));\n                break;\n        }\n        return matchText;\n    };\n    MDSelectionFormats.prototype.multiCharRegx = function (cmd) {\n        // eslint-disable-next-line\n        return new RegExp('(\\\\' + cmd + '\\\\' + cmd + ')', 'g');\n    };\n    MDSelectionFormats.prototype.singleCharRegx = function (cmd) {\n        // eslint-disable-next-line\n        return new RegExp('(\\\\' + cmd + ')', 'g');\n    };\n    MDSelectionFormats.prototype.isAppliedCommand = function (cmd) {\n        // eslint-disable-next-line\n        var selectCmd = '';\n        var isFormat = false;\n        var textArea = this.parent.element;\n        var start = textArea.selectionStart;\n        var splitAt = function (index) { return function (x) { return [x.slice(0, index), x.slice(index)]; }; };\n        var splitText = splitAt(start)(textArea.value);\n        var cmdB = this.syntax.Bold.substr(0, 1);\n        var cmdI = this.syntax.Italic;\n        var selectedText = this.parent.markdownSelection.getSelectedText(textArea);\n        if (selectedText !== '' && selectedText === selectedText.toLocaleUpperCase() && cmd === 'UpperCase') {\n            return true;\n        }\n        else if (selectedText === '') {\n            var beforeText = textArea.value.substr(splitText[0].length - 1, 1);\n            var afterText = splitText[1].substr(0, 1);\n            if ((beforeText !== '' && afterText !== '' && beforeText.match(/[a-z]/i)) &&\n                beforeText === beforeText.toLocaleUpperCase() && afterText === afterText.toLocaleUpperCase() && cmd === 'UpperCase') {\n                return true;\n            }\n        }\n        if (!(this.isBold(splitText[0], cmdB)) && !(this.isItalic(splitText[0], cmdI)) && !(this.isBold(splitText[1], cmdB)) &&\n            !(this.isItalic(splitText[1], cmdI))) {\n            if ((!isNullOrUndefined(this.isMatch(splitText[0], this.syntax.StrikeThrough)) &&\n                !isNullOrUndefined(this.isMatch(splitText[1], this.syntax.StrikeThrough))) &&\n                (this.isMatch(splitText[0], this.syntax.StrikeThrough).length % 2 === 1 &&\n                    this.isMatch(splitText[1], this.syntax.StrikeThrough).length % 2 === 1) && cmd === 'StrikeThrough') {\n                isFormat = true;\n            }\n            if ((!isNullOrUndefined(this.isMatch(splitText[0], this.syntax.InlineCode)) &&\n                !isNullOrUndefined(this.isMatch(splitText[1], this.syntax.InlineCode))) &&\n                (this.isMatch(splitText[0], this.syntax.InlineCode).length % 2 === 1 &&\n                    this.isMatch(splitText[1], this.syntax.InlineCode).length % 2 === 1) && cmd === 'InlineCode') {\n                isFormat = true;\n            }\n            /* eslint-disable */\n            if ((!isNullOrUndefined(splitText[0].match(/\\<sub>/g)) && !isNullOrUndefined(splitText[1].match(/\\<\\/sub>/g))) &&\n                (splitText[0].match(/\\<sub>/g).length % 2 === 1 &&\n                    splitText[1].match(/\\<\\/sub>/g).length % 2 === 1) && cmd === 'SubScript') {\n                isFormat = true;\n            }\n            if ((!isNullOrUndefined(splitText[0].match(/\\<sup>/g)) && !isNullOrUndefined(splitText[1].match(/\\<\\/sup>/g))) &&\n                (splitText[0].match(/\\<sup>/g).length % 2 === 1 && splitText[1].match(/\\<\\/sup>/g).length % 2 === 1) &&\n                cmd === 'SuperScript') {\n                isFormat = true;\n            }\n            /* eslint-enable */\n        }\n        if ((this.isBold(splitText[0], cmdB) && this.isBold(splitText[1], cmdB)) &&\n            (splitText[0].match(this.multiCharRegx(cmdB)).length % 2 === 1 &&\n                splitText[1].match(this.multiCharRegx(cmdB)).length % 2 === 1) && cmd === 'Bold') {\n            isFormat = true;\n        }\n        splitText[0] = this.isBold(splitText[0], cmdB) ? splitText[0].replace(this.multiCharRegx(cmdB), '$%@') : splitText[0];\n        splitText[1] = this.isBold(splitText[1], cmdB) ? splitText[1].replace(this.multiCharRegx(cmdB), '$%@') : splitText[1];\n        if ((!isNullOrUndefined(this.isMatch(splitText[0], this.syntax.Italic)) &&\n            !isNullOrUndefined(this.isMatch(splitText[1], this.syntax.Italic))) &&\n            (this.isMatch(splitText[0], this.syntax.Italic).length % 2 === 1 &&\n                this.isMatch(splitText[1], this.syntax.Italic).length % 2 === 1) && cmd === 'Italic') {\n            isFormat = true;\n        }\n        if ((!isNullOrUndefined(this.isMatch(splitText[0], this.syntax.StrikeThrough)) &&\n            !isNullOrUndefined(this.isMatch(splitText[1], this.syntax.StrikeThrough))) &&\n            (this.isMatch(splitText[0], this.syntax.StrikeThrough).length % 2 === 1 &&\n                this.isMatch(splitText[1], this.syntax.StrikeThrough).length % 2 === 1) && cmd === 'StrikeThrough') {\n            isFormat = true;\n        }\n        if ((!isNullOrUndefined(this.isMatch(splitText[0], this.syntax.InlineCode)) &&\n            !isNullOrUndefined(this.isMatch(splitText[1], this.syntax.InlineCode))) &&\n            (this.isMatch(splitText[0], this.syntax.InlineCode).length % 2 === 1 &&\n                this.isMatch(splitText[1], this.syntax.InlineCode).length % 2 === 1) && cmd === 'InlineCode') {\n            isFormat = true;\n        }\n        /* eslint-disable */\n        if ((!isNullOrUndefined(splitText[0].match(/\\<sub>/g)) && !isNullOrUndefined(splitText[1].match(/\\<\\/sub>/g))) &&\n            (splitText[0].match(/\\<sub>/g).length % 2 === 1 && splitText[1].match(/\\<\\/sub>/g).length % 2 === 1) && cmd === 'SubScript') {\n            isFormat = true;\n        }\n        if ((!isNullOrUndefined(splitText[0].match(/\\<sup>/g)) && !isNullOrUndefined(splitText[1].match(/\\<\\/sup>/g))) &&\n            (splitText[0].match(/\\<sup>/g).length % 2 === 1 && splitText[1].match(/\\<\\/sup>/g).length % 2 === 1) && cmd === 'SuperScript') {\n            isFormat = true;\n            /* eslint-enable */\n        }\n        return isFormat;\n    };\n    MDSelectionFormats.prototype.applyCommands = function (e) {\n        this.currentAction = e.subCommand;\n        var textArea = this.parent.element;\n        this.selection.save(textArea.selectionStart, textArea.selectionEnd);\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var addedLength = 0;\n        var selection = this.parent.markdownSelection.getSelectedInlinePoints(textArea);\n        if (this.isAppliedCommand(e.subCommand) && selection.text !== '') {\n            var startCmd = this.syntax[e.subCommand];\n            var endCmd = e.subCommand === 'SubScript' ? '</sub>' :\n                e.subCommand === 'SuperScript' ? '</sup>' : this.syntax[e.subCommand];\n            var startLength = (e.subCommand === 'UpperCase' || e.subCommand === 'LowerCase') ? 0 : startCmd.length;\n            var startNo = textArea.value.substr(0, selection.start).lastIndexOf(startCmd);\n            var endNo = textArea.value.substr(selection.end, textArea.value.length).indexOf(endCmd);\n            endNo = endNo + selection.end;\n            var repStartText = this.replaceAt(textArea.value.substr(0, selection.start), startCmd, '', startNo, selection.start);\n            var repEndText = this.replaceAt(textArea.value.substr(selection.end, textArea.value.length), endCmd, '', 0, endNo);\n            textArea.value = repStartText + selection.text + repEndText;\n            this.restore(textArea, start - startLength, end - startLength, e);\n            return;\n        }\n        if (selection.text !== '' && !this.isApplied(selection, e.subCommand)) {\n            addedLength = (e.subCommand === 'UpperCase' || e.subCommand === 'LowerCase') ? 0 :\n                this.syntax[e.subCommand].length;\n            var repStart = textArea.value.substr(selection.start - this.syntax[e.subCommand].length, this.syntax[e.subCommand].length);\n            var repEnd = void 0;\n            if ((repStart === e.subCommand) || ((selection.start - this.syntax[e.subCommand].length ===\n                textArea.value.indexOf(this.syntax[e.subCommand])) && (selection.end === textArea.value.lastIndexOf(this.syntax[e.subCommand]) || selection.end === textArea.value.lastIndexOf('</' + this.syntax[e.subCommand].substring(1, 5))))) {\n                if (e.subCommand === 'SubScript' || e.subCommand === 'SuperScript') {\n                    repEnd = textArea.value.substr(selection.end, this.syntax[e.subCommand].length + 1);\n                }\n                else {\n                    repEnd = textArea.value.substr(selection.end, this.syntax[e.subCommand].length);\n                }\n                var repStartText = this.replaceAt(textArea.value.substr(0, selection.start), repStart, '', selection.start - this.syntax[e.subCommand].length, selection.start);\n                var repEndText = this.replaceAt(textArea.value.substr(selection.end, textArea.value.length), repEnd, '', 0, repEnd.length);\n                textArea.value = repStartText + selection.text + repEndText;\n                this.restore(textArea, start - addedLength, end - addedLength, e);\n            }\n            else {\n                if (e.subCommand === 'SubScript' || e.subCommand === 'SuperScript') {\n                    selection.text = this.syntax[e.subCommand] + selection.text\n                        + '</' + this.syntax[e.subCommand].substring(1, 5);\n                }\n                else if (e.subCommand === 'UpperCase' || e.subCommand === 'LowerCase') {\n                    selection.text = (e.subCommand === 'UpperCase') ? selection.text.toUpperCase()\n                        : selection.text.toLowerCase();\n                }\n                else {\n                    selection.text = this.syntax[e.subCommand] + selection.text + this.syntax[e.subCommand];\n                }\n                textArea.value = textArea.value.substr(0, selection.start) + selection.text +\n                    textArea.value.substr(selection.end, textArea.value.length);\n                this.restore(textArea, start + addedLength, end + addedLength, e);\n            }\n        }\n        else if (e.subCommand !== 'UpperCase' && e.subCommand !== 'LowerCase') {\n            if (e.subCommand === 'SubScript' || e.subCommand === 'SuperScript') {\n                selection.text = this.textReplace(selection.text, e.subCommand);\n                selection.text = this.syntax[e.subCommand] + selection.text\n                    + '</' + this.syntax[e.subCommand].substring(1, 5);\n            }\n            else {\n                selection.text = this.textReplace(selection.text, e.subCommand);\n                selection.text = this.syntax[e.subCommand] + selection.text + this.syntax[e.subCommand];\n            }\n            textArea.value = textArea.value.substr(0, selection.start)\n                + selection.text + textArea.value.substr(selection.end, textArea.value.length);\n            addedLength = this.syntax[e.subCommand].length;\n            if (selection.start === selection.end) {\n                this.restore(textArea, start + addedLength, end + addedLength, e);\n            }\n            else {\n                this.restore(textArea, start + addedLength, end - addedLength, e);\n            }\n        }\n        else {\n            this.restore(textArea, start, end, e);\n        }\n        this.parent.undoRedoManager.saveData();\n    };\n    MDSelectionFormats.prototype.replaceAt = function (input, search, replace, start, end) {\n        return input.slice(0, start)\n            + input.slice(start, end).replace(search, replace)\n            + input.slice(end);\n    };\n    MDSelectionFormats.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: this.currentAction,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    MDSelectionFormats.prototype.textReplace = function (text, command) {\n        var regx = this.singleCharRegx(this.syntax[\"\" + command]);\n        switch (command) {\n            case 'Bold':\n                regx = this.multiCharRegx(this.syntax[\"\" + command].substr(0, 1));\n                text = text.replace(regx, '');\n                break;\n            case 'Italic':\n                if (!this.isBold(text, this.syntax[\"\" + command].substr(0, 1))) {\n                    text = text.replace(regx, '');\n                }\n                else {\n                    var regxB = this.multiCharRegx(this.syntax[\"\" + command].substr(0, 1));\n                    var repText = text;\n                    repText = repText.replace(regxB, '$%@').replace(regx, '');\n                    var regxTemp = new RegExp('\\\\$%@', 'g');\n                    text = repText.replace(regxTemp, this.syntax[\"\" + command].substr(0, 1) + this.syntax[\"\" + command].substr(0, 1));\n                }\n                break;\n            case 'StrikeThrough':\n                text = text.replace(regx, '');\n                break;\n            case 'InlineCode':\n                text = text.replace(regx, '');\n                break;\n            case 'SubScript':\n                text = text.replace(/<sub>/g, '').replace(/<\\/sub>/g, '');\n                break;\n            case 'SuperScript':\n                text = text.replace(/<sup>/g, '').replace(/<\\/sup>/g, '');\n                break;\n        }\n        return text;\n    };\n    MDSelectionFormats.prototype.isApplied = function (line, command) {\n        var regx = this.singleCharRegx(this.syntax[\"\" + command]);\n        switch (command) {\n            case 'SubScript':\n            case 'SuperScript':\n                regx = this.singleCharRegx(this.syntax[\"\" + command]);\n                return regx.test(line.text);\n            case 'Bold':\n            case 'StrikeThrough':\n                regx = this.multiCharRegx(this.syntax[\"\" + command].substr(0, 1));\n                return regx.test(line.text);\n            case 'UpperCase':\n            case 'LowerCase':\n                // eslint-disable-next-line\n                regx = new RegExp('^[' + this.syntax[\"\" + command] + ']*$', 'g');\n                return regx.test(line.text);\n            case 'Italic': {\n                var regTest = void 0;\n                var regxB = this.multiCharRegx(this.syntax[\"\" + command].substr(0, 1));\n                if (regxB.test(line.text)) {\n                    var repText = line.text;\n                    repText = repText.replace(regxB, '$%#');\n                    regTest = regx.test(repText);\n                }\n                else {\n                    regTest = regx.test(line.text);\n                }\n                return regTest;\n            }\n            case 'InlineCode':\n                return regx.test(line.text);\n        }\n    };\n    return MDSelectionFormats;\n}());\nexport { MDSelectionFormats };\n","/**\n * Default Markdown formats config for adapter\n */\nexport var markdownFormatTags = {\n    'h6': '###### ',\n    'h5': '##### ',\n    'h4': '#### ',\n    'h3': '### ',\n    'h2': '## ',\n    'h1': '# ',\n    'blockquote': '> ',\n    'pre': '```\\n',\n    'p': ''\n};\n/**\n * Default selection formats config for adapter\n */\nexport var markdownSelectionTags = {\n    'Bold': '**',\n    'Italic': '*',\n    'StrikeThrough': '~~',\n    'InlineCode': '`',\n    'SubScript': '<sub>',\n    'SuperScript': '<sup>',\n    'UpperCase': 'A-Z',\n    'LowerCase': 'a-z'\n};\n/**\n * Default Markdown lists config for adapter\n */\nexport var markdownListsTags = {\n    'OL': '1. ',\n    'UL': '- '\n};\n/**\n * Default html key config for adapter\n */\nexport var htmlKeyConfig = {\n    'toolbar-focus': 'alt+f10',\n    'escape': '27',\n    'insert-link': 'ctrl+k',\n    'insert-image': 'ctrl+shift+i',\n    'insert-audio': 'ctrl+shift+a',\n    'insert-video': 'ctrl+shift+v',\n    'insert-table': 'ctrl+shift+e',\n    'undo': 'ctrl+z',\n    'redo': 'ctrl+y',\n    'copy': 'ctrl+c',\n    'cut': 'ctrl+x',\n    'paste': 'ctrl+v',\n    'bold': 'ctrl+b',\n    'italic': 'ctrl+i',\n    'underline': 'ctrl+u',\n    'strikethrough': 'ctrl+shift+s',\n    'uppercase': 'ctrl+shift+u',\n    'lowercase': 'ctrl+shift+l',\n    'superscript': 'ctrl+shift+=',\n    'subscript': 'ctrl+=',\n    'indents': 'ctrl+]',\n    'outdents': 'ctrl+[',\n    'html-source': 'ctrl+shift+h',\n    'full-screen': 'ctrl+shift+f',\n    'decrease-fontsize': 'ctrl+shift+<',\n    'increase-fontsize': 'ctrl+shift+>',\n    'justify-center': 'ctrl+e',\n    'justify-full': 'ctrl+j',\n    'justify-left': 'ctrl+l',\n    'justify-right': 'ctrl+r',\n    'clear-format': 'ctrl+shift+r',\n    'ordered-list': 'ctrl+shift+o',\n    'unordered-list': 'ctrl+alt+o',\n    'space': '32',\n    'enter': '13',\n    'tab': 'tab',\n    'delete': '46',\n    'format-copy': 'alt+shift+c',\n    'format-paste': 'alt+shift+v'\n};\n/**\n * Default  markdown key config for adapter\n */\nexport var markdownKeyConfig = {\n    'toolbar-focus': 'alt+f10',\n    'escape': '27',\n    'insert-link': 'ctrl+k',\n    'insert-image': 'ctrl+shift+i',\n    'insert-table': 'ctrl+shift+e',\n    'undo': 'ctrl+z',\n    'redo': 'ctrl+y',\n    'copy': 'ctrl+c',\n    'cut': 'ctrl+x',\n    'paste': 'ctrl+v',\n    'bold': 'ctrl+b',\n    'italic': 'ctrl+i',\n    'strikethrough': 'ctrl+shift+s',\n    'uppercase': 'ctrl+shift+u',\n    'lowercase': 'ctrl+shift+l',\n    'superscript': 'ctrl+shift+=',\n    'subscript': 'ctrl+=',\n    'full-screen': 'ctrl+shift+f',\n    'ordered-list': 'ctrl+shift+o',\n    'unordered-list': 'ctrl+alt+o'\n};\n/**\n * PasteCleanup Grouping of similar functionality tags\n */\nexport var pasteCleanupGroupingTags = {\n    'b': ['strong'],\n    'strong': ['b'],\n    'i': ['emp', 'cite'],\n    'emp': ['i', 'cite'],\n    'cite': ['i', 'emp']\n};\n/**\n * PasteCleanup Grouping of similar functionality tags\n */\nexport var listConversionFilters = {\n    'first': 'MsoListParagraphCxSpFirst',\n    'middle': 'MsoListParagraphCxSpMiddle',\n    'last': 'MsoListParagraphCxSpLast'\n};\n/**\n * Dom-Node Grouping of self closing tags\n *\n * @hidden\n */\nexport var selfClosingTags = [\n    'BR',\n    'IMG'\n];\n","import { debounce, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as EVENTS from './../../common/constant';\n/**\n * `Undo` module is used to handle undo actions.\n */\nvar UndoRedoCommands = /** @class */ (function () {\n    function UndoRedoCommands(parent, options) {\n        this.undoRedoStack = [];\n        this.parent = parent;\n        this.undoRedoSteps = !isNullOrUndefined(options) ? options.undoRedoSteps : 30;\n        this.undoRedoTimer = !isNullOrUndefined(options) ? options.undoRedoTimer : 300;\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    UndoRedoCommands.prototype.addEventListener = function () {\n        var debounceListener = debounce(this.keyUp, this.undoRedoTimer);\n        this.parent.observer.on(EVENTS.KEY_UP_HANDLER, debounceListener, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDown, this);\n        this.parent.observer.on(EVENTS.ACTION, this.onAction, this);\n        this.parent.observer.on(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged, this);\n    };\n    UndoRedoCommands.prototype.onPropertyChanged = function (props) {\n        for (var _i = 0, _a = Object.keys(props.newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'undoRedoSteps':\n                    this.undoRedoSteps = props.newProp.undoRedoSteps;\n                    break;\n                case 'undoRedoTimer':\n                    this.undoRedoTimer = props.newProp.undoRedoTimer;\n                    break;\n            }\n        }\n    };\n    UndoRedoCommands.prototype.removeEventListener = function () {\n        var debounceListener = debounce(this.keyUp, 300);\n        this.parent.observer.off(EVENTS.KEY_UP_HANDLER, debounceListener);\n        this.parent.observer.off(EVENTS.KEY_DOWN_HANDLER, this.keyDown);\n        this.parent.observer.off(EVENTS.ACTION, this.onAction);\n        this.parent.observer.off(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged);\n    };\n    /**\n     * Destroys the ToolBar.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    UndoRedoCommands.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    /**\n     * onAction method\n     *\n     * @param {IMarkdownSubCommands} e - specifies the sub commands\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    UndoRedoCommands.prototype.onAction = function (e) {\n        if (e.subCommand === 'Undo') {\n            this.undo(e);\n        }\n        else {\n            this.redo(e);\n        }\n    };\n    UndoRedoCommands.prototype.keyDown = function (e) {\n        var event = e.event;\n        // eslint-disable-next-line\n        var proxy = this;\n        switch (event.action) {\n            case 'undo':\n                event.preventDefault();\n                proxy.undo(e);\n                break;\n            case 'redo':\n                event.preventDefault();\n                proxy.redo(e);\n                break;\n        }\n    };\n    UndoRedoCommands.prototype.keyUp = function (e) {\n        if (e.event.keyCode !== 17 && !e.event.ctrlKey) {\n            this.saveData(e);\n        }\n    };\n    /**\n     * MD collection stored string format.\n     *\n     * @param {KeyboardEvent} e - specifies the key board event\n     * @function saveData\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    UndoRedoCommands.prototype.saveData = function (e) {\n        var textArea = this.parent.element;\n        this.selection.save(textArea.selectionStart, textArea.selectionEnd);\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var textValue = this.parent.element.value;\n        var changEle = { text: textValue, start: start, end: end };\n        if (this.undoRedoStack.length >= this.steps) {\n            this.undoRedoStack = this.undoRedoStack.slice(0, this.steps + 1);\n        }\n        if (this.undoRedoStack.length > 1 && (this.undoRedoStack[this.undoRedoStack.length - 1].start === start) &&\n            (this.undoRedoStack[this.undoRedoStack.length - 1].end === end)) {\n            return;\n        }\n        this.undoRedoStack.push(changEle);\n        this.steps = this.undoRedoStack.length - 1;\n        if (this.steps > this.undoRedoSteps) {\n            this.undoRedoStack.shift();\n            this.steps--;\n        }\n        if (e && e.callBack) {\n            e.callBack();\n        }\n    };\n    /**\n     * Undo the editable text.\n     *\n     * @param {IMarkdownSubCommands} e - specifies the sub commands\n     * @function undo\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    UndoRedoCommands.prototype.undo = function (e) {\n        if (this.steps > 0) {\n            this.currentAction = 'Undo';\n            var start = this.undoRedoStack[this.steps - 1].start;\n            var end = this.undoRedoStack[this.steps - 1].end;\n            var removedContent = this.undoRedoStack[this.steps - 1].text;\n            this.parent.element.value = removedContent;\n            this.parent.element.focus();\n            this.steps--;\n            this.restore(this.parent.element, start, end, e);\n        }\n    };\n    /**\n     * Redo the editable text.\n     *\n     * @param {IMarkdownSubCommands} e - specifies the sub commands\n     * @function redo\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    UndoRedoCommands.prototype.redo = function (e) {\n        if (this.undoRedoStack[this.steps + 1] != null) {\n            this.currentAction = 'Redo';\n            var start = this.undoRedoStack[this.steps + 1].start;\n            var end = this.undoRedoStack[this.steps + 1].end;\n            this.parent.element.value = this.undoRedoStack[this.steps + 1].text;\n            this.parent.element.focus();\n            this.steps++;\n            this.restore(this.parent.element, start, end, e);\n        }\n    };\n    UndoRedoCommands.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: this.currentAction,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    /**\n     * getUndoStatus method\n     *\n     * @returns {boolean} - returns the boolean value\n     * @hidden\n     * @deprecated\n     */\n    UndoRedoCommands.prototype.getUndoStatus = function () {\n        var status = { undo: false, redo: false };\n        if (this.steps > 0) {\n            status.undo = true;\n        }\n        if (this.undoRedoStack[this.steps + 1] != null) {\n            status.redo = true;\n        }\n        return status;\n    };\n    return UndoRedoCommands;\n}());\nexport { UndoRedoCommands };\n","import * as CONSTANT from './../base/constant';\n/**\n * Link internal component\n *\n * @hidden\n * @deprecated\n */\nvar MDLink = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     *\n     * @param {MarkdownParser} parent - specifies the parent element\n     * @hidden\n     * @deprecated\n     */\n    function MDLink(parent) {\n        this.parent = parent;\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    MDLink.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.LINK_COMMAND, this.createLink, this);\n    };\n    MDLink.prototype.createLink = function (e) {\n        var textArea = this.parent.element;\n        textArea.focus();\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var text = (e.subCommand === 'Image') ? this.selection.getSelectedText(textArea) : e.item.text;\n        var startOffset = (e.subCommand === 'Image') ? (start + 2) : (start + 1);\n        var endOffset = (e.subCommand === 'Image') ? (end + 2) : (end + 1);\n        text = (e.subCommand === 'Image') ? '![' + text + '](' + e.item.url + ')' : '[' + text + '](' + e.item.url + ')';\n        textArea.value = textArea.value.substr(0, start)\n            + text + textArea.value.substr(end, textArea.value.length);\n        this.parent.markdownSelection.setSelection(textArea, startOffset, endOffset);\n        this.restore(textArea, startOffset, endOffset, e);\n    };\n    MDLink.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: event.subCommand,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    return MDLink;\n}());\nexport { MDLink };\n","import * as CONSTANT from './../base/constant';\nimport { extend } from '@syncfusion/ej2-base';\nimport * as EVENTS from './../../common/constant';\n/**\n * Link internal component\n *\n * @hidden\n * @deprecated\n */\nvar MDTable = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     *\n     * @param {IMDTable} options - specifies the options\n     * @hidden\n     * @deprecated\n     */\n    function MDTable(options) {\n        extend(this, this, options, true);\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    MDTable.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.MD_TABLE, this.createTable, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.onKeyDown, this);\n    };\n    MDTable.prototype.removeEventListener = function () {\n        this.parent.observer.off(CONSTANT.MD_TABLE, this.createTable);\n        this.parent.observer.off(EVENTS.KEY_DOWN_HANDLER, this.onKeyDown);\n    };\n    /**\n     * markdown destroy method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    MDTable.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    MDTable.prototype.onKeyDown = function (e) {\n        if (e.event.action === 'insert-table') {\n            e.item = e.value;\n            this.createTable(e);\n        }\n    };\n    MDTable.prototype.createTable = function (e) {\n        this.element = this.parent.element;\n        var start = this.element.selectionStart;\n        var end = this.element.selectionEnd;\n        var textAreaInitial = this.element.value;\n        this.locale = e;\n        this.selection.save(start, end);\n        this.restore(this.element.selectionStart, this.element.selectionEnd, null);\n        this.insertTable(start, end, textAreaInitial, e);\n    };\n    MDTable.prototype.getTable = function () {\n        var table = '';\n        table += this.textNonEmpty();\n        table += this.tableHeader(this.locale);\n        table += this.tableCell(this.locale);\n        return table;\n    };\n    MDTable.prototype.tableHeader = function (e) {\n        var text = '';\n        for (var i = 1; i <= 2; i++) {\n            text += '|';\n            for (var j = 1; j <= 2; j++) {\n                if (i === 1) {\n                    text += e.item.headingText + ' ' + j + '|';\n                }\n                else {\n                    text += '---------|';\n                }\n            }\n            text += this.insertLine();\n        }\n        return text;\n    };\n    MDTable.prototype.tableCell = function (e) {\n        var text = '';\n        for (var i = 1; i <= 2; i++) {\n            text += '|';\n            for (var j = 1; j <= 2; j++) {\n                text += e.item.colText + ' ' + this.convertToLetters(i) + j + '|';\n            }\n            text += this.insertLine();\n        }\n        text += this.insertLine();\n        return text;\n    };\n    MDTable.prototype.insertLine = function () {\n        var dummyElement = document.createElement('div');\n        dummyElement.innerHTML = '\\n';\n        return dummyElement.textContent;\n    };\n    MDTable.prototype.insertTable = function (start, end, textAreaInitial, e) {\n        var parentText = this.selection.getSelectedParentPoints(this.element);\n        var lastLineSplit = parentText[parentText.length - 1].text.split(' ', 2);\n        var syntaxArr = this.getFormatTag();\n        // eslint-disable-next-line\n        var syntaxCount = 0;\n        if (lastLineSplit.length < 2) {\n            this.element.value = this.updateValue(this.getTable());\n            this.makeSelection(textAreaInitial, start, end);\n        }\n        else {\n            if (this.ensureFormatApply(parentText[parentText.length - 1].text)) {\n                this.checkValid(start, end, this.getTable(), textAreaInitial, e, lastLineSplit, parentText, syntaxArr);\n            }\n            else {\n                this.element.value = this.updateValue(this.getTable());\n                this.makeSelection(textAreaInitial, start, end);\n            }\n        }\n        this.restore(this.element.selectionStart, this.element.selectionEnd, e);\n    };\n    MDTable.prototype.makeSelection = function (textAreaInitial, start, end) {\n        end = start + (textAreaInitial.length > 0 ? 12 : 10); //end is added 12 or 10 because to make the table heading selected\n        start += textAreaInitial.length > 0 ? 3 : 1; // Start is added 3 or 1 because new lines are added when inserting table\n        this.selection.setSelection(this.element, start, end);\n    };\n    MDTable.prototype.getFormatTag = function () {\n        var syntaxFormatKey = Object.keys(this.syntaxTag.Formats);\n        var syntaxListKey = Object.keys(this.syntaxTag.List);\n        var syntaxArr = [];\n        for (var i = 0; i < syntaxFormatKey.length; i++) {\n            syntaxArr.push(this.syntaxTag.Formats[syntaxFormatKey[i]]);\n        }\n        for (var j = 0; j < syntaxListKey.length; j++) {\n            syntaxArr.push(this.syntaxTag.List[syntaxListKey[j]]);\n        }\n        return syntaxArr;\n    };\n    MDTable.prototype.ensureFormatApply = function (line) {\n        var formatTags = this.getFormatTag();\n        var formatSplitZero = line.trim().split(' ', 2)[0] + ' ';\n        for (var i = 0; i < formatTags.length; i++) {\n            if (formatSplitZero === formatTags[i] || /^[\\d.]+[ ]+$/.test(formatSplitZero)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    MDTable.prototype.ensureStartValid = function (firstLine, parentText) {\n        var firstLineSplit = parentText[0].text.split(' ', 2);\n        for (var i = firstLine + 1; i <= firstLine + firstLineSplit[0].length + 1; i++) {\n            if (this.element.selectionStart === i || this.element.selectionEnd === i) {\n                return false;\n            }\n        }\n        return true;\n    };\n    MDTable.prototype.ensureEndValid = function (lastLine, formatSplitLength) {\n        for (var i = lastLine + 1; i <= lastLine + formatSplitLength + 1; i++) {\n            if (this.element.selectionEnd === i) {\n                return false;\n            }\n        }\n        return true;\n    };\n    MDTable.prototype.updateValueWithFormat = function (formatSplit, text) {\n        var textApplyFormat = this.element.value.substring(this.element.selectionEnd, this.element.value.length);\n        text += textApplyFormat.replace(textApplyFormat, (formatSplit[0] + ' ' + textApplyFormat));\n        return this.element.value.substr(0, this.element.selectionStart) + text;\n    };\n    MDTable.prototype.updateValue = function (text) {\n        return this.element.value.substr(0, this.element.selectionStart) + text +\n            this.element.value.substr(this.element.selectionEnd, this.element.value.length);\n    };\n    MDTable.prototype.checkValid = function (start, end, text, textAreaInitial, \n    // eslint-disable-next-line\n    e, formatSplit, parentText, syntaxArr) {\n        if (this.ensureStartValid(parentText[0].start, parentText) &&\n            this.ensureEndValid(parentText[parentText.length - 1].start, formatSplit[0].length)) {\n            if (start === parentText[0].start) {\n                if (start !== end && end !== (parentText[parentText.length - 1].end - 1)) {\n                    this.element.value = this.updateValueWithFormat(formatSplit, text);\n                }\n                else {\n                    this.element.value = this.updateValue(text);\n                }\n            }\n            else if (end === parentText[parentText.length - 1].end - 1) {\n                this.element.value = this.updateValue(text);\n            }\n            else {\n                this.element.value = this.updateValueWithFormat(formatSplit, text);\n            }\n            this.makeSelection(textAreaInitial, start, end);\n        }\n    };\n    MDTable.prototype.convertToLetters = function (rowNumber) {\n        var baseChar = ('A').charCodeAt(0);\n        var letters = '';\n        do {\n            rowNumber -= 1;\n            letters = String.fromCharCode(baseChar + (rowNumber % 26)) + letters;\n            rowNumber = (rowNumber / 26) >> 0;\n        } while (rowNumber > 0);\n        return letters;\n    };\n    MDTable.prototype.textNonEmpty = function () {\n        var emptyText = '';\n        if (this.isCursorBased() || this.isSelectionBased()) {\n            if (this.element.value.length > 0) {\n                emptyText += this.insertLine();\n                emptyText += this.insertLine(); // to append two new line when textarea having content.\n            }\n        }\n        return emptyText;\n    };\n    MDTable.prototype.isCursorBased = function () {\n        return this.element.selectionStart === this.element.selectionEnd;\n    };\n    MDTable.prototype.isSelectionBased = function () {\n        return this.element.selectionStart !== this.element.selectionEnd;\n    };\n    MDTable.prototype.restore = function (start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(this.element);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: event.subCommand,\n                selectedText: this.selection.getSelectedText(this.element),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    return MDTable;\n}());\nexport { MDTable };\n","import * as CONSTANT from './../base/constant';\n/**\n * Link internal component\n *\n * @hidden\n * @deprecated\n */\nvar ClearFormat = /** @class */ (function () {\n    /**\n     * Constructor for creating the clear format plugin\n     *\n     * @param {MarkdownParser} parent - specifies the parent element\n     * @hidden\n     * @deprecated\n     */\n    function ClearFormat(parent) {\n        this.parent = parent;\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    ClearFormat.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.CLEAR_COMMAND, this.clear, this);\n    };\n    ClearFormat.prototype.replaceRegex = function (data) {\n        /* eslint-disable */\n        return data.replace(/\\*/ig, '\\\\*').replace(/\\&/ig, '\\\\&')\n            .replace(/\\-/ig, '\\\\-').replace(/\\^/ig, '\\\\^')\n            .replace(/\\$/ig, '\\\\$').replace(/\\./ig, '\\\\.')\n            .replace(/\\|/ig, '\\\\|').replace(/\\?/ig, '\\\\?')\n            .replace(/\\+/ig, '\\\\+').replace(/\\-/ig, '\\\\-')\n            .replace(/\\&/ig, '\\\\&');\n        /* eslint-enable */\n    };\n    ClearFormat.prototype.clearSelectionTags = function (text) {\n        var data = this.parent.selectionTags;\n        var keys = Object.keys(data);\n        for (var num = 0; num < keys.length; num++) {\n            var key = keys[num];\n            // eslint-disable-next-line\n            if (data.hasOwnProperty(key) && data[key] !== '') {\n                var expString = this.replaceRegex(data[\"\" + key]);\n                var regExp = void 0;\n                var startExp = data[\"\" + key].length;\n                var endExp = (data[\"\" + key] === '<sup>' || data[\"\" + key] === '<sub>') ? data[\"\" + key].length + 1 : data[\"\" + key].length;\n                if (data[\"\" + key] === '<sup>') {\n                    // eslint-disable-next-line\n                    regExp = new RegExp('<sup>(.*?)<\\/sup>', 'ig');\n                }\n                else if (data[\"\" + key] === '<sub>') {\n                    // eslint-disable-next-line\n                    regExp = new RegExp('<sub>(.*?)<\\/sub>', 'ig');\n                }\n                else {\n                    // eslint-disable-next-line\n                    regExp = new RegExp(expString + '(.*?)' + expString, 'ig');\n                }\n                var val = text.match(regExp);\n                for (var index = 0; val && index < val.length && val[index] !== ''; index++) {\n                    // eslint-disable-next-line max-len\n                    text = text.replace(val[index], val[index].substr(startExp, val[index].length - endExp - startExp));\n                }\n            }\n        }\n        return text;\n    };\n    ClearFormat.prototype.clearFormatTags = function (text) {\n        var lines = text.split('\\n');\n        return this.clearFormatLines(lines);\n    };\n    ClearFormat.prototype.clearFormatLines = function (lines) {\n        var tags = [this.parent.formatTags, this.parent.listTags];\n        var str = '';\n        for (var len = 0; len < lines.length; len++) {\n            for (var num = 0; num < tags.length; num++) {\n                var data = tags[num];\n                var keys = Object.keys(data);\n                for (var index = 0; index < keys.length; index++) {\n                    var key = keys[index];\n                    // eslint-disable-next-line\n                    if (data.hasOwnProperty(key) && data[key] !== '') {\n                        if (lines[len].indexOf(data[\"\" + key]) === 0) {\n                            lines[len] = lines[len].replace(data[\"\" + key], '');\n                            lines[len] = this.clearFormatLines([lines[len]]);\n                        }\n                    }\n                }\n            }\n            str = str + lines[len] + ((len !== lines.length - 1) ? '\\n' : '');\n        }\n        return str;\n    };\n    ClearFormat.prototype.clear = function (e) {\n        var textArea = this.parent.element;\n        textArea.focus();\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var text = this.selection.getSelectedText(textArea);\n        text = this.clearSelectionTags(text);\n        text = this.clearFormatTags(text);\n        textArea.value = textArea.value.substr(0, start)\n            + text + textArea.value.substr(end, textArea.value.length);\n        this.parent.markdownSelection.setSelection(textArea, start, start + text.length);\n        this.restore(textArea, start, start + text.length, e);\n    };\n    ClearFormat.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: event.subCommand,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    return ClearFormat;\n}());\nexport { ClearFormat };\n","import * as CONSTANT from './../base/constant';\n/**\n * Link internal component\n *\n * @hidden\n * @deprecated\n */\nvar MDInsertText = /** @class */ (function () {\n    /**\n     * Constructor for creating the insert text plugin\n     *\n     * @param {MarkdownParser} parent - specifies the parent element\n     * @hidden\n     * @deprecated\n     */\n    function MDInsertText(parent) {\n        this.parent = parent;\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    MDInsertText.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.INSERT_TEXT_COMMAND, this.InsertTextExec, this);\n    };\n    MDInsertText.prototype.InsertTextExec = function (e) {\n        var textArea = this.parent.element;\n        textArea.focus();\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var text = e.value.text;\n        var startOffset = start + text.length;\n        var endOffset = end + text.length;\n        textArea.value = textArea.value.substr(0, start)\n            + text + textArea.value.substr(end, textArea.value.length);\n        this.parent.markdownSelection.setSelection(textArea, startOffset, endOffset);\n        this.restore(textArea, startOffset, endOffset, e);\n    };\n    MDInsertText.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: event.subCommand,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    return MDInsertText;\n}());\nexport { MDInsertText };\n","import { Observer } from '@syncfusion/ej2-base';\nimport * as CONSTANT from './constant';\nimport { MDLists } from './../plugin/lists';\nimport { MDFormats } from './../plugin/formats';\nimport { MDSelectionFormats } from './../plugin/md-selection-formats';\nimport { MarkdownSelection } from './../plugin/markdown-selection';\nimport { extend } from '@syncfusion/ej2-base';\nimport { markdownFormatTags, markdownListsTags, markdownSelectionTags } from './../../common/config';\nimport { UndoRedoCommands } from './../plugin/undo';\nimport { MDLink } from './../plugin/link';\nimport { MDTable } from './../plugin/table';\nimport * as EVENTS from './../../common/constant';\nimport { ClearFormat } from './../plugin/clearformat';\nimport { MDInsertText } from './../plugin/insert-text';\n/**\n * MarkdownParser internal component\n *\n * @hidden\n * @deprecated\n */\nvar MarkdownParser = /** @class */ (function () {\n    /**\n     * Constructor for creating the component\n     *\n     * @param {IMarkdownParserModel} options - specifies the options\n     * @hidden\n     * @deprecated\n     */\n    function MarkdownParser(options) {\n        this.initialize();\n        extend(this, this, options, true);\n        this.observer = new Observer(this);\n        this.markdownSelection = new MarkdownSelection();\n        this.listObj = new MDLists({ parent: this, syntax: this.listTags });\n        this.formatObj = new MDFormats({ parent: this, syntax: this.formatTags });\n        this.undoRedoManager = new UndoRedoCommands(this, options.options);\n        this.mdSelectionFormats = new MDSelectionFormats({ parent: this, syntax: this.selectionTags });\n        this.linkObj = new MDLink(this);\n        this.tableObj = new MDTable({ parent: this, syntaxTag: ({ Formats: this.formatTags, List: this.listTags }) });\n        this.clearObj = new ClearFormat(this);\n        this.insertTextObj = new MDInsertText(this);\n        this.wireEvents();\n    }\n    MarkdownParser.prototype.initialize = function () {\n        this.formatTags = markdownFormatTags;\n        this.listTags = markdownListsTags;\n        this.selectionTags = markdownSelectionTags;\n    };\n    MarkdownParser.prototype.wireEvents = function () {\n        this.observer.on(EVENTS.KEY_DOWN, this.editorKeyDown, this);\n        this.observer.on(EVENTS.KEY_UP, this.editorKeyUp, this);\n        this.observer.on(EVENTS.MODEL_CHANGED, this.onPropertyChanged, this);\n    };\n    MarkdownParser.prototype.onPropertyChanged = function (props) {\n        this.observer.notify(EVENTS.MODEL_CHANGED_PLUGIN, props);\n    };\n    MarkdownParser.prototype.editorKeyDown = function (e) {\n        this.observer.notify(EVENTS.KEY_DOWN_HANDLER, e);\n    };\n    MarkdownParser.prototype.editorKeyUp = function (e) {\n        this.observer.notify(EVENTS.KEY_UP_HANDLER, e);\n    };\n    /* eslint-disable */\n    /**\n     * markdown execCommand method\n     *\n     * @param {MarkdownExecCommand} command - specifies the command\n     * @param {T} - specifies the value\n     * @param {Event} event - specifies the event\n     * @param {Function} callBack - specifies the call back function\n     * @param {string} text - specifies the string value\n     * @param {T} exeValue - specifies the value\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    /* eslint-enable */\n    MarkdownParser.prototype.execCommand = function (command, value, event, callBack, text, exeValue) {\n        switch (command.toLocaleLowerCase()) {\n            case 'lists':\n                this.observer.notify(CONSTANT.LISTS_COMMAND, { subCommand: value, event: event, callBack: callBack });\n                break;\n            case 'formats':\n                this.observer.notify(EVENTS.FORMAT_TYPE, { subCommand: value, event: event, callBack: callBack });\n                break;\n            case 'actions':\n                this.observer.notify(EVENTS.ACTION, { subCommand: value, event: event, callBack: callBack });\n                break;\n            case 'style':\n            case 'effects':\n            case 'casing':\n                this.observer.notify(CONSTANT.selectionCommand, { subCommand: value, event: event, callBack: callBack });\n                break;\n            case 'links':\n            case 'images':\n                this.observer.notify(CONSTANT.LINK_COMMAND, { subCommand: value, event: event, callBack: callBack, item: exeValue });\n                break;\n            case 'table':\n                switch (value.toString().toLocaleLowerCase()) {\n                    case 'createtable':\n                        this.observer.notify(CONSTANT.MD_TABLE, { subCommand: value, item: exeValue, event: event, callBack: callBack });\n                        break;\n                }\n                break;\n            case 'clear':\n                this.observer.notify(CONSTANT.CLEAR_COMMAND, { subCommand: value, event: event, callBack: callBack });\n                break;\n            case 'inserttext':\n                this.observer.notify(CONSTANT.INSERT_TEXT_COMMAND, { subCommand: value, event: event, callBack: callBack,\n                    value: { text: exeValue } });\n                break;\n        }\n    };\n    return MarkdownParser;\n}());\nexport { MarkdownParser };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Formatter } from './formatter';\nimport { MarkdownParser } from './../../markdown-parser/base/markdown-parser';\nimport { extend } from '@syncfusion/ej2-base';\nimport { markdownKeyConfig, markdownListsTags, markdownFormatTags, markdownSelectionTags } from './../../common/config';\n/**\n * Markdown adapter\n *\n * @hidden\n * @deprecated\n */\nvar MarkdownFormatter = /** @class */ (function (_super) {\n    __extends(MarkdownFormatter, _super);\n    function MarkdownFormatter(options) {\n        var _this = _super.call(this) || this;\n        _this.initialize();\n        extend(_this, _this, options, true);\n        if (options && _this.element) {\n            _this.updateFormatter(_this.element, document, options.options);\n        }\n        return _this;\n    }\n    MarkdownFormatter.prototype.initialize = function () {\n        this.keyConfig = markdownKeyConfig;\n        this.formatTags = markdownFormatTags;\n        this.listTags = markdownListsTags;\n        this.selectionTags = markdownSelectionTags;\n    };\n    /**\n     * Update the formatter of RichTextEditor\n     *\n     * @param  {Element} editElement - specifies the edit element.\n     * @param  {Document} doc - specifies the document.\n     * @param {number} options - specifies the options\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    MarkdownFormatter.prototype.updateFormatter = function (editElement, doc, options) {\n        if (editElement) {\n            this.editorManager = new MarkdownParser({\n                element: editElement,\n                formatTags: this.formatTags,\n                listTags: this.listTags,\n                selectionTags: this.selectionTags,\n                options: options\n            });\n        }\n    };\n    return MarkdownFormatter;\n}(Formatter));\nexport { MarkdownFormatter };\n","/**\n * Markdown module is used to render Rich Text Editor as Markdown editor content\n *\n * @hidden\n * @deprecated\n */\nvar MarkdownRender = /** @class */ (function () {\n    /**\n     * Constructor for content renderer module\n     *\n     * @param {IRichTextEditor} parent - specifies the parent.\n     */\n    function MarkdownRender(parent) {\n        this.parent = parent;\n    }\n    /**\n     * The function is used to render Rich Text Editor content div\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    MarkdownRender.prototype.renderPanel = function () {\n        var rteObj = this.parent;\n        var div = this.parent.createElement('div', { id: this.parent.getID() + '_view', className: 'e-rte-content' });\n        this.editableElement = this.parent.createElement('textarea', {\n            className: 'e-content',\n            id: this.parent.getID() + '_editable-content',\n            attrs: { 'aria-labelledby': this.parent.getID() + '_view' }\n        });\n        div.appendChild(this.editableElement);\n        this.setPanel(div);\n        rteObj.element.appendChild(div);\n    };\n    /**\n     * Get the content div element of RichTextEditor\n     *\n     * @returns {Element} - specifies the element\n     * @hidden\n     * @deprecated\n     */\n    MarkdownRender.prototype.getPanel = function () {\n        return this.contentPanel;\n    };\n    /**\n     * Get the editable element of RichTextEditor\n     *\n     * @returns {Element} - specifies the element\n     * @hidden\n     * @deprecated\n     */\n    MarkdownRender.prototype.getEditPanel = function () {\n        return this.editableElement;\n    };\n    /**\n     * Returns the text content as string.\n     *\n     * @returns {string} - specifies the string values.\n     */\n    MarkdownRender.prototype.getText = function () {\n        return this.getEditPanel().value;\n    };\n    /**\n     * Set the content div element of RichTextEditor\n     *\n     * @param  {Element} panel - specifies the element.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    MarkdownRender.prototype.setPanel = function (panel) {\n        this.contentPanel = panel;\n    };\n    /**\n     * Get the document of RichTextEditor\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    MarkdownRender.prototype.getDocument = function () {\n        return this.getEditPanel().ownerDocument;\n    };\n    return MarkdownRender;\n}());\nexport { MarkdownRender };\n","import * as events from '../base/constant';\nimport { isNullOrUndefined, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { MarkdownFormatter } from '../formatter/markdown-formatter';\nimport { RenderType } from '../base/enum';\nimport * as classes from '../base/classes';\nimport { MarkdownToolbarStatus } from './markdown-toolbar-status';\nimport { MarkdownRender } from '../renderer/markdown-renderer';\nimport { MarkdownSelection } from './../../markdown-parser/plugin/markdown-selection';\n/**\n * `MarkdownEditor` module is used to markdown editor\n */\nvar MarkdownEditor = /** @class */ (function () {\n    function MarkdownEditor(parent, serviceLocator) {\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    /**\n     * Destroys the Markdown.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    MarkdownEditor.prototype.destroy = function () {\n        if (isNullOrUndefined(this.parent)) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    MarkdownEditor.prototype.moduleDestroy = function () {\n        this.parent = null;\n        this.toolbarUpdate.parent = null;\n    };\n    MarkdownEditor.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.saveSelection = new MarkdownSelection();\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.markdownToolbarClick, this.onToolbarClick, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.selectAll, this.selectAll, this);\n        this.parent.on(events.getSelectedHtml, this.getSelectedHtml, this);\n        this.parent.on(events.selectionSave, this.onSelectionSave, this);\n        this.parent.on(events.selectionRestore, this.onSelectionRestore, this);\n        this.parent.on(events.readOnlyMode, this.updateReadOnly, this);\n        this.parent.on(events.moduleDestroy, this.moduleDestroy, this);\n    };\n    MarkdownEditor.prototype.updateReadOnly = function () {\n        if (this.parent.readonly) {\n            this.parent.contentModule.getEditPanel().setAttribute('readonly', 'readonly');\n            addClass([this.parent.element], classes.CLS_RTE_READONLY);\n        }\n        else {\n            this.parent.contentModule.getEditPanel().removeAttribute('readonly');\n            removeClass([this.parent.element], classes.CLS_RTE_READONLY);\n        }\n    };\n    MarkdownEditor.prototype.onSelectionSave = function () {\n        var textArea = this.parent.contentModule.getEditPanel();\n        this.saveSelection.save(textArea.selectionStart, textArea.selectionEnd);\n    };\n    // eslint-disable-next-line\n    MarkdownEditor.prototype.onSelectionRestore = function (e) {\n        this.contentRenderer.getEditPanel().focus();\n        var textArea = this.parent.contentModule.getEditPanel();\n        this.saveSelection.restore(textArea);\n    };\n    MarkdownEditor.prototype.onToolbarClick = function (args) {\n        var item = args.item;\n        var textArea = this.parent.contentModule.getEditPanel();\n        textArea.focus();\n        var startOffset = textArea.selectionStart;\n        var endOffset = textArea.selectionEnd;\n        var text = textArea.value.substring(startOffset, endOffset);\n        switch (item.subCommand) {\n            case 'Maximize':\n                this.parent.notify(events.enableFullScreen, { args: args });\n                break;\n            case 'Minimize':\n                this.parent.notify(events.disableFullScreen, { args: args });\n                break;\n            case 'CreateLink':\n                this.parent.notify(events.insertLink, { member: 'link', args: args, text: text, module: 'Markdown' });\n                break;\n            case 'Image':\n                this.parent.notify(events.insertImage, { member: 'image', args: args, text: text, module: 'Markdown' });\n                break;\n            case 'CreateTable': {\n                var tableConstant = {\n                    'headingText': this.parent.localeObj.getConstant('TableHeadingText'),\n                    'colText': this.parent.localeObj.getConstant('TableColText')\n                };\n                this.parent.formatter.process(this.parent, args, args.originalEvent, tableConstant);\n                break;\n            }\n            default:\n                this.parent.formatter.process(this.parent, args, args.originalEvent, null);\n                break;\n        }\n    };\n    MarkdownEditor.prototype.instantiateRenderer = function () {\n        this.renderFactory.addRenderer(RenderType.Content, new MarkdownRender(this.parent));\n    };\n    MarkdownEditor.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.markdownToolbarClick, this.onToolbarClick);\n        this.parent.off(events.initialLoad, this.instantiateRenderer);\n        this.parent.off(events.selectAll, this.selectAll);\n        this.parent.off(events.getSelectedHtml, this.getSelectedHtml);\n        this.parent.off(events.selectionSave, this.onSelectionSave);\n        this.parent.off(events.selectionRestore, this.onSelectionRestore);\n        this.parent.off(events.readOnlyMode, this.updateReadOnly);\n        this.parent.off(events.moduleDestroy, this.moduleDestroy);\n    };\n    MarkdownEditor.prototype.render = function () {\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        var editElement = this.contentRenderer.getEditPanel();\n        var option = { undoRedoSteps: this.parent.undoRedoSteps, undoRedoTimer: this.parent.undoRedoTimer };\n        if (isNullOrUndefined(this.parent.formatter)) {\n            this.parent.formatter = new MarkdownFormatter({\n                element: editElement,\n                options: option\n            });\n        }\n        else {\n            this.parent.formatter.updateFormatter(editElement, this.contentRenderer.getDocument(), option);\n        }\n        if (this.parent.toolbarSettings.enable) {\n            this.toolbarUpdate = new MarkdownToolbarStatus(this.parent);\n        }\n        this.parent.notify(events.bindOnEnd, {});\n    };\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {RichTextEditorModel} e - specifies the editor model\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    MarkdownEditor.prototype.onPropertyChanged = function (e) {\n        // On property code change here\n        if (!isNullOrUndefined(e.newProp.formatter)) {\n            var editElement = this.contentRenderer.getEditPanel();\n            var option = { undoRedoSteps: this.parent.undoRedoSteps,\n                undoRedoTimer: this.parent.undoRedoTimer };\n            this.parent.formatter.updateFormatter(editElement, this.contentRenderer.getDocument(), option);\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {void}\n     */\n    MarkdownEditor.prototype.getModuleName = function () {\n        return 'markdownEditor';\n    };\n    /**\n     * For selecting all content in RTE\n     *\n     * @returns {void}\n     * @private\n     */\n    MarkdownEditor.prototype.selectAll = function () {\n        this.parent.formatter.editorManager.markdownSelection.setSelection(this.parent.contentModule.getEditPanel(), 0, this.parent.contentModule.getEditPanel().value.length);\n    };\n    /**\n     * For get a selected text in RTE\n     *\n     * @param {NotifyArgs} e - specifies the arguments.\n     * @returns {void}\n     * @private\n     */\n    MarkdownEditor.prototype.getSelectedHtml = function (e) {\n        e.callBack(this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.contentModule.getEditPanel()));\n    };\n    return MarkdownEditor;\n}());\nexport { MarkdownEditor };\n","/**\n * Constant values for EditorManager\n */\n/**\n * Image plugin events\n *\n * @hidden\n */\nexport var IMAGE = 'INSERT-IMAGE';\nexport var AUDIO = 'INSERT-AUDIO';\nexport var VIDEO = 'INSERT-VIDEO';\nexport var TABLE = 'INSERT-TABLE';\nexport var LINK = 'INSERT-LINK';\nexport var INSERT_ROW = 'INSERT-ROW';\nexport var INSERT_COLUMN = 'INSERT-COLUMN';\nexport var DELETEROW = 'DELETE-ROW';\nexport var DELETECOLUMN = 'DELETE-COLUMN';\nexport var REMOVETABLE = 'REMOVE-TABLE';\nexport var TABLEHEADER = 'TABLE-HEADER';\nexport var TABLE_VERTICAL_ALIGN = 'TABLE_VERTICAL_ALIGN';\nexport var TABLE_MERGE = 'TABLE_MERGE';\nexport var TABLE_VERTICAL_SPLIT = 'TABLE_VERTICAL_SPLIT';\nexport var TABLE_HORIZONTAL_SPLIT = 'TABLE_HORIZONTAL_SPLIT';\nexport var TABLE_MOVE = 'TABLE_MOVE';\n/**\n * Alignments plugin events\n *\n * @hidden\n */\nexport var ALIGNMENT_TYPE = 'alignment-type';\n/**\n * Indents plugin events\n *\n * @hidden\n */\nexport var INDENT_TYPE = 'indent-type';\n/**\n * Constant tag names\n *\n * @hidden\n */\nexport var DEFAULT_TAG = 'p';\n/**\n * @hidden\n */\nexport var BLOCK_TAGS = ['address', 'article', 'aside', 'audio', 'blockquote',\n    'canvas', 'details', 'dd', 'div', 'dl', 'dt', 'fieldset', 'figcaption', 'figure', 'footer',\n    'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'hgroup', 'hr', 'li', 'main', 'nav',\n    'noscript', 'ol', 'output', 'p', 'pre', 'section', 'table', 'tbody', 'td', 'tfoot', 'th',\n    'thead', 'tr', 'ul', 'video', 'body'];\n/**\n * @hidden\n */\nexport var IGNORE_BLOCK_TAGS = ['td', 'th'];\n/**\n * @hidden\n */\nexport var TABLE_BLOCK_TAGS = ['table', 'tbody', 'td', 'tfoot', 'th',\n    'thead', 'tr'];\n/**\n * Selection plugin events\n *\n * @hidden\n */\nexport var SELECTION_TYPE = 'selection-type';\n/**\n * Insert HTML plugin events\n *\n * @hidden\n */\nexport var INSERTHTML_TYPE = 'inserthtml-type';\n/**\n * Insert Text plugin events\n *\n * @hidden\n */\nexport var INSERT_TEXT_TYPE = 'insert-text-type';\n/**\n * Clear Format HTML plugin events\n *\n * @hidden\n */\nexport var CLEAR_TYPE = 'clear-type';\n/**\n * Self closing tags\n *\n * @hidden\n */\nexport var SELF_CLOSING_TAGS = ['area', 'base', 'br', 'embed', 'hr', 'img', 'input', 'param', 'source', 'track', 'wbr', 'iframe', 'td', 'table'];\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * `Selection` module is used to handle RTE Selections.\n */\nvar NodeSelection = /** @class */ (function () {\n    function NodeSelection() {\n        this.startNodeName = [];\n        this.endNodeName = [];\n    }\n    NodeSelection.prototype.saveInstance = function (range, body) {\n        this.range = range.cloneRange();\n        this.rootNode = this.documentFromRange(range);\n        this.body = body;\n        this.startContainer = this.getNodeArray(range.startContainer, true);\n        this.endContainer = this.getNodeArray(range.endContainer, false);\n        this.startOffset = range.startOffset;\n        this.endOffset = range.endOffset;\n        this.html = this.body.innerHTML;\n        return this;\n    };\n    NodeSelection.prototype.documentFromRange = function (range) {\n        return (9 === range.startContainer.nodeType) ? range.startContainer : range.startContainer.ownerDocument;\n    };\n    NodeSelection.prototype.getRange = function (docElement) {\n        var select = this.get(docElement);\n        var range = select && select.rangeCount > 0 ? select.getRangeAt(select.rangeCount - 1) : docElement.createRange();\n        return (range.startContainer !== docElement || range.endContainer !== docElement\n            || range.startOffset || range.endOffset || (range.setStart(docElement.body, 0),\n            range.collapse(!0)),\n            range);\n    };\n    /**\n     * get method\n     *\n     * @param {Document} docElement - specifies the get function\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    NodeSelection.prototype.get = function (docElement) {\n        return docElement.defaultView.getSelection();\n    };\n    /**\n     * save method\n     *\n     * @param {Range} range - range value.\n     * @param {Document} docElement - specifies the document.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    NodeSelection.prototype.save = function (range, docElement) {\n        range = (range) ? range.cloneRange() : this.getRange(docElement);\n        return this.saveInstance(range, docElement.body);\n    };\n    /**\n     * getIndex method\n     *\n     * @param {Node} node - specifies the node value.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    NodeSelection.prototype.getIndex = function (node) {\n        var index;\n        var num = 0;\n        node = !node.previousSibling && node.tagName === 'BR' ? node : node.previousSibling;\n        if (node) {\n            for (var type = node.nodeType; node; null) {\n                index = node.nodeType;\n                num++;\n                //eslint-disable-next-line\n                type = index;\n                node = node.previousSibling;\n            }\n        }\n        return num;\n    };\n    NodeSelection.prototype.isChildNode = function (nodeCollection, parentNode) {\n        for (var index = 0; index < parentNode.childNodes.length; index++) {\n            if (nodeCollection.indexOf(parentNode.childNodes[index]) > -1) {\n                return true;\n            }\n        }\n        return false;\n    };\n    NodeSelection.prototype.getNode = function (startNode, endNode, nodeCollection) {\n        if (endNode === startNode &&\n            (startNode.nodeType === 3 || !startNode.firstChild || nodeCollection.indexOf(startNode.firstChild) !== -1\n                || this.isChildNode(nodeCollection, startNode))) {\n            return null;\n        }\n        if (nodeCollection.indexOf(startNode.firstChild) === -1 && startNode.firstChild && !this.isChildNode(nodeCollection, startNode)) {\n            return startNode.firstChild;\n        }\n        if (startNode.nextSibling) {\n            return startNode.nextSibling;\n        }\n        if (!startNode.parentNode) {\n            return null;\n        }\n        else {\n            return startNode.parentNode;\n        }\n    };\n    /**\n     * getNodeCollection method\n     *\n     * @param {Range} range -specifies the range.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    NodeSelection.prototype.getNodeCollection = function (range) {\n        var startNode = range.startContainer.childNodes[range.startOffset]\n            || range.startContainer;\n        var endNode = range.endContainer.childNodes[(range.endOffset > 0) ? (range.endOffset - 1) : range.endOffset]\n            || range.endContainer;\n        if ((startNode === endNode || (startNode.nodeName === 'BR' && startNode === range.endContainer.childNodes[range.endOffset])) &&\n            startNode.childNodes.length === 0) {\n            return [startNode];\n        }\n        if (range.startOffset === range.endOffset && range.startOffset !== 0 && range.startContainer.nodeName === 'PRE') {\n            return [startNode.nodeName === 'BR' || startNode.nodeName === '#text' ? startNode : startNode.childNodes[0]];\n        }\n        var nodeCollection = [];\n        do {\n            if (nodeCollection.indexOf(startNode) === -1) {\n                nodeCollection.push(startNode);\n            }\n            startNode = this.getNode(startNode, endNode, nodeCollection);\n        } while (startNode);\n        return nodeCollection;\n    };\n    /**\n     * getParentNodeCollection method\n     *\n     * @param {Range} range - specifies the range value.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    NodeSelection.prototype.getParentNodeCollection = function (range) {\n        return this.getParentNodes(this.getNodeCollection(range), range);\n    };\n    /**\n     * getParentNodes method\n     *\n     * @param {Node[]} nodeCollection - specifies the collection of nodes.\n     * @param {Range} range - specifies the range values.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    NodeSelection.prototype.getParentNodes = function (nodeCollection, range) {\n        nodeCollection = nodeCollection.reverse();\n        for (var index = 0; index < nodeCollection.length; index++) {\n            if ((nodeCollection.indexOf(nodeCollection[index].parentNode) !== -1)\n                || (nodeCollection[index].nodeType === 3 &&\n                    range.startContainer !== range.endContainer &&\n                    range.startContainer.parentNode !== range.endContainer.parentNode)) {\n                nodeCollection.splice(index, 1);\n                index--;\n            }\n            else if (nodeCollection[index].nodeType === 3) {\n                nodeCollection[index] = nodeCollection[index].parentNode;\n            }\n        }\n        return nodeCollection;\n    };\n    /**\n     * getSelectionNodeCollection method\n     *\n     * @param {Range} range - specifies the range value.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    NodeSelection.prototype.getSelectionNodeCollection = function (range) {\n        return this.getSelectionNodes(this.getNodeCollection(range));\n    };\n    /**\n     * getSelectionNodeCollection along with BR node method\n     *\n     * @param {Range} range - specifies the range value.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    NodeSelection.prototype.getSelectionNodeCollectionBr = function (range) {\n        return this.getSelectionNodesBr(this.getNodeCollection(range));\n    };\n    /**\n     * getParentNodes method\n     *\n     * @param {Node[]} nodeCollection - specifies the collection of nodes.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    NodeSelection.prototype.getSelectionNodes = function (nodeCollection) {\n        nodeCollection = nodeCollection.reverse();\n        // eslint-disable-next-line\n        var regEx = new RegExp(String.fromCharCode(8203), 'g');\n        for (var index = 0; index < nodeCollection.length; index++) {\n            if (nodeCollection[index].nodeType !== 3 || (nodeCollection[index].textContent.trim() === '' ||\n                (nodeCollection[index].textContent.length === 1 && nodeCollection[index].textContent.match(regEx)))) {\n                nodeCollection.splice(index, 1);\n                index--;\n            }\n        }\n        return nodeCollection.reverse();\n    };\n    /**\n     * Get selection text nodes with br method.\n     *\n     * @param {Node[]} nodeCollection - specifies the collection of nodes.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    NodeSelection.prototype.getSelectionNodesBr = function (nodeCollection) {\n        nodeCollection = nodeCollection.reverse();\n        // eslint-disable-next-line\n        var regEx = new RegExp(String.fromCharCode(8203), 'g');\n        for (var index = 0; index < nodeCollection.length; index++) {\n            if (nodeCollection[index].nodeName !== 'BR' &&\n                (nodeCollection[index].nodeType !== 3 || (nodeCollection[index].textContent.trim() === '' ||\n                    (nodeCollection[index].textContent.length === 1 && nodeCollection[index].textContent.match(regEx))))) {\n                nodeCollection.splice(index, 1);\n                index--;\n            }\n        }\n        return nodeCollection.reverse();\n    };\n    /**\n     * getInsertNodeCollection method\n     *\n     * @param {Range} range - specifies the range value.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    NodeSelection.prototype.getInsertNodeCollection = function (range) {\n        return this.getInsertNodes(this.getNodeCollection(range));\n    };\n    /**\n     * getInsertNodes method\n     *\n     * @param {Node[]} nodeCollection - specifies the collection of nodes.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    NodeSelection.prototype.getInsertNodes = function (nodeCollection) {\n        nodeCollection = nodeCollection.reverse();\n        for (var index = 0; index < nodeCollection.length; index++) {\n            if ((nodeCollection[index].childNodes.length !== 0 &&\n                nodeCollection[index].nodeType !== 3) ||\n                (nodeCollection[index].nodeType === 3 &&\n                    nodeCollection[index].textContent === '')) {\n                nodeCollection.splice(index, 1);\n                index--;\n            }\n        }\n        return nodeCollection.reverse();\n    };\n    /**\n     * getNodeArray method\n     *\n     * @param {Node} node - specifies the node content.\n     * @param {boolean} isStart - specifies the boolean value.\n     * @param {Document} root - specifies the root document.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    NodeSelection.prototype.getNodeArray = function (node, isStart, root) {\n        var array = [];\n        // eslint-disable-next-line\n        ((isStart) ? (this.startNodeName = []) : (this.endNodeName = []));\n        for (; node !== (root ? root : this.rootNode); null) {\n            if (isNullOrUndefined(node)) {\n                break;\n            }\n            // eslint-disable-next-line\n            (isStart) ? this.startNodeName.push(node.nodeName.toLowerCase()) : this.endNodeName.push(node.nodeName.toLowerCase());\n            array.push(this.getIndex(node));\n            node = node.parentNode;\n        }\n        return array;\n    };\n    NodeSelection.prototype.setRangePoint = function (range, isvalid, num, size) {\n        var node = this.rootNode;\n        var index = num.length;\n        var constant = size;\n        for (; index--; null) {\n            node = node && node.childNodes[num[index]];\n        }\n        if (node && constant >= 0 && node.nodeName !== 'html') {\n            if (node.nodeType === 3 && node.nodeValue.replace(/\\u00a0/g, '&nbsp;') === '&nbsp;') {\n                constant = node.textContent.length;\n            }\n            range[isvalid ? 'setStart' : 'setEnd'](node, constant);\n        }\n        return range;\n    };\n    /**\n     * restore method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    NodeSelection.prototype.restore = function () {\n        var range = this.range.cloneRange();\n        range = this.setRangePoint(range, true, this.startContainer, this.startOffset);\n        range = this.setRangePoint(range, false, this.endContainer, this.endOffset);\n        this.selectRange(this.rootNode, range);\n        return range;\n    };\n    NodeSelection.prototype.selectRange = function (docElement, range) {\n        this.setRange(docElement, range);\n        this.save(range, docElement);\n    };\n    /**\n     * setRange method\n     *\n     * @param {Document} docElement - specifies the document.\n     * @param {Range} range - specifies the range.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    NodeSelection.prototype.setRange = function (docElement, range) {\n        var selection = this.get(docElement);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    };\n    /**\n     * setSelectionText method\n     *\n     * @param {Document} docElement - specifies the documrent\n     * @param {Node} startNode - specifies the starting node.\n     * @param {Node} endNode - specifies the the end node.\n     * @param {number} startIndex - specifies the starting index.\n     * @param {number} endIndex - specifies the end index.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    NodeSelection.prototype.setSelectionText = function (docElement, startNode, endNode, startIndex, endIndex) {\n        var range = docElement.createRange();\n        range.setStart(startNode, startIndex);\n        range.setEnd(endNode, endIndex);\n        this.setRange(docElement, range);\n    };\n    /**\n     * setSelectionContents method\n     *\n     * @param {Document} docElement - specifies the document.\n     * @param {Node} element - specifies the node.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    NodeSelection.prototype.setSelectionContents = function (docElement, element) {\n        var range = docElement.createRange();\n        range.selectNode(element);\n        this.setRange(docElement, range);\n    };\n    /**\n     * setSelectionNode method\n     *\n     * @param {Document} docElement - specifies the document.\n     * @param {Node} element - specifies the node.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    NodeSelection.prototype.setSelectionNode = function (docElement, element) {\n        var range = docElement.createRange();\n        range.selectNodeContents(element);\n        this.setRange(docElement, range);\n    };\n    /**\n     * getSelectedNodes method\n     *\n     * @param {Document} docElement - specifies the document.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    NodeSelection.prototype.getSelectedNodes = function (docElement) {\n        return this.getNodeCollection(this.getRange(docElement));\n    };\n    /**\n     * Clear method\n     *\n     * @param {Document} docElement - specifies the document.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    NodeSelection.prototype.Clear = function (docElement) {\n        this.get(docElement).removeAllRanges();\n    };\n    /**\n     * insertParentNode method\n     *\n     * @param {Document} docElement - specifies the document.\n     * @param {Node} newNode - specicfies the new node.\n     * @param {Range} range - specifies the range.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    NodeSelection.prototype.insertParentNode = function (docElement, newNode, range) {\n        range.surroundContents(newNode);\n        this.selectRange(docElement, range);\n    };\n    /**\n     * setCursorPoint method\n     *\n     * @param {Document} docElement - specifies the document.\n     * @param {Element} element - specifies the element.\n     * @param {number} point - specifies the point.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    NodeSelection.prototype.setCursorPoint = function (docElement, element, point) {\n        var range = docElement.createRange();\n        var selection = docElement.defaultView.getSelection();\n        range.setStart(element, point);\n        range.collapse(true);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    };\n    return NodeSelection;\n}());\nexport { NodeSelection };\n","import * as CONSTANT from './../base/constant';\nimport { append, detach, createElement, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { NodeSelection } from './../../selection/index';\nimport { selfClosingTags } from '../../common/config';\nimport { getLastTextNode } from '../../common/util';\nexport var markerClassName = {\n    startSelection: 'e-editor-select-start',\n    endSelection: 'e-editor-select-end'\n};\n/**\n * DOMNode internal plugin\n *\n * @hidden\n * @deprecated\n */\nvar DOMNode = /** @class */ (function () {\n    /**\n     * Constructor for creating the DOMNode plugin\n     *\n     * @param {Element} parent - specifies the parent element\n     * @param {Document} currentDocument - specifies the current document.\n     * @hidden\n     * @deprecated\n     */\n    function DOMNode(parent, currentDocument) {\n        this.parent = parent;\n        this.nodeSelection = new NodeSelection();\n        this.currentDocument = currentDocument;\n    }\n    /**\n     * contents method\n     *\n     * @param {Element} element - specifies the element.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.contents = function (element) {\n        return (element && 'IFRAME' !== element.tagName ? Array.prototype.slice.call(element.childNodes || []) : []);\n    };\n    /**\n     * isBlockNode method\n     *\n     * @param {Element} element - specifies the node element.\n     * @returns {boolean} - sepcifies the boolean value\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.isBlockNode = function (element) {\n        return (!!element && (element.nodeType === Node.ELEMENT_NODE && CONSTANT.BLOCK_TAGS.indexOf(element.tagName.toLowerCase()) >= 0));\n    };\n    /**\n     * isLink method\n     *\n     * @param {Element} element - specifies the element\n     * @returns {boolean} -  specifies the boolean value\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.isLink = function (element) {\n        return (!!element && (element.nodeType === Node.ELEMENT_NODE && 'a' === element.tagName.toLowerCase()));\n    };\n    /**\n     * blockParentNode method\n     *\n     * @param {Element} element - specifies the element\n     * @returns {Element} - returns the element value\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.blockParentNode = function (element) {\n        for (; element && element.parentNode !== this.parent && ((!element.parentNode ||\n            !this.hasClass(element.parentNode, 'e-node-inner'))); null) {\n            element = element.parentNode;\n            if (this.isBlockNode(element)) {\n                return element;\n            }\n        }\n        return element;\n    };\n    /**\n     * rawAttributes method\n     *\n     * @param {Element} element - specifies the element\n     * @returns {string} - returns the string value\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.rawAttributes = function (element) {\n        var rawAttr = {};\n        var attributes = element.attributes;\n        if (attributes.length > 0) {\n            for (var d = 0; d < attributes.length; d++) {\n                var e = attributes[d];\n                rawAttr[e.nodeName] = e.value;\n            }\n        }\n        return rawAttr;\n    };\n    /**\n     * attributes method\n     *\n     * @param {Element} element - sepcifies the element.\n     * @returns {string} - returns the string value.\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.attributes = function (element) {\n        if (!element) {\n            return '';\n        }\n        var attr = '';\n        var rawAttr = this.rawAttributes(element);\n        var orderRawAttr = Object.keys(rawAttr).sort();\n        for (var e = 0; e < orderRawAttr.length; e++) {\n            var attrKey = orderRawAttr[e];\n            var attrValue = rawAttr[\"\" + attrKey];\n            /* eslint-disable */\n            if (attrValue.indexOf(\"'\") < 0 && attrValue.indexOf('\"') >= 0) {\n                attr += ' ' + attrKey + \"='\" + attrValue + \"'\";\n            }\n            else if (attrValue.indexOf('\"') >= 0 && attrValue.indexOf(\"'\") >= 0) {\n                /* eslint-enable */\n                attrValue = attrValue.replace(/\"/g, '&quot;');\n                attr += ' ' + attrKey + '=\"' + attrValue + '\"';\n            }\n            else {\n                attr += ' ' + attrKey + '=\"' + attrValue + '\"';\n            }\n        }\n        return attr;\n    };\n    /**\n     * clearAttributes method\n     *\n     * @param {Element} element - specifies the element\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.clearAttributes = function (element) {\n        for (var attr = element.attributes, c = attr.length - 1; c >= 0; c--) {\n            var key = attr[c];\n            element.removeAttribute(key.nodeName);\n        }\n    };\n    /**\n     * openTagString method\n     *\n     * @param {Element} element - specifies the element.\n     * @returns {string} - returns the string\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.openTagString = function (element) {\n        return '<' + element.tagName.toLowerCase() + this.attributes(element) + '>';\n    };\n    /**\n     * closeTagString method\n     *\n     * @param {Element} element - specifies the element\n     * @returns {string} - returns the string value\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.closeTagString = function (element) {\n        return '</' + element.tagName.toLowerCase() + '>';\n    };\n    /**\n     * createTagString method\n     *\n     * @param {string} tagName - specifies the tag name\n     * @param {Element} relativeElement - specifies the relative element\n     * @param {string} innerHTML - specifies the string value\n     * @returns {string} - returns the string value.\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.createTagString = function (tagName, relativeElement, innerHTML) {\n        return '<' + tagName.toLowerCase() + this.attributes(relativeElement) + '>' + innerHTML + '</' + tagName.toLowerCase() + '>';\n    };\n    /**\n     * isList method\n     *\n     * @param {Element} element - specifes the element.\n     * @returns {boolean} - returns the boolean value\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.isList = function (element) {\n        return !!element && ['UL', 'OL'].indexOf(element.tagName) >= 0;\n    };\n    /**\n     * isElement method\n     *\n     * @param {Element} element - specifes the element.\n     * @returns {boolean} - returns the boolean value\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.isElement = function (element) {\n        return element === this.parent;\n    };\n    /**\n     * isEditable method\n     *\n     * @param {Element} element - specifes the element.\n     * @returns {boolean} - returns the boolean value\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.isEditable = function (element) {\n        return ((!element.getAttribute || element.getAttribute('contenteditable') === 'true')\n            && ['STYLE', 'SCRIPT'].indexOf(element.tagName) < 0);\n    };\n    /**\n     * hasClass method\n     *\n     * @param {Element} element - specifes the element.\n     * @param {string} className - specifies the class name value\n     * @returns {boolean} - returns the boolean value\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.hasClass = function (element, className) {\n        return element && element.classList && element.classList.contains(className);\n    };\n    /**\n     * replaceWith method\n     *\n     * @param {Element} element - specifes the element.\n     * @param {string} value - specifies the string value\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.replaceWith = function (element, value) {\n        var parentNode = element.parentNode;\n        parentNode.insertBefore(this.parseHTMLFragment(value), element);\n        detach(element);\n    };\n    /**\n     * parseHTMLFragment method\n     *\n     * @param {string} value - specifies the string value\n     * @returns {Element} - returns the element\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.parseHTMLFragment = function (value) {\n        /* eslint-disable */\n        var temp = createElement('template');\n        temp.innerHTML = value;\n        if (temp.content instanceof DocumentFragment) {\n            return temp.content;\n        }\n        else {\n            return document.createRange().createContextualFragment(value);\n        }\n        /* eslint-enable */\n    };\n    /**\n     * wrap method\n     *\n     * @param {Element} element - specifies the element\n     * @param {Element} wrapper - specifies the element.\n     * @returns {Element} - returns the element\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.wrap = function (element, wrapper) {\n        element.parentNode.insertBefore(wrapper, element);\n        wrapper = element.previousSibling;\n        wrapper.appendChild(element);\n        return wrapper;\n    };\n    /**\n     * insertAfter method\n     *\n     * @param {Element} newNode - specifies the new node element\n     * @param {Element} referenceNode - specifies the referenece node\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.insertAfter = function (newNode, referenceNode) {\n        referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n    };\n    /**\n     * wrapInner method\n     *\n     * @param {Element} parent - specifies the parent element.\n     * @param {Element} wrapper - specifies the wrapper element.\n     * @returns {Element} - returns the element\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.wrapInner = function (parent, wrapper) {\n        parent.appendChild(wrapper);\n        wrapper = parent.querySelector('.e-rte-wrap-inner');\n        wrapper.classList.remove('e-rte-wrap-inner');\n        if (wrapper.classList.length === 0) {\n            wrapper.removeAttribute('class');\n        }\n        while (parent.firstChild !== wrapper) {\n            wrapper.appendChild(parent.firstChild);\n        }\n        return wrapper;\n    };\n    /**\n     * unWrap method\n     *\n     * @param {Element} element - specifies the element.\n     * @returns {Element} - returns the element.\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.unWrap = function (element) {\n        var parent = element.parentNode;\n        var unWrapNode = [];\n        while (element.firstChild) {\n            unWrapNode.push(element.firstChild);\n            parent.insertBefore(element.firstChild, element);\n        }\n        unWrapNode = unWrapNode.length > 0 ? unWrapNode : [element.parentNode];\n        parent.removeChild(element);\n        return unWrapNode;\n    };\n    /**\n     * getSelectedNode method\n     *\n     * @param {Element} element - specifies the element\n     * @param {number} index - specifies the index value.\n     * @returns {Element} - returns the element\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.getSelectedNode = function (element, index) {\n        if (element.nodeType === Node.ELEMENT_NODE && element.childNodes.length > 0 &&\n            element.childNodes[index - 1] && element.childNodes[index - 1].nodeType === Node.ELEMENT_NODE &&\n            (element.childNodes[index - 1].classList.contains(markerClassName.startSelection) ||\n                element.childNodes[index - 1].classList.contains(markerClassName.endSelection))) {\n            element = element.childNodes[index - 1];\n        }\n        else if (element.nodeType === Node.ELEMENT_NODE && element.childNodes.length > 0 && element.childNodes[index]) {\n            element = element.childNodes[index];\n        }\n        if (element.nodeType === Node.TEXT_NODE) {\n            element = element.parentNode;\n        }\n        return element;\n    };\n    /**\n     * nodeFinds method\n     *\n     * @param {Element} element - specifies the element.\n     * @param {Element[]} elements - specifies the array of elements\n     * @returns {Element[]} - returnts the array elements\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.nodeFinds = function (element, elements) {\n        var existNodes = [];\n        for (var i = 0; i < elements.length; i++) {\n            if (element.contains(elements[i]) && element !== elements[i]) {\n                existNodes.push(elements[i]);\n            }\n        }\n        return existNodes;\n    };\n    /**\n     * isEditorArea method\n     *\n     * @returns {boolean} - returns the boolean value\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.isEditorArea = function () {\n        var range = this.getRangePoint(0);\n        var element;\n        for (element = range.commonAncestorContainer; element && !this.isElement(element); null) {\n            element = element.parentNode;\n        }\n        return !!this.isElement(element);\n    };\n    /**\n     * getRangePoint method\n     *\n     * @param {number} point - specifies the number value.\n     * @returns {Range} - returns the range.\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.getRangePoint = function (point) {\n        var selection = this.getSelection();\n        var ranges = [];\n        if (selection && selection.getRangeAt && selection.rangeCount) {\n            ranges = [];\n            for (var f = 0; f < selection.rangeCount; f++) {\n                ranges.push(selection.getRangeAt(f));\n            }\n        }\n        else {\n            ranges = [this.currentDocument.createRange()];\n        }\n        return 'undefined' !== typeof point ? ranges[point] : ranges;\n    };\n    DOMNode.prototype.getSelection = function () {\n        return this.nodeSelection.get(this.currentDocument);\n    };\n    /**\n     * getPreviousNode method\n     *\n     * @param {Element} element - specifies the element\n     * @returns {Element} - returns the element\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.getPreviousNode = function (element) {\n        element = element.previousElementSibling;\n        for (; element && element.textContent === '\\n'; null) {\n            element = element.previousElementSibling;\n        }\n        return element;\n    };\n    /**\n     * encode method\n     *\n     * @param {string} value - specifies the string value\n     * @returns {string} - specifies the string value\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.encode = function (value) {\n        var divNode = document.createElement('div');\n        divNode.innerText = value;\n        // eslint-disable-next-line\n        return divNode.innerHTML.replace(/<br\\s*[\\/]?>/gi, '\\n');\n    };\n    /**\n     * saveMarker method\n     *\n     * @param {NodeSelection} save - specifies the node selection,\n     * @param {string} action - specifies the action  value.\n     * @returns {NodeSelection} - returns the value\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.saveMarker = function (save, action) {\n        var start = this.parent.querySelector('.' + markerClassName.startSelection);\n        var end = this.parent.querySelector('.' + markerClassName.endSelection);\n        var startTextNode;\n        var endTextNode;\n        if (start.textContent === '' && isNOU(end) && action !== 'tab') {\n            // To Do Apply Heading and Back space press in empty content.\n            // if (isNOU(action) && save.range.startContainer.nodeType === 1 &&\n            //     (save.range.startContainer as HTMLElement).querySelectorAll('audio,video,image').length === 0)  {\n            //     start.innerHTML = '<br>';\n            // }\n            if (start.childNodes.length === 1 && start.childNodes[0].nodeName === 'BR') {\n                start.innerHTML = '&#65279;&#65279;<br>';\n            }\n            else {\n                start.innerHTML = '&#65279;&#65279;';\n            }\n        }\n        if (this.hasClass(start, markerClassName.startSelection) && start.classList.length > 1) {\n            var replace = this.createTagString(CONSTANT.DEFAULT_TAG, start, this.encode(start.textContent));\n            this.replaceWith(start, replace);\n            start = this.parent.querySelector('.' + markerClassName.startSelection);\n            start.classList.remove(markerClassName.startSelection);\n            startTextNode = start.childNodes[0];\n        }\n        else {\n            startTextNode = this.unWrap(start)[0];\n        }\n        if (this.hasClass(end, markerClassName.endSelection) && end.classList.length > 1) {\n            var replace = this.createTagString(CONSTANT.DEFAULT_TAG, end, this.encode(end.textContent));\n            this.replaceWith(end, replace);\n            end = this.parent.querySelector('.' + markerClassName.endSelection);\n            end.classList.remove(markerClassName.endSelection);\n            endTextNode = end.childNodes[0];\n        }\n        else {\n            endTextNode = end ? this.unWrap(end)[0] : startTextNode;\n        }\n        save.startContainer = save.getNodeArray(startTextNode, true);\n        save.endContainer = save.getNodeArray(endTextNode, false);\n        return save;\n    };\n    DOMNode.prototype.marker = function (className, textContent) {\n        return '<span class=\"' + className + '\">' + textContent + '</span>';\n    };\n    /**\n     * setMarker method\n     *\n     * @param {NodeSelection} save - specifies the node selection.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.setMarker = function (save) {\n        var range = save.range;\n        var startChildNodes = range.startContainer.childNodes;\n        var isTableStart = startChildNodes.length > 1 && startChildNodes[0].nodeName === 'TABLE';\n        var start = ((isTableStart ? getLastTextNode(startChildNodes[range.startOffset + 1]) :\n            startChildNodes[(range.startOffset > 0) ? (range.startOffset - 1) : range.startOffset]) || range.startContainer);\n        var end = (range.endContainer.childNodes[(range.endOffset > 0) ? (range.endOffset - 1) : range.endOffset]\n            || range.endContainer);\n        if ((start.nodeType === Node.ELEMENT_NODE && end.nodeType === Node.ELEMENT_NODE) && (start.contains(end) || end.contains(start))) {\n            var existNode = start.contains(end) ? start : end;\n            var isElement = existNode.nodeType !== Node.TEXT_NODE;\n            if (isElement) {\n                var nodes = [];\n                var textNodes = [];\n                for (var node = existNode; existNode.contains(node); null) {\n                    if (nodes.indexOf(node) < 0 && node.childNodes && node.childNodes.length) {\n                        nodes.push(node);\n                        node = node.childNodes[0];\n                    }\n                    else if (node.nextSibling) {\n                        node = node.nextSibling;\n                    }\n                    else if (node.parentNode) {\n                        node = node.parentNode;\n                        nodes.push(node);\n                    }\n                    if (textNodes.indexOf(node) < 0 && (node.nodeType === Node.TEXT_NODE ||\n                        (CONSTANT.IGNORE_BLOCK_TAGS.indexOf(node.parentNode.tagName.toLocaleLowerCase()) >= 0\n                            && (node.tagName === 'BR' || node.tagName === 'IMG')))) {\n                        textNodes.push(node);\n                    }\n                }\n                if (textNodes.length) {\n                    start = start.contains(end) ? textNodes[0] : start;\n                    end = textNodes[textNodes.length - 1];\n                }\n            }\n        }\n        if (start !== end) {\n            if (start.nodeType !== Node.TEXT_NODE && ((start.tagName === 'BR' &&\n                CONSTANT.IGNORE_BLOCK_TAGS.indexOf(start.parentNode.tagName.toLocaleLowerCase()) >= 0) ||\n                start.tagName === 'IMG')) {\n                this.replaceWith(start, this.marker(markerClassName.startSelection, this.encode(start.textContent)));\n                var markerStart = range.startContainer.querySelector('.' + markerClassName.startSelection);\n                markerStart.appendChild(start);\n            }\n            else {\n                if (start.nodeType !== 3 && start.nodeName !== '#text' && start.nodeName !== 'BR') {\n                    var marker = this.marker(markerClassName.startSelection, '');\n                    append([this.parseHTMLFragment(marker)], start);\n                }\n                else {\n                    this.replaceWith(start, this.marker(markerClassName.startSelection, this.encode(start.textContent)));\n                }\n            }\n            if (end.nodeType !== Node.TEXT_NODE && end.tagName === 'BR' &&\n                CONSTANT.IGNORE_BLOCK_TAGS.indexOf(end.parentNode.tagName.toLocaleLowerCase()) >= 0) {\n                this.replaceWith(end, this.marker(markerClassName.endSelection, this.encode(end.textContent)));\n                var markerEnd = range.endContainer.querySelector('.' + markerClassName.endSelection);\n                markerEnd.appendChild(end);\n            }\n            else {\n                this.ensureSelfClosingTag(end, markerClassName.endSelection, range);\n            }\n        }\n        else {\n            this.ensureSelfClosingTag(start, markerClassName.startSelection, range);\n        }\n    };\n    /**\n     * ensureSelfClosingTag method\n     *\n     * @param {Element} start - specifies the element.\n     * @param {string} className - specifes the class name string value\n     * @param {Range} range - specifies the range value\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.ensureSelfClosingTag = function (start, className, range) {\n        var isTable = false;\n        if (start.nodeType === 3) {\n            this.replaceWith(start, this.marker(className, this.encode(start.textContent)));\n        }\n        else if (start.tagName === 'BR') {\n            this.replaceWith(start, this.marker(className, this.encode(start.textContent)));\n            var markerStart = range.startContainer.querySelector('.' + className);\n            markerStart.appendChild(start);\n        }\n        else {\n            if (start.tagName === 'IMG') {\n                var parNode = document.createElement('p');\n                start.parentElement.insertBefore(parNode, start);\n                parNode.appendChild(start);\n                start = parNode.children[0];\n            }\n            if (start.tagName === 'TABLE') {\n                isTable = true;\n                if (start.textContent === '') {\n                    var tdNode = start.querySelectorAll('td');\n                    start = tdNode[tdNode.length - 1];\n                    start = !isNOU(start.childNodes[0]) ? start.childNodes[0] : start;\n                }\n                else {\n                    var lastNode = start.lastChild;\n                    while (lastNode.nodeType !== 3 && lastNode.nodeName !== '#text' &&\n                        lastNode.nodeName !== 'BR') {\n                        lastNode = lastNode.lastChild;\n                    }\n                    start = lastNode;\n                }\n            }\n            for (var i = 0; i < selfClosingTags.length; i++) {\n                start = (start.tagName === selfClosingTags[i] && !isTable) ? start.parentNode : start;\n            }\n            if (start.nodeType === 3 && start.nodeName === '#text') {\n                this.replaceWith(start, this.marker(className, this.encode(start.textContent)));\n            }\n            else if (start.nodeName === 'BR') {\n                this.replaceWith(start, this.marker(markerClassName.endSelection, this.encode(start.textContent)));\n                var markerEnd = range.endContainer.querySelector('.' + markerClassName.endSelection);\n                markerEnd.appendChild(start);\n            }\n            else {\n                var marker = this.marker(className, '');\n                append([this.parseHTMLFragment(marker)], start);\n            }\n        }\n    };\n    /**\n     * createTempNode method\n     *\n     * @param {Element} element - specifies the element.\n     * @returns {Element} - returns the element\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.createTempNode = function (element) {\n        var textContent = element.textContent;\n        if (element.tagName === 'BR') {\n            var wrapper = '<' + CONSTANT.DEFAULT_TAG + '></' + CONSTANT.DEFAULT_TAG + '>';\n            var node = element.parentNode;\n            if (CONSTANT.IGNORE_BLOCK_TAGS.indexOf(node.tagName.toLocaleLowerCase()) >= 0) {\n                element = this.wrap(element, this.parseHTMLFragment(wrapper));\n            }\n        }\n        else if (((element.nodeType !== Node.TEXT_NODE &&\n            (element.classList.contains(markerClassName.startSelection) ||\n                element.classList.contains(markerClassName.endSelection))) ||\n            textContent.replace(/\\n/g, '').replace(/(^ *)|( *$)/g, '').length > 0 ||\n            textContent.length && textContent.indexOf('\\n') < 0)) {\n            var wrapper = '<' + CONSTANT.DEFAULT_TAG + '></' + CONSTANT.DEFAULT_TAG + '>';\n            var target = element;\n            element = this.wrap(element, this.parseHTMLFragment(wrapper));\n            var ignoreBr = target.nodeType === Node.ELEMENT_NODE && target.firstChild && target.firstChild.nodeName === 'BR'\n                && (target.classList.contains(markerClassName.startSelection) ||\n                    target.classList.contains(markerClassName.endSelection));\n            if (!ignoreBr && element.nextElementSibling && element.nextElementSibling.tagName === 'BR') {\n                element.appendChild(element.nextElementSibling);\n            }\n        }\n        return element;\n    };\n    /**\n     * getImageTagInSelection method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.getImageTagInSelection = function () {\n        var selection = this.getSelection();\n        if (this.isEditorArea() && selection.rangeCount) {\n            return selection.focusNode.querySelectorAll('img');\n        }\n        return null;\n    };\n    /**\n     * blockNodes method\n     *\n     * @returns {Node[]} - returns the node array values\n     * @hidden\n     * @deprecated\n     */\n    DOMNode.prototype.blockNodes = function () {\n        var collectionNodes = [];\n        var selection = this.getSelection();\n        if (this.isEditorArea() && selection.rangeCount) {\n            var ranges = this.getRangePoint();\n            for (var j = 0; j < ranges.length; j++) {\n                var parentNode = void 0;\n                var range = ranges[j];\n                var startNode = this.getSelectedNode(range.startContainer, range.startOffset);\n                var endNode = this.getSelectedNode(range.endContainer, range.endOffset);\n                if (this.isBlockNode(startNode) && collectionNodes.indexOf(startNode) < 0) {\n                    collectionNodes.push(startNode);\n                }\n                parentNode = this.blockParentNode(startNode);\n                if (parentNode && collectionNodes.indexOf(parentNode) < 0) {\n                    if (CONSTANT.IGNORE_BLOCK_TAGS.indexOf(parentNode.tagName.toLocaleLowerCase()) >= 0 && (startNode.tagName === 'BR' ||\n                        startNode.nodeType === Node.TEXT_NODE ||\n                        startNode.classList.contains(markerClassName.startSelection) ||\n                        startNode.classList.contains(markerClassName.endSelection))) {\n                        var tempNode = startNode.previousSibling &&\n                            startNode.previousSibling.nodeType === Node.TEXT_NODE ?\n                            startNode.previousSibling : startNode;\n                        if (!startNode.nextSibling && !startNode.previousSibling && startNode.tagName === 'BR') {\n                            collectionNodes.push(tempNode);\n                        }\n                        else {\n                            collectionNodes.push(this.createTempNode(tempNode));\n                        }\n                    }\n                    else {\n                        collectionNodes.push(parentNode);\n                    }\n                }\n                var nodes = [];\n                for (var node = startNode; node !== endNode && node !== this.parent; null) {\n                    if (nodes.indexOf(node) < 0 && node.childNodes && node.childNodes.length) {\n                        nodes.push(node);\n                        node = node.childNodes[0];\n                    }\n                    else if (node && node.nodeType !== 8 && (node.tagName === 'BR' || (node.nodeType === Node.TEXT_NODE &&\n                        node.textContent.trim() !== '') || (node.nodeType !== Node.TEXT_NODE &&\n                        (node.classList.contains(markerClassName.startSelection) ||\n                            node.classList.contains(markerClassName.endSelection)))) &&\n                        CONSTANT.IGNORE_BLOCK_TAGS.indexOf(node.parentNode.tagName.toLocaleLowerCase()) >= 0) {\n                        node = this.createTempNode(node);\n                    }\n                    else if (node.nextSibling && node.nextSibling.nodeType !== 8 &&\n                        (node.nextSibling.tagName === 'BR' ||\n                            node.nextSibling.nodeType === Node.TEXT_NODE ||\n                            node.nextSibling.classList.contains(markerClassName.startSelection) ||\n                            node.nextSibling.classList.contains(markerClassName.endSelection)) &&\n                        CONSTANT.IGNORE_BLOCK_TAGS.indexOf(node.nextSibling.parentNode.tagName.toLocaleLowerCase()) >= 0) {\n                        node = this.createTempNode(node.nextSibling);\n                    }\n                    else if (node.nextSibling) {\n                        node = node.nextSibling;\n                    }\n                    else if (node.parentNode) {\n                        node = node.parentNode;\n                        nodes.push(node);\n                    }\n                    if (collectionNodes.indexOf(node) < 0 && node.nodeType === Node.ELEMENT_NODE &&\n                        CONSTANT.IGNORE_BLOCK_TAGS.indexOf(node.parentNode.tagName.toLocaleLowerCase()) >= 0 &&\n                        (node.classList.contains(markerClassName.startSelection) ||\n                            node.classList.contains(markerClassName.endSelection))) {\n                        collectionNodes.push(this.createTempNode(node));\n                    }\n                    if (this.isBlockNode(node) && this.ignoreTableTag(node) && nodes.indexOf(node) < 0 &&\n                        collectionNodes.indexOf(node) < 0 && (node !== endNode || range.endOffset > 0)) {\n                        collectionNodes.push(node);\n                    }\n                    if (node.nodeName === 'IMG' && node.parentElement.contentEditable === 'true') {\n                        collectionNodes.push(node);\n                    }\n                }\n                parentNode = this.blockParentNode(endNode);\n                if (parentNode && this.ignoreTableTag(parentNode) && collectionNodes.indexOf(parentNode) < 0 &&\n                    (!isNOU(parentNode.previousElementSibling) && parentNode.previousElementSibling.tagName !== 'IMG')) {\n                    collectionNodes.push(parentNode);\n                }\n            }\n        }\n        for (var i = collectionNodes.length - 1; i > 0; i--) {\n            var nodes = this.nodeFinds(collectionNodes[i], collectionNodes);\n            if (nodes.length) {\n                var listNodes = collectionNodes[i].querySelectorAll('ul, ol');\n                if (collectionNodes[i].tagName === 'LI' && listNodes.length > 0) {\n                    continue;\n                }\n                else {\n                    collectionNodes.splice(i, 1);\n                }\n            }\n        }\n        return collectionNodes;\n    };\n    DOMNode.prototype.ignoreTableTag = function (element) {\n        return !(CONSTANT.TABLE_BLOCK_TAGS.indexOf(element.tagName.toLocaleLowerCase()) >= 0);\n    };\n    return DOMNode;\n}());\nexport { DOMNode };\n","import * as CONSTANT from './../base/constant';\nimport { createElement, detach, prepend, append, attributes, Browser } from '@syncfusion/ej2-base';\nimport { markerClassName } from './dom-node';\nimport * as EVENTS from './../../common/constant';\nimport { setStyleAttribute } from '@syncfusion/ej2-base';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\nimport { isNullOrUndefined, isNullOrUndefined as isNOU, closest } from '@syncfusion/ej2-base';\n/**\n * Lists internal component\n *\n * @hidden\n * @deprecated\n */\nvar Lists = /** @class */ (function () {\n    /**\n     * Constructor for creating the Lists plugin\n     *\n     * @param {EditorManager} parent - specifies the parent element\n     * @hidden\n     * @deprecated\n     */\n    function Lists(parent) {\n        this.parent = parent;\n        this.domNode = this.parent.domNode;\n        this.addEventListener();\n    }\n    Lists.prototype.addEventListener = function () {\n        this.parent.observer.on(EVENTS.LIST_TYPE, this.applyListsHandler, this);\n        this.parent.observer.on(EVENTS.KEY_UP_HANDLER, this.onKeyUp, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDownHandler, this);\n        this.parent.observer.on(EVENTS.SPACE_ACTION, this.spaceKeyAction, this);\n    };\n    Lists.prototype.testList = function (elem) {\n        var olListRegex = [/^[\\d]+[.]+$/,\n            /^(?=[MDCLXVI])M*(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})[.]$/gi,\n            /^[a-zA-Z][.]+$/];\n        var elementStart = !isNullOrUndefined(elem) ? elem.innerText.trim().split('.')[0] + '.' : null;\n        if (!isNullOrUndefined(elementStart)) {\n            for (var i = 0; i < olListRegex.length; i++) {\n                if (olListRegex[i].test(elementStart)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    Lists.prototype.testCurrentList = function (range) {\n        var olListStartRegex = [/^[1]+[.]+$/, /^[i]+[.]+$/, /^[a]+[.]+$/];\n        if (!isNullOrUndefined(range.startContainer.textContent.slice(0, range.startOffset))) {\n            var currentContent = range.startContainer.textContent.replace(/\\u200B/g, '').slice(0, range.startOffset).trim();\n            for (var i = 0; i < olListStartRegex.length; i++) {\n                if (olListStartRegex[i].test(currentContent) && currentContent.length === 2) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    Lists.prototype.spaceList = function (e) {\n        var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        this.saveSelection = this.parent.nodeSelection.save(range, this.parent.currentDocument);\n        var startNode = this.parent.domNode.getSelectedNode(range.startContainer, range.startOffset);\n        // eslint-disable-next-line\n        var endNode = this.parent.domNode.getSelectedNode(range.endContainer, range.endOffset);\n        var preElement = startNode.previousElementSibling;\n        var nextElement = startNode.nextElementSibling;\n        var preElemULStart = !isNullOrUndefined(preElement) ?\n            preElement.innerText.trim().substring(0, 1) : null;\n        var nextElemULStart = !isNullOrUndefined(nextElement) ?\n            nextElement.innerText.trim().substring(0, 1) : null;\n        var startElementOLTest = this.testCurrentList(range);\n        var preElementOLTest = this.testList(preElement);\n        var nextElementOLTest = this.testList(nextElement);\n        if (!preElementOLTest && !nextElementOLTest && preElemULStart !== '*' && nextElemULStart !== '*') {\n            if (startElementOLTest) {\n                range.startContainer.textContent = range.startContainer.textContent.slice(range.startOffset, range.startContainer.textContent.length);\n                this.applyListsHandler({ subCommand: 'OL', callBack: e.callBack });\n                e.event.preventDefault();\n            }\n            else if (range.startContainer.textContent.replace(/\\u200B/g, '').slice(0, range.startOffset).trim() === '*' ||\n                range.startContainer.textContent.replace(/\\u200B/g, '').slice(0, range.startOffset).trim() === '-') {\n                range.startContainer.textContent = range.startContainer.textContent.slice(range.startOffset, range.startContainer.textContent.length);\n                this.applyListsHandler({ subCommand: 'UL', callBack: e.callBack });\n                e.event.preventDefault();\n            }\n        }\n    };\n    Lists.prototype.enterList = function (e) {\n        var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        var startNode = range.startContainer.nodeName === 'LI' ? range.startContainer :\n            range.startContainer.parentElement.closest('LI');\n        var endNode = range.endContainer.nodeName === 'LI' ? range.endContainer :\n            range.endContainer.parentElement.closest('LI');\n        // Checks for Image, Audio , Video Element inside List Element\n        var hasMediaElem = false;\n        if (!isNOU(startNode)) {\n            var videoElemList = startNode.querySelectorAll('.e-video-clickelem');\n            var embedVideoElem = videoElemList.length > 0 && videoElemList[0].childNodes[0].nodeName === 'IFRAME';\n            hasMediaElem = startNode.querySelectorAll('IMG').length > 0 || startNode.querySelectorAll('AUDIO').length > 0 || startNode.querySelectorAll('VIDEO').length > 0 || embedVideoElem;\n        }\n        if (!isNOU(startNode) && !isNOU(endNode) && startNode === endNode && startNode.tagName === 'LI' &&\n            startNode.textContent.trim() === '' && !hasMediaElem) {\n            if (startNode.innerHTML.indexOf('&nbsp;') >= 0) {\n                return;\n            }\n            if (startNode.textContent.charCodeAt(0) === 65279) {\n                startNode.textContent = '';\n            }\n            var startNodeParent = startNode.parentElement;\n            if (isNOU(startNodeParent.parentElement.closest('UL')) && isNOU(startNodeParent.parentElement.closest('OL'))) {\n                if (!isNOU(startNode.nextElementSibling)) {\n                    var nearBlockNode = this.parent.domNode.blockParentNode(startNode);\n                    this.parent.nodeCutter.GetSpliceNode(range, nearBlockNode);\n                }\n                var insertTag = void 0;\n                if (e.enterAction === 'DIV') {\n                    insertTag = createElement('div');\n                    insertTag.innerHTML = '<br>';\n                }\n                else if (e.enterAction === 'P') {\n                    insertTag = createElement('p');\n                    insertTag.innerHTML = '<br>';\n                }\n                else {\n                    insertTag = createElement('br');\n                }\n                this.parent.domNode.insertAfter(insertTag, startNodeParent);\n                e.event.preventDefault();\n                this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument, insertTag, 0);\n                if (startNodeParent.textContent === '' && (startNodeParent.querySelectorAll('audio,video').length === 0)) {\n                    detach(startNodeParent);\n                }\n                else {\n                    detach(startNode);\n                }\n            }\n        }\n    };\n    Lists.prototype.backspaceList = function (e) {\n        var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        var startNode = this.parent.domNode.getSelectedNode(range.startContainer, range.startOffset);\n        var endNode = this.parent.domNode.getSelectedNode(range.endContainer, range.endOffset);\n        startNode = startNode.nodeName === 'BR' ? startNode.parentElement : startNode;\n        endNode = endNode.nodeName === 'BR' ? endNode.parentElement : endNode;\n        if (startNode === endNode && !isNullOrUndefined(closest(startNode, 'li')) &&\n            ((startNode.textContent.trim() === '' && startNode.textContent.charCodeAt(0) === 65279) ||\n                (startNode.textContent.length === 1 && startNode.textContent.charCodeAt(0) === 8203))) {\n            startNode.textContent = '';\n        }\n        if (startNode === endNode && startNode.tagName === 'LI' && startNode.textContent.length === 0 &&\n            isNOU(startNode.previousElementSibling)) {\n            startNode.removeAttribute('style');\n        }\n        if (startNode === endNode && startNode.textContent === '') {\n            if (startNode.parentElement.tagName === 'LI' && endNode.parentElement.tagName === 'LI') {\n                detach(startNode);\n            }\n            else if (startNode.closest('ul') || startNode.closest('ol')) {\n                var parentList = !isNOU(startNode.closest('ul')) ? startNode.closest('ul') : startNode.closest('ol');\n                if (parentList.firstElementChild === startNode && !isNOU(parentList.children[1]) &&\n                    (parentList.children[1].tagName === 'OL' || parentList.children[1].tagName === 'UL')) {\n                    if (parentList.tagName === parentList.children[1].tagName) {\n                        while (parentList.children[1].lastChild) {\n                            this.parent.domNode.insertAfter(parentList.children[1].lastChild, parentList.children[1]);\n                        }\n                        detach(parentList.children[1]);\n                    }\n                    else {\n                        parentList.parentElement.insertBefore(parentList.children[1], parentList);\n                    }\n                }\n            }\n        }\n        else if (!isNOU(startNode.firstChild) && startNode.firstChild.nodeName === 'BR' &&\n            (!isNullOrUndefined(startNode.childNodes[1]) && (startNode.childNodes[1].nodeName === 'UL' ||\n                startNode.childNodes[1].nodeName === 'OL'))) {\n            var parentList = !isNOU(startNode.closest('ul')) ? startNode.closest('ul') : startNode.closest('ol');\n            if (parentList.tagName === startNode.childNodes[1].nodeName) {\n                while (startNode.childNodes[1].lastChild) {\n                    this.parent.domNode.insertAfter(startNode.children[1].lastChild, startNode);\n                }\n                detach(startNode.childNodes[1]);\n            }\n            else {\n                parentList.parentElement.insertBefore(startNode.children[1], parentList);\n            }\n        }\n        this.removeList(range, e);\n        this.firstListBackSpace(range, e);\n    };\n    Lists.prototype.removeList = function (range, e) {\n        var startNode = this.parent.domNode.getSelectedNode(range.startContainer, range.startOffset);\n        var endNode = this.parent.domNode.getSelectedNode(range.endContainer, range.endOffset);\n        startNode = startNode.nodeName === 'BR' ? startNode.parentElement : startNode;\n        endNode = endNode.nodeName === 'BR' ? endNode.parentElement : endNode;\n        startNode = startNode.nodeName !== 'LI' && !isNOU(startNode.closest('LI')) ? startNode.closest('LI') : startNode;\n        endNode = endNode.nodeName !== 'LI' && !isNOU(endNode.closest('LI')) ? endNode.closest('LI') : endNode;\n        if (((range.commonAncestorContainer.nodeName === 'OL' || range.commonAncestorContainer.nodeName === 'UL' || range.commonAncestorContainer.nodeName === 'LI') &&\n            isNOU(endNode.nextElementSibling) && endNode.textContent.length === range.endOffset &&\n            isNOU(startNode.previousElementSibling) && range.startOffset === 0) ||\n            (Browser.userAgent.indexOf('Firefox') !== -1 && range.startContainer === range.endContainer && range.startContainer === this.parent.editableElement &&\n                range.startOffset === 0 && range.endOffset === 1)) {\n            if (Browser.userAgent.indexOf('Firefox') !== -1) {\n                detach(range.commonAncestorContainer.childNodes[0]);\n            }\n            else if (range.commonAncestorContainer.nodeName === 'LI') {\n                detach(range.commonAncestorContainer.parentElement);\n            }\n            else {\n                detach(range.commonAncestorContainer);\n            }\n            e.event.preventDefault();\n        }\n    };\n    Lists.prototype.onKeyUp = function () {\n        if (!isNOU(this.commonLIParent) && !isNOU(this.commonLIParent.querySelector('.removeList'))) {\n            var currentLIElem = this.commonLIParent.querySelector('.removeList');\n            while (!isNOU(currentLIElem.firstChild)) {\n                this.parent.domNode.insertAfter(currentLIElem.firstChild, currentLIElem);\n            }\n            detach(currentLIElem);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Lists.prototype.firstListBackSpace = function (range, _e) {\n        var startNode = this.parent.domNode.getSelectedNode(range.startContainer, range.startOffset);\n        if (!isNOU(startNode.closest('OL'))) {\n            this.commonLIParent = startNode.closest('OL');\n        }\n        else if (!isNOU(startNode.closest('UL'))) {\n            this.commonLIParent = startNode.closest('UL');\n        }\n        if (startNode.nodeName === 'LI' && range.startOffset === 0 && range.endOffset === 0 &&\n            isNOU(startNode.previousSibling) && !isNOU(this.commonLIParent) && isNOU(this.commonLIParent.previousSibling) &&\n            (isNOU(this.commonLIParent.parentElement.closest('OL')) && isNOU(this.commonLIParent.parentElement.closest('UL')) &&\n                isNOU(this.commonLIParent.parentElement.closest('LI')))) {\n            var currentElem = createElement('P');\n            currentElem.innerHTML = '&#8203;';\n            startNode.classList.add('removeList');\n            this.commonLIParent.parentElement.insertBefore(currentElem, this.commonLIParent);\n        }\n    };\n    Lists.prototype.keyDownHandler = function (e) {\n        if (e.event.which === 13) {\n            this.enterList(e);\n        }\n        if (e.event.which === 32) {\n            this.spaceList(e);\n        }\n        if (e.event.which === 8) {\n            this.backspaceList(e);\n        }\n        if (e.event.which === 46 && e.event.action === 'delete') {\n            var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n            var commonAncestor = range.commonAncestorContainer;\n            var startEle = range.startContainer;\n            var endEle = range.endContainer;\n            var startNode = startEle.nodeType === 3 ? startEle.parentElement : startEle;\n            var endNode = endEle.nodeType === 3 ? endEle.parentElement : endEle;\n            if ((commonAncestor.nodeName === 'UL' || commonAncestor.nodeName === 'OL') && startNode !== endNode\n                && (!isNullOrUndefined(closest(startNode, 'ul')) || !isNullOrUndefined(closest(startNode, 'ol')))\n                && (!isNullOrUndefined(closest(endNode, 'ul')) || !isNullOrUndefined(closest(endNode, 'ol')))\n                && (commonAncestor.lastElementChild === closest(endNode, 'li')) && !range.collapsed) {\n                detach(commonAncestor);\n            }\n            this.removeList(range, e);\n        }\n        if (e.event.which === 9) {\n            var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n            if (!(e.event.action && e.event.action === 'indent')) {\n                this.saveSelection = this.parent.nodeSelection.save(range, this.parent.currentDocument);\n            }\n            var blockNodes = void 0;\n            var startOffset = range.startOffset;\n            var endOffset = range.endOffset;\n            var startNode = this.parent.domNode.getSelectedNode(range.startContainer, range.startOffset);\n            var endNode = this.parent.domNode.getSelectedNode(range.endContainer, range.endOffset);\n            if ((startNode === endNode && (startNode.nodeName === 'BR' || startNode.nodeName === '#text') &&\n                CONSTANT.IGNORE_BLOCK_TAGS.indexOf(startNode.parentNode.tagName.toLocaleLowerCase()) >= 0)) {\n                return;\n            }\n            else {\n                if (!(e.event.action && e.event.action === 'indent')) {\n                    this.domNode.setMarker(this.saveSelection);\n                }\n                blockNodes = this.domNode.blockNodes();\n            }\n            var nodes = [];\n            var isNested = true;\n            for (var i = 0; i < blockNodes.length; i++) {\n                if (blockNodes[i].parentNode.tagName === 'LI') {\n                    nodes.push(blockNodes[i].parentNode);\n                }\n                else if (blockNodes[i].tagName === 'LI' && blockNodes[i].childNodes[0].tagName !== 'P' &&\n                    (blockNodes[i].childNodes[0].tagName !== 'OL' &&\n                        blockNodes[i].childNodes[0].tagName !== 'UL')) {\n                    nodes.push(blockNodes[i]);\n                }\n            }\n            if (nodes.length > 1 || nodes.length && ((startOffset === 0 && endOffset === 0) || e.ignoreDefault)) {\n                e.event.preventDefault();\n                e.event.stopPropagation();\n                this.currentAction = this.getAction(nodes[0]);\n                if (e.event.shiftKey) {\n                    this.revertList(nodes, e);\n                    this.revertClean();\n                }\n                else {\n                    isNested = this.nestedList(nodes);\n                }\n                if (isNested) {\n                    this.cleanNode();\n                    this.parent.editableElement.focus();\n                }\n                if (!(e.event.action && e.event.action === 'indent')) {\n                    this.saveSelection = this.domNode.saveMarker(this.saveSelection);\n                    this.saveSelection.restore();\n                    if (e.callBack) {\n                        e.callBack({\n                            requestType: this.currentAction,\n                            editorMode: 'HTML',\n                            range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                            elements: this.parent.domNode.blockNodes(),\n                            event: e.event\n                        });\n                    }\n                }\n            }\n            else {\n                if (!(e.event.action && e.event.action === 'indent')) {\n                    if (e.event && e.event.shiftKey && e.event.key === 'Tab') {\n                        e.event.action = 'tab';\n                    }\n                    this.saveSelection = this.domNode.saveMarker(this.saveSelection, e.event.action);\n                    this.saveSelection.restore();\n                }\n            }\n        }\n        else {\n            switch (e.event.action) {\n                case 'ordered-list':\n                    this.applyListsHandler({ subCommand: 'OL', callBack: e.callBack });\n                    e.event.preventDefault();\n                    break;\n                case 'unordered-list':\n                    this.applyListsHandler({ subCommand: 'UL', callBack: e.callBack });\n                    e.event.preventDefault();\n                    break;\n            }\n        }\n    };\n    Lists.prototype.spaceKeyAction = function (e) {\n        if (e.event.which === 32) {\n            this.spaceList(e);\n        }\n    };\n    Lists.prototype.getAction = function (element) {\n        var parentNode = element.parentNode;\n        return (parentNode.nodeName === 'OL' ? 'OL' : 'UL');\n    };\n    Lists.prototype.revertClean = function () {\n        var collectionNodes = this.parent.editableElement.querySelectorAll('ul, ol');\n        for (var i = 0; i < collectionNodes.length; i++) {\n            var listNodes = collectionNodes[i].querySelectorAll('ul, ol');\n            if (listNodes.length > 0) {\n                for (var j = 0; j < listNodes.length; j++) {\n                    var prevSibling = listNodes[j].previousSibling;\n                    if (prevSibling && prevSibling.tagName === 'LI') {\n                        prevSibling.appendChild(listNodes[j]);\n                    }\n                }\n            }\n        }\n    };\n    Lists.prototype.noPreviousElement = function (elements) {\n        var firstNode;\n        var firstNodeOL;\n        var siblingListOL = elements.querySelectorAll('ol, ul');\n        var siblingListLI = elements\n            .querySelectorAll('li');\n        var siblingListLIFirst = this.domNode.contents(siblingListLI[0])[0];\n        if (siblingListLI.length > 0 && (siblingListLIFirst.nodeName === 'OL' || siblingListLIFirst.nodeName === 'UL')) {\n            firstNode = siblingListLI[0];\n        }\n        else {\n            firstNodeOL = siblingListOL[0];\n        }\n        if (firstNode) {\n            for (var h = this.domNode.contents(elements)[0]; h && !this.domNode.isList(h); null) {\n                var nextSibling = h.nextSibling;\n                prepend([h], firstNode);\n                setStyleAttribute(elements, { 'list-style-type': 'none' });\n                setStyleAttribute(firstNode, { 'list-style-type': '' });\n                h = nextSibling;\n            }\n        }\n        else if (firstNodeOL) {\n            var nestedElement = createElement('li');\n            prepend([nestedElement], firstNodeOL);\n            for (var h = this.domNode.contents(elements)[0]; h && !this.domNode.isList(h); null) {\n                var nextSibling = h.nextSibling;\n                nestedElement.appendChild(h);\n                h = nextSibling;\n            }\n            prepend([firstNodeOL], elements.parentNode);\n            detach(elements);\n            var nestedElementLI = createElement('li', { styles: 'list-style-type: none;' });\n            prepend([nestedElementLI], firstNodeOL.parentNode);\n            append([firstNodeOL], nestedElementLI);\n        }\n        else {\n            var nestedElementLI = createElement('li', { styles: 'list-style-type: none;' });\n            prepend([nestedElementLI], elements.parentNode);\n            var nestedElement = createElement(elements.parentNode.tagName);\n            prepend([nestedElement], nestedElementLI);\n            append([elements], nestedElement);\n        }\n    };\n    Lists.prototype.nestedList = function (elements) {\n        var isNested = false;\n        for (var i = 0; i < elements.length; i++) {\n            var prevSibling = this.domNode.getPreviousNode(elements[i]);\n            if (prevSibling) {\n                isNested = true;\n                var firstNode = void 0;\n                var firstNodeLI = void 0;\n                var siblingListOL = elements[i].querySelectorAll('ol, ul');\n                var siblingListLI = elements[i]\n                    .querySelectorAll('li');\n                var siblingListLIFirst = this.domNode.contents(siblingListLI[0])[0];\n                if (siblingListLI.length > 0 && (siblingListLIFirst.nodeName === 'OL' || siblingListLIFirst.nodeName === 'UL')) {\n                    firstNodeLI = siblingListLI[0];\n                }\n                else {\n                    firstNode = siblingListOL[0];\n                }\n                if (firstNode) {\n                    var nestedElement = createElement('li');\n                    prepend([nestedElement], firstNode);\n                    for (var h = this.domNode.contents(elements[i])[0]; h && !this.domNode.isList(h); null) {\n                        var nextSibling = h.nextSibling;\n                        nestedElement.appendChild(h);\n                        h = nextSibling;\n                    }\n                    append([firstNode], prevSibling);\n                    detach(elements[i]);\n                }\n                else if (firstNodeLI) {\n                    if (prevSibling.tagName === 'LI') {\n                        for (var h = this.domNode.contents(elements[i])[0]; h && !this.domNode.isList(h); null) {\n                            var nextSibling = h.nextSibling;\n                            prepend([h], firstNodeLI);\n                            setStyleAttribute(elements[i], { 'list-style-type': 'none' });\n                            setStyleAttribute(firstNodeLI, { 'list-style-type': '' });\n                            h = nextSibling;\n                        }\n                        append([firstNodeLI.parentNode], prevSibling);\n                        detach(elements[i]);\n                    }\n                }\n                else {\n                    if (prevSibling.tagName === 'LI') {\n                        var nestedElement = createElement(elements[i].parentNode.tagName);\n                        append([nestedElement], prevSibling);\n                        append([elements[i]], nestedElement);\n                    }\n                    else if (prevSibling.tagName === 'OL' || prevSibling.tagName === 'UL') {\n                        append([elements[i]], prevSibling);\n                    }\n                }\n            }\n            else {\n                var element = elements[i];\n                isNested = true;\n                this.noPreviousElement(element);\n            }\n        }\n        return isNested;\n    };\n    Lists.prototype.applyListsHandler = function (e) {\n        var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        if (Browser.userAgent.indexOf('Firefox') !== -1 && range.startContainer === range.endContainer && range.startContainer === this.parent.editableElement) {\n            var startChildNodes = range.startContainer.childNodes;\n            var startNode = ((startChildNodes[(range.startOffset > 0) ? (range.startOffset - 1) :\n                range.startOffset]) || range.startContainer);\n            var endNode = (range.endContainer.childNodes[(range.endOffset > 0) ? (range.endOffset - 1) :\n                range.endOffset] || range.endContainer);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var lastSelectionNode = endNode.lastChild.nodeName === 'BR' ? (isNOU(endNode.lastChild.previousSibling) ? endNode\n                : endNode.lastChild.previousSibling) : endNode.lastChild;\n            while (!isNOU(lastSelectionNode) && lastSelectionNode.nodeName !== '#text' && lastSelectionNode.nodeName !== 'IMG' &&\n                lastSelectionNode.nodeName !== 'BR' && lastSelectionNode.nodeName !== 'HR') {\n                lastSelectionNode = lastSelectionNode.lastChild;\n            }\n            this.parent.nodeSelection.setSelectionText(this.parent.currentDocument, startNode, lastSelectionNode, 0, lastSelectionNode.textContent.length);\n            range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        }\n        if (range.startContainer === range.endContainer && range.startContainer === this.parent.editableElement &&\n            range.startOffset === range.endOffset && range.startOffset === 0 &&\n            this.parent.editableElement.textContent.length === 0 && (this.parent.editableElement.childNodes[0].nodeName !== 'TABLE' &&\n            this.parent.editableElement.childNodes[0].nodeName !== 'IMG')) {\n            var focusNode = range.startContainer.childNodes[0];\n            this.parent.nodeSelection.setSelectionText(this.parent.currentDocument, focusNode, focusNode, 0, 0);\n            range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        }\n        this.saveSelection = this.parent.nodeSelection.save(range, this.parent.currentDocument);\n        this.currentAction = e.subCommand;\n        this.currentAction = e.subCommand = this.currentAction === 'NumberFormatList' ? 'OL' : this.currentAction === 'BulletFormatList' ? 'UL' : this.currentAction;\n        this.domNode.setMarker(this.saveSelection);\n        var listsNodes = this.domNode.blockNodes();\n        if (e.enterAction === 'BR') {\n            this.setSelectionBRConfig();\n            var allSelectedNode = this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument);\n            var selectedNodes = this.parent.nodeSelection.getSelectionNodes(allSelectedNode);\n            var currentFormatNodes = [];\n            if (selectedNodes.length === 0) {\n                selectedNodes.push(listsNodes[0]);\n            }\n            for (var i = 0; i < selectedNodes.length; i++) {\n                var currentNode = selectedNodes[i];\n                var previousCurrentNode = void 0;\n                while (!this.parent.domNode.isBlockNode(currentNode) && currentNode !== this.parent.editableElement) {\n                    previousCurrentNode = currentNode;\n                    currentNode = currentNode.parentElement;\n                }\n                if (this.parent.domNode.isBlockNode(currentNode) && currentNode === this.parent.editableElement) {\n                    currentFormatNodes.push(previousCurrentNode);\n                }\n            }\n            for (var i = 0; i < currentFormatNodes.length; i++) {\n                if (!this.parent.domNode.isBlockNode(currentFormatNodes[i])) {\n                    var currentNode = currentFormatNodes[i];\n                    var previousNode = currentNode;\n                    while (currentNode === this.parent.editableElement) {\n                        previousNode = currentNode;\n                        currentNode = currentNode.parentElement;\n                    }\n                    var tempElem = void 0;\n                    if (this.parent.domNode.isBlockNode(previousNode.parentElement) &&\n                        previousNode.parentElement === this.parent.editableElement) {\n                        tempElem = createElement('p');\n                        previousNode.parentElement.insertBefore(tempElem, previousNode);\n                        tempElem.appendChild(previousNode);\n                    }\n                    else {\n                        tempElem = previousNode;\n                    }\n                    var preNode = tempElem.previousSibling;\n                    while (!isNOU(preNode) && preNode.nodeName !== 'BR' &&\n                        !this.parent.domNode.isBlockNode(preNode)) {\n                        tempElem.firstChild.parentElement.insertBefore(preNode, tempElem.firstChild);\n                        preNode = tempElem.previousSibling;\n                    }\n                    if (!isNOU(preNode) && preNode.nodeName === 'BR') {\n                        detach(preNode);\n                    }\n                    var postNode = tempElem.nextSibling;\n                    while (!isNOU(postNode) && postNode.nodeName !== 'BR' &&\n                        !this.parent.domNode.isBlockNode(postNode)) {\n                        tempElem.appendChild(postNode);\n                        postNode = tempElem.nextSibling;\n                    }\n                    if (!isNOU(postNode) && postNode.nodeName === 'BR') {\n                        detach(postNode);\n                    }\n                }\n            }\n            this.setSelectionBRConfig();\n            listsNodes = this.parent.domNode.blockNodes();\n        }\n        for (var i = 0; i < listsNodes.length; i++) {\n            if (listsNodes[i].tagName === 'TABLE' && !range.collapsed) {\n                listsNodes.splice(i, 1);\n            }\n            if (listsNodes.length > 0 && listsNodes[i].tagName !== 'LI'\n                && 'LI' === listsNodes[i].parentNode.tagName) {\n                listsNodes[i] = listsNodes[i].parentNode;\n            }\n        }\n        this.applyLists(listsNodes, this.currentAction, e.selector, e.item, e);\n        if (e.callBack) {\n            e.callBack({\n                requestType: this.currentAction,\n                event: e.event,\n                editorMode: 'HTML',\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.domNode.blockNodes()\n            });\n        }\n    };\n    Lists.prototype.setSelectionBRConfig = function () {\n        var startElem = this.parent.editableElement.querySelector('.' + markerClassName.startSelection);\n        var endElem = this.parent.editableElement.querySelector('.' + markerClassName.endSelection);\n        if (isNOU(endElem)) {\n            this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument, startElem, 0);\n        }\n        else {\n            this.parent.nodeSelection.setSelectionText(this.parent.currentDocument, startElem, endElem, 0, 0);\n        }\n    };\n    Lists.prototype.applyLists = function (elements, type, selector, item, e) {\n        var isReverse = true;\n        if (this.isRevert(elements, type, item) && isNOU(item)) {\n            this.revertList(elements, e);\n            this.removeEmptyListElements();\n        }\n        else {\n            this.checkLists(elements, type, item);\n            for (var i = 0; i < elements.length; i++) {\n                if (!isNOU(item) && !isNOU(item.listStyle)) {\n                    if (item.listStyle === 'listImage') {\n                        setStyleAttribute(elements[i], { 'list-style-image': item.listImage });\n                    }\n                    else {\n                        setStyleAttribute(elements[i], { 'list-style-image': 'none' });\n                        setStyleAttribute(elements[i], { 'list-style-type': item.listStyle.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase() });\n                    }\n                }\n                if (elements[i].getAttribute('contenteditable') === 'true'\n                    && elements[i].childNodes.length === 1 && elements[i].childNodes[0].nodeName === 'TABLE') {\n                    var listEle = document.createElement(type);\n                    listEle.innerHTML = '<li><br/></li>';\n                    elements[i].appendChild(listEle);\n                }\n                else if ('LI' !== elements[i].tagName && isNOU(item)) {\n                    isReverse = false;\n                    var elemAtt = elements[i].tagName === 'IMG' ? '' : this.domNode.attributes(elements[i]);\n                    var openTag = '<' + type + '>';\n                    var closeTag = '</' + type + '>';\n                    var newTag = 'li' + elemAtt;\n                    var replaceHTML = (elements[i].tagName.toLowerCase() === CONSTANT.DEFAULT_TAG ?\n                        elements[i].innerHTML : elements[i].outerHTML);\n                    var innerHTML = this.domNode.createTagString(newTag, null, replaceHTML);\n                    var collectionString = openTag + innerHTML + closeTag;\n                    this.domNode.replaceWith(elements[i], collectionString);\n                }\n                else if (!isNOU(item) && 'LI' !== elements[i].tagName) {\n                    // eslint-disable-next-line\n                    isReverse = false;\n                    var elemAtt = elements[i].tagName === 'IMG' ? '' : this.domNode.attributes(elements[i]);\n                    var openTag = '<' + type + elemAtt + '>';\n                    var closeTag = '</' + type + '>';\n                    var newTag = 'li';\n                    var replaceHTML = (elements[i].tagName.toLowerCase() === CONSTANT.DEFAULT_TAG ?\n                        elements[i].innerHTML : elements[i].outerHTML);\n                    var innerHTML = this.domNode.createTagString(newTag, null, replaceHTML);\n                    var collectionString = openTag + innerHTML + closeTag;\n                    this.domNode.replaceWith(elements[i], collectionString);\n                }\n            }\n        }\n        this.cleanNode();\n        this.parent.editableElement.focus();\n        if (isIDevice()) {\n            setEditFrameFocus(this.parent.editableElement, selector);\n        }\n        this.saveSelection = this.domNode.saveMarker(this.saveSelection);\n        this.saveSelection.restore();\n    };\n    Lists.prototype.removeEmptyListElements = function () {\n        var listElem = this.parent.editableElement.querySelectorAll('ol, ul');\n        for (var i = 0; i < listElem.length; i++) {\n            if (listElem[i].textContent.trim() === '') {\n                detach(listElem[i]);\n            }\n        }\n    };\n    Lists.prototype.isRevert = function (nodes, tagName, item) {\n        var isRevert = true;\n        for (var i = 0; i < nodes.length; i++) {\n            if (nodes[i].tagName !== 'LI') {\n                return false;\n            }\n            if (nodes[i].parentNode.tagName !== tagName ||\n                isNOU(item) && nodes[i].parentNode.style.listStyleType !== '') {\n                isRevert = false;\n            }\n        }\n        return isRevert;\n    };\n    Lists.prototype.checkLists = function (nodes, tagName, item) {\n        var nodesTemp = [];\n        for (var i = 0; i < nodes.length; i++) {\n            var node = nodes[i].parentNode;\n            if (!isNOU(item) && 'LI' === nodes[i].tagName && !isNOU(item.listStyle)) {\n                if (item.listStyle === 'listImage') {\n                    setStyleAttribute(node, { 'list-style-image': item.listImage });\n                }\n                else {\n                    setStyleAttribute(node, { 'list-style-image': 'none' });\n                    setStyleAttribute(node, { 'list-style-type': item.listStyle.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase() });\n                }\n            }\n            if ((nodes[i].tagName === 'LI' && node.tagName !== tagName && nodesTemp.indexOf(node) < 0) ||\n                (nodes[i].tagName === 'LI' && node.tagName === tagName && nodesTemp.indexOf(node) < 0 && item !== null)) {\n                nodesTemp.push(node);\n            }\n            if (isNOU(item) && (node.tagName === tagName ||\n                ((node.tagName === 'UL' || node.tagName === 'OL') && node.hasAttribute('style')))) {\n                if (node.hasAttribute('style')) {\n                    node.removeAttribute('style');\n                }\n            }\n        }\n        for (var j = nodesTemp.length - 1; j >= 0; j--) {\n            var h = nodesTemp[j];\n            var replace = '<' + tagName.toLowerCase() + ' '\n                + this.domNode.attributes(h) + '>' + h.innerHTML + '</' + tagName.toLowerCase() + '>';\n            this.domNode.replaceWith(nodesTemp[j], replace);\n        }\n    };\n    Lists.prototype.cleanNode = function () {\n        var liParents = this.parent.editableElement.querySelectorAll('ol + ol, ul + ul');\n        for (var c = 0; c < liParents.length; c++) {\n            var node = liParents[c];\n            if (this.domNode.isList(node.previousElementSibling) &&\n                this.domNode.openTagString(node) === this.domNode.openTagString(node.previousElementSibling)) {\n                var contentNodes = this.domNode.contents(node);\n                for (var f = 0; f < contentNodes.length; f++) {\n                    node.previousElementSibling.appendChild(contentNodes[f]);\n                }\n                node.parentNode.removeChild(node);\n            }\n            else if (!isNOU(node.getAttribute('level'))) {\n                if (node.tagName === node.previousElementSibling.tagName) {\n                    node.previousElementSibling.lastChild.append(node);\n                }\n            }\n        }\n    };\n    Lists.prototype.findUnSelected = function (temp, elements) {\n        temp = temp.slice().reverse();\n        if (temp.length > 0) {\n            var rightIndent = [];\n            var indentElements = [];\n            var lastElement = elements[elements.length - 1];\n            var lastElementChild = [];\n            var childElements = [];\n            lastElementChild = (lastElement.childNodes);\n            for (var z = 0; z < lastElementChild.length; z++) {\n                if (lastElementChild[z].tagName === 'OL' || lastElementChild[z].tagName === 'UL') {\n                    var childLI = lastElementChild[z]\n                        .querySelectorAll('li');\n                    if (childLI.length > 0) {\n                        for (var y = 0; y < childLI.length; y++) {\n                            childElements.push(childLI[y]);\n                        }\n                    }\n                }\n            }\n            for (var i = 0; i < childElements.length; i++) {\n                var count = 0;\n                for (var j = 0; j < temp.length; j++) {\n                    if (!childElements[i].contains((temp[j]))) {\n                        count = count + 1;\n                    }\n                }\n                if (count === temp.length) {\n                    indentElements.push(childElements[i]);\n                }\n            }\n            if (indentElements.length > 0) {\n                for (var x = 0; x < indentElements.length; x++) {\n                    if (this.domNode.contents(indentElements[x])[0].nodeName !== 'OL' &&\n                        this.domNode.contents(indentElements[x])[0].nodeName !== 'UL') {\n                        rightIndent.push(indentElements[x]);\n                    }\n                }\n            }\n            if (rightIndent.length > 0) {\n                this.nestedList(rightIndent);\n            }\n        }\n    };\n    Lists.prototype.revertList = function (elements, e) {\n        var temp = [];\n        for (var i = elements.length - 1; i >= 0; i--) {\n            for (var j = i - 1; j >= 0; j--) {\n                if (elements[j].contains((elements[i])) || elements[j] === elements[i]) {\n                    temp.push(elements[i]);\n                    elements.splice(i, 1);\n                    break;\n                }\n            }\n        }\n        this.findUnSelected(temp, elements);\n        var viewNode = [];\n        for (var i = 0; i < elements.length; i++) {\n            var element = elements[i];\n            if (this.domNode.contents(element)[0].nodeType === 3 && this.domNode.contents(element)[0].textContent.trim().length === 0) {\n                detach(this.domNode.contents(element)[0]);\n            }\n            var parentNode = elements[i].parentNode;\n            var className = element.getAttribute('class');\n            if (temp.length === 0) {\n                var siblingList = elements[i].querySelectorAll('ul, ol');\n                var firstNode = siblingList[0];\n                if (firstNode) {\n                    var child = firstNode\n                        .querySelectorAll('li');\n                    if (child) {\n                        var nestedElement = createElement(firstNode.tagName);\n                        append([nestedElement], firstNode.parentNode);\n                        var nestedElementLI = createElement('li', { styles: 'list-style-type: none;' });\n                        append([nestedElementLI], nestedElement);\n                        append([firstNode], nestedElementLI);\n                    }\n                }\n            }\n            if (element.parentNode.insertBefore(this.closeTag(parentNode.tagName), element),\n                'LI' === parentNode.parentNode.tagName || 'OL' === parentNode.parentNode.tagName ||\n                    'UL' === parentNode.parentNode.tagName) {\n                element.parentNode.insertBefore(this.closeTag('LI'), element);\n            }\n            else {\n                var classAttr = '';\n                if (className) {\n                    // eslint-disable-next-line\n                    classAttr += ' class=\"' + className + '\"';\n                }\n                if (CONSTANT.DEFAULT_TAG && 0 === element.querySelectorAll(CONSTANT.BLOCK_TAGS.join(', ')).length) {\n                    var wrapperclass = isNullOrUndefined(className) ? ' class=\"e-rte-wrap-inner\"' :\n                        ' class=\"' + className + ' e-rte-wrap-inner\"';\n                    var wrapper = '<' + CONSTANT.DEFAULT_TAG + wrapperclass +\n                        this.domNode.attributes(parentNode) + '></' + CONSTANT.DEFAULT_TAG + '>';\n                    if (e.enterAction !== 'BR') {\n                        this.domNode.wrapInner(element, this.domNode.parseHTMLFragment(wrapper));\n                    }\n                }\n                else if (this.domNode.contents(element)[0].nodeType === 3) {\n                    var replace = this.domNode.createTagString(CONSTANT.DEFAULT_TAG, parentNode, this.parent.domNode.encode(this.domNode.contents(element)[0].textContent));\n                    this.domNode.replaceWith(this.domNode.contents(element)[0], replace);\n                }\n                else if (this.domNode.contents(element)[0].classList.contains(markerClassName.startSelection) ||\n                    this.domNode.contents(element)[0].classList.contains(markerClassName.endSelection)) {\n                    var replace = this.domNode.createTagString(CONSTANT.DEFAULT_TAG, parentNode, this.domNode.contents(element)[0].outerHTML);\n                    this.domNode.replaceWith(this.domNode.contents(element)[0], replace);\n                }\n                else {\n                    var childNode = element.firstChild;\n                    className = childNode.getAttribute('class');\n                    attributes(childNode, this.domNode.rawAttributes(parentNode));\n                    if (className && childNode.getAttribute('class')) {\n                        attributes(childNode, { 'class': className + ' ' + childNode.getAttribute('class') });\n                    }\n                }\n                append([this.openTag('LI')], element);\n                prepend([this.closeTag('LI')], element);\n            }\n            this.domNode.insertAfter(this.openTag(parentNode.tagName), element);\n            if (parentNode.parentNode.tagName === 'LI') {\n                parentNode = parentNode.parentNode.parentNode;\n            }\n            if (viewNode.indexOf(parentNode) < 0) {\n                viewNode.push(parentNode);\n            }\n        }\n        for (var i = 0; i < viewNode.length; i++) {\n            var node = viewNode[i];\n            var nodeInnerHtml = node.innerHTML;\n            var closeTag = /<span class=\"e-rte-list-close-([a-z]*)\"><\\/span>/g;\n            var openTag = /<span class=\"e-rte-list-open-([a-z]*)\"><\\/span>/g;\n            nodeInnerHtml = nodeInnerHtml.replace(closeTag, '</$1>');\n            nodeInnerHtml = nodeInnerHtml.replace(openTag, '<$1 ' + this.domNode.attributes(node) + '>');\n            this.domNode.replaceWith(node, this.domNode.openTagString(node) + nodeInnerHtml.trim() + this.domNode.closeTagString(node));\n        }\n        var emptyUl = this.parent.editableElement.querySelectorAll('ul:empty, ol:empty');\n        for (var i = 0; i < emptyUl.length; i++) {\n            detach(emptyUl[i]);\n        }\n        var emptyLi = this.parent.editableElement.querySelectorAll('li:empty');\n        for (var i = 0; i < emptyLi.length; i++) {\n            detach(emptyLi[i]);\n        }\n    };\n    Lists.prototype.openTag = function (type) {\n        return this.domNode.parseHTMLFragment('<span class=\"e-rte-list-open-' + type.toLowerCase() + '\"></span>');\n    };\n    Lists.prototype.closeTag = function (type) {\n        return this.domNode.parseHTMLFragment('<span class=\"e-rte-list-close-' + type.toLowerCase() + '\"></span>');\n    };\n    return Lists;\n}());\nexport { Lists };\n","/**\n * Node appending methods.\n *\n * @hidden\n */\nvar InsertMethods = /** @class */ (function () {\n    function InsertMethods() {\n    }\n    /**\n     * WrapBefore method\n     *\n     * @param {Text} textNode - specifies the text node\n     * @param {HTMLElement} parentNode - specifies the parent node\n     * @param {boolean} isAfter - specifies the boolean value\n     * @returns {Text} - returns the text value\n     * @hidden\n     * @deprecated\n     */\n    InsertMethods.WrapBefore = function (textNode, parentNode, isAfter) {\n        parentNode.innerText = textNode.textContent;\n        //eslint-disable-next-line\n        (!isAfter) ? this.AppendBefore(parentNode, textNode) : this.AppendBefore(parentNode, textNode, true);\n        if (textNode.parentNode) {\n            textNode.parentNode.removeChild(textNode);\n        }\n        return parentNode.childNodes[0];\n    };\n    /**\n     * Wrap method\n     *\n     * @param {HTMLElement} childNode - specifies the child node\n     * @param {HTMLElement} parentNode - specifies the parent node.\n     * @returns {HTMLElement} - returns the element\n     * @hidden\n     * @deprecated\n     */\n    InsertMethods.Wrap = function (childNode, parentNode) {\n        this.AppendBefore(parentNode, childNode);\n        parentNode.appendChild(childNode);\n        return childNode;\n    };\n    /**\n     * unwrap method\n     *\n     * @param {Node} node - specifies the node element.\n     * @returns {Node[]} - returns the array of value\n     * @hidden\n     * @deprecated\n     */\n    InsertMethods.unwrap = function (node) {\n        var parent = node.parentNode;\n        var child = [];\n        for (; node.firstChild; null) {\n            child.push(parent.insertBefore(node.firstChild, node));\n        }\n        parent.removeChild(node);\n        return child;\n    };\n    /**\n     * AppendBefore method\n     *\n     * @param {HTMLElement} textNode - specifies the element\n     * @param {HTMLElement} parentNode - specifies the parent node\n     * @param {boolean} isAfter - specifies the boolean value\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    InsertMethods.AppendBefore = function (textNode, parentNode, isAfter) {\n        return (parentNode.parentNode) ? ((!isAfter) ? parentNode.parentNode.insertBefore(textNode, parentNode)\n            : parentNode.parentNode.insertBefore(textNode, parentNode.nextSibling)) :\n            parentNode;\n    };\n    return InsertMethods;\n}());\nexport { InsertMethods };\n","import { NodeSelection } from './../../selection/index';\nimport { isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { InsertMethods } from './insert-methods';\n/**\n * Split the Node based on selection\n *\n * @hidden\n * @deprecated\n */\nvar NodeCutter = /** @class */ (function () {\n    function NodeCutter() {\n        this.enterAction = 'P';\n        this.position = -1;\n        this.nodeSelection = new NodeSelection();\n    }\n    // Split Selection Node\n    /**\n     * GetSpliceNode method\n     *\n     * @param {Range} range - specifies the range\n     * @param {HTMLElement} node - specifies the node element.\n     * @returns {Node} - returns the node value\n     * @hidden\n     * @deprecated\n     */\n    NodeCutter.prototype.GetSpliceNode = function (range, node) {\n        node = this.SplitNode(range, node, true);\n        node = this.SplitNode(range, node, false);\n        return node;\n    };\n    /**\n     * @param {Range} range - specifies the range\n     * @param {HTMLElement} node - specifies the node element.\n     * @param {boolean} isCollapsed - specifies the boolean value\n     * @returns {HTMLElement} - returns the element\n     * @hidden\n     * @deprecated\n     */\n    NodeCutter.prototype.SplitNode = function (range, node, isCollapsed) {\n        if (node) {\n            var clone = range.cloneRange();\n            var parent_1 = node.parentNode;\n            var index = this.nodeSelection.getIndex(node);\n            clone.collapse(isCollapsed);\n            // eslint-disable-next-line\n            (isCollapsed) ? clone.setStartBefore(node) : clone.setEndAfter(node);\n            var fragment = clone.extractContents();\n            if (isCollapsed) {\n                node = parent_1.childNodes[index];\n                fragment = this.spliceEmptyNode(fragment, false);\n                if (fragment && fragment.childNodes.length > 0) {\n                    var isEmpty = (fragment.childNodes.length === 1 && fragment.childNodes[0].nodeName !== 'IMG' && !(fragment.querySelectorAll('img').length > 0)\n                        && this.isRteElm(fragment) && fragment.textContent === '') ? true : false;\n                    if (!isEmpty) {\n                        if (node) {\n                            InsertMethods.AppendBefore(fragment, node);\n                        }\n                        else {\n                            parent_1.appendChild(fragment);\n                            var divNode = document.createElement('div');\n                            divNode.innerHTML = '&#65279;&#65279;';\n                            node = divNode.firstChild;\n                            parent_1.appendChild(node);\n                        }\n                    }\n                }\n            }\n            else {\n                node = parent_1.childNodes.length > 1 ? parent_1.childNodes[index] :\n                    parent_1.childNodes[0];\n                fragment = this.spliceEmptyNode(fragment, true);\n                if (fragment && fragment.childNodes.length > 0) {\n                    var isEmpty = (fragment.childNodes.length === 1 && fragment.childNodes[0].nodeName !== 'IMG'\n                        && this.isRteElm(fragment) && fragment.textContent === '') ? true : false;\n                    if (!isEmpty) {\n                        if (node) {\n                            InsertMethods.AppendBefore(fragment, node, true);\n                        }\n                        else {\n                            parent_1.appendChild(fragment);\n                            var divNode = document.createElement('div');\n                            divNode.innerHTML = '&#65279;&#65279;';\n                            parent_1.insertBefore(divNode.firstChild, parent_1.firstChild);\n                            node = parent_1.firstChild;\n                        }\n                    }\n                }\n            }\n            return node;\n        }\n        else {\n            return null;\n        }\n    };\n    NodeCutter.prototype.isRteElm = function (fragment) {\n        var result = true;\n        if (fragment.childNodes.length === 1 && fragment.childNodes[0].nodeName !== 'IMG') {\n            var firstChild = fragment.childNodes[0];\n            for (var i = 0; !isNOU(firstChild.childNodes) && i < firstChild.childNodes.length; i++) {\n                if (firstChild.childNodes[i].nodeName === 'IMG' || (firstChild.childNodes[i].nodeName === 'SPAN' &&\n                    (firstChild.childNodes[i].classList.contains('e-video-wrap') ||\n                        firstChild.childNodes[i].classList.contains('e-embed-video-wrap') ||\n                        firstChild.childNodes[i].classList.contains('e-audio-wrap')))) {\n                    result = false;\n                }\n            }\n        }\n        else {\n            result = true;\n        }\n        return result;\n    };\n    NodeCutter.prototype.spliceEmptyNode = function (fragment, isStart) {\n        var len;\n        if (fragment.childNodes.length === 1 && fragment.childNodes[0].nodeName === '#text' &&\n            fragment.childNodes[0].textContent === '' || fragment.textContent === '') {\n            len = -1;\n        }\n        else {\n            len = fragment.childNodes.length - 1;\n        }\n        if (len > -1 && !isStart) {\n            this.spliceEmptyNode(fragment.childNodes[len], isStart);\n        }\n        else if (len > -1) {\n            this.spliceEmptyNode(fragment.childNodes[0], isStart);\n        }\n        else if (fragment.nodeType !== 3 && fragment.nodeType !== 11 && fragment.nodeName !== 'IMG' && !(fragment.classList.contains('e-video-wrap')) && !(fragment.classList.contains('e-audio-wrap'))) {\n            fragment.parentNode.removeChild(fragment);\n        }\n        return fragment;\n    };\n    // Cursor Position split\n    NodeCutter.prototype.GetCursorStart = function (indexes, index, isStart) {\n        indexes = (isStart) ? indexes : indexes.reverse();\n        var position = indexes[0];\n        for (var num = 0; num < indexes.length && ((isStart) ? (indexes[num] < index) : (indexes[num] >= index)); num++) {\n            position = indexes[num];\n        }\n        return position;\n    };\n    /**\n     * GetCursorRange method\n     *\n     * @param {Document} docElement - specifies the document\n     * @param {Range} range - specifies the range\n     * @param {Node} node - specifies the node.\n     * @returns {Range} - returns the range value\n     * @hidden\n     * @deprecated\n     */\n    NodeCutter.prototype.GetCursorRange = function (docElement, range, node) {\n        var cursorRange = docElement.createRange();\n        var indexes = [];\n        indexes.push(0);\n        var str = this.TrimLineBreak(node.data);\n        var index = str.indexOf(' ', 0);\n        while (index !== -1) {\n            if (indexes.indexOf(index) < 0) {\n                indexes.push(index);\n            }\n            if (new RegExp('\\\\s').test(str[index - 1]) && (indexes.indexOf(index - 1) < 0)) {\n                indexes.push(index - 1);\n            }\n            if (new RegExp('\\\\s').test(str[index + 1])) {\n                indexes.push(index + 1);\n            }\n            index = str.indexOf(' ', (index + 1));\n        }\n        indexes.push(str.length);\n        if ((indexes.indexOf(range.startOffset) >= 0)\n            || ((indexes.indexOf(range.startOffset - 1) >= 0) && (range.startOffset !== 1\n                || (range.startOffset === 1 && new RegExp('\\\\s').test(str[0])))\n                || ((indexes[indexes.length - 1] - 1) === range.startOffset))) {\n            cursorRange = range;\n            this.position = 1;\n        }\n        else {\n            var startOffset = this.GetCursorStart(indexes, range.startOffset, true);\n            this.position = range.startOffset - startOffset;\n            cursorRange.setStart(range.startContainer, startOffset);\n            cursorRange.setEnd(range.startContainer, this.GetCursorStart(indexes, range.startOffset, false));\n        }\n        return cursorRange;\n    };\n    /**\n     * GetCursorNode method\n     *\n     * @param {Document} docElement - specifies the document\n     * @param {Range} range - specifies the range\n     * @param {Node} node - specifies the node.\n     * @returns {Node} - returns the node value\n     * @hidden\n     * @deprecated\n     */\n    NodeCutter.prototype.GetCursorNode = function (docElement, range, node) {\n        return this.GetSpliceNode(this.GetCursorRange(docElement, range, node), node);\n    };\n    /**\n     * TrimLineBreak method\n     *\n     * @param {string} line - specifies the string value.\n     * @returns {string} - returns the string\n     * @hidden\n     * @deprecated\n     */\n    NodeCutter.prototype.TrimLineBreak = function (line) {\n        return line.replace(/(\\r\\n\\t|\\n|\\r\\t)/gm, ' ');\n    };\n    return NodeCutter;\n}());\nexport { NodeCutter };\n","import * as EVENTS from './../../common/constant';\nimport { isNullOrUndefined as isNOU, detach, createElement, closest } from '@syncfusion/ej2-base';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\nimport { markerClassName } from './dom-node';\nimport { NodeCutter } from './nodecutter';\n/**\n * Formats internal component\n *\n * @hidden\n * @deprecated\n */\nvar Formats = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     *\n     * @param {EditorManager} parent - specifies the parent element.\n     * @hidden\n     * @deprecated\n     */\n    function Formats(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Formats.prototype.addEventListener = function () {\n        this.parent.observer.on(EVENTS.FORMAT_TYPE, this.applyFormats, this);\n        this.parent.observer.on(EVENTS.KEY_UP_HANDLER, this.onKeyUp, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.onKeyDown, this);\n    };\n    Formats.prototype.getParentNode = function (node) {\n        for (; node.parentNode && node.parentNode !== this.parent.editableElement; null) {\n            node = node.parentNode;\n        }\n        return node;\n    };\n    Formats.prototype.onKeyUp = function (e) {\n        var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        var endCon = range.endContainer;\n        var lastChild = endCon.lastChild;\n        if (e.event.which === 13 && range.startContainer === endCon && endCon.nodeType !== 3) {\n            var pTag = createElement('p');\n            pTag.innerHTML = '<br>';\n            if (!isNOU(lastChild) && lastChild && lastChild.nodeName === 'BR' && (lastChild.previousSibling && lastChild.previousSibling.nodeName === 'TABLE')) {\n                endCon.replaceChild(pTag, lastChild);\n                this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument, pTag, 0);\n            }\n            else {\n                var brNode = this.parent.nodeSelection.getSelectionNodeCollectionBr(range)[0];\n                if (!isNOU(brNode) && brNode.nodeName === 'BR' && (brNode.previousSibling && brNode.previousSibling.nodeName === 'TABLE')) {\n                    endCon.replaceChild(pTag, brNode);\n                    this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument, pTag, 0);\n                }\n            }\n        }\n    };\n    Formats.prototype.onKeyDown = function (e) {\n        if (e.event.which === 13) {\n            var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n            var startCon = (range.startContainer.textContent.length === 0 || range.startContainer.nodeName === 'PRE')\n                ? range.startContainer : range.startContainer.parentElement;\n            var endCon = (range.endContainer.textContent.length === 0 || range.endContainer.nodeName === 'PRE')\n                ? range.endContainer : range.endContainer.parentElement;\n            var preElem = closest(startCon, 'pre');\n            var endPreElem = closest(endCon, 'pre');\n            var liParent = !isNOU(preElem) && !isNOU(preElem.parentElement) && preElem.parentElement.tagName === 'LI';\n            if (liParent) {\n                return;\n            }\n            if (((isNOU(preElem) && !isNOU(endPreElem)) || (!isNOU(preElem) && isNOU(endPreElem)))) {\n                e.event.preventDefault();\n                this.deleteContent(range);\n                this.removeCodeContent(range);\n                range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n                this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument, endCon, 0);\n            }\n            if (e.event.which === 13 && !isNOU(preElem) && !isNOU(endPreElem)) {\n                e.event.preventDefault();\n                this.deleteContent(range);\n                this.removeCodeContent(range);\n                range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n                var lastEmpty = range.startContainer.childNodes[range.endOffset];\n                var lastBeforeBr = range.startContainer.childNodes[range.endOffset - 1];\n                var startParent = range.startContainer;\n                if (!isNOU(lastEmpty) && !isNOU(lastBeforeBr) && isNOU(lastEmpty.nextSibling) &&\n                    lastEmpty.nodeName === 'BR' && lastBeforeBr.nodeName === 'BR') {\n                    this.paraFocus(range.startContainer, e.enterAction);\n                }\n                else if ((startParent.textContent.charCodeAt(0) === 8203 &&\n                    startParent.textContent.length === 1) || startParent.textContent.length === 0) {\n                    //Double enter with any parent tag for the node\n                    while (startParent.parentElement.nodeName !== 'PRE' &&\n                        (startParent.textContent.length === 1 || startParent.textContent.length === 0)) {\n                        startParent = startParent.parentElement;\n                    }\n                    if (!isNOU(startParent.previousSibling) && startParent.previousSibling.nodeName === 'BR' &&\n                        isNOU(startParent.nextSibling)) {\n                        this.paraFocus(startParent.parentElement);\n                    }\n                    else {\n                        this.isNotEndCursor(preElem, range);\n                    }\n                }\n                else {\n                    //Cursor at start and middle\n                    this.isNotEndCursor(preElem, range);\n                }\n            }\n        }\n    };\n    Formats.prototype.removeCodeContent = function (range) {\n        // eslint-disable-next-line\n        var regEx = new RegExp(String.fromCharCode(65279), 'g');\n        if (!isNOU(range.endContainer.textContent.match(regEx))) {\n            var pointer = range.endContainer.textContent.charCodeAt(range.endOffset - 1) === 65279 ?\n                range.endOffset - 2 : range.endOffset;\n            range.endContainer.textContent = range.endContainer.textContent.replace(regEx, '');\n            if (range.endContainer.textContent === '') {\n                this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument, range.endContainer.parentElement, 0);\n            }\n            else {\n                this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument, range.endContainer, pointer);\n            }\n        }\n    };\n    Formats.prototype.deleteContent = function (range) {\n        if (range.startContainer !== range.endContainer || range.startOffset !== range.endOffset) {\n            range.deleteContents();\n        }\n    };\n    Formats.prototype.paraFocus = function (referNode, enterAction) {\n        var insertTag;\n        if (enterAction === 'DIV') {\n            insertTag = createElement('div');\n            insertTag.innerHTML = '<br>';\n        }\n        else if (enterAction === 'BR') {\n            insertTag = createElement('br');\n        }\n        else {\n            insertTag = createElement('p');\n            insertTag.innerHTML = '<br>';\n        }\n        this.parent.domNode.insertAfter(insertTag, referNode);\n        this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument, insertTag, 0);\n        detach(referNode.lastChild);\n    };\n    Formats.prototype.isNotEndCursor = function (preElem, range) {\n        var nodeCutter = new NodeCutter();\n        var isEnd = range.startOffset === preElem.lastChild.textContent.length &&\n            preElem.lastChild.textContent === range.startContainer.textContent;\n        //Cursor at start point\n        if (preElem.textContent.indexOf(range.startContainer.textContent) === 0 &&\n            ((range.startOffset === 0 && range.endOffset === 0) || range.startContainer.nodeName === 'PRE')) {\n            this.insertMarker(preElem, range);\n            var brTag = createElement('br');\n            preElem.childNodes[range.endOffset].parentElement.insertBefore(brTag, preElem.childNodes[range.endOffset]);\n        }\n        else {\n            //Cursor at middle\n            var cloneNode = nodeCutter.SplitNode(range, preElem, true);\n            this.insertMarker(preElem, range);\n            var previousSib = preElem.previousElementSibling;\n            if (previousSib.tagName === 'PRE') {\n                previousSib.insertAdjacentHTML('beforeend', '<br>' + cloneNode.innerHTML);\n                detach(preElem);\n            }\n        }\n        //To place the cursor position\n        this.setCursorPosition(isEnd, preElem);\n    };\n    Formats.prototype.setCursorPosition = function (isEnd, preElem) {\n        var isEmpty = false;\n        var markerElem = this.parent.editableElement.querySelector('.tempSpan');\n        var mrkParentElem = markerElem.parentElement;\n        // eslint-disable-next-line\n        markerElem.parentNode.textContent === '' ? isEmpty = true :\n            this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument, markerElem, 0);\n        if (isEnd) {\n            if (isEmpty) {\n                //Enter press when pre element is empty\n                if (mrkParentElem === preElem) {\n                    this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument, markerElem, 0);\n                    detach(markerElem);\n                }\n                else {\n                    this.focusSelectionParent(markerElem, mrkParentElem);\n                }\n            }\n            else {\n                var brElm = createElement('br');\n                this.parent.domNode.insertAfter(brElm, markerElem);\n                this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument, markerElem, 0);\n                detach(markerElem);\n            }\n        }\n        else {\n            // eslint-disable-next-line\n            isEmpty ? this.focusSelectionParent(markerElem, mrkParentElem) : detach(markerElem);\n        }\n    };\n    Formats.prototype.focusSelectionParent = function (markerElem, tempSpanPElem) {\n        detach(markerElem);\n        tempSpanPElem.innerHTML = '\\u200B';\n        this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument, tempSpanPElem, 0);\n    };\n    Formats.prototype.insertMarker = function (preElem, range) {\n        var tempSpan = createElement('span', { className: 'tempSpan' });\n        if (range.startContainer.nodeName === 'PRE') {\n            preElem.childNodes[range.endOffset].parentElement.insertBefore(tempSpan, preElem.childNodes[range.endOffset]);\n        }\n        else {\n            range.startContainer.parentElement.insertBefore(tempSpan, range.startContainer);\n        }\n    };\n    Formats.prototype.applyFormats = function (e) {\n        var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        var isSelectAll = false;\n        if (this.parent.editableElement === range.endContainer &&\n            !isNOU(this.parent.editableElement.children[range.endOffset - 1]) &&\n            this.parent.editableElement.children[range.endOffset - 1].tagName === 'TABLE' && !range.collapsed) {\n            isSelectAll = true;\n        }\n        var save = this.parent.nodeSelection.save(range, this.parent.currentDocument);\n        this.parent.domNode.setMarker(save);\n        var formatsNodes = this.parent.domNode.blockNodes();\n        if (e.enterAction === 'BR') {\n            this.setSelectionBRConfig();\n            var allSelectedNode = this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument);\n            var selectedNodes = this.parent.nodeSelection.getSelectionNodes(allSelectedNode);\n            var currentFormatNodes = [];\n            if (selectedNodes.length === 0) {\n                selectedNodes.push(formatsNodes[0]);\n            }\n            for (var i = 0; i < selectedNodes.length; i++) {\n                var currentNode = selectedNodes[i];\n                var previousCurrentNode = void 0;\n                while (!this.parent.domNode.isBlockNode(currentNode) && currentNode !== this.parent.editableElement) {\n                    previousCurrentNode = currentNode;\n                    currentNode = currentNode.parentElement;\n                }\n                if (this.parent.domNode.isBlockNode(currentNode) && currentNode === this.parent.editableElement) {\n                    currentFormatNodes.push(previousCurrentNode);\n                }\n            }\n            for (var i = 0; i < currentFormatNodes.length; i++) {\n                if (!this.parent.domNode.isBlockNode(currentFormatNodes[i])) {\n                    var currentNode = currentFormatNodes[i];\n                    var previousNode = currentNode;\n                    while (currentNode === this.parent.editableElement) {\n                        previousNode = currentNode;\n                        currentNode = currentNode.parentElement;\n                    }\n                    var tempElem = void 0;\n                    if (this.parent.domNode.isBlockNode(previousNode.parentElement) &&\n                        previousNode.parentElement === this.parent.editableElement) {\n                        tempElem = createElement('div');\n                        previousNode.parentElement.insertBefore(tempElem, previousNode);\n                        tempElem.appendChild(previousNode);\n                    }\n                    else {\n                        tempElem = previousNode;\n                    }\n                    var preNode = tempElem.previousSibling;\n                    while (!isNOU(preNode) && preNode.nodeName !== 'BR' &&\n                        !this.parent.domNode.isBlockNode(preNode)) {\n                        tempElem.firstChild.parentElement.insertBefore(preNode, tempElem.firstChild);\n                        preNode = tempElem.previousSibling;\n                    }\n                    if (!isNOU(preNode) && preNode.nodeName === 'BR') {\n                        detach(preNode);\n                    }\n                    var postNode = tempElem.nextSibling;\n                    while (!isNOU(postNode) && postNode.nodeName !== 'BR' &&\n                        !this.parent.domNode.isBlockNode(postNode)) {\n                        tempElem.appendChild(postNode);\n                        postNode = tempElem.nextSibling;\n                    }\n                    if (!isNOU(postNode) && postNode.nodeName === 'BR') {\n                        detach(postNode);\n                    }\n                }\n            }\n            this.setSelectionBRConfig();\n            formatsNodes = this.parent.domNode.blockNodes();\n        }\n        for (var i = 0; i < formatsNodes.length; i++) {\n            var parentNode = void 0;\n            var replaceHTML = void 0;\n            if (e.subCommand.toLowerCase() === 'blockquote') {\n                parentNode = this.getParentNode(formatsNodes[i]);\n                replaceHTML = this.parent.domNode.isList(parentNode) ||\n                    parentNode.tagName === 'TABLE' ? parentNode.outerHTML : parentNode.innerHTML;\n            }\n            else {\n                parentNode = formatsNodes[i];\n                replaceHTML = parentNode.innerHTML;\n            }\n            if ((e.subCommand.toLowerCase() === parentNode.tagName.toLowerCase() &&\n                (e.subCommand.toLowerCase() !== 'pre' ||\n                    (!isNOU(e.exeValue) && e.exeValue.name === 'dropDownSelect'))) ||\n                isNOU(parentNode.parentNode) ||\n                (parentNode.tagName === 'TABLE' && e.subCommand.toLowerCase() === 'pre')) {\n                continue;\n            }\n            this.cleanFormats(parentNode, e.subCommand);\n            var replaceNode = (e.subCommand.toLowerCase() === 'pre' && parentNode.tagName.toLowerCase() === 'pre') ?\n                'p' : e.subCommand;\n            var replaceTag = this.parent.domNode.createTagString(replaceNode, parentNode, replaceHTML.replace(/>\\s+</g, '><'));\n            if (parentNode.tagName === 'LI') {\n                parentNode.innerHTML = '';\n                parentNode.insertAdjacentHTML('beforeend', replaceTag);\n            }\n            else {\n                this.parent.domNode.replaceWith(parentNode, replaceTag);\n            }\n        }\n        this.preFormatMerge();\n        var startNode = this.parent.editableElement.querySelector('.' + markerClassName.startSelection);\n        var endNode = this.parent.editableElement.querySelector('.' + markerClassName.endSelection);\n        if (!isNOU(startNode) && !isNOU(endNode)) {\n            startNode = startNode.lastChild;\n            endNode = endNode.lastChild;\n        }\n        save = this.parent.domNode.saveMarker(save, null);\n        if (isIDevice()) {\n            setEditFrameFocus(this.parent.editableElement, e.selector);\n        }\n        if (isSelectAll) {\n            this.parent.nodeSelection.setSelectionText(this.parent.currentDocument, startNode, endNode, 0, endNode.textContent.length);\n        }\n        else {\n            save.restore();\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.domNode.blockNodes()\n            });\n        }\n    };\n    Formats.prototype.setSelectionBRConfig = function () {\n        var startElem = this.parent.editableElement.querySelector('.' + markerClassName.startSelection);\n        var endElem = this.parent.editableElement.querySelector('.' + markerClassName.endSelection);\n        if (isNOU(endElem)) {\n            this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument, startElem, 0);\n        }\n        else {\n            this.parent.nodeSelection.setSelectionText(this.parent.currentDocument, startElem, endElem, 0, 0);\n        }\n    };\n    Formats.prototype.preFormatMerge = function () {\n        var preNodes = this.parent.editableElement.querySelectorAll('PRE');\n        if (!isNOU(preNodes)) {\n            for (var i = 0; i < preNodes.length; i++) {\n                var previousSib = preNodes[i].previousElementSibling;\n                if (!isNOU(previousSib) && previousSib.tagName === 'PRE') {\n                    previousSib.insertAdjacentHTML('beforeend', '<br>' + preNodes[i].innerHTML);\n                    detach(preNodes[i]);\n                }\n            }\n        }\n    };\n    Formats.prototype.cleanFormats = function (element, tagName) {\n        var ignoreAttr = ['display', 'font-size', 'margin-top', 'margin-bottom', 'margin-left', 'margin-right', 'font-weight'];\n        tagName = tagName.toLowerCase();\n        for (var i = 0; i < ignoreAttr.length && (tagName !== 'p' && tagName !== 'blockquote' && tagName !== 'pre'); i++) {\n            element.style.removeProperty(ignoreAttr[i]);\n        }\n    };\n    return Formats;\n}());\nexport { Formats };\n","import { NodeSelection } from './../../selection/index';\nimport { NodeCutter } from './nodecutter';\nimport * as CONSTANT from './../base/constant';\nimport { detach, Browser, isNullOrUndefined as isNOU, createElement, closest } from '@syncfusion/ej2-base';\nimport { InsertMethods } from './insert-methods';\nimport { updateTextNode } from './../../common/util';\n/**\n * Insert a HTML Node or Text\n *\n * @hidden\n * @deprecated\n */\nvar InsertHtml = /** @class */ (function () {\n    function InsertHtml() {\n    }\n    InsertHtml.Insert = function (docElement, insertNode, editNode, isExternal, enterAction) {\n        var node;\n        if (typeof insertNode === 'string') {\n            var divNode = document.createElement('div');\n            divNode.innerHTML = insertNode;\n            node = isExternal ? divNode : divNode.firstChild;\n        }\n        else {\n            if (isExternal && !(!isNOU(insertNode) && !isNOU(insertNode.classList) &&\n                insertNode.classList.contains('pasteContent'))) {\n                var divNode = document.createElement('div');\n                divNode.appendChild(insertNode);\n                node = divNode;\n            }\n            else {\n                node = insertNode;\n            }\n        }\n        var nodeSelection = new NodeSelection();\n        var nodeCutter = new NodeCutter();\n        var range = nodeSelection.getRange(docElement);\n        if (range.startContainer === editNode && range.startContainer === range.endContainer && range.startOffset === 0 &&\n            range.startOffset === range.endOffset && editNode.textContent.length === 0 &&\n            (editNode.children[0].tagName === 'P' || editNode.children[0].tagName === 'DIV' || (editNode.children[0].tagName === 'BR'))) {\n            nodeSelection.setSelectionText(docElement, range.startContainer.children[0], range.startContainer.children[0], 0, 0);\n            range = nodeSelection.getRange(docElement);\n        }\n        if (range.startContainer === editNode && range.startContainer === range.endContainer && range.startOffset === 0 &&\n            range.startOffset === range.endOffset && editNode.textContent.trim().length > 0) {\n            var focusNode = this.findFirstTextNode(range.startContainer);\n            if (!isNOU(focusNode)) {\n                nodeSelection.setSelectionText(docElement, focusNode, focusNode, 0, 0);\n                range = nodeSelection.getRange(docElement);\n            }\n        }\n        if (range.startContainer.nodeName === 'BR' && range.startOffset === 0 && range.startOffset === range.endOffset &&\n            range.startContainer === range.endContainer) {\n            var currentIndex = Array.prototype.slice.call(range.startContainer.parentElement.childNodes).indexOf(range.startContainer);\n            nodeSelection.setSelectionText(docElement, range.startContainer.parentElement, range.startContainer.parentElement, currentIndex, currentIndex);\n            range = nodeSelection.getRange(docElement);\n        }\n        var isCursor = range.startOffset === range.endOffset && range.startOffset === 0 &&\n            range.startContainer === range.endContainer;\n        var isCollapsed = range.collapsed;\n        var nodes = this.getNodeCollection(range, nodeSelection, node);\n        var closestParentNode = (node.nodeName.toLowerCase() === 'table') ? this.closestEle(nodes[0].parentNode, editNode) : nodes[0];\n        if (isExternal || (!isNOU(node) && !isNOU(node.classList) &&\n            node.classList.contains('pasteContent'))) {\n            this.pasteInsertHTML(nodes, node, range, nodeSelection, nodeCutter, docElement, isCollapsed, closestParentNode, editNode, enterAction);\n            return;\n        }\n        if (editNode !== range.startContainer && ((!isCollapsed && !(closestParentNode.nodeType === Node.ELEMENT_NODE &&\n            CONSTANT.TABLE_BLOCK_TAGS.indexOf(closestParentNode.tagName.toLocaleLowerCase()) !== -1))\n            || (node.nodeName.toLowerCase() === 'table' && closestParentNode &&\n                CONSTANT.TABLE_BLOCK_TAGS.indexOf(closestParentNode.tagName.toLocaleLowerCase()) === -1))) {\n            var preNode = nodeCutter.GetSpliceNode(range, closestParentNode);\n            var sibNode = preNode.previousSibling;\n            var parentNode = preNode.parentNode;\n            if (nodes.length === 1 || (node.nodeName.toLowerCase() === 'table' && preNode.childElementCount === 0)) {\n                nodeSelection.setSelectionContents(docElement, preNode);\n                range = nodeSelection.getRange(docElement);\n            }\n            else {\n                var lasNode = nodeCutter.GetSpliceNode(range, nodes[nodes.length - 1].parentElement);\n                lasNode = isNOU(lasNode) ? preNode : lasNode;\n                nodeSelection.setSelectionText(docElement, preNode, lasNode, 0, (lasNode.nodeType === 3) ?\n                    lasNode.textContent.length : lasNode.childNodes.length);\n                range = nodeSelection.getRange(docElement);\n            }\n            range.extractContents();\n            if (insertNode.tagName === 'TABLE') {\n                this.removeEmptyElements(editNode);\n            }\n            for (var index = 0; index < nodes.length; index++) {\n                if (nodes[index].nodeType !== 3 && nodes[index].parentNode != null) {\n                    if (nodes[index].nodeName === 'IMG') {\n                        continue;\n                    }\n                    nodes[index].parentNode.removeChild(nodes[index]);\n                }\n            }\n            if (sibNode) {\n                InsertMethods.AppendBefore(node, sibNode, true);\n            }\n            else {\n                var previousNode = null;\n                while (parentNode !== editNode && parentNode.firstChild &&\n                    (parentNode.textContent.trim() === '')) {\n                    var parentNode1 = parentNode.parentNode;\n                    previousNode = parentNode;\n                    parentNode = parentNode1;\n                }\n                if (previousNode !== null) {\n                    parentNode = previousNode;\n                }\n                if (parentNode.firstChild && (parentNode !== editNode ||\n                    (node.nodeName === 'TABLE' && isCursor && parentNode === range.startContainer &&\n                        parentNode === range.endContainer))) {\n                    if (parentNode.textContent.trim() === '' && parentNode !== editNode) {\n                        InsertMethods.AppendBefore(node, parentNode, false);\n                        detach(parentNode);\n                    }\n                    else {\n                        InsertMethods.AppendBefore(node, parentNode.firstChild, false);\n                    }\n                }\n                else {\n                    parentNode.appendChild(node);\n                }\n            }\n            if (node.nodeName === 'IMG') {\n                this.imageFocus(node, nodeSelection, docElement);\n            }\n            else if (node.nodeType !== 3) {\n                nodeSelection.setSelectionText(docElement, node, node, 0, node.childNodes.length);\n            }\n            else {\n                nodeSelection.setSelectionText(docElement, node, node, 0, node.textContent.length);\n            }\n        }\n        else {\n            range.deleteContents();\n            if (isCursor && range.startContainer.textContent === '' && range.startContainer.nodeName !== 'BR') {\n                range.startContainer.innerHTML = '';\n            }\n            if (Browser.isIE) {\n                var frag = docElement.createDocumentFragment();\n                frag.appendChild(node);\n                range.insertNode(frag);\n            }\n            else if (range.startContainer.nodeType === 1 && range.startContainer.nodeName.toLowerCase() === 'hr'\n                && range.endContainer.nodeName.toLowerCase() === 'hr') {\n                var paraElem = range.startContainer.nextElementSibling;\n                if (paraElem) {\n                    if (paraElem.querySelector('br')) {\n                        detach(paraElem.querySelector('br'));\n                    }\n                    paraElem.appendChild(node);\n                }\n            }\n            else {\n                if (range.startContainer.nodeName === 'BR') {\n                    range.startContainer.parentElement.insertBefore(node, range.startContainer);\n                }\n                else {\n                    range.insertNode(node);\n                }\n            }\n            if (node.nodeType !== 3 && node.childNodes.length > 0) {\n                nodeSelection.setSelectionText(docElement, node, node, 1, 1);\n            }\n            else if (node.nodeName === 'IMG') {\n                this.imageFocus(node, nodeSelection, docElement);\n            }\n            else if (node.nodeType !== 3) {\n                nodeSelection.setSelectionContents(docElement, node);\n            }\n            else {\n                nodeSelection.setSelectionText(docElement, node, node, node.textContent.length, node.textContent.length);\n            }\n        }\n    };\n    InsertHtml.findFirstTextNode = function (node) {\n        if (node.nodeType === Node.TEXT_NODE) {\n            return node;\n        }\n        for (var i = 0; i < node.childNodes.length; i++) {\n            var textNode = this.findFirstTextNode(node.childNodes[i]);\n            if (!isNOU(textNode)) {\n                return textNode;\n            }\n        }\n        return null;\n    };\n    InsertHtml.pasteInsertHTML = function (nodes, node, range, nodeSelection, nodeCutter, docElement, isCollapsed, closestParentNode, editNode, enterAction) {\n        var isCursor = range.startOffset === range.endOffset &&\n            range.startContainer === range.endContainer;\n        if (isCursor && range.startContainer === editNode && editNode.textContent === '') {\n            var currentBlockNode = this.getImmediateBlockNode(nodes[nodes.length - 1], editNode);\n            nodeSelection.setSelectionText(docElement, currentBlockNode, currentBlockNode, 0, 0);\n            range = nodeSelection.getRange(docElement);\n        }\n        var lasNode;\n        var sibNode;\n        var isSingleNode;\n        var preNode;\n        if (editNode !== range.startContainer && ((!isCollapsed && !(closestParentNode.nodeType === Node.ELEMENT_NODE &&\n            CONSTANT.TABLE_BLOCK_TAGS.indexOf(closestParentNode.tagName.toLocaleLowerCase()) !== -1))\n            || (node.nodeName.toLowerCase() === 'table' && closestParentNode &&\n                CONSTANT.TABLE_BLOCK_TAGS.indexOf(closestParentNode.tagName.toLocaleLowerCase()) === -1))) {\n            preNode = nodeCutter.GetSpliceNode(range, closestParentNode);\n            sibNode = isNOU(preNode.previousSibling) ? preNode.parentNode.previousSibling : preNode.previousSibling;\n            if (nodes.length === 1) {\n                nodeSelection.setSelectionContents(docElement, preNode);\n                range = nodeSelection.getRange(docElement);\n                isSingleNode = true;\n            }\n            else {\n                lasNode = nodeCutter.GetSpliceNode(range, nodes[nodes.length - 1].parentElement);\n                lasNode = isNOU(lasNode) ? preNode : lasNode;\n                nodeSelection.setSelectionText(docElement, preNode, lasNode, 0, (lasNode.nodeType === 3) ?\n                    lasNode.textContent.length : lasNode.childNodes.length);\n                range = nodeSelection.getRange(docElement);\n                isSingleNode = false;\n            }\n        }\n        var containsBlockNode = false;\n        this.removingComments(node);\n        var allChildNodes = node.childNodes;\n        for (var i = 0; i < allChildNodes.length; i++) {\n            if (CONSTANT.BLOCK_TAGS.indexOf(allChildNodes[i].nodeName.toLocaleLowerCase()) >= 0) {\n                containsBlockNode = true;\n                break;\n            }\n        }\n        var lastSelectionNode;\n        var fragment = document.createDocumentFragment();\n        if (!containsBlockNode) {\n            if (!isCursor) {\n                while (node.firstChild) {\n                    lastSelectionNode = node.firstChild;\n                    fragment.appendChild(node.firstChild);\n                }\n                if (isSingleNode) {\n                    preNode.parentNode.replaceChild(fragment, preNode);\n                }\n                else {\n                    range.deleteContents();\n                    if (!isNOU(lasNode)) {\n                        detach(lasNode);\n                    }\n                    // eslint-disable-next-line\n                    !isNOU(sibNode) ? sibNode.parentNode.appendChild(fragment) : editNode.appendChild(fragment);\n                }\n            }\n            else {\n                var tempSpan = createElement('span', { className: 'tempSpan' });\n                var nearestAnchor = closest(range.startContainer.parentElement, 'a');\n                if (range.startContainer.nodeType === 3 && nearestAnchor && closest(nearestAnchor, 'span')) {\n                    var immediateBlockNode = this.getImmediateBlockNode(range.startContainer, editNode);\n                    if (immediateBlockNode.querySelectorAll('br').length > 0) {\n                        detach(immediateBlockNode.querySelector('br'));\n                    }\n                    var rangeElement = closest(nearestAnchor, 'span');\n                    rangeElement.appendChild(tempSpan);\n                }\n                else {\n                    range.insertNode(tempSpan);\n                }\n                while (node.firstChild) {\n                    lastSelectionNode = node.firstChild;\n                    fragment.appendChild(node.firstChild);\n                }\n                tempSpan.parentNode.replaceChild(fragment, tempSpan);\n            }\n        }\n        else {\n            var parentElem = range.startContainer;\n            while (!isNOU(parentElem) && parentElem.nodeName !== 'PRE' && parentElem !== editNode) {\n                parentElem = parentElem.parentElement;\n            }\n            if (!isNOU(node) && !isNOU(parentElem) && parentElem.nodeName === 'PRE') {\n                range.insertNode(node);\n                lastSelectionNode = node.lastChild;\n            }\n            else {\n                this.insertTempNode(range, node, nodes, nodeCutter, editNode);\n                var isFirstTextNode = true;\n                var isPreviousInlineElem = void 0;\n                var paraElm = void 0;\n                var previousParent = void 0;\n                if (!this.contentsDeleted) {\n                    range.deleteContents();\n                }\n                while (node.firstChild) {\n                    if (node.firstChild.nodeName === '#text' && node.firstChild.textContent.trim() === '') {\n                        detach(node.firstChild);\n                        continue;\n                    }\n                    if (node.firstChild.nodeName === '#text' && isFirstTextNode ||\n                        (this.inlineNode.indexOf(node.firstChild.nodeName.toLocaleLowerCase()) >= 0 && isFirstTextNode)) {\n                        lastSelectionNode = node.firstChild;\n                        if (isNOU(node.previousElementSibling)) {\n                            var firstParaElm = createElement('p');\n                            node.parentElement.insertBefore(firstParaElm, node);\n                        }\n                        if (node.previousElementSibling.nodeName === 'BR') {\n                            node.parentElement.insertBefore(node.firstChild, node);\n                        }\n                        else {\n                            node.previousElementSibling.appendChild(node.firstChild);\n                        }\n                    }\n                    else {\n                        lastSelectionNode = node.firstChild;\n                        if (node.firstChild.nodeName === '#text' ||\n                            (this.inlineNode.indexOf(node.firstChild.nodeName.toLocaleLowerCase()) >= 0)) {\n                            if (!isPreviousInlineElem) {\n                                paraElm = createElement('p');\n                                paraElm.appendChild(node.firstChild);\n                                fragment.appendChild(paraElm);\n                            }\n                            else {\n                                previousParent.appendChild(node.firstChild);\n                                fragment.appendChild(previousParent);\n                            }\n                            previousParent = paraElm;\n                            isPreviousInlineElem = true;\n                        }\n                        else {\n                            fragment.appendChild(node.firstChild);\n                            isPreviousInlineElem = false;\n                        }\n                        isFirstTextNode = false;\n                    }\n                }\n                node.parentNode.replaceChild(fragment, node);\n            }\n        }\n        if (lastSelectionNode.nodeName === '#text') {\n            this.placeCursorEnd(lastSelectionNode, node, nodeSelection, docElement, editNode);\n        }\n        else {\n            this.cursorPos(lastSelectionNode, node, nodeSelection, docElement, editNode, enterAction);\n        }\n    };\n    InsertHtml.placeCursorEnd = function (lastSelectionNode, node, nodeSelection, docElement, editNode) {\n        lastSelectionNode = lastSelectionNode.nodeName === 'BR' ? (isNOU(lastSelectionNode.previousSibling) ? lastSelectionNode.parentNode\n            : lastSelectionNode.previousSibling) : lastSelectionNode;\n        while (!isNOU(lastSelectionNode) && lastSelectionNode.nodeName !== '#text' && lastSelectionNode.nodeName !== 'IMG' &&\n            lastSelectionNode.nodeName !== 'BR' && lastSelectionNode.nodeName !== 'HR') {\n            if (!isNOU(lastSelectionNode.lastChild) && (lastSelectionNode.lastChild.nodeName === 'P' &&\n                lastSelectionNode.lastChild.innerHTML === '')) {\n                var lineBreak = createElement('br');\n                lastSelectionNode.lastChild.appendChild(lineBreak);\n            }\n            lastSelectionNode = lastSelectionNode.lastChild;\n        }\n        lastSelectionNode = isNOU(lastSelectionNode) ? node : lastSelectionNode;\n        if (lastSelectionNode.nodeName === 'IMG') {\n            this.imageFocus(lastSelectionNode, nodeSelection, docElement);\n        }\n        else {\n            nodeSelection.setSelectionText(docElement, lastSelectionNode, lastSelectionNode, lastSelectionNode.textContent.length, lastSelectionNode.textContent.length);\n        }\n        this.removeEmptyElements(editNode);\n    };\n    InsertHtml.getNodeCollection = function (range, nodeSelection, node) {\n        var nodes = [];\n        if (range.startOffset === range.endOffset && range.startContainer === range.endContainer &&\n            range.startContainer.nodeName !== 'BR' && range.startContainer.childNodes.length > 0 &&\n            (range.startContainer.nodeName === 'TD' || (range.startContainer.nodeType !== 3 &&\n                node.classList && node.classList.contains('pasteContent')))) {\n            nodes.push(range.startContainer.childNodes[range.endOffset]);\n        }\n        else {\n            nodes = nodeSelection.getInsertNodeCollection(range);\n        }\n        return nodes;\n    };\n    InsertHtml.insertTempNode = function (range, node, nodes, nodeCutter, editNode) {\n        if (range.startContainer === editNode && !isNOU(range.startContainer.childNodes[range.endOffset - 1]) &&\n            range.startContainer.childNodes[range.endOffset - 1].nodeName === 'TABLE') {\n            if (isNOU(range.startContainer.childNodes[range.endOffset - 1].nextSibling)) {\n                range.startContainer.appendChild(node);\n            }\n            else {\n                range.startContainer.insertBefore(node, range.startContainer.childNodes[range.endOffset - 1].nextSibling);\n            }\n        }\n        else if (range.startContainer === editNode && !isNOU(range.startContainer.childNodes[range.endOffset]) &&\n            range.startContainer.childNodes[range.endOffset].nodeName === 'TABLE') {\n            range.startContainer.insertBefore(node, range.startContainer.childNodes[range.endOffset]);\n        }\n        else if (range.startContainer === range.endContainer && range.startContainer.nodeType !== 3\n            && node.firstChild.nodeName === 'HR') {\n            if (range.startContainer.classList.contains('e-content') || range.startContainer.nodeName === 'BODY') {\n                range.startContainer.appendChild(node);\n            }\n            else {\n                range.startContainer.parentNode.insertBefore(node, range.startContainer);\n            }\n        }\n        else {\n            var blockNode = this.getImmediateBlockNode(nodes[nodes.length - 1], editNode);\n            if ((isNOU(blockNode) || isNOU(blockNode.parentElement)) && range.endContainer.nodeType !== 3) {\n                blockNode = range.endContainer;\n                range.setEnd(blockNode, range.endContainer.textContent.length);\n            }\n            if (blockNode.nodeName === 'BODY' && range.startContainer === range.endContainer && range.startContainer.nodeType === 1) {\n                blockNode = range.startContainer;\n            }\n            if (blockNode.closest('LI') && node && node.firstElementChild &&\n                ((node).firstElementChild.tagName === 'OL' || node.firstElementChild.tagName === 'UL')) {\n                var liNode = void 0;\n                while (node.firstElementChild.lastElementChild && node.firstElementChild.lastElementChild.tagName === 'LI') {\n                    liNode = node.firstElementChild.lastElementChild;\n                    liNode.style.removeProperty('margin-left');\n                    liNode.style.removeProperty('margin-top');\n                    liNode.style.removeProperty('margin-bottom');\n                    node.firstElementChild.insertAdjacentElement('afterend', liNode);\n                }\n            }\n            if (blockNode.nodeName === 'TD' || blockNode.nodeName === 'TH' || blockNode.nodeName === 'TR') {\n                var tempSpan = createElement('span', { className: 'tempSpan' });\n                range.insertNode(tempSpan);\n                tempSpan.parentNode.replaceChild(node, tempSpan);\n            }\n            else {\n                var nodeSelection = new NodeSelection();\n                var currentNode = this.getNodeCollection(range, nodeSelection, node)[this.getNodeCollection(range, nodeSelection, node).length - 1];\n                var splitedElm = void 0;\n                if ((currentNode.nodeName === 'BR' || currentNode.nodeName === 'HR' ||\n                    (currentNode.nodeName === '#text' && !isNOU(currentNode.parentElement) && currentNode.parentElement.nodeName === 'LI')) &&\n                    (!isNOU(currentNode.parentElement) && currentNode.parentElement.textContent.trim().length === 0)) {\n                    splitedElm = currentNode;\n                    if (currentNode.parentElement.nodeName === 'LI' && !isNOU(currentNode.nextSibling) &&\n                        currentNode.nextSibling.nodeName === 'BR') {\n                        detach(currentNode.nextSibling);\n                    }\n                }\n                else if ((currentNode.nodeName === '#text' || currentNode.nodeName === 'BR') && !isNOU(currentNode.parentElement) &&\n                    (currentNode.parentElement.nodeName === 'LI' || (blockNode === editNode && currentNode.parentElement === blockNode)) &&\n                    currentNode.parentElement.textContent.trim().length > 0) {\n                    splitedElm = currentNode;\n                    if (currentNode.parentElement.nodeName === 'LI' && !isNOU(currentNode.nextSibling) &&\n                        currentNode.nextSibling.nodeName === 'BR') {\n                        detach(currentNode.nextSibling);\n                    }\n                    if (!range.collapsed) {\n                        range.deleteContents();\n                    }\n                    range.insertNode(node);\n                    this.contentsDeleted = true;\n                    return;\n                }\n                else {\n                    splitedElm = nodeCutter.GetSpliceNode(range, blockNode);\n                }\n                splitedElm.parentNode.replaceChild(node, splitedElm);\n            }\n        }\n    };\n    InsertHtml.cursorPos = function (lastSelectionNode, node, nodeSelection, docElement, editNode, enterAction) {\n        lastSelectionNode.classList.add('lastNode');\n        editNode.innerHTML = updateTextNode(editNode.innerHTML, enterAction);\n        lastSelectionNode = editNode.querySelector('.lastNode');\n        if (!isNOU(lastSelectionNode)) {\n            this.placeCursorEnd(lastSelectionNode, node, nodeSelection, docElement, editNode);\n            lastSelectionNode.classList.remove('lastNode');\n            if (lastSelectionNode.classList.length === 0) {\n                lastSelectionNode.removeAttribute('class');\n            }\n        }\n    };\n    InsertHtml.imageFocus = function (node, nodeSelection, docElement) {\n        var focusNode = document.createTextNode(' ');\n        node.parentNode.insertBefore(focusNode, node.nextSibling);\n        nodeSelection.setSelectionText(docElement, node.nextSibling, node.nextSibling, 0, 0);\n    };\n    // eslint-disable-next-line\n    InsertHtml.getImmediateBlockNode = function (node, editNode) {\n        do {\n            node = node.parentNode;\n        } while (node && CONSTANT.BLOCK_TAGS.indexOf(node.nodeName.toLocaleLowerCase()) < 0);\n        return node;\n    };\n    InsertHtml.removingComments = function (elm) {\n        var innerElement = elm.innerHTML;\n        innerElement = innerElement.replace(/<!--[\\s\\S]*?-->/g, '');\n        elm.innerHTML = innerElement;\n    };\n    InsertHtml.findDetachEmptyElem = function (element) {\n        var removableElement;\n        if (!isNOU(element.parentElement)) {\n            var hasNbsp = element.parentElement.textContent.length > 0 && element.parentElement.textContent.match(/\\u00a0/g)\n                && element.parentElement.textContent.match(/\\u00a0/g).length > 0;\n            if (!hasNbsp && element.parentElement.textContent.trim() === '' && element.parentElement.contentEditable !== 'true' &&\n                isNOU(element.parentElement.querySelector('img'))) {\n                removableElement = this.findDetachEmptyElem(element.parentElement);\n            }\n            else {\n                removableElement = element;\n            }\n        }\n        else {\n            removableElement = null;\n        }\n        return removableElement;\n    };\n    InsertHtml.removeEmptyElements = function (element) {\n        var emptyElements = element.querySelectorAll(':empty');\n        var nonSvgEmptyElements = Array.from(emptyElements).filter(function (element) {\n            // Check if the element is an SVG element or an ancestor of an SVG element\n            return !element.closest('svg') && !element.closest('canvas');\n        });\n        for (var i = 0; i < nonSvgEmptyElements.length; i++) {\n            var lineWithDiv = true;\n            if (nonSvgEmptyElements[i].tagName === 'DIV') {\n                lineWithDiv = nonSvgEmptyElements[i].style.borderBottom === 'none' ||\n                    nonSvgEmptyElements[i].style.borderBottom === '' ? true : false;\n            }\n            if (CONSTANT.SELF_CLOSING_TAGS.indexOf(nonSvgEmptyElements[i].tagName.toLowerCase()) < 0 && lineWithDiv) {\n                var detachableElement = this.findDetachEmptyElem(nonSvgEmptyElements[i]);\n                if (!isNOU(detachableElement)) {\n                    detach(detachableElement);\n                }\n            }\n        }\n    };\n    InsertHtml.closestEle = function (element, editNode) {\n        var el = element;\n        while (el && el.nodeType === 1) {\n            if (el.parentNode === editNode ||\n                (!isNOU(el.parentNode.tagName) &&\n                    CONSTANT.IGNORE_BLOCK_TAGS.indexOf(el.parentNode.tagName.toLocaleLowerCase()) !== -1)) {\n                return el;\n            }\n            el = el.parentNode;\n        }\n        return null;\n    };\n    /**\n     * Insert method\n     *\n     * @hidden\n     * @deprecated\n     */\n    InsertHtml.inlineNode = ['a', 'abbr', 'acronym', 'audio', 'b', 'bdi', 'bdo', 'big', 'br', 'button',\n        'canvas', 'cite', 'code', 'data', 'datalist', 'del', 'dfn', 'em', 'embed', 'font', 'i', 'iframe', 'img', 'input',\n        'ins', 'kbd', 'label', 'map', 'mark', 'meter', 'noscript', 'object', 'output', 'picture', 'progress',\n        'q', 'ruby', 's', 'samp', 'script', 'select', 'slot', 'small', 'span', 'strong', 'sub', 'sup', 'svg',\n        'template', 'textarea', 'time', 'u', 'tt', 'var', 'video', 'wbr'];\n    InsertHtml.contentsDeleted = false;\n    return InsertHtml;\n}());\nexport { InsertHtml };\n","import * as CONSTANT from './../base/constant';\nimport { NodeSelection } from '../../selection/selection';\nimport { NodeCutter } from './nodecutter';\nimport { InsertHtml } from './inserthtml';\nimport { createElement, isNullOrUndefined as isNOU, closest } from '@syncfusion/ej2-base';\n/**\n * Link internal component\n *\n * @hidden\n * @deprecated\n */\nvar LinkCommand = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     *\n     * @param {EditorManager} parent - specifies the editor manager\n     * @hidden\n     * @deprecated\n     */\n    function LinkCommand(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    LinkCommand.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.LINK, this.linkCommand, this);\n    };\n    LinkCommand.prototype.linkCommand = function (e) {\n        switch (e.value.toString().toLocaleLowerCase()) {\n            case 'createlink':\n            case 'editlink':\n                this.createLink(e);\n                break;\n            case 'openlink':\n                this.openLink(e);\n                break;\n            case 'removelink':\n                this.removeLink(e);\n                break;\n        }\n    };\n    LinkCommand.prototype.createLink = function (e) {\n        var closestAnchor = (!isNOU(e.item.selectParent) && e.item.selectParent.length > 0) &&\n            closest(e.item.selectParent[0], 'a');\n        closestAnchor = !isNOU(closestAnchor) ? closestAnchor :\n            (!isNOU(e.item.selectParent) && e.item.selectParent.length > 0) ? (e.item.selectParent[0]) : null;\n        if (!isNOU(closestAnchor) && closestAnchor.tagName === 'A') {\n            var anchorEle = closestAnchor;\n            var linkText = '';\n            if (!isNOU(e.item.url)) {\n                anchorEle.setAttribute('href', e.item.url);\n            }\n            if (!isNOU(e.item.title)) {\n                anchorEle.setAttribute('title', e.item.title);\n            }\n            if (!isNOU(e.item.text) && e.item.text !== '') {\n                linkText = anchorEle.innerText;\n                anchorEle.innerText = e.item.text;\n            }\n            if (!isNOU(e.item.target)) {\n                anchorEle.setAttribute('target', e.item.target);\n                anchorEle.setAttribute('aria-label', e.item.ariaLabel);\n            }\n            else {\n                anchorEle.removeAttribute('target');\n                anchorEle.removeAttribute('aria-label');\n            }\n            if (linkText === e.item.text) {\n                e.item.selection.setSelectionText(this.parent.currentDocument, anchorEle, anchorEle, 1, 1);\n                e.item.selection.restore();\n            }\n            else {\n                var startIndex = e.item.action === 'Paste' ? anchorEle.childNodes[0].textContent.length : 0;\n                e.item.selection.setSelectionText(this.parent.currentDocument, anchorEle.childNodes[0], anchorEle.childNodes[0], startIndex, anchorEle.childNodes[0].textContent.length);\n            }\n        }\n        else {\n            var domSelection = new NodeSelection();\n            var range = domSelection.getRange(this.parent.currentDocument);\n            if (range.endContainer.nodeName === '#text' && range.startContainer.textContent.length === (range.endOffset + 1) &&\n                range.endContainer.textContent.charAt(range.endOffset) === ' ' && (!isNOU(range.endContainer.nextSibling) && range.endContainer.nextSibling.nodeName === 'A')) {\n                domSelection.setSelectionText(this.parent.currentDocument, range.startContainer, range.endContainer, range.startOffset, range.endOffset + 1);\n                range = domSelection.getRange(this.parent.currentDocument);\n            }\n            var text = isNOU(e.item.text) ? true : e.item.text.replace(/ /g, '').localeCompare(range.toString()\n                .replace(/\\n/g, ' ').replace(/ /g, '')) < 0;\n            if (e.event && e.event.type === 'keydown' && (e.event.keyCode === 32\n                || e.event.keyCode === 13) || e.item.action === 'Paste' || range.collapsed || text) {\n                var anchor = this.createAchorNode(e);\n                anchor.innerText = e.item.text === '' ? e.item.url : e.item.text;\n                var text_1 = anchor.innerText;\n                // Replace spaces with non-breaking spaces\n                var modifiedText = text_1.replace(/  +/g, function (match) {\n                    return '\\u00A0'.repeat(match.length);\n                });\n                anchor.innerText = modifiedText;\n                e.item.selection.restore();\n                InsertHtml.Insert(this.parent.currentDocument, anchor, this.parent.editableElement);\n                if (e.event && e.event.type === 'keydown' && (e.event.keyCode === 32\n                    || e.event.keyCode === 13)) {\n                    var startContainer = e.item.selection.range.startContainer;\n                    startContainer.textContent = this.removeText(startContainer.textContent, e.item.text);\n                }\n                else {\n                    var startIndex = e.item.action === 'Paste' ? anchor.childNodes[0].textContent.length : 0;\n                    e.item.selection.setSelectionText(this.parent.currentDocument, anchor.childNodes[0], anchor.childNodes[0], startIndex, anchor.childNodes[0].textContent.length);\n                }\n            }\n            else {\n                this.createLinkNode(e);\n            }\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: 'Links',\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    LinkCommand.prototype.createLinkNode = function (e) {\n        var domSelection = new NodeSelection();\n        var nodeCutter = new NodeCutter();\n        var range = domSelection.getRange(this.parent.currentDocument);\n        var nodes = this.getSelectionNodes(domSelection.getNodeCollection(range));\n        var save = domSelection.save(range, this.parent.currentDocument);\n        var txtArray = [];\n        var inlineNodes = [];\n        var currentNode;\n        var removeNodes = [];\n        var anchorNodes = [];\n        var finalinlineNodes = [];\n        var cloneNode;\n        for (var index = 0; index < nodes.length; index++) {\n            nodes[index] = nodeCutter.GetSpliceNode(range, nodes[index]);\n            txtArray[index] = nodes[index];\n        }\n        for (var i = 0; i < txtArray.length; i++) {\n            var check = true;\n            currentNode = txtArray[i];\n            while (check === true) {\n                if (currentNode.parentNode.nodeName === 'A') {\n                    var anchorEle = currentNode.parentNode;\n                    currentNode.parentNode.parentNode.insertBefore(anchorEle.firstChild, anchorEle);\n                    currentNode.parentNode.removeChild(anchorEle);\n                }\n                if (this.isBlockNode(currentNode.parentNode) || txtArray.length === 0 || i === 0 || i === txtArray.length - 1\n                    || range.startContainer.nodeType === 3) {\n                    inlineNodes[i] = currentNode;\n                    check = false;\n                }\n                else {\n                    currentNode = currentNode.parentNode;\n                }\n            }\n        }\n        for (var i = 0, j_1 = 0; i < inlineNodes.length; i++) {\n            if (i === 0) {\n                finalinlineNodes[j_1] = inlineNodes[i];\n            }\n            if (inlineNodes.length > 1 && i < inlineNodes.length - 1) {\n                if ((inlineNodes[i].parentElement === inlineNodes[i + 1].parentElement) &&\n                    (inlineNodes[i] === inlineNodes[i + 1])) {\n                    continue;\n                }\n                else {\n                    finalinlineNodes[j_1 + 1] = inlineNodes[i + 1];\n                    j_1++;\n                }\n            }\n        }\n        var j = 0;\n        anchorNodes[j] = this.createAchorNode(e);\n        for (var i = 0; i < finalinlineNodes.length; i++) {\n            if (i === 0) {\n                cloneNode = finalinlineNodes[i].cloneNode(true);\n                anchorNodes[i].appendChild(cloneNode);\n            }\n            if (i < finalinlineNodes.length - 1) {\n                if (finalinlineNodes[i].parentNode === finalinlineNodes[i + 1].parentNode) {\n                    var cln = finalinlineNodes[i + 1].cloneNode(true);\n                    anchorNodes[j].appendChild(cln);\n                }\n                else {\n                    j = j + 1;\n                    anchorNodes[j] = this.createAchorNode(e);\n                    cloneNode = finalinlineNodes[i + 1].cloneNode(true);\n                    anchorNodes[j].appendChild(cloneNode);\n                }\n            }\n        }\n        this.parent.nodeSelection.setRange(document, save.range);\n        for (var i = 0, j_2 = 0, k = 0; i <= finalinlineNodes.length; i++) {\n            if (i === 0) {\n                finalinlineNodes[i].parentNode.insertBefore(anchorNodes[j_2], finalinlineNodes[i].nextSibling);\n                if (this.parent.domNode.blockNodes().length === 1) {\n                    this.parent.nodeSelection.setSelectionNode(this.parent.currentDocument, anchorNodes[j_2]);\n                }\n                removeNodes[k] = finalinlineNodes[i];\n                k++;\n            }\n            if (i < finalinlineNodes.length - 1) {\n                if (finalinlineNodes[i].parentNode === finalinlineNodes[i + 1].parentNode) {\n                    removeNodes[k] = finalinlineNodes[i + 1];\n                    k++;\n                }\n                else {\n                    j_2 = j_2 + 1;\n                    finalinlineNodes[i + 1].parentNode.insertBefore(anchorNodes[j_2], finalinlineNodes[i + 1]);\n                    removeNodes[k] = finalinlineNodes[i + 1];\n                    k++;\n                }\n            }\n        }\n        for (var i = 0; i < removeNodes.length; i++) {\n            if (removeNodes[i].parentNode) {\n                removeNodes[i].parentNode.removeChild(removeNodes[i]);\n            }\n        }\n    };\n    LinkCommand.prototype.createAchorNode = function (e) {\n        var anchorEle = createElement('a', {\n            className: 'e-rte-anchor',\n            attrs: {\n                href: e.item.url,\n                title: isNOU(e.item.title) || e.item.title === '' ? e.item.url : e.item.title\n            }\n        });\n        if (!isNOU(e.item.target)) {\n            anchorEle.setAttribute('target', e.item.target);\n        }\n        return anchorEle;\n    };\n    LinkCommand.prototype.getSelectionNodes = function (nodeCollection) {\n        nodeCollection = nodeCollection.reverse();\n        for (var index = 0; index < nodeCollection.length; index++) {\n            if (nodeCollection[index].nodeType !== 3 || nodeCollection[index].textContent.trim() === '') {\n                if (nodeCollection[index].nodeName !== 'IMG') {\n                    nodeCollection.splice(index, 1);\n                    index--;\n                }\n            }\n        }\n        return nodeCollection.reverse();\n    };\n    LinkCommand.prototype.isBlockNode = function (element) {\n        return (!!element && (element.nodeType === Node.ELEMENT_NODE && CONSTANT.BLOCK_TAGS.indexOf(element.tagName.toLowerCase()) >= 0));\n    };\n    LinkCommand.prototype.removeText = function (text, val) {\n        var arr = text.split(' ');\n        for (var i = 0; i < arr.length; i++) {\n            if (arr[i] === val) {\n                arr.splice(i, 1);\n                i--;\n            }\n        }\n        return arr.join(' ') + ' ';\n    };\n    LinkCommand.prototype.openLink = function (e) {\n        document.defaultView.open(e.item.url, e.item.target);\n        this.callBack(e);\n    };\n    LinkCommand.prototype.removeLink = function (e) {\n        var blockNodes = this.parent.domNode.blockNodes();\n        if (blockNodes.length < 2) {\n            this.parent.domNode.setMarker(e.item.selection);\n            var closestAnchor = closest(e.item.selectParent[0], 'a');\n            var selectParent = closestAnchor ? closestAnchor : e.item.selectParent[0];\n            var parent_1 = selectParent.parentNode;\n            var child = [];\n            for (; selectParent.firstChild; null) {\n                child.push(parent_1.insertBefore(selectParent.firstChild, selectParent));\n            }\n            parent_1.removeChild(selectParent);\n            if (child && child.length === 1) {\n                e.item.selection.startContainer = e.item.selection.getNodeArray(child[child.length - 1], true);\n                e.item.selection.endContainer = e.item.selection.startContainer;\n            }\n            e.item.selection = this.parent.domNode.saveMarker(e.item.selection);\n        }\n        else {\n            for (var i = 0; i < blockNodes.length; i++) {\n                var linkNode = blockNodes[i].querySelectorAll('a');\n                for (var j = 0; j < linkNode.length; j++) {\n                    if (this.parent.currentDocument.getSelection().containsNode(linkNode[j], true)) {\n                        linkNode[j].outerHTML = linkNode[j].innerHTML;\n                    }\n                }\n            }\n        }\n        e.item.selection.restore();\n        this.callBack(e);\n    };\n    LinkCommand.prototype.callBack = function (e) {\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    return LinkCommand;\n}());\nexport { LinkCommand };\n","import * as CONSTANT from './../base/constant';\nimport { setStyleAttribute, closest } from '@syncfusion/ej2-base';\nimport * as EVENTS from './../../common/constant';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\n/**\n * Formats internal component\n *\n * @hidden\n * @deprecated\n */\nvar Alignments = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     *\n     * @param {EditorManager} parent - specifies the parent element.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    function Alignments(parent) {\n        this.alignments = {\n            'JustifyLeft': 'left',\n            'JustifyCenter': 'center',\n            'JustifyRight': 'right',\n            'JustifyFull': 'justify'\n        };\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Alignments.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.ALIGNMENT_TYPE, this.applyAlignment, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.onKeyDown, this);\n    };\n    Alignments.prototype.onKeyDown = function (e) {\n        switch (e.event.action) {\n            case 'justify-center':\n                this.applyAlignment({ subCommand: 'JustifyCenter', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'justify-full':\n                this.applyAlignment({ subCommand: 'JustifyFull', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'justify-left':\n                this.applyAlignment({ subCommand: 'JustifyLeft', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'justify-right':\n                this.applyAlignment({ subCommand: 'JustifyRight', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n        }\n    };\n    Alignments.prototype.getTableNode = function (range) {\n        var startNode = range.startContainer.nodeType === Node.ELEMENT_NODE\n            ? range.startContainer : range.startContainer.parentNode;\n        var cellNode = closest(startNode, 'td,th');\n        return [cellNode];\n    };\n    Alignments.prototype.applyAlignment = function (e) {\n        var isTableAlign = e.value === 'Table' ? true : false;\n        var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        var save = this.parent.nodeSelection.save(range, this.parent.currentDocument);\n        if (!isTableAlign) {\n            this.parent.domNode.setMarker(save);\n            var alignmentNodes = this.parent.domNode.blockNodes();\n            for (var i = 0; i < alignmentNodes.length; i++) {\n                var parentNode = alignmentNodes[i];\n                setStyleAttribute(parentNode, { 'text-align': this.alignments[e.subCommand] });\n            }\n            var imageTags = this.parent.domNode.getImageTagInSelection();\n            for (var i = 0; i < imageTags.length; i++) {\n                var elementNode = [];\n                elementNode.push(imageTags[i]);\n                this.parent.imgObj.imageCommand({\n                    item: {\n                        selectNode: elementNode\n                    },\n                    subCommand: e.subCommand,\n                    value: e.subCommand,\n                    callBack: e.callBack,\n                    selector: e.selector\n                });\n            }\n            this.parent.editableElement.focus();\n            save = this.parent.domNode.saveMarker(save);\n            if (isIDevice()) {\n                setEditFrameFocus(this.parent.editableElement, e.selector);\n            }\n            save.restore();\n        }\n        else {\n            setStyleAttribute(this.getTableNode(range)[0], { 'text-align': this.alignments[e.subCommand] });\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: (isTableAlign ? this.getTableNode(range) : this.parent.domNode.blockNodes())\n            });\n        }\n    };\n    return Alignments;\n}());\nexport { Alignments };\n","import * as CONSTANT from './../base/constant';\nimport * as EVENTS from './../../common/constant';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\n/**\n * Indents internal component\n *\n * @hidden\n * @deprecated\n */\nvar Indents = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     *\n     * @param {EditorManager} parent - specifies the parent element\n     * @hidden\n     * @deprecated\n     */\n    function Indents(parent) {\n        this.indentValue = 20;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Indents.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.INDENT_TYPE, this.applyIndents, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.onKeyDown, this);\n    };\n    Indents.prototype.onKeyDown = function (e) {\n        switch (e.event.action) {\n            case 'indents':\n                this.applyIndents({ subCommand: 'Indent', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'outdents':\n                this.applyIndents({ subCommand: 'Outdent', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n        }\n    };\n    Indents.prototype.applyIndents = function (e) {\n        var editEle = this.parent.editableElement;\n        var isRtl = editEle.classList.contains('e-rtl');\n        var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        var save = this.parent.nodeSelection.save(range, this.parent.currentDocument);\n        this.parent.domNode.setMarker(save);\n        var indentsNodes = this.parent.domNode.blockNodes();\n        var parentNodes = indentsNodes.slice();\n        var listsNodes = [];\n        for (var i = 0; i < parentNodes.length; i++) {\n            if (parentNodes[i].tagName !== 'LI' && 'LI' === parentNodes[i].parentNode.tagName) {\n                indentsNodes.splice(indentsNodes.indexOf(parentNodes[i]), 1);\n                listsNodes.push(parentNodes[i].parentNode);\n            }\n            else if (parentNodes[i].tagName === 'LI') {\n                indentsNodes.splice(indentsNodes.indexOf(parentNodes[i]), 1);\n                listsNodes.push(parentNodes[i]);\n            }\n        }\n        if (listsNodes.length > 0) {\n            this.parent.observer.notify(EVENTS.KEY_DOWN_HANDLER, {\n                event: {\n                    preventDefault: function () {\n                        return;\n                    },\n                    stopPropagation: function () {\n                        return;\n                    },\n                    shiftKey: (e.subCommand === 'Indent' ? false : true),\n                    which: 9,\n                    action: 'indent'\n                },\n                ignoreDefault: true\n            });\n        }\n        for (var i = 0; i < indentsNodes.length; i++) {\n            var parentNode = indentsNodes[i];\n            var marginLeftOrRight = isRtl ? parentNode.style.marginRight : parentNode.style.marginLeft;\n            var indentsValue = void 0;\n            if (e.subCommand === 'Indent') {\n                /* eslint-disable */\n                indentsValue = marginLeftOrRight === '' ? this.indentValue + 'px' : parseInt(marginLeftOrRight, null) + this.indentValue + 'px';\n                isRtl ? (parentNode.style.marginRight = indentsValue) : (parentNode.style.marginLeft = indentsValue);\n            }\n            else {\n                indentsValue = (marginLeftOrRight === '' || marginLeftOrRight === '0px') ? '' : parseInt(marginLeftOrRight, null) - this.indentValue + 'px';\n                isRtl ? (parentNode.style.marginRight = indentsValue) : (parentNode.style.marginLeft = indentsValue);\n                /* eslint-enable */\n            }\n        }\n        editEle.focus();\n        if (isIDevice()) {\n            setEditFrameFocus(editEle, e.selector);\n        }\n        save = this.parent.domNode.saveMarker(save);\n        save.restore();\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.domNode.blockNodes()\n            });\n        }\n    };\n    return Indents;\n}());\nexport { Indents };\n","/**\n * Rich Text Editor classes defined here.\n */\n/**\n * @hidden\n * @deprecated\n */\nexport var CLASS_IMAGE_RIGHT = 'e-imgright';\nexport var CLASS_IMAGE_LEFT = 'e-imgleft';\nexport var CLASS_IMAGE_CENTER = 'e-imgcenter';\nexport var CLASS_VIDEO_RIGHT = 'e-video-right';\nexport var CLASS_VIDEO_LEFT = 'e-video-left';\nexport var CLASS_VIDEO_CENTER = 'e-video-center';\nexport var CLASS_IMAGE_BREAK = 'e-imgbreak';\nexport var CLASS_AUDIO_BREAK = 'e-audio-break';\nexport var CLASS_VIDEO_BREAK = 'e-video-break';\nexport var CLASS_CAPTION = 'e-img-caption';\nexport var CLASS_RTE_CAPTION = 'e-rte-img-caption';\nexport var CLASS_CAPTION_INLINE = 'e-caption-inline';\nexport var CLASS_IMAGE_INLINE = 'e-imginline';\nexport var CLASS_AUDIO_INLINE = 'e-audio-inline';\nexport var CLASS_CLICK_ELEM = 'e-clickelem';\nexport var CLASS_VIDEO_CLICK_ELEM = 'e-video-clickelem';\nexport var CLASS_AUDIO = 'e-rte-audio';\nexport var CLASS_VIDEO = 'e-rte-video';\nexport var CLASS_AUDIO_WRAP = 'e-audio-wrap';\nexport var CLASS_VIDEO_WRAP = 'e-video-wrap';\nexport var CLASS_EMBED_VIDEO_WRAP = 'e-embed-video-wrap';\nexport var CLASS_AUDIO_FOCUS = 'e-audio-focus';\nexport var CLASS_VIDEO_FOCUS = 'e-video-focus';\nexport var CLASS_VIDEO_INLINE = 'e-video-inline';\n","import { createElement, isNullOrUndefined as isNOU, detach, closest, addClass, removeClass, select, Browser, formatUnit } from '@syncfusion/ej2-base';\nimport * as CONSTANT from './../base/constant';\nimport * as classes from './../base/classes';\nimport { InsertHtml } from './inserthtml';\n/**\n * Link internal component\n *\n * @hidden\n * @deprecated\n */\nvar ImageCommand = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     *\n     * @param {EditorManager} parent - specifies the parent element\n     * @hidden\n     * @deprecated\n     */\n    function ImageCommand(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    ImageCommand.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.IMAGE, this.imageCommand, this);\n    };\n    /**\n     * imageCommand method\n     *\n     * @param {IHtmlItem} e - specifies the element\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    ImageCommand.prototype.imageCommand = function (e) {\n        switch (e.value.toString().toLowerCase()) {\n            case 'image':\n            case 'replace':\n                this.createImage(e);\n                break;\n            case 'insertlink':\n                this.insertImageLink(e);\n                break;\n            case 'openimagelink':\n                this.openImageLink(e);\n                break;\n            case 'editimagelink':\n                this.editImageLink(e);\n                break;\n            case 'removeimagelink':\n                this.removeImageLink(e);\n                break;\n            case 'remove':\n                this.removeImage(e);\n                break;\n            case 'alttext':\n                this.insertAltTextImage(e);\n                break;\n            case 'dimension':\n                this.imageDimension(e);\n                break;\n            case 'caption':\n                this.imageCaption(e);\n                break;\n            case 'justifyleft':\n                this.imageJustifyLeft(e);\n                break;\n            case 'justifycenter':\n                this.imageJustifyCenter(e);\n                break;\n            case 'justifyright':\n                this.imageJustifyRight(e);\n                break;\n            case 'inline':\n                this.imageInline(e);\n                break;\n            case 'break':\n                this.imageBreak(e);\n                break;\n        }\n    };\n    ImageCommand.prototype.createImage = function (e) {\n        var _this = this;\n        var isReplaced = false;\n        e.item.url = isNOU(e.item.url) || e.item.url === 'undefined' ? e.item.src : e.item.url;\n        if (!isNOU(e.item.selectParent) && e.item.selectParent[0].tagName === 'IMG') {\n            var imgEle = e.item.selectParent[0];\n            this.setStyle(imgEle, e);\n            isReplaced = true;\n        }\n        else {\n            var imgElement = createElement('img');\n            this.setStyle(imgElement, e);\n            if (!isNOU(e.item.selection)) {\n                e.item.selection.restore();\n            }\n            if (!isNOU(e.selector) && e.selector === 'pasteCleanupModule') {\n                e.callBack({ requestType: 'Images',\n                    editorMode: 'HTML',\n                    event: e.event,\n                    range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                    elements: [imgElement]\n                });\n            }\n            else {\n                InsertHtml.Insert(this.parent.currentDocument, imgElement, this.parent.editableElement);\n            }\n        }\n        if (e.callBack && (isNOU(e.selector) || !isNOU(e.selector) && e.selector !== 'pasteCleanupModule')) {\n            var selectedNode = this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)[0];\n            var imgElm_1 = (e.value === 'Replace' || isReplaced) ? e.item.selectParent[0] :\n                (Browser.isIE ? selectedNode.previousSibling : selectedNode.previousElementSibling);\n            imgElm_1.addEventListener('load', function () {\n                if (e.value !== 'Replace' || !isReplaced) {\n                    e.callBack({\n                        requestType: 'Images',\n                        editorMode: 'HTML',\n                        event: e.event,\n                        range: _this.parent.nodeSelection.getRange(_this.parent.currentDocument),\n                        elements: [imgElm_1]\n                    });\n                }\n            });\n        }\n    };\n    ImageCommand.prototype.setStyle = function (imgElement, e) {\n        if (!isNOU(e.item.url)) {\n            imgElement.setAttribute('src', e.item.url);\n        }\n        imgElement.setAttribute('class', 'e-rte-image' + (isNOU(e.item.cssClass) ? '' : ' ' + e.item.cssClass));\n        if (!isNOU(e.item.altText)) {\n            imgElement.setAttribute('alt', e.item.altText);\n        }\n        if (!isNOU(e.item.width) && !isNOU(e.item.width.width)) {\n            imgElement.setAttribute('width', this.calculateStyleValue(e.item.width.width));\n        }\n        if (!isNOU(e.item.height) && !isNOU(e.item.height.height)) {\n            imgElement.setAttribute('height', this.calculateStyleValue(e.item.height.height));\n        }\n        if (!isNOU(e.item.width) && !isNOU(e.item.width.minWidth)) {\n            imgElement.style.minWidth = this.calculateStyleValue(e.item.width.minWidth);\n        }\n        if (!isNOU(e.item.width) && !isNOU(e.item.width.maxWidth)) {\n            imgElement.style.maxWidth = this.calculateStyleValue(e.item.width.maxWidth);\n        }\n        if (!isNOU(e.item.height) && !isNOU(e.item.height.minHeight)) {\n            imgElement.style.minHeight = this.calculateStyleValue(e.item.height.minHeight);\n        }\n        if (!isNOU(e.item.height) && !isNOU(e.item.height.maxHeight)) {\n            imgElement.style.maxHeight = this.calculateStyleValue(e.item.height.maxHeight);\n        }\n    };\n    ImageCommand.prototype.calculateStyleValue = function (value) {\n        var styleValue;\n        if (typeof (value) === 'string') {\n            if (value.indexOf('px') || value.indexOf('%') || value.indexOf('auto')) {\n                styleValue = value;\n            }\n            else {\n                styleValue = value + 'px';\n            }\n        }\n        else {\n            styleValue = value + 'px';\n        }\n        return styleValue;\n    };\n    ImageCommand.prototype.insertImageLink = function (e) {\n        var anchor = createElement('a', {\n            attrs: {\n                href: e.item.url\n            }\n        });\n        if (e.item.selectNode[0].parentElement.classList.contains('e-img-wrap')) {\n            e.item.selection.restore();\n            anchor.setAttribute('contenteditable', 'true');\n        }\n        anchor.appendChild(e.item.selectNode[0]);\n        if (!isNOU(e.item.target)) {\n            anchor.setAttribute('target', e.item.target);\n        }\n        InsertHtml.Insert(this.parent.currentDocument, anchor, this.parent.editableElement);\n        this.callBack(e);\n    };\n    ImageCommand.prototype.openImageLink = function (e) {\n        document.defaultView.open(e.item.url, e.item.target);\n        this.callBack(e);\n    };\n    ImageCommand.prototype.removeImageLink = function (e) {\n        var selectParent = e.item.selectParent[0];\n        if (selectParent.classList.contains('e-img-caption')) {\n            var capImgWrap = select('.e-img-wrap', selectParent);\n            var textEle = select('.e-img-inner', selectParent);\n            var newTextEle = textEle.cloneNode(true);\n            detach(select('a', selectParent));\n            detach(textEle);\n            capImgWrap.appendChild(e.item.insertElement);\n            capImgWrap.appendChild(newTextEle);\n        }\n        else {\n            detach(selectParent);\n            if (Browser.isIE && e.item.selection) {\n                e.item.selection.restore();\n            }\n            InsertHtml.Insert(this.parent.currentDocument, e.item.insertElement, this.parent.editableElement);\n        }\n        this.callBack(e);\n    };\n    ImageCommand.prototype.editImageLink = function (e) {\n        e.item.selectNode[0].parentElement.href = e.item.url;\n        if (isNOU(e.item.target)) {\n            e.item.selectNode[0].parentElement.removeAttribute('target');\n        }\n        else {\n            e.item.selectNode[0].parentElement.target = e.item.target;\n        }\n        this.callBack(e);\n    };\n    ImageCommand.prototype.removeImage = function (e) {\n        if (closest(e.item.selectNode[0], 'a')) {\n            if (e.item.selectNode[0].parentElement.nodeName === 'A' && !isNOU(e.item.selectNode[0].parentElement.innerText)) {\n                if (!isNOU(closest(e.item.selectNode[0], '.' + classes.CLASS_CAPTION))) {\n                    detach(closest(e.item.selectNode[0], '.' + classes.CLASS_CAPTION));\n                }\n                else {\n                    detach(e.item.selectNode[0]);\n                }\n            }\n            else {\n                detach(closest(e.item.selectNode[0], 'a'));\n            }\n        }\n        else if (!isNOU(closest(e.item.selectNode[0], '.' + classes.CLASS_CAPTION))) {\n            detach(closest(e.item.selectNode[0], '.' + classes.CLASS_CAPTION));\n        }\n        else {\n            detach(e.item.selectNode[0]);\n        }\n        this.callBack(e);\n    };\n    ImageCommand.prototype.insertAltTextImage = function (e) {\n        e.item.selectNode[0].setAttribute('alt', e.item.altText);\n        this.callBack(e);\n    };\n    ImageCommand.prototype.imageDimension = function (e) {\n        var selectNode = e.item.selectNode[0];\n        selectNode.style.height = '';\n        selectNode.style.width = '';\n        if (e.item.width !== 'auto') {\n            selectNode.style.width = formatUnit(e.item.width);\n        }\n        else {\n            selectNode.removeAttribute('width');\n        }\n        if (e.item.height !== 'auto') {\n            selectNode.style.height = formatUnit(e.item.height);\n        }\n        else {\n            selectNode.removeAttribute('height');\n        }\n        this.callBack(e);\n    };\n    ImageCommand.prototype.imageCaption = function (e) {\n        InsertHtml.Insert(this.parent.currentDocument, e.item.insertElement, this.parent.editableElement);\n        this.callBack(e);\n    };\n    ImageCommand.prototype.imageJustifyLeft = function (e) {\n        var selectNode = e.item.selectNode[0];\n        if (!isNOU(selectNode)) {\n            selectNode.removeAttribute('class');\n            addClass([selectNode], 'e-rte-image');\n            if (!isNOU(closest(selectNode, '.' + classes.CLASS_CAPTION))) {\n                removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_RIGHT);\n                addClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_LEFT);\n            }\n            if (selectNode.parentElement.nodeName === 'A') {\n                removeClass([selectNode.parentElement], classes.CLASS_IMAGE_RIGHT);\n                addClass([selectNode.parentElement], classes.CLASS_IMAGE_LEFT);\n                addClass([selectNode], classes.CLASS_IMAGE_LEFT);\n            }\n            else {\n                addClass([selectNode], classes.CLASS_IMAGE_LEFT);\n            }\n            this.callBack(e);\n        }\n    };\n    ImageCommand.prototype.imageJustifyCenter = function (e) {\n        var selectNode = e.item.selectNode[0];\n        if (!isNOU(selectNode)) {\n            selectNode.removeAttribute('class');\n            addClass([selectNode], 'e-rte-image');\n            if (!isNOU(closest(selectNode, '.' + classes.CLASS_CAPTION))) {\n                removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_LEFT);\n                removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_RIGHT);\n                addClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_CENTER);\n            }\n            if (selectNode.parentElement.nodeName === 'A') {\n                removeClass([selectNode.parentElement], classes.CLASS_IMAGE_LEFT);\n                removeClass([selectNode.parentElement], classes.CLASS_IMAGE_RIGHT);\n                addClass([selectNode.parentElement], classes.CLASS_IMAGE_CENTER);\n                addClass([selectNode], classes.CLASS_IMAGE_CENTER);\n            }\n            else {\n                addClass([selectNode], classes.CLASS_IMAGE_CENTER);\n            }\n            this.callBack(e);\n        }\n    };\n    ImageCommand.prototype.imageJustifyRight = function (e) {\n        var selectNode = e.item.selectNode[0];\n        if (!isNOU(selectNode)) {\n            selectNode.removeAttribute('class');\n            addClass([selectNode], 'e-rte-image');\n            if (!isNOU(closest(selectNode, '.' + classes.CLASS_CAPTION))) {\n                removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_LEFT);\n                addClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_RIGHT);\n            }\n            if (selectNode.parentElement.nodeName === 'A') {\n                removeClass([selectNode.parentElement], classes.CLASS_IMAGE_LEFT);\n                addClass([selectNode.parentElement], classes.CLASS_IMAGE_RIGHT);\n                addClass([selectNode], classes.CLASS_IMAGE_RIGHT);\n            }\n            else {\n                addClass([selectNode], classes.CLASS_IMAGE_RIGHT);\n            }\n            this.callBack(e);\n        }\n    };\n    ImageCommand.prototype.imageInline = function (e) {\n        var selectNode = e.item.selectNode[0];\n        selectNode.removeAttribute('class');\n        addClass([selectNode], 'e-rte-image');\n        addClass([selectNode], classes.CLASS_IMAGE_INLINE);\n        if (!isNOU(closest(selectNode, '.' + classes.CLASS_CAPTION))) {\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_BREAK);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_CENTER);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_LEFT);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_RIGHT);\n            addClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_CAPTION_INLINE);\n        }\n        this.callBack(e);\n    };\n    ImageCommand.prototype.imageBreak = function (e) {\n        var selectNode = e.item.selectNode[0];\n        selectNode.removeAttribute('class');\n        addClass([selectNode], classes.CLASS_IMAGE_BREAK);\n        addClass([selectNode], 'e-rte-image');\n        if (!isNOU(closest(selectNode, '.' + classes.CLASS_CAPTION))) {\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_CAPTION_INLINE);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_CENTER);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_LEFT);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_RIGHT);\n            addClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_BREAK);\n        }\n        this.callBack(e);\n    };\n    ImageCommand.prototype.callBack = function (e) {\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    return ImageCommand;\n}());\nexport { ImageCommand };\n","import { createElement, isNullOrUndefined as isNOU, detach, addClass, Browser } from '@syncfusion/ej2-base';\nimport * as CONSTANT from './../base/constant';\nimport * as classes from './../base/classes';\nimport { InsertHtml } from './inserthtml';\n/**\n * Audio internal component\n *\n * @hidden\n * @deprecated\n */\nvar AudioCommand = /** @class */ (function () {\n    /**\n     * Constructor for creating the Audio plugin\n     *\n     * @param {EditorManager} parent - specifies the parent element\n     * @hidden\n     * @deprecated\n     */\n    function AudioCommand(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    AudioCommand.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.AUDIO, this.audioCommand, this);\n    };\n    /**\n     * audioCommand method\n     *\n     * @param {IHtmlItem} e - specifies the element\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    AudioCommand.prototype.audioCommand = function (e) {\n        var selectNode;\n        var value = e.value.toString().toLowerCase();\n        if (value === 'inline' || value === 'break' || value === 'audioremove') {\n            selectNode = e.item.selectNode[0];\n        }\n        switch (value) {\n            case 'audio':\n            case 'audioreplace':\n                this.createAudio(e);\n                break;\n            case 'inline':\n                selectNode.removeAttribute('class');\n                selectNode.closest('.' + classes.CLASS_AUDIO_WRAP).style.display = 'inline-block';\n                addClass([selectNode], [classes.CLASS_AUDIO, classes.CLASS_AUDIO_INLINE, classes.CLASS_AUDIO_FOCUS]);\n                this.callBack(e);\n                break;\n            case 'break':\n                selectNode.removeAttribute('class');\n                selectNode.closest('.' + classes.CLASS_AUDIO_WRAP).style.display = 'block';\n                addClass([selectNode], [classes.CLASS_AUDIO_BREAK, classes.CLASS_AUDIO, classes.CLASS_AUDIO_FOCUS]);\n                this.callBack(e);\n                break;\n            case 'audioremove':\n                detach(selectNode);\n                this.callBack(e);\n                break;\n        }\n    };\n    AudioCommand.prototype.createAudio = function (e) {\n        var _this = this;\n        var isReplaced = false;\n        var wrapElement;\n        if (!isNOU(e.item.selectParent) && e.item.selectParent[0].classList &&\n            (e.item.selectParent[0].classList.contains(classes.CLASS_CLICK_ELEM) ||\n                e.item.selectParent[0].classList.contains(classes.CLASS_AUDIO_WRAP))) {\n            var audioEle = e.item.selectParent[0].querySelector('source');\n            this.setStyle(audioEle, e);\n            isReplaced = true;\n        }\n        else {\n            wrapElement = createElement('span', { className: classes.CLASS_AUDIO_WRAP, attrs: { contentEditable: 'false', title: e.item.fileName } });\n            var audElement = createElement('audio', { className: classes.CLASS_AUDIO + ' ' + classes.CLASS_AUDIO_INLINE, attrs: { controls: '' } });\n            var sourceElement = createElement('source');\n            var clickElement = createElement('span', { className: classes.CLASS_CLICK_ELEM });\n            this.setStyle(sourceElement, e);\n            audElement.appendChild(sourceElement);\n            clickElement.appendChild(audElement);\n            wrapElement.appendChild(clickElement);\n            if (!isNOU(e.item.selection)) {\n                e.item.selection.restore();\n            }\n            InsertHtml.Insert(this.parent.currentDocument, wrapElement, this.parent.editableElement);\n            if (wrapElement.nextElementSibling === null) {\n                var insertElem = createElement('br');\n                wrapElement.parentNode.insertBefore(insertElem, wrapElement.nextSibling);\n            }\n        }\n        if (e.callBack && (isNOU(e.selector) || !isNOU(e.selector) && e.selector !== 'pasteCleanupModule')) {\n            var selectedNode = this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)[0];\n            var audioElm_1 = (e.value === 'AudioReplace' || isReplaced) ? e.item.selectParent[0].querySelector('audio')\n                : (Browser.isIE ? selectedNode : selectedNode.querySelector('audio'));\n            audioElm_1.addEventListener('loadeddata', function () {\n                if (e.value !== 'AudioReplace' || !isReplaced) {\n                    e.callBack({\n                        requestType: 'Audios',\n                        editorMode: 'HTML',\n                        event: e.event,\n                        range: _this.parent.nodeSelection.getRange(_this.parent.currentDocument),\n                        elements: [audioElm_1]\n                    });\n                }\n            });\n            if (isReplaced) {\n                audioElm_1.load();\n            }\n        }\n    };\n    AudioCommand.prototype.setStyle = function (sourceElement, e) {\n        if (!isNOU(e.item.url)) {\n            sourceElement.setAttribute('src', e.item.url);\n        }\n        sourceElement.type = e.item.fileName && e.item.fileName.split('.').length > 0 ?\n            'audio/' + e.item.fileName.split('.')[e.item.fileName.split('.').length - 1] :\n            e.item.url && e.item.url.split('.').length > 0 ? 'audio/' + e.item.url.split('.')[e.item.url.split('.').length - 1] : '';\n    };\n    AudioCommand.prototype.callBack = function (e) {\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    return AudioCommand;\n}());\nexport { AudioCommand };\n","import { createElement, isNullOrUndefined as isNOU, detach, addClass, Browser, formatUnit } from '@syncfusion/ej2-base';\nimport * as CONSTANT from './../base/constant';\nimport * as classes from './../base/classes';\nimport { InsertHtml } from './inserthtml';\n/**\n * Video internal component\n *\n * @hidden\n * @deprecated\n */\nvar VideoCommand = /** @class */ (function () {\n    /**\n     * Constructor for creating the Video plugin\n     *\n     * @param {EditorManager} parent - specifies the parent element\n     * @hidden\n     * @deprecated\n     */\n    function VideoCommand(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    VideoCommand.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.VIDEO, this.videoCommand, this);\n    };\n    /**\n     * videoCommand method\n     *\n     * @param {IHtmlItem} e - specifies the element\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    VideoCommand.prototype.videoCommand = function (e) {\n        var selectNode;\n        var videoWrapNode;\n        var videoClickElem;\n        var value = e.value.toString().toLowerCase();\n        if (value !== 'video' && value !== 'videoreplace') {\n            selectNode = e.item.selectNode[0];\n            videoWrapNode = selectNode.closest('.' + classes.CLASS_EMBED_VIDEO_WRAP);\n            videoClickElem = selectNode.closest('.' + classes.CLASS_VIDEO_CLICK_ELEM);\n        }\n        switch (value) {\n            case 'video':\n            case 'videoreplace':\n                this.createVideo(e);\n                break;\n            case 'videodimension':\n                this.videoDimension(e);\n                break;\n            case 'inline':\n                selectNode.removeAttribute('class');\n                if (videoWrapNode) {\n                    videoWrapNode.style.display = 'inline-block';\n                }\n                if (videoClickElem) {\n                    selectNode.parentElement.style.cssFloat = '';\n                }\n                addClass([selectNode], [classes.CLASS_VIDEO, classes.CLASS_VIDEO_INLINE, classes.CLASS_VIDEO_FOCUS]);\n                this.callBack(e);\n                break;\n            case 'break':\n                selectNode.removeAttribute('class');\n                if (videoWrapNode) {\n                    videoWrapNode.style.display = 'block';\n                }\n                if (videoClickElem) {\n                    selectNode.parentElement.style.cssFloat = '';\n                }\n                addClass([selectNode], [classes.CLASS_VIDEO_BREAK, classes.CLASS_VIDEO, classes.CLASS_VIDEO_FOCUS]);\n                this.callBack(e);\n                break;\n            case 'justifyleft':\n                selectNode.removeAttribute('class');\n                if (videoWrapNode) {\n                    videoWrapNode.style.display = 'block';\n                }\n                if (videoClickElem) {\n                    selectNode.parentElement.style.cssFloat = 'left';\n                }\n                addClass([selectNode], [classes.CLASS_VIDEO, classes.CLASS_VIDEO_LEFT]);\n                this.callBack(e);\n                break;\n            case 'justifycenter':\n                selectNode.removeAttribute('class');\n                if (videoWrapNode) {\n                    videoWrapNode.style.display = 'block';\n                }\n                if (videoClickElem) {\n                    selectNode.parentElement.style.cssFloat = '';\n                }\n                addClass([selectNode], [classes.CLASS_VIDEO, classes.CLASS_VIDEO_CENTER]);\n                this.callBack(e);\n                break;\n            case 'justifyright':\n                selectNode.removeAttribute('class');\n                if (videoWrapNode) {\n                    videoWrapNode.style.display = 'block';\n                }\n                if (videoClickElem) {\n                    selectNode.parentElement.style.cssFloat = 'right';\n                }\n                addClass([selectNode], [classes.CLASS_VIDEO, classes.CLASS_VIDEO_RIGHT]);\n                this.callBack(e);\n                break;\n            case 'videoremove':\n                detach(selectNode.parentElement);\n                this.callBack(e);\n                break;\n        }\n    };\n    VideoCommand.prototype.createVideo = function (e) {\n        var _this = this;\n        var isReplaced = false;\n        var wrapElement;\n        var vidElement;\n        var sourceElement;\n        if (e.value === 'VideoReplace' && !isNOU(e.item.selectParent) && (e.item.selectParent[0].tagName === 'VIDEO')) {\n            var videoEle = e.item.selectParent[0].querySelector('source');\n            this.setStyle(videoEle, e, videoEle);\n            isReplaced = true;\n        }\n        else if (e.value === 'VideoReplace' && !isNOU(e.item.selectParent) &&\n            e.item.selectParent[0].classList &&\n            e.item.selectParent[0].classList.contains(classes.CLASS_VIDEO_CLICK_ELEM)) {\n            e.item.selectParent[0].innerHTML = e.item.fileName;\n            this.setStyle(e.item.selectParent[0].firstElementChild, e, e.item.selectParent[0].firstElementChild);\n        }\n        else {\n            if (!e.item.isEmbedUrl) {\n                wrapElement = createElement('span', { className: classes.CLASS_VIDEO_WRAP, attrs: { contentEditable: 'false', title: e.item.fileName } });\n                vidElement = createElement('video', { className: classes.CLASS_VIDEO + ' ' + classes.CLASS_VIDEO_INLINE, attrs: { controls: '' } });\n                sourceElement = createElement('source');\n                this.setStyle(sourceElement, e, vidElement);\n                vidElement.appendChild(sourceElement);\n                wrapElement.appendChild(vidElement);\n            }\n            else {\n                wrapElement = createElement('span', { className: classes.CLASS_EMBED_VIDEO_WRAP, attrs: { contentEditable: 'false' } });\n                var clickElement = createElement('span', { className: classes.CLASS_VIDEO_CLICK_ELEM });\n                var temp = createElement('template');\n                temp.innerHTML = e.item.fileName;\n                clickElement.appendChild(temp.content);\n                vidElement = sourceElement = clickElement.firstElementChild;\n                this.setStyle(sourceElement, e, vidElement);\n                wrapElement.appendChild(clickElement);\n            }\n            if (!isNOU(e.item.selection)) {\n                e.item.selection.restore();\n            }\n            InsertHtml.Insert(this.parent.currentDocument, wrapElement, this.parent.editableElement);\n            if (wrapElement.nextElementSibling === null) {\n                var insertElem = createElement('br');\n                wrapElement.parentNode.insertBefore(insertElem, wrapElement.nextSibling);\n            }\n        }\n        if (e.callBack && (isNOU(e.selector) || !isNOU(e.selector) && e.selector !== 'pasteCleanupModule')) {\n            var selectedNode = this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)[0];\n            var videoElm_1 = (e.value === 'VideoReplace' || isReplaced) ? !e.item.isEmbedUrl ? e.item.selectParent[0] : e.item.selectParent[0].querySelector('iframe')\n                : (Browser.isIE ? selectedNode : !e.item.isEmbedUrl ? selectedNode.lastElementChild : selectedNode.querySelector('iframe'));\n            videoElm_1.addEventListener(videoElm_1.tagName !== 'IFRAME' ? 'loadeddata' : 'load', function () {\n                if (e.value !== 'VideoReplace' || !isReplaced) {\n                    if (e.item.isEmbedUrl && videoElm_1) {\n                        videoElm_1.classList.add('e-rte-embed-url');\n                    }\n                    e.callBack({\n                        requestType: 'Videos',\n                        editorMode: 'HTML',\n                        event: e.event,\n                        range: _this.parent.nodeSelection.getRange(_this.parent.currentDocument),\n                        elements: [videoElm_1]\n                    });\n                }\n            });\n            if (isReplaced) {\n                videoElm_1.load();\n            }\n            if (Browser.userAgent.indexOf('Firefox') !== -1) {\n                vidElement.addEventListener('play', function () { _this.editAreaVideoClick(e); });\n                vidElement.addEventListener('pause', function () { _this.editAreaVideoClick(e); });\n            }\n        }\n    };\n    VideoCommand.prototype.editAreaVideoClick = function (e) {\n        e.callBack({\n            requestType: 'VideosPlayPause',\n            editorMode: 'HTML',\n            event: e.event\n        });\n    };\n    VideoCommand.prototype.setStyle = function (sourceElement, e, videoEle) {\n        if (e.item.url !== '' && !isNOU(e.item.url)) {\n            sourceElement.setAttribute('src', e.item.url);\n        }\n        if (!e.item.isEmbedUrl) {\n            sourceElement.type = e.item.fileName && e.item.fileName.split('.').length > 0 ?\n                'video/' + e.item.fileName.split('.')[e.item.fileName.split('.').length - 1] :\n                e.item.url && e.item.url.split('.').length > 0 ? 'video/' + e.item.url.split('.')[e.item.url.split('.').length - 1] : '';\n        }\n        if (!isNOU(e.item.width) && !isNOU(e.item.width.width)) {\n            videoEle.setAttribute('width', formatUnit(e.item.width.width));\n        }\n        if (!isNOU(e.item.height) && !isNOU(e.item.height.height)) {\n            videoEle.setAttribute('height', formatUnit(e.item.height.height));\n        }\n        if (!isNOU(e.item.width) && !isNOU(e.item.width.minWidth)) {\n            videoEle.style.minWidth = formatUnit(e.item.width.minWidth);\n        }\n        if (!isNOU(e.item.width) && !isNOU(e.item.width.maxWidth)) {\n            videoEle.style.maxWidth = formatUnit(e.item.width.maxWidth);\n        }\n        if (!isNOU(e.item.height) && !isNOU(e.item.height.minHeight)) {\n            videoEle.style.minHeight = formatUnit(e.item.height.minHeight);\n        }\n        if (!isNOU(e.item.height) && !isNOU(e.item.height.maxHeight)) {\n            videoEle.style.maxHeight = formatUnit(e.item.height.maxHeight);\n        }\n    };\n    VideoCommand.prototype.videoDimension = function (e) {\n        var selectNode = !(e.item.selectNode[0].classList.contains(classes.CLASS_VIDEO_CLICK_ELEM)) ? e.item.selectNode[0] :\n            e.item.selectNode[0].querySelector('iframe');\n        selectNode.style.height = '';\n        selectNode.style.width = '';\n        if (e.item.width !== 'auto') {\n            selectNode.style.width = formatUnit(e.item.width);\n        }\n        else {\n            selectNode.removeAttribute('width');\n        }\n        if (e.item.height !== 'auto') {\n            selectNode.style.height = formatUnit(e.item.height);\n        }\n        else {\n            selectNode.removeAttribute('height');\n        }\n        this.callBack(e);\n    };\n    VideoCommand.prototype.callBack = function (e) {\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    return VideoCommand;\n}());\nexport { VideoCommand };\n","import { createElement, closest, detach, Browser, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport * as CONSTANT from './../base/constant';\nimport { InsertHtml } from './inserthtml';\n/**\n * Link internal component\n *\n * @hidden\n * @deprecated\n */\nvar TableCommand = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     *\n     * @param {EditorManager} parent - specifies the parent element\n     * @hidden\n     * @deprecated\n     */\n    function TableCommand(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    TableCommand.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.TABLE, this.createTable, this);\n        this.parent.observer.on(CONSTANT.INSERT_ROW, this.insertRow, this);\n        this.parent.observer.on(CONSTANT.INSERT_COLUMN, this.insertColumn, this);\n        this.parent.observer.on(CONSTANT.DELETEROW, this.deleteRow, this);\n        this.parent.observer.on(CONSTANT.DELETECOLUMN, this.deleteColumn, this);\n        this.parent.observer.on(CONSTANT.REMOVETABLE, this.removeTable, this);\n        this.parent.observer.on(CONSTANT.TABLEHEADER, this.tableHeader, this);\n        this.parent.observer.on(CONSTANT.TABLE_VERTICAL_ALIGN, this.tableVerticalAlign, this);\n        this.parent.observer.on(CONSTANT.TABLE_MERGE, this.cellMerge, this);\n        this.parent.observer.on(CONSTANT.TABLE_HORIZONTAL_SPLIT, this.HorizontalSplit, this);\n        this.parent.observer.on(CONSTANT.TABLE_VERTICAL_SPLIT, this.VerticalSplit, this);\n        this.parent.observer.on(CONSTANT.TABLE_MOVE, this.tableMove, this);\n    };\n    TableCommand.prototype.createTable = function (e) {\n        var table = createElement('table', { className: 'e-rte-table' });\n        var tblBody = createElement('tbody');\n        if (!isNOU(e.item.width.width)) {\n            table.style.width = this.calculateStyleValue(e.item.width.width);\n        }\n        if (!isNOU(e.item.width.minWidth)) {\n            table.style.minWidth = this.calculateStyleValue(e.item.width.minWidth);\n        }\n        if (!isNOU(e.item.width.maxWidth)) {\n            table.style.maxWidth = this.calculateStyleValue(e.item.width.maxWidth);\n        }\n        var tdWid = parseInt(e.item.width.width, 10) > 100 ?\n            100 / e.item.columns : parseInt(e.item.width.width, 10) / e.item.columns;\n        for (var i = 0; i < e.item.rows; i++) {\n            var row = createElement('tr');\n            for (var j = 0; j < e.item.columns; j++) {\n                var cell = createElement('td');\n                cell.appendChild(createElement('br'));\n                cell.style.width = tdWid + '%';\n                row.appendChild(cell);\n            }\n            tblBody.appendChild(row);\n        }\n        table.appendChild(tblBody);\n        e.item.selection.restore();\n        InsertHtml.Insert(this.parent.currentDocument, table, this.parent.editableElement);\n        this.removeEmptyNode();\n        e.item.selection.setSelectionText(this.parent.currentDocument, table.querySelector('td'), table.querySelector('td'), 0, 0);\n        if (table.nextElementSibling === null) {\n            var insertElem = void 0;\n            if (e.enterAction === 'DIV') {\n                insertElem = createElement('div');\n                insertElem.appendChild(createElement('br'));\n            }\n            else if (e.enterAction === 'BR') {\n                insertElem = createElement('br');\n            }\n            else {\n                insertElem = createElement('p');\n                insertElem.appendChild(createElement('br'));\n            }\n            this.insertAfter(insertElem, table);\n        }\n        table.querySelector('td').classList.add('e-cell-select');\n        if (e.callBack) {\n            e.callBack({\n                requestType: 'Table',\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: [table]\n            });\n        }\n        return table;\n    };\n    TableCommand.prototype.calculateStyleValue = function (value) {\n        var styleValue;\n        if (typeof (value) === 'string') {\n            if (value.indexOf('px') >= 0 || value.indexOf('%') >= 0 || value.indexOf('auto') >= 0) {\n                styleValue = value;\n            }\n            else {\n                styleValue = value + 'px';\n            }\n        }\n        else {\n            styleValue = value + 'px';\n        }\n        return styleValue;\n    };\n    TableCommand.prototype.removeEmptyNode = function () {\n        var emptyUl = this.parent.editableElement.querySelectorAll('ul:empty, ol:empty');\n        for (var i = 0; i < emptyUl.length; i++) {\n            detach(emptyUl[i]);\n        }\n        var emptyLiChild = this.parent.editableElement.querySelectorAll('li *:empty:not(img)');\n        for (var i = 0; i < emptyLiChild.length; i++) {\n            detach(emptyLiChild[i]);\n            if (emptyLiChild.length === i + 1) {\n                emptyLiChild = this.parent.editableElement.querySelectorAll('li *:empty:not(img)');\n                i = -1;\n            }\n        }\n        var emptyLi = this.parent.editableElement.querySelectorAll('li:empty');\n        for (var i = 0; i < emptyLi.length; i++) {\n            detach(emptyLi[i]);\n        }\n    };\n    TableCommand.prototype.insertAfter = function (newNode, referenceNode) {\n        referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n    };\n    TableCommand.prototype.getSelectedCellMinMaxIndex = function (e) {\n        var selectedCells = this.curTable.querySelectorAll('.e-cell-select');\n        var a = 0;\n        var minI = e.length;\n        var maxI = 0;\n        var minJ = e[0].length;\n        var maxJ = 0;\n        //eslint-disable-next-line\n        for (var i = 0; a < selectedCells.length; a++) {\n            var selectedCellIndex = this.getCorrespondingIndex(selectedCells[a], e);\n            var minMaxIndex = this.FindIndex(selectedCellIndex[0], selectedCellIndex[1], e);\n            //eslint-disable-next-line\n            minI = Math.min(selectedCellIndex[0], minI),\n                maxI = Math.max(minMaxIndex[0], maxI),\n                minJ = Math.min(selectedCellIndex[1], minJ),\n                maxJ = Math.max(minMaxIndex[1], maxJ);\n        }\n        return {\n            startRow: minI,\n            endRow: maxI,\n            startColumn: minJ,\n            endColumn: maxJ\n        };\n    };\n    TableCommand.prototype.insertRow = function (e) {\n        var isBelow = e.item.subCommand === 'InsertRowBefore' ? false : true;\n        var selectedCell = e.item.selection.range.startContainer;\n        if (!(selectedCell.nodeName === 'TH' || selectedCell.nodeName === 'TD')) {\n            selectedCell = closest(selectedCell.parentElement, 'td,th');\n        }\n        if (selectedCell.nodeName.toLowerCase() === 'th' && e.item.subCommand === 'InsertRowBefore') {\n            return;\n        }\n        this.curTable = closest(this.parent.nodeSelection.range.startContainer.parentElement, 'table');\n        if (this.curTable.querySelectorAll('.e-cell-select').length === 0) {\n            var lastRow = this.curTable.rows[this.curTable.rows.length - 1];\n            var cloneRow = lastRow.cloneNode(true);\n            cloneRow.removeAttribute('rowspan');\n            this.insertAfter(cloneRow, lastRow);\n        }\n        else {\n            var allCells = this.getCorrespondingColumns();\n            var minMaxIndex = this.getSelectedCellMinMaxIndex(allCells);\n            var minVal = isBelow ? minMaxIndex.endRow : minMaxIndex.startRow;\n            var newRow = createElement('tr');\n            var isHeaderSelect = this.curTable.querySelectorAll('th.e-cell-select').length > 0;\n            for (var i = 0; i < allCells[minVal].length; i++) {\n                // eslint-disable-next-line max-len\n                if (isBelow && minVal < allCells.length - 1 && allCells[minVal][i] === allCells[minVal + 1][i] ||\n                    !isBelow && 0 < minVal && allCells[minVal][i] === allCells[minVal - 1][i]) {\n                    if (0 === i || 0 < i && allCells[minVal][i] !== allCells[minVal][i - 1]) {\n                        allCells[minVal][i].setAttribute('rowspan', (parseInt(allCells[minVal][i].getAttribute('rowspan'), 10) + 1).toString());\n                    }\n                }\n                else {\n                    var tdElement = createElement('td');\n                    tdElement.appendChild(createElement('br'));\n                    newRow.appendChild(tdElement);\n                    tdElement.setAttribute('style', allCells[(isHeaderSelect && isBelow) ? allCells[(minVal + 1)] ? (minVal + 1) : minVal : minVal][i].getAttribute('style'));\n                }\n            }\n            // eslint-disable-next-line\n            var selectedRow = void 0;\n            if (isHeaderSelect && isBelow) {\n                selectedRow = this.curTable.querySelector('tbody').childNodes[0];\n            }\n            else {\n                selectedRow = this.curTable.rows[minVal];\n            }\n            // eslint-disable-next-line\n            (e.item.subCommand === 'InsertRowBefore') ? selectedRow.parentElement.insertBefore(newRow, selectedRow) :\n                (isHeaderSelect ? selectedRow.parentElement.insertBefore(newRow, selectedRow) :\n                    this.insertAfter(newRow, selectedRow));\n        }\n        e.item.selection.setSelectionText(this.parent.currentDocument, e.item.selection.range.startContainer, e.item.selection.range.startContainer, 0, 0);\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.insertColumn = function (e) {\n        var selectedCell = e.item.selection.range.startContainer;\n        if (!(selectedCell.nodeName === 'TH' || selectedCell.nodeName === 'TD')) {\n            selectedCell = closest(selectedCell.parentElement, 'td,th');\n        }\n        var curRow = closest(selectedCell, 'tr');\n        var curCell;\n        var allRows = closest((curRow), 'table').rows;\n        var colIndex = Array.prototype.slice.call(curRow.querySelectorAll(':scope > td, :scope > th')).indexOf(selectedCell);\n        var previousWidth = parseInt(e.item.width, 10) / (curRow.querySelectorAll(':scope > td, :scope > th').length);\n        var currentWidth = parseInt(e.item.width, 10) / (curRow.querySelectorAll(':scope > td, :scope > th').length + 1);\n        var currentTabElm = closest(curRow, 'table');\n        var thTdElm = closest(curRow, 'table').querySelectorAll('th,td');\n        for (var i = 0; i < thTdElm.length; i++) {\n            thTdElm[i].dataset.oldWidth = (thTdElm[i].offsetWidth / currentTabElm.offsetWidth * 100) + '%';\n        }\n        for (var i = 0; i < allRows.length; i++) {\n            curCell = allRows[i].querySelectorAll(':scope > td, :scope > th')[colIndex];\n            var colTemplate = curCell.cloneNode(true);\n            colTemplate.innerHTML = '';\n            colTemplate.appendChild(createElement('br'));\n            colTemplate.removeAttribute('class');\n            colTemplate.removeAttribute('colspan');\n            colTemplate.removeAttribute('rowspan');\n            // eslint-disable-next-line\n            (e.item.subCommand === 'InsertColumnLeft') ? curCell.parentElement.insertBefore(colTemplate, curCell) :\n                this.insertAfter(colTemplate, curCell);\n            colTemplate.style.width = currentWidth.toFixed(4) + '%';\n            delete colTemplate.dataset.oldWidth;\n        }\n        for (var i = 0; i < thTdElm.length; i++) {\n            thTdElm[i].style.width = (Number(thTdElm[i].dataset.oldWidth.split('%')[0]) * currentWidth / previousWidth).toFixed(4) + '%';\n            delete thTdElm[i].dataset.oldWidth;\n        }\n        e.item.selection.setSelectionText(this.parent.currentDocument, selectedCell, selectedCell, 0, 0);\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.deleteColumn = function (e) {\n        var selectedCell = e.item.selection.range.startContainer;\n        if (selectedCell.nodeType === 3) {\n            selectedCell = closest(selectedCell.parentElement, 'td,th');\n        }\n        var tBodyHeadEle = closest(selectedCell, selectedCell.tagName === 'TH' ? 'thead' : 'tbody');\n        var rowIndex = tBodyHeadEle && Array.prototype.indexOf.call(tBodyHeadEle.childNodes, selectedCell.parentNode);\n        this.curTable = closest(selectedCell, 'table');\n        var curRow = closest(selectedCell, 'tr');\n        if (curRow.querySelectorAll('th,td').length === 1) {\n            e.item.selection.restore();\n            detach(closest(selectedCell.parentElement, 'table'));\n        }\n        else {\n            var deleteIndex = void 0;\n            var allCells = this.getCorrespondingColumns();\n            //eslint-disable-next-line\n            var selectedMinMaxIndex = this.getSelectedCellMinMaxIndex(allCells);\n            var minCol = selectedMinMaxIndex.startColumn;\n            var maxCol = selectedMinMaxIndex.endColumn;\n            for (var i = 0; i < allCells.length; i++) {\n                var currentRow = allCells[i];\n                for (var j = 0; j < currentRow.length; j++) {\n                    var currentCell = currentRow[j];\n                    //eslint-disable-next-line\n                    var currentCellIndex = this.getCorrespondingIndex(currentCell, allCells);\n                    var colSpanVal = parseInt(currentCell.getAttribute('colspan'), 10) || 1;\n                    if (currentCellIndex[1] + (colSpanVal - 1) >= minCol && currentCellIndex[1] <= maxCol) {\n                        if (colSpanVal > 1) {\n                            currentCell.setAttribute('colspan', (colSpanVal - 1).toString());\n                        }\n                        else {\n                            detach(currentCell);\n                            deleteIndex = j;\n                            if (Browser.isIE) {\n                                e.item.selection.setSelectionText(this.parent.currentDocument, this.curTable.querySelector('td'), this.curTable.querySelector('td'), 0, 0);\n                                this.curTable.querySelector('td, th').classList.add('e-cell-select');\n                            }\n                        }\n                    }\n                }\n            }\n            if (deleteIndex > -1) {\n                var rowHeadEle = tBodyHeadEle.children[rowIndex];\n                var nextFocusCell = rowHeadEle &&\n                    rowHeadEle.children[(deleteIndex <= rowHeadEle.children.length - 1 ? deleteIndex : deleteIndex - 1)];\n                if (nextFocusCell) {\n                    e.item.selection.setSelectionText(this.parent.currentDocument, nextFocusCell, nextFocusCell, 0, 0);\n                    nextFocusCell.classList.add('e-cell-select');\n                }\n            }\n        }\n        if (e.callBack) {\n            var sContainer = this.parent.nodeSelection.getRange(this.parent.currentDocument).startContainer;\n            if (sContainer.nodeName !== 'TD') {\n                var startChildLength = this.parent.nodeSelection.getRange(this.parent.currentDocument).startOffset;\n                var focusNode = sContainer.children[startChildLength];\n                if (focusNode) {\n                    this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument, focusNode, 0);\n                }\n            }\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.deleteRow = function (e) {\n        var selectedCell = e.item.selection.range.startContainer;\n        if (selectedCell.nodeType === 3) {\n            selectedCell = closest(selectedCell.parentElement, 'td,th');\n        }\n        var colIndex = Array.prototype.indexOf.call(selectedCell.parentNode.childNodes, selectedCell);\n        this.curTable = closest(selectedCell, 'table');\n        var currentRow;\n        var allCells = this.getCorrespondingColumns();\n        var minMaxIndex = this.getSelectedCellMinMaxIndex(allCells);\n        var maxI;\n        var j;\n        if (this.curTable.rows.length === 1) {\n            e.item.selection.restore();\n            detach(closest(selectedCell.parentElement, 'table'));\n        }\n        else {\n            for (maxI = minMaxIndex.endRow; maxI >= minMaxIndex.startRow; maxI--) {\n                currentRow = this.curTable.rows[maxI];\n                for (j = 0; j < allCells[maxI].length; j++) {\n                    if (j === 0 || allCells[maxI][j] !== allCells[maxI][j - 1]) {\n                        if (1 < parseInt(allCells[maxI][j].getAttribute('rowspan'), 10)) {\n                            var rowSpanVal = parseInt(allCells[maxI][j].getAttribute('rowspan'), 10) - 1;\n                            /* eslint-disable */\n                            if (1 === rowSpanVal) {\n                                allCells[maxI][j].removeAttribute('rowspan');\n                                var cell = this.getMergedRow(this.getCorrespondingColumns())[j];\n                                if (cell) {\n                                    var cloneNode = cell.cloneNode(true);\n                                    cloneNode.innerHTML = '<br>';\n                                    if (cell.parentElement) {\n                                        cell.parentElement.insertBefore(cloneNode, cell);\n                                    }\n                                }\n                            }\n                            else {\n                                allCells[maxI][j].setAttribute('rowspan', rowSpanVal.toString());\n                            }\n                            /* eslint-enable */\n                        }\n                    }\n                    // eslint-disable-next-line max-len\n                    if (maxI < allCells.length - 1 && allCells[maxI][j] === allCells[maxI + 1][j] && (0 === maxI ||\n                        allCells[maxI][j] !== allCells[maxI - 1][j])) {\n                        var element = allCells[maxI][j];\n                        var index = void 0;\n                        // eslint-disable-next-line max-len\n                        for (index = j; 0 < index && allCells[maxI][index] === allCells[maxI][index - 1]; index--) {\n                            if (index === 0) {\n                                this.curTable.rows[maxI + 1].prepend(element);\n                            }\n                            else {\n                                allCells[maxI + 1][index - 1].insertAdjacentElement('afterend', element);\n                            }\n                        }\n                    }\n                }\n                var deleteIndex = currentRow.rowIndex;\n                this.curTable.deleteRow(deleteIndex);\n                var focusTrEle = !isNOU(this.curTable.rows[deleteIndex]) ? this.curTable.querySelectorAll('tbody tr')[deleteIndex]\n                    : this.curTable.querySelectorAll('tbody tr')[deleteIndex - 1];\n                var nextFocusCell = focusTrEle && focusTrEle.querySelectorAll('td')[colIndex];\n                if (nextFocusCell) {\n                    e.item.selection.setSelectionText(this.parent.currentDocument, nextFocusCell, nextFocusCell, 0, 0);\n                    nextFocusCell.classList.add('e-cell-select');\n                }\n                else {\n                    e.item.selection.setSelectionText(this.parent.currentDocument, this.curTable.querySelector('td'), this.curTable.querySelector('td'), 0, 0);\n                    this.curTable.querySelector('td, th').classList.add('e-cell-select');\n                }\n            }\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.getMergedRow = function (cells) {\n        var mergedRow;\n        for (var i = 0; i < cells.length; i++) {\n            if (cells[i].length !== this.curTable.rows[0].childNodes.length) {\n                mergedRow = cells[i];\n            }\n        }\n        return mergedRow;\n    };\n    TableCommand.prototype.removeTable = function (e) {\n        var selectedCell = e.item.selection.range.startContainer;\n        selectedCell = (selectedCell.nodeType === 3) ? selectedCell.parentNode : selectedCell;\n        var selectedTable = closest(selectedCell.parentElement, 'table');\n        if (selectedTable) {\n            e.item.selection.restore();\n            detach(selectedTable);\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.tableHeader = function (e) {\n        var headerExit = false;\n        var selectedCell = e.item.selection.range.startContainer;\n        selectedCell = (selectedCell.nodeType === 3) ? selectedCell.parentNode : selectedCell;\n        var table = closest(selectedCell.parentElement, 'table');\n        [].slice.call(table.childNodes).forEach(function (el) {\n            if (el.nodeName === 'THEAD') {\n                headerExit = true;\n            }\n        });\n        if (table && !headerExit) {\n            var cellCount = table.querySelector('tr').childElementCount;\n            var colSpanCount = 0;\n            for (var i = 0; i < cellCount; i++) {\n                colSpanCount = colSpanCount + (parseInt(table.querySelector('tr').children[i].getAttribute('colspan'), 10) || 1);\n            }\n            var header = table.createTHead();\n            var row = header.insertRow(0);\n            for (var j = 0; j < colSpanCount; j++) {\n                var th = createElement('th');\n                th.appendChild(createElement('br'));\n                row.appendChild(th);\n            }\n        }\n        else {\n            table.deleteTHead();\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.tableVerticalAlign = function (e) {\n        if (e.item.subCommand === 'AlignTop') {\n            e.item.tableCell.style.verticalAlign = 'top';\n        }\n        else if (e.item.subCommand === 'AlignMiddle') {\n            e.item.tableCell.style.verticalAlign = 'middle';\n        }\n        else {\n            e.item.tableCell.style.verticalAlign = 'bottom';\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.cellMerge = function (e) {\n        if (isNOU(this.curTable)) {\n            this.curTable = closest(this.parent.nodeSelection.range.startContainer.parentElement, 'table');\n        }\n        var selectedCells = this.curTable.querySelectorAll('.e-cell-select');\n        if (selectedCells.length < 2) {\n            return;\n        }\n        this.mergeCellContent();\n        var minMaxIndexes = this.getSelectedMinMaxIndexes(this.getCorrespondingColumns());\n        var firstCell = selectedCells[0];\n        var rowSelectedCells = firstCell.parentElement.querySelectorAll('.e-cell-select');\n        if (minMaxIndexes.startColumn < minMaxIndexes.endColumn) {\n            firstCell.setAttribute('colspan', (minMaxIndexes.endColumn - minMaxIndexes.startColumn + 1).toString());\n        }\n        if (minMaxIndexes.startRow < minMaxIndexes.endRow) {\n            firstCell.setAttribute('rowspan', (minMaxIndexes.endRow - minMaxIndexes.startRow + 1).toString());\n        }\n        var totalWidth = 0;\n        for (var j = rowSelectedCells.length - 1; j >= 0; j--) {\n            totalWidth = totalWidth + parseFloat(rowSelectedCells[j].style.width);\n        }\n        firstCell.style.width = totalWidth + '%';\n        for (var i = 1; i <= selectedCells.length - 1; i++) {\n            detach(selectedCells[i]);\n        }\n        for (var i = 0; i < this.curTable.rows.length; i++) {\n            if (this.curTable.rows[i].innerHTML === '') {\n                detach(this.curTable.rows[i]);\n            }\n        }\n        this.updateRowSpanStyle(minMaxIndexes.startRow, minMaxIndexes.endRow, this.getCorrespondingColumns());\n        this.updateColSpanStyle(minMaxIndexes.startColumn, minMaxIndexes.endColumn, this.getCorrespondingColumns());\n        e.item.selection.setSelectionText(this.parent.currentDocument, e.item.selection.range.startContainer, e.item.selection.range.startContainer, 0, 0);\n        if (this.parent.nodeSelection && firstCell) {\n            this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument, \n            // eslint-disable-next-line\n            firstCell, 0);\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.updateColSpanStyle = function (min, max, elements) {\n        var colValue;\n        var colIndex;\n        var colMin;\n        var index = 0;\n        var attrValue;\n        var count = 0;\n        var eleArray = elements;\n        //eslint-disable-next-line\n        if (min < (max = Math.min(max, eleArray[0].length - 1))) {\n            for (colIndex === min; colIndex <= max; colIndex++) {\n                // eslint-disable-next-line\n                if (!(min < colIndex && eleArray[0][colIndex] === eleArray[0][colIndex - 1]) && 1 < (index =\n                    Math.min(parseInt(eleArray[0][colIndex].getAttribute('colspan'), 10) || 1, max - min + 1)) &&\n                    eleArray[0][colIndex] === eleArray[0][colIndex + 1]) {\n                    for (count = index - 1, colValue = 1; colValue < eleArray.length; colValue++) {\n                        if (eleArray[colValue][colIndex] !== eleArray[colValue - 1][colIndex]) {\n                            /* eslint-disable */\n                            for (colMin = colIndex; colMin < colIndex + index; colMin++) {\n                                if (1 < (attrValue = parseInt(eleArray[colValue][colMin].getAttribute('colspan'), 10) || 1) &&\n                                    eleArray[colValue][colMin] === eleArray[colValue][colMin + 1]) {\n                                    colMin += count = Math.min(count, attrValue - 1);\n                                }\n                                else if (!(count = Math.max(0, count - 1))) {\n                                    break;\n                                }\n                                /* eslint-enable */\n                            }\n                        }\n                        if (!count) {\n                            break;\n                        }\n                    }\n                }\n            }\n            if (count) {\n                this.updateCellAttribute(eleArray, count, 'colspan', 0, eleArray.length - 1, min, max);\n            }\n        }\n    };\n    TableCommand.prototype.updateRowSpanStyle = function (min, max, ele) {\n        var rowValue;\n        var colIndex;\n        var rowMin;\n        var index = 0;\n        var attrValue;\n        var count = 0;\n        var eleArray = ele;\n        // eslint-disable-next-line\n        if (min < (max = Math.min(max, eleArray.length - 1))) {\n            for (rowValue = min; rowValue <= max; rowValue++) {\n                // eslint-disable-next-line\n                if (!(min < rowValue && eleArray[rowValue][0] === eleArray[rowValue - 1][0])\n                    // eslint-disable-next-line no-cond-assign\n                    && eleArray[rowValue][0] && 1 < (index = Math.min(parseInt(eleArray[rowValue][0].getAttribute('rowspan'), 10) ||\n                    1, max - min + 1)) && eleArray[rowValue][0] === eleArray[rowValue + 1][0]) {\n                    for (count = index - 1, colIndex = 1; colIndex < eleArray[0].length; colIndex++) {\n                        if (eleArray[rowValue][colIndex] !== eleArray[rowValue][colIndex - 1]) {\n                            for (rowMin = rowValue; rowMin < rowValue + index; rowMin++) {\n                                // eslint-disable-next-line\n                                if (1 < (attrValue = parseInt(eleArray[rowMin][colIndex].getAttribute('rowspan'), 10) || 1) && eleArray[rowMin][colIndex] === eleArray[rowMin + 1][colIndex]) {\n                                    rowMin += count = Math.min(count, attrValue - 1);\n                                }\n                                // eslint-disable-next-line\n                                else if (!(count = Math.max(0, count - 1))) {\n                                    break;\n                                }\n                            }\n                            if (!count) {\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n            if (count) {\n                this.updateCellAttribute(eleArray, count, 'rowspan', min, max, 0, eleArray[0].length - 1);\n            }\n        }\n    };\n    TableCommand.prototype.updateCellAttribute = function (elements, index, attr, min, max, firstIndex, length) {\n        var rowIndex;\n        var colIndex;\n        var spanCount;\n        for (rowIndex = min; rowIndex <= max; rowIndex++) {\n            for (colIndex = firstIndex; colIndex <= length; colIndex++) {\n                // eslint-disable-next-line\n                min < rowIndex && elements[rowIndex][colIndex] === elements[rowIndex - 1][colIndex] ||\n                    firstIndex < colIndex && elements[rowIndex][colIndex] === elements[rowIndex][colIndex - 1] ||\n                    1 < (spanCount = parseInt(elements[rowIndex][colIndex].getAttribute(attr), 10) || 1) &&\n                        // eslint-disable-next-line max-len\n                        (1 < spanCount - index ? elements[rowIndex][colIndex].setAttribute(attr, (spanCount - index).toString()) :\n                            elements[rowIndex][colIndex].removeAttribute(attr));\n            }\n        }\n    };\n    TableCommand.prototype.mergeCellContent = function () {\n        var selectedCells = this.curTable.querySelectorAll('.e-cell-select');\n        var innerHtml = selectedCells[0].innerHTML === '<br>' ? '' : selectedCells[0].innerHTML;\n        for (var i = 1; i < selectedCells.length; i++) {\n            if ('<br>' !== selectedCells[i].innerHTML) {\n                innerHtml = innerHtml ? innerHtml + '<br>' + selectedCells[i].innerHTML : innerHtml + selectedCells[i].innerHTML;\n            }\n        }\n        selectedCells[0].innerHTML = innerHtml;\n    };\n    TableCommand.prototype.getSelectedMinMaxIndexes = function (correspondingCells) {\n        var selectedCells = this.curTable.querySelectorAll('.e-cell-select');\n        if (0 < selectedCells.length) {\n            var minRow = correspondingCells.length;\n            var maxRow = 0;\n            var minCol = correspondingCells[0].length;\n            var maxCol = 0;\n            for (var i = 0; i < selectedCells.length; i++) {\n                var currentRowCol = this.getCorrespondingIndex(selectedCells[i], correspondingCells);\n                var targetRowCol = this.FindIndex(currentRowCol[0], currentRowCol[1], correspondingCells);\n                minRow = Math.min(currentRowCol[0], minRow);\n                maxRow = Math.max(targetRowCol[0], maxRow);\n                minCol = Math.min(currentRowCol[1], minCol);\n                maxCol = Math.max(targetRowCol[1], maxCol);\n            }\n            return {\n                startRow: minRow,\n                endRow: maxRow,\n                startColumn: minCol,\n                endColumn: maxCol\n            };\n        }\n        return null;\n    };\n    TableCommand.prototype.HorizontalSplit = function (e) {\n        var selectedCell = e.item.selection.range.startContainer;\n        this.curTable = closest(selectedCell.parentElement, 'table');\n        if (this.curTable.querySelectorAll('.e-cell-select').length > 1) {\n            return;\n        }\n        this.activeCell = this.curTable.querySelector('.e-cell-select');\n        var newCell = this.activeCell.cloneNode(true);\n        newCell.removeAttribute('class');\n        newCell.innerHTML = '</br>';\n        var activeCellIndex = this.getCorrespondingIndex(this.activeCell, this.getCorrespondingColumns());\n        var correspondingCells = this.getCorrespondingColumns();\n        var activeCellRowSpan = this.activeCell.getAttribute('rowspan') ? parseInt(this.activeCell.getAttribute('rowspan'), 10) : 1;\n        if (activeCellRowSpan > 1) {\n            var avgCount = Math.ceil(activeCellRowSpan / 2);\n            // eslint-disable-next-line\n            1 < avgCount ? this.activeCell.setAttribute('rowspan', avgCount.toString()) :\n                this.activeCell.removeAttribute('rowspan');\n            // eslint-disable-next-line\n            1 < (activeCellRowSpan - avgCount) ? newCell.setAttribute('rowspan', (activeCellRowSpan - avgCount).toString()) : newCell.removeAttribute('rowspan');\n            var avgRowIndex = void 0;\n            var colIndex = void 0;\n            for (avgRowIndex = activeCellIndex[0] + Math.ceil(activeCellRowSpan / 2),\n                colIndex = 0 === activeCellIndex[1] ? activeCellIndex[1]\n                    : activeCellIndex[1] - 1; 0 <= colIndex && (correspondingCells[avgRowIndex][colIndex] ===\n                // eslint-disable-next-line max-len\n                correspondingCells[avgRowIndex][colIndex - 1] || 0 < avgRowIndex && correspondingCells[avgRowIndex][colIndex]\n                === correspondingCells[avgRowIndex - 1][colIndex]);) {\n                colIndex--;\n            }\n            if (colIndex === -1) {\n                // eslint-disable-next-line\n                this.curTable.rows[avgRowIndex].firstChild ? this.curTable.rows[avgRowIndex].prepend(newCell) : this.curTable.appendChild(newCell);\n            }\n            else {\n                correspondingCells[avgRowIndex][colIndex].insertAdjacentElement('afterend', newCell);\n            }\n        }\n        else {\n            var newTrEle = createElement('tr');\n            newTrEle.appendChild(newCell);\n            var selectedRow = correspondingCells[activeCellIndex[0]];\n            for (var j = 0; j <= selectedRow.length - 1; j++) {\n                if (selectedRow[j] !== selectedRow[j - 1] && selectedRow[j] !== this.activeCell) {\n                    selectedRow[j].setAttribute('rowspan', ((parseInt(selectedRow[j].getAttribute('rowspan'), 10) ?\n                        parseInt(selectedRow[j].getAttribute('rowspan'), 10) : 1) + 1).toString());\n                }\n            }\n            this.activeCell.parentNode.insertAdjacentElement('afterend', newTrEle);\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.VerticalSplit = function (e) {\n        var selectedCell = e.item.selection.range.startContainer;\n        this.curTable = closest(selectedCell.parentElement, 'table');\n        if (this.curTable.querySelectorAll('.e-cell-select').length > 1) {\n            return;\n        }\n        this.activeCell = this.curTable.querySelector('.e-cell-select');\n        var allRows = this.curTable.rows;\n        var newCell = this.activeCell.cloneNode(true);\n        newCell.removeAttribute('class');\n        newCell.innerHTML = '</br>';\n        var avgWidth = parseFloat(this.activeCell.style.width) / 2;\n        if (this.activeCell.tagName === 'TH' && isNaN(avgWidth)) {\n            var cellCount = this.curTable.querySelector('tr').childElementCount;\n            var colSpanCount = 0;\n            for (var i = 0; i < cellCount; i++) {\n                colSpanCount = colSpanCount + (parseInt(this.curTable.querySelector('tr').children[i].getAttribute('colspan'), 10) || 1);\n            }\n            avgWidth = parseFloat((((this.activeCell.offsetWidth / 2) / this.curTable.offsetWidth) * 100).toFixed(1));\n        }\n        var activeCellIndex = this.getCorrespondingIndex(this.activeCell, this.getCorrespondingColumns());\n        var correspondingColumns = this.getCorrespondingColumns();\n        var activeCellcolSpan = parseInt(this.activeCell.getAttribute('colspan'), 10);\n        if (activeCellcolSpan > 1) {\n            // eslint-disable-next-line\n            1 < Math.ceil(activeCellcolSpan / 2) ? this.activeCell.setAttribute('colspan', (activeCellcolSpan / 2).toString())\n                : this.activeCell.removeAttribute('colspan');\n            // eslint-disable-next-line\n            1 < (activeCellcolSpan - activeCellcolSpan / 2) ? newCell.setAttribute('colspan', \n            // eslint-disable-next-line\n            (activeCellcolSpan - activeCellcolSpan / 2).toString()) : newCell.removeAttribute('colspan');\n        }\n        else {\n            for (var i = 0; i <= allRows.length - 1; i++) {\n                if (0 === i || correspondingColumns[i][activeCellIndex[1]] !== correspondingColumns[i - 1][activeCellIndex[1]]) {\n                    var currentCell = correspondingColumns[i][activeCellIndex[1]];\n                    if (currentCell !== this.activeCell) {\n                        currentCell.setAttribute('colspan', ((parseInt(currentCell.getAttribute('colspan'), 10) ?\n                            parseInt(currentCell.getAttribute('colspan'), 10) : 1) + 1).toString());\n                    }\n                }\n            }\n        }\n        this.activeCell.style.width = avgWidth + '%';\n        newCell.style.width = avgWidth + '%';\n        this.activeCell.parentNode.insertBefore(newCell, this.activeCell.nextSibling);\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.getCorrespondingColumns = function () {\n        var elementArray = [];\n        // eslint-disable-next-line\n        var _this = this;\n        var colspan = 0;\n        var allRows = _this.curTable.rows;\n        for (var i = 0; i <= allRows.length - 1; i++) {\n            var ele = allRows[i];\n            var index = 0;\n            for (var j = 0; j <= ele.children.length - 1; j++) {\n                /* eslint-disable */\n                var colEle = ele.children[j];\n                for (var ele_1 = colEle, colspan_1 = parseInt(ele_1.getAttribute('colspan'), 10) || 1, rowSpan = parseInt(ele_1.getAttribute('rowspan'), 10) || 1, rowIndex = i; rowIndex < i + rowSpan; rowIndex++) {\n                    for (var colIndex = index; colIndex < index + colspan_1; colIndex++) {\n                        elementArray[rowIndex] || (elementArray[rowIndex] = []);\n                        elementArray[rowIndex][colIndex] ? index++ : elementArray[rowIndex][colIndex] = colEle;\n                    }\n                }\n                index += colspan;\n            }\n            /* eslint-enable */\n        }\n        return elementArray;\n    };\n    // eslint-disable-next-line\n    TableCommand.prototype.FindIndex = function (rowIndex, columnIndex, cells) {\n        var nextIndex;\n        var nextCol;\n        for (nextIndex = rowIndex + 1, nextCol = columnIndex + 1; nextIndex < cells.length;) {\n            if (cells[nextIndex][columnIndex] !== cells[rowIndex][columnIndex]) {\n                nextIndex--;\n                break;\n            }\n            nextIndex++;\n        }\n        for (nextIndex === cells.length && nextIndex--; nextCol < cells[rowIndex].length;) {\n            if (cells[rowIndex][nextCol] !== cells[rowIndex][columnIndex]) {\n                nextCol--;\n                break;\n            }\n            nextCol++;\n        }\n        return nextCol === cells[rowIndex].length && nextCol--,\n            [\n                nextIndex,\n                nextCol\n            ];\n    };\n    TableCommand.prototype.getCorrespondingIndex = function (cell, allCells) {\n        //let value: RowCol = new RowCol();\n        for (var i = 0; i < allCells.length; i++) {\n            for (var j = 0; j < allCells[i].length; j++) {\n                if (allCells[i][j] === cell) {\n                    return [i, j];\n                }\n            }\n        }\n        return [];\n    };\n    TableCommand.prototype.highlightCells = function (minRow, maxRow, minCol, maxCol, eleArray) {\n        var j;\n        var k;\n        var startCell;\n        var endCell;\n        var minRowIndex = minRow;\n        var maxRowIndex = maxRow;\n        var minColIndex = minCol;\n        var maxColIndex = maxCol;\n        var minMaxValues = new MinMax();\n        for (j = minRowIndex; j <= maxRowIndex; j++) {\n            /* eslint-disable */\n            if ((1 < (parseInt(eleArray[j][minColIndex].getAttribute('rowspan'), 10) || 1) ||\n                1 < (parseInt(eleArray[j][minColIndex].getAttribute('colspan'), 10) || 1)) &&\n                (endCell = this.FindIndex((startCell = this.getCorrespondingIndex(eleArray[j][minColIndex], eleArray))[0], startCell[1], eleArray))) {\n                minRowIndex = Math.min(startCell[0], minRowIndex);\n                maxRowIndex = Math.max(endCell[0], maxRowIndex);\n                minColIndex = Math.min(startCell[1], minColIndex);\n                maxColIndex = Math.max(endCell[1], maxColIndex);\n            }\n            else if ((1 < (parseInt(eleArray[j][maxColIndex].getAttribute('rowspan'), 10) || 1) ||\n                1 < (parseInt(eleArray[j][maxColIndex].getAttribute('colspan'), 10) || 1)) &&\n                (endCell = this.FindIndex((startCell = this.getCorrespondingIndex(eleArray[j][maxColIndex], eleArray))[0], startCell[1], eleArray))) {\n                minRowIndex = Math.min(startCell[0], minRowIndex);\n                maxRowIndex = Math.max(endCell[0], maxRowIndex);\n                minColIndex = Math.min(startCell[1], minColIndex);\n                maxColIndex = Math.max(endCell[1], maxColIndex);\n            }\n            for (k = minColIndex; k <= maxColIndex; k++) {\n                if ((1 < (parseInt(eleArray[minRowIndex][k].getAttribute('rowspan'), 10) || 1) ||\n                    1 < (parseInt(eleArray[minRowIndex][k].getAttribute('colspan'), 10) || 1)) &&\n                    (endCell = this.FindIndex((startCell = this.getCorrespondingIndex(eleArray[minRowIndex][k], eleArray))[0], startCell[1], eleArray))) {\n                    minRowIndex = Math.min(startCell[0], minRowIndex);\n                    maxRowIndex = Math.max(endCell[0], maxRowIndex);\n                    minColIndex = Math.min(startCell[1], minColIndex);\n                    maxColIndex = Math.max(endCell[1], maxColIndex);\n                }\n                else if ((1 < (parseInt(eleArray[maxRowIndex][k].getAttribute('rowspan'), 10) || 1) ||\n                    1 < (parseInt(eleArray[maxRowIndex][k].getAttribute('colspan'), 10) || 1)) &&\n                    (endCell = this.FindIndex((startCell = this.getCorrespondingIndex(eleArray[maxRowIndex][k], eleArray))[0], startCell[1], eleArray))) {\n                    minRowIndex = Math.min(startCell[0], minRowIndex);\n                    maxRowIndex = Math.max(endCell[0], maxRowIndex);\n                    minColIndex = Math.min(startCell[1], minColIndex);\n                    maxColIndex = Math.max(endCell[1], maxColIndex);\n                }\n            }\n            minMaxValues = minRowIndex === minRow && maxRowIndex === maxRow && minColIndex === minCol && maxColIndex === maxCol ? {\n                startRow: minRow,\n                endRow: maxRow,\n                startColumn: minCol,\n                endColumn: maxCol\n            } : this.highlightCells(minRowIndex, maxRowIndex, minColIndex, maxColIndex, eleArray);\n        }\n        return minMaxValues;\n        /* eslint-enable */\n    };\n    TableCommand.prototype.tableMove = function (e) {\n        this.activeCell = e.selectNode[0];\n        var target = e.event.target;\n        var activeCellTag = this.activeCell.tagName;\n        var targetCellTag = target.tagName;\n        this.curTable = closest(target, 'table');\n        if (this.curTable.querySelectorAll('.e-cell-select').length > 1) {\n            this.parent.nodeSelection.Clear(this.parent.currentDocument);\n        }\n        if ((target.tagName !== 'TD' && target.tagName !== 'TH') && activeCellTag !== targetCellTag) {\n            return;\n        }\n        var activeRowIndex = Array.prototype.slice.call((this.activeCell).parentElement.parentElement.children)\n            .indexOf((this.activeCell).parentElement);\n        var activeColumnIndex = Array.prototype.slice.call((this.activeCell).parentElement.children).indexOf(this.activeCell);\n        var targetRowIndex = Array.prototype.slice.call(target.parentElement.parentElement.children)\n            .indexOf(target.parentElement);\n        var targetColumnIndex = Array.prototype.slice.call(target.parentElement.children).indexOf(target);\n        var activeCellList = this.curTable.querySelectorAll('.e-cell-select');\n        for (var i = activeCellList.length - 1; i >= 0; i--) {\n            if (this.activeCell !== activeCellList[i]) {\n                activeCellList[i].classList.remove('e-cell-select');\n            }\n        }\n        if (activeRowIndex === targetRowIndex && activeColumnIndex === targetColumnIndex) {\n            return;\n        }\n        var correspondingCells = this.getCorrespondingColumns();\n        var activeIndexes = this.getCorrespondingIndex(this.activeCell, correspondingCells);\n        var targetIndexes = this.getCorrespondingIndex(target, correspondingCells);\n        var minMaxIndexes = this.highlightCells(Math.min(activeIndexes[0], targetIndexes[0]), Math.max(activeIndexes[0], \n        /* eslint-disable */\n        targetIndexes[0]), Math.min(activeIndexes[1], targetIndexes[1]), Math.max(activeIndexes[1], targetIndexes[1]), correspondingCells);\n        for (var rowIndex = minMaxIndexes.startRow; rowIndex <= minMaxIndexes.endRow; rowIndex++) {\n            for (var colIndex = minMaxIndexes.startColumn; colIndex <= minMaxIndexes.endColumn; colIndex++) {\n                correspondingCells[rowIndex][colIndex].classList.add('e-cell-select');\n            }\n        }\n        if (this.parent.nodeSelection.range) {\n            this.parent.nodeSelection.setSelectionText(this.parent.currentDocument, this.parent.nodeSelection.range.endContainer, this.parent.nodeSelection.range.endContainer, 0, 0);\n            this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument, this.parent.nodeSelection.range.endContainer, 0);\n        }\n    };\n    ;\n    return TableCommand;\n}());\nexport { TableCommand };\nvar MinMax = /** @class */ (function () {\n    function MinMax() {\n    }\n    return MinMax;\n}());\n","/**\n * Is formatted or not.\n *\n * @hidden\n * @deprecated\n */\nvar IsFormatted = /** @class */ (function () {\n    function IsFormatted() {\n    }\n    /**\n     * getFormattedNode method\n     *\n     * @param {Node} node - specifies the node.\n     * @param {string} format - specifies the string value.\n     * @param {Node} endNode - specifies the end node\n     * @returns {Node} - returns the node\n     * @hidden\n     * @deprecated\n     */\n    IsFormatted.prototype.getFormattedNode = function (node, format, endNode) {\n        var parentNode = this.getFormatParent(node, format, endNode);\n        if (parentNode !== null && parentNode !== endNode) {\n            return parentNode;\n        }\n        return null;\n    };\n    IsFormatted.prototype.getFormatParent = function (node, format, endNode) {\n        do {\n            node = node.parentNode;\n        } while (node && (node !== endNode) && !this.isFormattedNode(node, format));\n        return node;\n    };\n    IsFormatted.prototype.isFormattedNode = function (node, format) {\n        switch (format) {\n            case 'bold':\n                return IsFormatted.isBold(node);\n            case 'italic':\n                return IsFormatted.isItalic(node);\n            case 'underline':\n                return IsFormatted.isUnderline(node);\n            case 'strikethrough':\n                return IsFormatted.isStrikethrough(node);\n            case 'superscript':\n                return IsFormatted.isSuperscript(node);\n            case 'subscript':\n                return IsFormatted.isSubscript(node);\n            case 'fontcolor':\n                return this.isFontColor(node);\n            case 'fontname':\n                return this.isFontName(node);\n            case 'fontsize':\n                return this.isFontSize(node);\n            case 'backgroundcolor':\n                return this.isBackgroundColor(node);\n            default:\n                return false;\n        }\n    };\n    /**\n     * isBold method\n     *\n     * @param {Node} node - specifies the node value\n     * @returns {boolean} - returns the boolean value\n     * @hidden\n     * @deprecated\n     */\n    IsFormatted.isBold = function (node) {\n        var validTags = ['strong', 'b'];\n        if (validTags.indexOf(node.nodeName.toLowerCase()) !== -1) {\n            return true;\n        }\n        else if (this.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            node.style && node.style.fontWeight === 'bold') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * isItalic method\n     *\n     * @param {Node} node - specifies the node value\n     * @returns {boolean} - returns the boolean value\n     * @hidden\n     * @deprecated\n     */\n    IsFormatted.isItalic = function (node) {\n        var validTags = ['em', 'i'];\n        if (validTags.indexOf(node.nodeName.toLowerCase()) !== -1) {\n            return true;\n        }\n        else if (this.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            node.style && node.style.fontStyle === 'italic') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * isUnderline method\n     *\n     * @param {Node} node - specifies the node value\n     * @returns {boolean} - returns the boolean value\n     * @hidden\n     * @deprecated\n     */\n    IsFormatted.isUnderline = function (node) {\n        var validTags = ['u'];\n        if (validTags.indexOf(node.nodeName.toLowerCase()) !== -1) {\n            return true;\n            /* eslint-disable */\n        }\n        else if (this.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            node.style && (node.style.textDecoration === 'underline' ||\n            node.style.textDecorationLine === 'underline')) {\n            /* eslint-enable */\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * isStrikethrough method\n     *\n     * @param {Node} node - specifies the node value\n     * @returns {boolean} - returns the boolean value\n     * @hidden\n     * @deprecated\n     */\n    IsFormatted.isStrikethrough = function (node) {\n        var validTags = ['del', 'strike'];\n        if (validTags.indexOf(node.nodeName.toLowerCase()) !== -1) {\n            return true;\n            /* eslint-disable */\n        }\n        else if (this.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            node.style && (node.style.textDecoration === 'line-through' ||\n            node.style.textDecorationLine === 'line-through')) {\n            /* eslint-enable */\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * isSuperscript method\n     *\n     * @param {Node} node - specifies the node value\n     * @returns {boolean} - returns the boolean value\n     * @hidden\n     * @deprecated\n     */\n    IsFormatted.isSuperscript = function (node) {\n        var validTags = ['sup'];\n        if (validTags.indexOf(node.nodeName.toLowerCase()) !== -1) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * isSubscript method\n     *\n     * @param {Node} node - specifies the node value\n     * @returns {boolean} - returns the boolean value\n     * @hidden\n     * @deprecated\n     */\n    IsFormatted.isSubscript = function (node) {\n        var validTags = ['sub'];\n        if (validTags.indexOf(node.nodeName.toLowerCase()) !== -1) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.prototype.isFontColor = function (node) {\n        var color = node.style && node.style.color;\n        if (IsFormatted.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            color !== null && color !== '' && color !== undefined) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.prototype.isBackgroundColor = function (node) {\n        var backColor = node.style && node.style.backgroundColor;\n        if (IsFormatted.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            backColor !== null && backColor !== '' && backColor !== undefined) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.prototype.isFontSize = function (node) {\n        var size = node.style && node.style.fontSize;\n        if (IsFormatted.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            size !== null && size !== '' && size !== undefined) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.prototype.isFontName = function (node) {\n        var name = node.style && node.style.fontFamily;\n        if (IsFormatted.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            name !== null && name !== '' && name !== undefined) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    // Get Formatted Node\n    IsFormatted.inlineTags = [\n        'a',\n        'abbr',\n        'acronym',\n        'b',\n        'bdo',\n        'big',\n        'cite',\n        'code',\n        'dfn',\n        'em',\n        'font',\n        'i',\n        'kbd',\n        'label',\n        'q',\n        'samp',\n        'small',\n        'span',\n        'strong',\n        'sub',\n        'sup',\n        'tt',\n        'u',\n        'var',\n        'del'\n    ];\n    return IsFormatted;\n}());\nexport { IsFormatted };\n","/**\n * `Selection` module is used to handle RTE Selections.\n */\nimport { NodeSelection } from './../../selection/index';\nimport { NodeCutter } from './nodecutter';\nimport { InsertMethods } from './insert-methods';\nimport { IsFormatted } from './isformatted';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\nimport { isNullOrUndefined as isNOU, Browser, closest, detach } from '@syncfusion/ej2-base';\nimport { DOMNode } from './dom-node';\nvar SelectionCommands = /** @class */ (function () {\n    function SelectionCommands() {\n    }\n    /**\n     * applyFormat method\n     *\n     * @param {Document} docElement - specifies the document\n     * @param {string} format - specifies the string value\n     * @param {Node} endNode - specifies the end node\n     * @param {string} enterAction - specifies the enter key action\n     * @param {string} value - specifies the string value\n     * @param {string} selector - specifies the string\n     * @param {FormatPainterValue} painterValues specifies the element created and last child\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    SelectionCommands.applyFormat = function (docElement, format, endNode, enterAction, value, selector, painterValues) {\n        this.enterAction = enterAction;\n        var validFormats = ['bold', 'italic', 'underline', 'strikethrough', 'superscript',\n            'subscript', 'uppercase', 'lowercase', 'fontcolor', 'fontname', 'fontsize', 'backgroundcolor'];\n        if (validFormats.indexOf(format) > -1 || value === 'formatPainter') {\n            if (format === 'backgroundcolor' && value === '') {\n                value = 'transparent';\n            }\n            var domSelection = new NodeSelection();\n            var domNode = new DOMNode(endNode, docElement);\n            var nodeCutter = new NodeCutter();\n            var isFormatted = new IsFormatted();\n            var range = domSelection.getRange(docElement);\n            var save = domSelection.save(range, docElement);\n            var nodes = range.collapsed ? domSelection.getSelectionNodeCollection(range) :\n                domSelection.getSelectionNodeCollectionBr(range);\n            var isCollapsed = false;\n            var isFormat = false;\n            var isCursor = false;\n            var preventRestore = false;\n            var isFontStyle = (['fontcolor', 'fontname', 'fontsize', 'backgroundcolor'].indexOf(format) > -1);\n            if (range.collapsed) {\n                var currentFormatNode = isFormatted.getFormattedNode(range.startContainer, format, endNode);\n                var currentSelector = !isNOU(currentFormatNode) ?\n                    (currentFormatNode.getAttribute('style') === null ? currentFormatNode.nodeName :\n                        currentFormatNode.nodeName + '[style=\\'' + currentFormatNode.getAttribute('style') + '\\']') : null;\n                if (nodes.length > 0) {\n                    isCollapsed = true;\n                    range = nodeCutter.GetCursorRange(docElement, range, nodes[0]);\n                }\n                else if (range.startContainer.nodeType === 3 && ((range.startContainer.parentElement.childElementCount > 0 &&\n                    range.startOffset > 0 && range.startContainer.parentElement.firstElementChild.tagName.toLowerCase() !== 'br') ||\n                    !isNOU(currentFormatNode) && currentFormatNode ===\n                        (range.startContainer.parentElement.closest(currentSelector)) &&\n                        ((range.startContainer.parentElement.closest(currentSelector)).textContent.replace(\n                        // eslint-disable-next-line\n                        new RegExp(String.fromCharCode(8203), 'g'), '').trim().length !== 0))) {\n                    isCollapsed = true;\n                    range = nodeCutter.GetCursorRange(docElement, range, range.startContainer);\n                    nodes.push(range.startContainer);\n                }\n                else {\n                    var cursorNode = this.insertCursorNode(docElement, domSelection, range, isFormatted, nodeCutter, format, value, endNode);\n                    domSelection.endContainer = domSelection.startContainer = domSelection.getNodeArray(cursorNode, true);\n                    var childNodes = cursorNode.nodeName === 'BR' && cursorNode.parentNode.childNodes;\n                    if (!isNOU(childNodes) && childNodes.length === 1 && childNodes[0].nodeName === 'BR' && nodes.length === 0) {\n                        domSelection.setSelectionText(docElement, range.startContainer, range.endContainer, 0, 0);\n                        preventRestore = true;\n                    }\n                    else {\n                        domSelection.endOffset = domSelection.startOffset = 1;\n                    }\n                    if (cursorNode.nodeName === 'BR' && cursorNode.parentNode.textContent.length === 0) {\n                        preventRestore = true;\n                    }\n                }\n            }\n            isCursor = range.collapsed;\n            var isSubSup = false;\n            for (var index = 0; index < nodes.length; index++) {\n                var formatNode = isFormatted.getFormattedNode(nodes[index], format, endNode);\n                if (formatNode === null) {\n                    if (format === 'subscript') {\n                        formatNode = isFormatted.getFormattedNode(nodes[index], 'superscript', endNode);\n                        isSubSup = formatNode === null ? false : true;\n                    }\n                    else if (format === 'superscript') {\n                        formatNode = isFormatted.getFormattedNode(nodes[index], 'subscript', endNode);\n                        isSubSup = formatNode === null ? false : true;\n                    }\n                }\n                if (index === 0 && formatNode === null) {\n                    isFormat = true;\n                }\n                if (formatNode !== null && (!isFormat || isFontStyle)) {\n                    nodes[index] = this.removeFormat(nodes, index, formatNode, isCursor, isFormat, isFontStyle, range, nodeCutter, format, value, domSelection, endNode, domNode);\n                }\n                else {\n                    nodes[index] = this.insertFormat(docElement, nodes, index, formatNode, isCursor, isFormat, isFontStyle, range, nodeCutter, format, value, painterValues, domNode, endNode);\n                }\n                domSelection = this.applySelection(nodes, domSelection, nodeCutter, index, isCollapsed);\n            }\n            if (isIDevice()) {\n                setEditFrameFocus(endNode, selector);\n            }\n            if (!preventRestore) {\n                save.restore();\n            }\n            if (isSubSup) {\n                this.applyFormat(docElement, format, endNode, enterAction);\n            }\n        }\n    };\n    SelectionCommands.insertCursorNode = function (docElement, domSelection, range, isFormatted, nodeCutter, format, value, endNode) {\n        var cursorNodes = domSelection.getNodeCollection(range);\n        var domNode = new DOMNode(endNode, docElement);\n        var cursorFormat = (cursorNodes.length > 0) ?\n            (cursorNodes.length > 1 && range.startContainer === range.endContainer) ?\n                this.getCursorFormat(isFormatted, cursorNodes, format, endNode) :\n                isFormatted.getFormattedNode(cursorNodes[0], format, endNode) : null;\n        var cursorNode = null;\n        if (cursorFormat) {\n            cursorNode = cursorNodes[0];\n            if (cursorFormat.firstChild.textContent.charCodeAt(0) === 8203 && cursorFormat.firstChild.nodeType === 3) {\n                // eslint-disable-next-line\n                var regEx = new RegExp(String.fromCharCode(8203), 'g');\n                var emptySpaceNode = void 0;\n                if (cursorFormat.firstChild === cursorNode) {\n                    cursorNode.textContent = (cursorFormat.parentElement && (domNode.isBlockNode(cursorFormat.parentElement) &&\n                        cursorFormat.parentElement.textContent.length <= 1 ? cursorFormat.parentElement.childElementCount > 1 :\n                        cursorFormat.childElementCount === 0) &&\n                        (cursorFormat.parentElement.textContent.length > 1 ||\n                            cursorFormat.parentElement.firstChild && cursorFormat.parentElement.firstChild.nodeType === 1) ?\n                        cursorNode.textContent : cursorNode.textContent.replace(regEx, ''));\n                    emptySpaceNode = cursorNode;\n                }\n                else {\n                    cursorFormat.firstChild.textContent = cursorFormat.firstChild.textContent.replace(regEx, '');\n                    emptySpaceNode = cursorFormat.firstChild;\n                }\n                var pointer = void 0;\n                if (emptySpaceNode.textContent.length === 0) {\n                    if (!isNOU(emptySpaceNode.previousSibling)) {\n                        cursorNode = emptySpaceNode.previousSibling;\n                        pointer = emptySpaceNode.textContent.length - 1;\n                        domSelection.setCursorPoint(docElement, emptySpaceNode, pointer);\n                    }\n                    else if (!isNOU(emptySpaceNode.parentElement) && emptySpaceNode.parentElement.textContent.length === 0) {\n                        var brElem = document.createElement('BR');\n                        emptySpaceNode.parentElement.appendChild(brElem);\n                        detach(emptySpaceNode);\n                        cursorNode = brElem;\n                        domSelection.setCursorPoint(docElement, cursorNode.parentElement, 0);\n                    }\n                }\n            }\n            if ((['fontcolor', 'fontname', 'fontsize', 'backgroundcolor'].indexOf(format) > -1)) {\n                if (format === 'fontcolor') {\n                    cursorFormat.style.color = value;\n                }\n                else if (format === 'fontname') {\n                    cursorFormat.style.fontFamily = value;\n                }\n                else if (format === 'fontsize') {\n                    cursorFormat.style.fontSize = value;\n                }\n                else {\n                    cursorFormat.style.backgroundColor = value;\n                }\n                cursorNode = cursorFormat;\n            }\n            else {\n                InsertMethods.unwrap(cursorFormat);\n            }\n        }\n        else {\n            if (cursorNodes.length > 1 && range.startOffset > 0 && (cursorNodes[0].firstElementChild &&\n                cursorNodes[0].firstElementChild.tagName.toLowerCase() === 'br')) {\n                cursorNodes[0].innerHTML = '';\n            }\n            if (cursorNodes.length === 1 && range.startOffset === 0 && (cursorNodes[0].nodeName === 'BR' ||\n                cursorNodes[0].nextSibling.nodeName === 'BR')) {\n                detach(cursorNodes[0].nodeName === '#text' ? cursorNodes[0].nextSibling : cursorNodes[0]);\n            }\n            cursorNode = this.getInsertNode(docElement, range, format, value).firstChild;\n        }\n        return cursorNode;\n    };\n    SelectionCommands.getCursorFormat = function (isFormatted, cursorNodes, format, endNode) {\n        var currentNode;\n        for (var index = 0; index < cursorNodes.length; index++) {\n            currentNode = cursorNodes[index].lastElementChild ?\n                cursorNodes[index].lastElementChild : cursorNodes[index];\n        }\n        return isFormatted.getFormattedNode(currentNode, format, endNode);\n    };\n    SelectionCommands.removeFormat = function (nodes, index, formatNode, isCursor, isFormat, isFontStyle, range, nodeCutter, format, value, domSelection, endNode, domNode) {\n        var splitNode = null;\n        var startText = range.startContainer.nodeName === '#text' ?\n            range.startContainer.textContent.substring(range.startOffset, range.startContainer.textContent.length) :\n            range.startContainer.textContent;\n        var nodeText = nodes[index].textContent;\n        if (!(range.startContainer === range.endContainer && range.startOffset === 0\n            && range.endOffset === range.startContainer.length)) {\n            var nodeIndex = [];\n            var cloneNode = nodes[index];\n            do {\n                nodeIndex.push(domSelection.getIndex(cloneNode));\n                cloneNode = cloneNode.parentNode;\n            } while (cloneNode && (cloneNode !== formatNode));\n            if (nodes[index].nodeName !== 'BR') {\n                cloneNode = splitNode = (isCursor && (formatNode.textContent.length - 1) === range.startOffset) ?\n                    nodeCutter.SplitNode(range, formatNode, true)\n                    : nodeCutter.GetSpliceNode(range, formatNode);\n            }\n            if (!isCursor) {\n                while (cloneNode && cloneNode.childNodes.length > 0 && ((nodeIndex.length - 1) >= 0)\n                    && (cloneNode.childNodes.length > nodeIndex[nodeIndex.length - 1])) {\n                    cloneNode = cloneNode.childNodes[nodeIndex[nodeIndex.length - 1]];\n                    nodeIndex.pop();\n                }\n                if (nodes[index].nodeName !== 'BR') {\n                    if (cloneNode.nodeType === 3 && !(isCursor && cloneNode.nodeValue === '')) {\n                        nodes[index] = cloneNode;\n                    }\n                    else {\n                        var divNode = document.createElement('div');\n                        divNode.innerHTML = '&#8203;';\n                        if (cloneNode.nodeType !== 3) {\n                            cloneNode.insertBefore(divNode.firstChild, cloneNode.firstChild);\n                            nodes[index] = cloneNode.firstChild;\n                        }\n                        else {\n                            cloneNode.parentNode.insertBefore(divNode.firstChild, cloneNode);\n                            nodes[index] = cloneNode.previousSibling;\n                            cloneNode.parentNode.removeChild(cloneNode);\n                        }\n                    }\n                }\n            }\n            else {\n                var lastNode = splitNode;\n                for (; lastNode.firstChild !== null && lastNode.firstChild.nodeType !== 3; null) {\n                    lastNode = lastNode.firstChild;\n                }\n                lastNode.innerHTML = '&#8203;';\n                nodes[index] = lastNode.firstChild;\n            }\n        }\n        else if (isFontStyle && !nodes[index].contains(formatNode) && nodes[index].nodeType === 3 &&\n            nodes[index].textContent !== formatNode.textContent) {\n            // If the selection is within the format node .\n            var isFullNodeSelected = nodes[index].textContent === nodes[index].wholeText;\n            var nodeTraverse = nodes[index];\n            var styleElement = this.GetFormatNode(format, value);\n            // while loop and traverse back until text content does not match with parent text content\n            while (nodeTraverse && nodeTraverse.textContent === nodeTraverse.parentElement.textContent) {\n                nodeTraverse = nodeTraverse.parentElement;\n            }\n            if (isFullNodeSelected && formatNode.textContent !== nodeTraverse.textContent) {\n                var nodeArray = [];\n                var priorityNode = this.getPriorityFormatNode(nodeTraverse, endNode);\n                if (priorityNode && priorityNode.textContent === nodeTraverse.textContent) {\n                    nodeTraverse = priorityNode;\n                }\n                nodeArray.push(nodeTraverse);\n                this.applyStyles(nodeArray, 0, styleElement);\n                return nodes[index];\n            }\n        }\n        var fontStyle;\n        if (format === 'backgroundcolor') {\n            fontStyle = formatNode.style.fontSize;\n        }\n        var bgStyle;\n        if (format === 'fontsize') {\n            var bg = closest(nodes[index].parentElement, 'span[style*=' + 'background-color' + ']');\n            if (!isNOU(bg)) {\n                bgStyle = bg.style.backgroundColor;\n            }\n        }\n        var formatNodeStyles = formatNode.getAttribute('style');\n        var formatNodeTagName = formatNode.tagName;\n        var child;\n        if (formatNodeTagName === 'A' && format === 'underline') {\n            formatNode.style.textDecoration = 'none';\n            child = [formatNode];\n        }\n        else {\n            child = InsertMethods.unwrap(formatNode);\n        }\n        if (child[0] && !isFontStyle) {\n            var nodeTraverse = child[index] ? child[index] : child[0];\n            var textNode = nodeTraverse;\n            for (; nodeTraverse && nodeTraverse.parentElement && nodeTraverse.parentElement !== endNode; \n            // eslint-disable-next-line\n            nodeTraverse = nodeTraverse) {\n                var nodeTraverseCondition = void 0;\n                if (formatNode.nodeName === 'SPAN') {\n                    nodeTraverseCondition = nodeTraverse.parentElement.tagName.toLocaleLowerCase()\n                        === formatNode.tagName.toLocaleLowerCase() && nodeTraverse.parentElement.getAttribute('style') === formatNodeStyles;\n                }\n                else {\n                    nodeTraverseCondition = nodeTraverse.parentElement.tagName.toLocaleLowerCase()\n                        === formatNode.tagName.toLocaleLowerCase();\n                }\n                if (nodeTraverse.parentElement && nodeTraverseCondition &&\n                    (nodeTraverse.parentElement.childElementCount > 1 || range.startOffset > 1)) {\n                    if (textNode.parentElement && textNode.parentElement.tagName.toLocaleLowerCase()\n                        === formatNode.tagName.toLocaleLowerCase()) {\n                        if ((range.startOffset === range.endOffset) && textNode.nodeType !== 1 &&\n                            !isNOU(textNode.textContent) && textNode.parentElement.childElementCount > 1) {\n                            range.setStart(textNode, 0);\n                            range.setEnd(textNode, textNode.textContent.length);\n                            nodeCutter.SplitNode(range, textNode.parentElement, false);\n                        }\n                    }\n                    if (nodeTraverse.parentElement.tagName.toLocaleLowerCase() === 'span') {\n                        if (formatNode.style.textDecoration === 'underline' &&\n                            nodeTraverse.parentElement.style.textDecoration !== 'underline') {\n                            nodeTraverse = nodeTraverse.parentElement;\n                            continue;\n                        }\n                    }\n                    InsertMethods.unwrap(nodeTraverse.parentElement);\n                    nodeTraverse = !isNOU(nodeTraverse.parentElement) && !domNode.isBlockNode(nodeTraverse.parentElement) ? textNode :\n                        nodeTraverse.parentElement;\n                }\n                else {\n                    nodeTraverse = nodeTraverse.parentElement;\n                }\n            }\n        }\n        if (child.length > 0 && isFontStyle) {\n            for (var num = 0; num < child.length; num++) {\n                if (child[num].nodeType !== 3 || (child[num].textContent &&\n                    child[num].textContent.trim().length > 0)) {\n                    child[num] = InsertMethods.Wrap(child[num], this.GetFormatNode(format, value, formatNodeTagName, formatNodeStyles));\n                    if (child[num].textContent === startText) {\n                        if (num === 0) {\n                            range.setStartBefore(child[num]);\n                        }\n                        else if (num === child.length - 1) {\n                            range.setEndAfter(child[num]);\n                        }\n                    }\n                }\n            }\n            var currentNodeElem = nodes[index].parentElement;\n            if (!isNOU(fontStyle) && fontStyle !== '') {\n                currentNodeElem.style.fontSize = fontStyle;\n            }\n            if (!isNOU(bgStyle) && bgStyle !== '') {\n                currentNodeElem.style.backgroundColor = bgStyle;\n            }\n            if ((format === 'backgroundcolor' && !isNOU(fontStyle) && fontStyle !== '') &&\n                currentNodeElem.parentElement.innerHTML === currentNodeElem.outerHTML) {\n                var curParentElem = currentNodeElem.parentElement;\n                curParentElem.parentElement.insertBefore(currentNodeElem, curParentElem);\n                detach(curParentElem);\n            }\n            if (format === 'fontsize' || format === 'fontcolor') {\n                var liElement = nodes[index].parentElement;\n                var parentElement = nodes[index].parentElement;\n                while (!isNOU(parentElement) && parentElement.tagName.toLowerCase() !== 'li') {\n                    parentElement = parentElement.parentElement;\n                    liElement = parentElement;\n                }\n                var num = index;\n                var liChildContent = '';\n                while (num >= 0 && !isNOU(liElement) && liElement.tagName.toLowerCase() === 'li' && liElement.textContent.replace('/\\u200B/g', '').trim().includes(nodes[num].textContent.trim())) {\n                    liChildContent = ' ' + nodes[num].textContent.trim() + liChildContent;\n                    num--;\n                }\n                var isNestedList = false;\n                var nestedListCount = 0;\n                var isNestedListItem = false;\n                if (!isNOU(liElement) && liElement.childNodes) {\n                    for (var num_1 = 0; num_1 < liElement.childNodes.length; num_1++) {\n                        if (liElement.childNodes[num_1].nodeName === ('OL' || 'UL')) {\n                            nestedListCount++;\n                            isNestedList = true;\n                        }\n                    }\n                }\n                if (!isNOU(liElement) && liElement.tagName.toLowerCase() === 'li' &&\n                    liElement.textContent.split('\\u200B').join('').trim() === liChildContent.split('\\u200B').join('').trim()) {\n                    if (format === 'fontsize') {\n                        liElement.style.fontSize = value;\n                    }\n                    else {\n                        liElement.style.color = value;\n                        liElement.style.textDecoration = 'inherit';\n                    }\n                }\n                else if (!isNOU(liElement) && liElement.tagName.toLowerCase() === 'li' && isNestedList) {\n                    if (isNestedList && nestedListCount > 0) {\n                        for (var num_2 = 0; num_2 < liElement.childNodes.length; num_2++) {\n                            if (nodes[index].textContent === liElement.childNodes[num_2].textContent && nodes[index].textContent === nodeText && liElement.textContent.replace('/\\u200B/g', '').trim().includes(liChildContent.split('\\u200B').join('').trim())) {\n                                isNestedListItem = true;\n                            }\n                        }\n                    }\n                    if (isNestedListItem) {\n                        for (var num_3 = 0; num_3 < liElement.childNodes.length; num_3++) {\n                            if (liElement.childNodes[num_3].nodeName === ('OL' || 'UL')) {\n                                liElement.childNodes[num_3].style.fontSize = 'initial';\n                            }\n                        }\n                        if (format === 'fontsize') {\n                            liElement.style.fontSize = value;\n                        }\n                        else {\n                            liElement.style.color = value;\n                            liElement.style.textDecoration = 'inherit';\n                        }\n                    }\n                }\n            }\n        }\n        return nodes[index];\n    };\n    SelectionCommands.insertFormat = function (docElement, nodes, index, formatNode, isCursor, isFormat, isFontStyle, range, nodeCutter, format, value, painterValues, domNode, endNode) {\n        if (!isCursor) {\n            if ((formatNode === null && isFormat) || isFontStyle) {\n                if (nodes[index].nodeName !== 'BR') {\n                    nodes[index] = nodeCutter.GetSpliceNode(range, nodes[index]);\n                    nodes[index].textContent = nodeCutter.TrimLineBreak(nodes[index].textContent);\n                }\n                if (format === 'uppercase' || format === 'lowercase') {\n                    nodes[index].textContent = (format === 'uppercase') ? nodes[index].textContent.toLocaleUpperCase()\n                        : nodes[index].textContent.toLocaleLowerCase();\n                }\n                else if (!(isFontStyle === true && value === '')) {\n                    var element = this.GetFormatNode(format, value);\n                    if (value === 'formatPainter' || isFontStyle) {\n                        var liElement = nodes[index].parentElement;\n                        var parentElement = nodes[index].parentElement;\n                        while (!isNOU(parentElement) && parentElement.tagName.toLowerCase() !== 'li') {\n                            parentElement = parentElement.parentElement;\n                            liElement = parentElement;\n                        }\n                        if (!isNOU(liElement) && liElement.tagName.toLowerCase() === 'li' &&\n                            liElement.textContent.trim() === nodes[index].textContent.trim()) {\n                            if (format === 'fontsize') {\n                                liElement.style.fontSize = value;\n                            }\n                            else if (format === 'fontcolor') {\n                                liElement.style.color = value;\n                                liElement.style.textDecoration = 'inherit';\n                            }\n                        }\n                        if (value === 'formatPainter') {\n                            return this.insertFormatPainterElem(nodes, index, range, nodeCutter, painterValues, domNode);\n                        }\n                        var currentNode = nodes[index];\n                        var priorityNode = this.getPriorityFormatNode(currentNode, endNode);\n                        // 1. Checking is there any priority node present in the selection range. (Use case for nested styles);\n                        // 2  Or font style is applied. (Use case not a nested style)\n                        if (!isNOU(priorityNode) || isFontStyle) {\n                            var currentFormatNode = isNOU(priorityNode) ? currentNode : priorityNode;\n                            currentFormatNode = !isNOU(priorityNode) && priorityNode.style.fontSize !== '' ?\n                                currentFormatNode.firstChild : currentFormatNode;\n                            if (isNOU(priorityNode) || format === 'fontsize') {\n                                while (currentFormatNode) {\n                                    var isSameTextContent = currentFormatNode.parentElement.textContent.trim()\n                                        === nodes[index].textContent.trim();\n                                    var parent_1 = currentFormatNode.parentElement;\n                                    if (!domNode.isBlockNode(parent_1) && isSameTextContent &&\n                                        !(parent_1.nodeName === 'SPAN' && parent_1.classList.contains('e-img-inner'))) {\n                                        currentFormatNode = parent_1;\n                                    }\n                                    else {\n                                        break;\n                                    }\n                                }\n                            }\n                            var nodeList = [];\n                            // Since color is different for different themnes, we need to wrap the fontColor over the text node.\n                            if (format === 'fontcolor') {\n                                var closestAnchor = closest(nodes[index].parentElement, 'A');\n                                if (!isNOU(closestAnchor) && closestAnchor.firstChild.textContent.trim()\n                                    === nodes[index].textContent.trim()) {\n                                    currentFormatNode = nodes[index];\n                                }\n                            }\n                            if (nodes[index].textContent.trim() !== currentFormatNode.textContent.trim()) {\n                                currentFormatNode = nodes[index];\n                            }\n                            nodeList[0] = currentFormatNode;\n                            this.applyStyles(nodeList, 0, element);\n                        }\n                        else {\n                            nodes[index] = this.applyStyles(nodes, index, element);\n                        }\n                    }\n                    else {\n                        nodes[index] = this.applyStyles(nodes, index, element);\n                    }\n                }\n            }\n            else {\n                nodes[index] = nodeCutter.GetSpliceNode(range, nodes[index]);\n            }\n        }\n        else {\n            if (format !== 'uppercase' && format !== 'lowercase') {\n                var element = this.getInsertNode(docElement, range, format, value);\n                nodes[index] = element.firstChild;\n                nodeCutter.position = 1;\n            }\n            else {\n                nodeCutter.position = range.startOffset;\n            }\n        }\n        return nodes[index];\n    };\n    SelectionCommands.applyStyles = function (nodes, index, element) {\n        if (!(nodes[index].nodeName === 'BR' && this.enterAction === 'BR')) {\n            nodes[index] = (index === (nodes.length - 1)) || nodes[index].nodeName === 'BR' ?\n                InsertMethods.Wrap(nodes[index], element)\n                : InsertMethods.WrapBefore(nodes[index], element, true);\n            nodes[index] = this.getChildNode(nodes[index], element);\n        }\n        return nodes[index];\n    };\n    SelectionCommands.getPriorityFormatNode = function (node, endNode) {\n        var isFormatted = new IsFormatted();\n        var fontSizeNode = isFormatted.getFormattedNode(node, 'fontsize', endNode);\n        var fontColorNode;\n        var backgroundColorNode;\n        var fontNameNode;\n        if (isNOU(fontSizeNode)) {\n            backgroundColorNode = isFormatted.getFormattedNode(node, 'backgroundcolor', endNode);\n            if (isNOU(backgroundColorNode)) {\n                fontNameNode = isFormatted.getFormattedNode(node, 'fontname', endNode);\n                if (isNOU(fontNameNode)) {\n                    fontColorNode = isFormatted.getFormattedNode(node, 'fontcolor', endNode);\n                    if (isNOU(fontColorNode)) {\n                        return null;\n                    }\n                    else {\n                        return fontColorNode;\n                    }\n                }\n                else {\n                    return fontNameNode;\n                }\n            }\n            else {\n                return backgroundColorNode;\n            }\n        }\n        else {\n            return fontSizeNode;\n        }\n    };\n    SelectionCommands.getInsertNode = function (docElement, range, format, value) {\n        var element = this.GetFormatNode(format, value);\n        element.innerHTML = '&#8203;';\n        if (Browser.isIE) {\n            var frag = docElement.createDocumentFragment();\n            frag.appendChild(element);\n            range.insertNode(frag);\n        }\n        else {\n            range.insertNode(element);\n        }\n        return element;\n    };\n    SelectionCommands.getChildNode = function (node, element) {\n        if (node === undefined || node === null) {\n            element.innerHTML = '&#8203;';\n            node = element.firstChild;\n        }\n        return node;\n    };\n    SelectionCommands.applySelection = function (nodes, domSelection, nodeCutter, index, isCollapsed) {\n        if (nodes.length === 1 && !isCollapsed) {\n            domSelection.startContainer = domSelection.getNodeArray(nodes[index], true);\n            domSelection.endContainer = domSelection.startContainer;\n            domSelection.startOffset = 0;\n            domSelection.endOffset = nodes[index].textContent.length;\n        }\n        else if (nodes.length === 1 && isCollapsed) {\n            domSelection.startContainer = domSelection.getNodeArray(nodes[index], true);\n            domSelection.endContainer = domSelection.startContainer;\n            domSelection.startOffset = nodeCutter.position;\n            domSelection.endOffset = nodeCutter.position;\n        }\n        else if (index === 0) {\n            domSelection.startContainer = domSelection.getNodeArray(nodes[index], true);\n            domSelection.startOffset = 0;\n        }\n        else if (index === nodes.length - 1) {\n            domSelection.endContainer = domSelection.getNodeArray(nodes[index], false);\n            domSelection.endOffset = nodes[index].textContent.length;\n        }\n        return domSelection;\n    };\n    SelectionCommands.GetFormatNode = function (format, value, tagName, styles) {\n        var node;\n        switch (format) {\n            case 'bold':\n                return document.createElement('strong');\n            case 'italic':\n                return document.createElement('em');\n            case 'underline':\n                node = document.createElement('span');\n                this.updateStyles(node, tagName, styles);\n                node.style.textDecoration = 'underline';\n                return node;\n            case 'strikethrough':\n                node = document.createElement('span');\n                this.updateStyles(node, tagName, styles);\n                node.style.textDecoration = 'line-through';\n                return node;\n            case 'superscript':\n                return document.createElement('sup');\n            case 'subscript':\n                return document.createElement('sub');\n            case 'fontcolor':\n                node = document.createElement('span');\n                this.updateStyles(node, tagName, styles);\n                node.style.color = value;\n                node.style.textDecoration = 'inherit';\n                return node;\n            case 'fontname':\n                node = document.createElement('span');\n                this.updateStyles(node, tagName, styles);\n                node.style.fontFamily = value;\n                return node;\n            case 'fontsize':\n                node = document.createElement('span');\n                this.updateStyles(node, tagName, styles);\n                node.style.fontSize = value;\n                return node;\n            default:\n                node = document.createElement('span');\n                this.updateStyles(node, tagName, styles);\n                node.style.backgroundColor = value;\n                return node;\n        }\n    };\n    SelectionCommands.updateStyles = function (ele, tag, styles) {\n        if (styles !== null && tag === 'SPAN') {\n            ele.setAttribute('style', styles);\n        }\n    };\n    // Below function is used to insert the element created by the format painter plugin.\n    SelectionCommands.insertFormatPainterElem = function (nodes, index, range, nodeCutter, painterValues, domNode) {\n        var parent = !domNode.isBlockNode(nodes[index].parentElement) ?\n            nodes[index].parentElement : nodes[index];\n        if (!domNode.isBlockNode(parent)) {\n            while (parent.textContent.trim() === parent.parentElement.textContent.trim() && !domNode.isBlockNode(parent.parentElement)) {\n                parent = parent.parentElement;\n            }\n        }\n        // The below code is used to remove the already present inline style from the text node.\n        if (!isNOU(parent) && parent.nodeType === 1 && !(parent.classList.contains('e-rte-img-caption') || parent.classList.contains('e-img-inner'))) {\n            this.formatPainterCleanup(index, nodes, parent, range, nodeCutter, domNode);\n        }\n        var elem = painterValues.element;\n        // The below code is used to apply the inline format copied.\n        if (!isNOU(elem)) {\n            // Step 1: Cloning the element that is created by format painter.\n            // Step 2: Finding the last child of the nested elememt using the paintervalues.lastchild nodename\n            // Step 3: Assigning the nodes[index] text content to the last child element.\n            // Step 4: Wrapping the cloned element with the nodes[index]\n            var clonedElement = elem.cloneNode(true);\n            var elemList = clonedElement.querySelectorAll(painterValues.lastChild.nodeName);\n            var lastElement = void 0;\n            if (elemList.length > 0) {\n                lastElement = elemList[elemList.length - 1];\n            }\n            else {\n                if (!isNOU(clonedElement) && clonedElement.nodeName === painterValues.lastChild.nodeName) {\n                    lastElement = clonedElement;\n                }\n            }\n            lastElement.textContent = nodes[index].textContent;\n            var lastChild = lastElement.childNodes[0];\n            nodes[index] = InsertMethods.Wrap(nodes[index], clonedElement);\n            nodes[index].textContent = '';\n            nodes[index] = lastChild;\n        }\n        return nodes[index];\n    };\n    SelectionCommands.formatPainterCleanup = function (index, nodes, parent, range, nodeCutter, domNode) {\n        var INVALID_TAGS = ['A', 'AUDIO', 'IMG', 'VIDEO', 'IFRAME'];\n        if (index === 0 && parent.textContent.trim() !== nodes[index].textContent.trim()) {\n            nodeCutter.SplitNode(range, parent, true);\n            var childELemList = nodes[index].parentElement.childNodes;\n            for (var i = 0; i < childELemList.length; i++) {\n                if (childELemList[i].textContent.trim() === nodes[i].textContent.trim()) {\n                    parent.parentNode.insertBefore(childELemList[i], parent);\n                    break;\n                }\n            }\n            var blockChildNodes = parent.parentElement.childNodes;\n            for (var k = 0; k < blockChildNodes.length; k++) {\n                if (blockChildNodes[k].textContent.trim() === '' || blockChildNodes[k].textContent.length === 0) {\n                    detach(blockChildNodes[k]);\n                }\n            }\n        }\n        else if (parent.textContent.trim() !== nodes[index].textContent.trim()) {\n            parent.parentElement.insertBefore(nodes[index], parent);\n        }\n        else {\n            while (!isNOU(parent) && parent.nodeType !== 3 && !domNode.isBlockNode(parent)) {\n                var temp = void 0;\n                for (var i = 0; i < parent.childNodes.length; i++) {\n                    var currentChild = parent.childNodes[i];\n                    if (currentChild.textContent.trim().length !== 0 && currentChild.nodeType !== 3) {\n                        temp = parent.childNodes[i];\n                    }\n                }\n                if (INVALID_TAGS.indexOf(parent.tagName) === -1) {\n                    InsertMethods.unwrap(parent);\n                }\n                parent = temp;\n            }\n        }\n    };\n    SelectionCommands.enterAction = 'P';\n    return SelectionCommands;\n}());\nexport { SelectionCommands };\n","import * as CONSTANT from './../base/constant';\nimport { SelectionCommands } from './selection-commands';\nimport * as EVENTS from './../../common/constant';\n/**\n * Selection EXEC internal component\n *\n * @hidden\n * @deprecated\n */\nvar SelectionBasedExec = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     *\n     * @param {EditorManager} parent - specifies the parent element\n     * @hidden\n     * @deprecated\n     */\n    function SelectionBasedExec(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    SelectionBasedExec.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.SELECTION_TYPE, this.applySelection, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDownHandler, this);\n    };\n    SelectionBasedExec.prototype.keyDownHandler = function (e) {\n        var validFormats = ['bold', 'italic', 'underline', 'strikethrough', 'superscript',\n            'subscript', 'uppercase', 'lowercase'];\n        if ((e.event.ctrlKey || e.event.metaKey) && validFormats.indexOf(e.event.action) > -1) {\n            e.event.preventDefault();\n            SelectionCommands.applyFormat(this.parent.currentDocument, e.event.action, this.parent.editableElement, e.enterAction);\n            this.callBack(e, e.event.action);\n        }\n    };\n    SelectionBasedExec.prototype.applySelection = function (e) {\n        SelectionCommands.applyFormat(this.parent.currentDocument, e.subCommand.toLocaleLowerCase(), this.parent.editableElement, e.enterAction, e.value, e.selector);\n        this.callBack(e, e.subCommand);\n    };\n    SelectionBasedExec.prototype.callBack = function (event, action) {\n        if (event.callBack) {\n            event.callBack({\n                requestType: action,\n                event: event.event,\n                editorMode: 'HTML',\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    return SelectionBasedExec;\n}());\nexport { SelectionBasedExec };\n","import * as CONSTANT from './../base/constant';\nimport { InsertHtml } from './inserthtml';\n/**\n * Selection EXEC internal component\n *\n * @hidden\n * @deprecated\n */\nvar InsertHtmlExec = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     *\n     * @param {EditorManager} parent - sepcifies the parent element\n     * @hidden\n     * @deprecated\n     */\n    function InsertHtmlExec(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    InsertHtmlExec.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.INSERTHTML_TYPE, this.applyHtml, this);\n    };\n    InsertHtmlExec.prototype.applyHtml = function (e) {\n        InsertHtml.Insert(this.parent.currentDocument, e.value, this.parent.editableElement, true, e.enterAction);\n        if (e.subCommand === 'pasteCleanup') {\n            var pastedElements = this.parent.editableElement.querySelectorAll('.pasteContent_RTE');\n            var allPastedElements = [].slice.call(pastedElements);\n            var imgElements = this.parent.editableElement.querySelectorAll('.pasteContent_Img');\n            var allImgElm = [].slice.call(imgElements);\n            e.callBack({\n                requestType: e.subCommand,\n                editorMode: 'HTML',\n                elements: allPastedElements,\n                imgElem: allImgElm\n            });\n        }\n        else {\n            if (e.callBack) {\n                e.callBack({\n                    requestType: e.subCommand,\n                    editorMode: 'HTML',\n                    event: e.event,\n                    range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                    elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n                });\n            }\n        }\n    };\n    return InsertHtmlExec;\n}());\nexport { InsertHtmlExec };\n","/**\n * `Clear Format` module is used to handle Clear Format.\n */\nimport { closest } from '@syncfusion/ej2-base';\nimport { NodeSelection } from './../../selection/index';\nimport { NodeCutter } from './nodecutter';\nimport { DOMNode } from './dom-node';\nimport { InsertMethods } from './insert-methods';\nimport { IsFormatted } from './isformatted';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\nvar ClearFormat = /** @class */ (function () {\n    function ClearFormat() {\n    }\n    /**\n     * clear method\n     *\n     * @param {Document} docElement - specifies the document element.\n     * @param {Node} endNode - specifies the end node\n     * @param {string} enterAction - specifies the enter key action\n     * @param {string} selector - specifies the string value\n     * @param {string} command - specifies the command value\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    ClearFormat.clear = function (docElement, endNode, enterAction, selector, command) {\n        this.domNode = new DOMNode(endNode, docElement);\n        this.defaultTag = enterAction === 'P' ? this.defaultTag : 'div';\n        var nodeSelection = new NodeSelection();\n        var nodeCutter = new NodeCutter();\n        var range = nodeSelection.getRange(docElement);\n        var nodes = range.collapsed ? nodeSelection.getSelectionNodeCollection(range) :\n            nodeSelection.getSelectionNodeCollectionBr(range);\n        var save = nodeSelection.save(range, docElement);\n        var cursorRange = false;\n        if (range.collapsed && command !== 'ClearFormat') {\n            cursorRange = true;\n            range = nodeCutter.GetCursorRange(docElement, range, nodes[0]);\n        }\n        var isCollapsed = range.collapsed;\n        if (!isCollapsed) {\n            var preNode = void 0;\n            if (nodes.length > 0 && nodes[0].nodeName === 'BR' && closest(nodes[0], 'table')) {\n                preNode = nodeCutter.GetSpliceNode(range, closest(nodes[0], 'table'));\n            }\n            else {\n                preNode = nodeCutter.GetSpliceNode(range, nodes[nodes.length > 1 && nodes[0].nodeName === 'IMG' ? 1 : 0]);\n            }\n            if (nodes.length === 1) {\n                nodeSelection.setSelectionContents(docElement, preNode);\n                range = nodeSelection.getRange(docElement);\n            }\n            else if (nodes.length > 1) {\n                var i = 1;\n                var lastText = nodes[nodes.length - i];\n                while (nodes.length <= i && nodes[nodes.length - i].nodeName === 'BR') {\n                    i++;\n                    lastText = nodes[nodes.length - i];\n                }\n                var lasNode = nodeCutter.GetSpliceNode(range, lastText);\n                nodeSelection.setSelectionText(docElement, preNode, lasNode, 0, (lasNode.nodeType === 3) ?\n                    lasNode.textContent.length : lasNode.childNodes.length);\n                range = nodeSelection.getRange(docElement);\n            }\n            var exactNodes = nodeSelection.getNodeCollection(range);\n            var cloneSelectNodes = exactNodes.slice();\n            this.clearInlines(nodeSelection.getSelectionNodes(cloneSelectNodes), cloneSelectNodes, nodeSelection.getRange(docElement), nodeCutter, endNode);\n            this.reSelection(docElement, save, exactNodes);\n            range = nodeSelection.getRange(docElement);\n            exactNodes = nodeSelection.getNodeCollection(range);\n            var cloneParentNodes = exactNodes.slice();\n            this.clearBlocks(docElement, cloneParentNodes, endNode, nodeCutter, nodeSelection);\n            if (isIDevice()) {\n                setEditFrameFocus(endNode, selector);\n            }\n            this.reSelection(docElement, save, exactNodes);\n        }\n        if (cursorRange) {\n            nodeSelection.setCursorPoint(docElement, range.endContainer, range.endOffset);\n        }\n    };\n    ClearFormat.reSelection = function (docElement, save, exactNodes) {\n        var selectionNodes = save.getInsertNodes(exactNodes);\n        save.startContainer = save.getNodeArray(selectionNodes[0], true, docElement);\n        save.startOffset = 0;\n        save.endContainer = save.getNodeArray(selectionNodes[selectionNodes.length - 1], false, docElement);\n        var endIndexNode = selectionNodes[selectionNodes.length - 1];\n        save.endOffset = (endIndexNode.nodeType === 3) ? endIndexNode.textContent.length\n            : endIndexNode.childNodes.length;\n        save.restore();\n    };\n    ClearFormat.clearBlocks = function (docElement, nodes, endNode, nodeCutter, nodeSelection) {\n        var parentNodes = [];\n        for (var index = 0; index < nodes.length; index++) {\n            if (this.BLOCK_TAGS.indexOf(nodes[index].nodeName.toLocaleLowerCase()) > -1\n                && parentNodes.indexOf(nodes[index]) === -1) {\n                parentNodes.push(nodes[index]);\n            }\n            else if ((this.BLOCK_TAGS.indexOf(nodes[index].parentNode.nodeName.toLocaleLowerCase()) > -1)\n                && parentNodes.indexOf(nodes[index].parentNode) === -1\n                && endNode !== nodes[index].parentNode) {\n                parentNodes.push(nodes[index].parentNode);\n            }\n        }\n        parentNodes = this.spliceParent(parentNodes, nodes)[0];\n        parentNodes = this.removeParent(parentNodes);\n        this.unWrap(docElement, parentNodes, nodeCutter, nodeSelection);\n    };\n    ClearFormat.spliceParent = function (parentNodes, nodes) {\n        for (var index1 = 0; index1 < parentNodes.length; index1++) {\n            var len = parentNodes[index1].childNodes.length;\n            for (var index2 = 0; index2 < len; index2++) {\n                if ((nodes.indexOf(parentNodes[index1].childNodes[index2]) > 0)\n                    && (parentNodes[index1].childNodes[index2].childNodes.length > 0)) {\n                    nodes = this.spliceParent([parentNodes[index1].childNodes[index2]], nodes)[1];\n                }\n                if ((nodes.indexOf(parentNodes[index1].childNodes[index2]) <= -1) &&\n                    (parentNodes[index1].childNodes[index2].textContent.trim() !== '')) {\n                    for (var index3 = 0; index3 < len; index3++) {\n                        if (nodes.indexOf(parentNodes[index1].childNodes[index3]) > -1) {\n                            nodes.splice(nodes.indexOf(parentNodes[index1].childNodes[index3]), 1);\n                        }\n                    }\n                    index2 = parentNodes[index1].childNodes.length;\n                    var parentIndex = parentNodes.indexOf(parentNodes[index1].parentNode);\n                    var nodeIndex = nodes.indexOf(parentNodes[index1].parentNode);\n                    if (parentIndex > -1) {\n                        parentNodes.splice(parentIndex, 1);\n                    }\n                    if (nodeIndex > -1) {\n                        nodes.splice(nodeIndex, 1);\n                    }\n                    var elementIndex = nodes.indexOf(parentNodes[index1]);\n                    if (elementIndex > -1) {\n                        nodes.splice(elementIndex, 1);\n                    }\n                    parentNodes.splice(index1, 1);\n                    index1--;\n                }\n            }\n        }\n        return [parentNodes, nodes];\n    };\n    ClearFormat.removeChild = function (parentNodes, parentNode) {\n        var count = parentNode.childNodes.length;\n        if (count > 0) {\n            for (var index = 0; index < count; index++) {\n                if (parentNodes.indexOf(parentNode.childNodes[index]) > -1) {\n                    parentNodes = this.removeChild(parentNodes, parentNode.childNodes[index]);\n                    parentNodes.splice(parentNodes.indexOf(parentNode.childNodes[index]), 1);\n                }\n            }\n        }\n        return parentNodes;\n    };\n    ClearFormat.removeParent = function (parentNodes) {\n        for (var index = 0; index < parentNodes.length; index++) {\n            if (parentNodes.indexOf(parentNodes[index].parentNode) > -1) {\n                parentNodes = this.removeChild(parentNodes, parentNodes[index]);\n                parentNodes.splice(index, 1);\n                index--;\n            }\n        }\n        return parentNodes;\n    };\n    ClearFormat.unWrap = function (docElement, parentNodes, nodeCutter, nodeSelection) {\n        for (var index1 = 0; index1 < parentNodes.length; index1++) {\n            if (this.NONVALID_TAGS.indexOf(parentNodes[index1].nodeName.toLowerCase()) > -1\n                && parentNodes[index1].parentNode\n                && this.NONVALID_PARENT_TAGS.indexOf(parentNodes[index1].parentNode.nodeName.toLowerCase()) > -1) {\n                nodeSelection.setSelectionText(docElement, parentNodes[index1], parentNodes[index1], 0, parentNodes[index1].childNodes.length);\n                InsertMethods.unwrap(nodeCutter.GetSpliceNode(nodeSelection.getRange(docElement), parentNodes[index1].parentNode));\n            }\n            if (parentNodes[index1].nodeName.toLocaleLowerCase() !== 'p') {\n                if (this.NONVALID_PARENT_TAGS.indexOf(parentNodes[index1].nodeName.toLowerCase()) < 0\n                    && parentNodes[index1].parentNode.nodeName.toLocaleLowerCase() !== 'p'\n                    && !((parentNodes[index1].nodeName.toLocaleLowerCase() === 'blockquote'\n                        || parentNodes[index1].nodeName.toLocaleLowerCase() === 'li')\n                        && this.IGNORE_PARENT_TAGS.indexOf(parentNodes[index1].childNodes[0].nodeName.toLocaleLowerCase()) > -1)\n                    && !(parentNodes[index1].childNodes.length === 1\n                        && parentNodes[index1].childNodes[0].nodeName.toLocaleLowerCase() === 'p')) {\n                    InsertMethods.Wrap(parentNodes[index1], docElement.createElement(this.defaultTag));\n                }\n                var childNodes = InsertMethods.unwrap(parentNodes[index1]);\n                if (childNodes.length === 1\n                    && childNodes[0].parentNode.nodeName.toLocaleLowerCase() === 'p') {\n                    InsertMethods.Wrap(parentNodes[index1], docElement.createElement(this.defaultTag));\n                    InsertMethods.unwrap(parentNodes[index1]);\n                }\n                for (var index2 = 0; index2 < childNodes.length; index2++) {\n                    if (this.NONVALID_TAGS.indexOf(childNodes[index2].nodeName.toLowerCase()) > -1) {\n                        this.unWrap(docElement, [childNodes[index2]], nodeCutter, nodeSelection);\n                    }\n                    else if (this.BLOCK_TAGS.indexOf(childNodes[index2].nodeName.toLocaleLowerCase()) > -1 &&\n                        childNodes[index2].nodeName.toLocaleLowerCase() !== 'p') {\n                        var blockNodes = this.removeParent([childNodes[index2]]);\n                        this.unWrap(docElement, blockNodes, nodeCutter, nodeSelection);\n                    }\n                    else if (this.BLOCK_TAGS.indexOf(childNodes[index2].nodeName.toLocaleLowerCase()) > -1 &&\n                        childNodes[index2].parentNode.nodeName.toLocaleLowerCase() ===\n                            childNodes[index2].nodeName.toLocaleLowerCase()) {\n                        InsertMethods.unwrap(childNodes[index2]);\n                    }\n                    else if (this.BLOCK_TAGS.indexOf(childNodes[index2].nodeName.toLocaleLowerCase()) > -1 &&\n                        childNodes[index2].nodeName.toLocaleLowerCase() === 'p') {\n                        InsertMethods.Wrap(childNodes[index2], docElement.createElement(this.defaultTag));\n                        InsertMethods.unwrap(childNodes[index2]);\n                    }\n                }\n            }\n            else {\n                InsertMethods.Wrap(parentNodes[index1], docElement.createElement(this.defaultTag));\n                InsertMethods.unwrap(parentNodes[index1]);\n            }\n        }\n    };\n    ClearFormat.clearInlines = function (textNodes, nodes, range, nodeCutter, \n    // eslint-disable-next-line\n    endNode) {\n        for (var index = 0; index < textNodes.length; index++) {\n            var currentInlineNode = textNodes[index];\n            var currentNode = void 0;\n            while (!this.domNode.isBlockNode(currentInlineNode) &&\n                (currentInlineNode.parentElement && !currentInlineNode.parentElement.classList.contains('e-img-inner'))) {\n                currentNode = currentInlineNode;\n                currentInlineNode = currentInlineNode.parentElement;\n            }\n            if (currentNode &&\n                IsFormatted.inlineTags.indexOf(currentNode.nodeName.toLocaleLowerCase()) > -1) {\n                nodeCutter.GetSpliceNode(range, currentNode);\n                this.removeInlineParent(currentNode);\n            }\n        }\n    };\n    ClearFormat.removeInlineParent = function (textNodes) {\n        var nodes = InsertMethods.unwrap(textNodes);\n        for (var index = 0; index < nodes.length; index++) {\n            if (nodes[index].parentNode.childNodes.length === 1 && !nodes[index].parentNode.classList.contains('e-img-inner')\n                && IsFormatted.inlineTags.indexOf(nodes[index].parentNode.nodeName.toLocaleLowerCase()) > -1) {\n                this.removeInlineParent(nodes[index].parentNode);\n            }\n            else if (IsFormatted.inlineTags.indexOf(nodes[index].nodeName.toLocaleLowerCase()) > -1) {\n                this.removeInlineParent(nodes[index]);\n            }\n        }\n    };\n    ClearFormat.BLOCK_TAGS = ['address', 'article', 'aside', 'blockquote',\n        'details', 'dd', 'div', 'dl', 'dt', 'fieldset', 'figcaption', 'figure', 'footer',\n        'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'hgroup', 'li', 'main', 'nav',\n        'noscript', 'ol', 'p', 'pre', 'section', 'ul'];\n    ClearFormat.NONVALID_PARENT_TAGS = ['thead', 'tbody', 'ul', 'ol', 'table', 'tfoot', 'tr'];\n    ClearFormat.IGNORE_PARENT_TAGS = ['ul', 'ol', 'table'];\n    ClearFormat.NONVALID_TAGS = ['thead', 'tbody', 'figcaption', 'td', 'tr', 'th', 'tfoot', 'figcaption', 'li'];\n    ClearFormat.defaultTag = 'p';\n    return ClearFormat;\n}());\nexport { ClearFormat };\n","import * as CONSTANT from './../base/constant';\nimport { ClearFormat } from './clearformat';\nimport * as EVENTS from './../../common/constant';\n/**\n * Clear Format EXEC internal component\n *\n * @hidden\n * @deprecated\n */\nvar ClearFormatExec = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     *\n     * @param {EditorManager} parent - specifies the parent element.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    function ClearFormatExec(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    ClearFormatExec.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.CLEAR_TYPE, this.applyClear, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.onKeyDown, this);\n    };\n    ClearFormatExec.prototype.onKeyDown = function (e) {\n        switch (e.event.action) {\n            case 'clear-format':\n                this.applyClear({ subCommand: 'ClearFormat', callBack: e.callBack, enterAction: e.enterAction });\n                e.event.preventDefault();\n                break;\n        }\n    };\n    ClearFormatExec.prototype.applyClear = function (e) {\n        if (e.subCommand === 'ClearFormat') {\n            ClearFormat.clear(this.parent.currentDocument, this.parent.editableElement, e.enterAction, e.selector, e.subCommand);\n            if (e.callBack) {\n                e.callBack({\n                    requestType: e.subCommand,\n                    event: e.event,\n                    editorMode: 'HTML',\n                    range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                    elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n                });\n            }\n        }\n    };\n    return ClearFormatExec;\n}());\nexport { ClearFormatExec };\n","import { debounce, isNullOrUndefined, detach } from '@syncfusion/ej2-base';\nimport { NodeSelection } from './../../selection/selection';\nimport * as EVENTS from './../../common/constant';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\n/**\n * `Undo` module is used to handle undo actions.\n */\nvar UndoRedoManager = /** @class */ (function () {\n    function UndoRedoManager(parent, options) {\n        this.undoRedoStack = [];\n        this.parent = parent;\n        this.undoRedoSteps = !isNullOrUndefined(options) ? options.undoRedoSteps : 30;\n        this.undoRedoTimer = !isNullOrUndefined(options) ? options.undoRedoTimer : 300;\n        this.addEventListener();\n    }\n    UndoRedoManager.prototype.addEventListener = function () {\n        var debounceListener = debounce(this.keyUp, this.undoRedoTimer);\n        this.parent.observer.on(EVENTS.KEY_UP_HANDLER, debounceListener, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDown, this);\n        this.parent.observer.on(EVENTS.ACTION, this.onAction, this);\n        this.parent.observer.on(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged, this);\n    };\n    UndoRedoManager.prototype.onPropertyChanged = function (props) {\n        for (var _i = 0, _a = Object.keys(props.newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'undoRedoSteps':\n                    this.undoRedoSteps = props.newProp.undoRedoSteps;\n                    break;\n                case 'undoRedoTimer':\n                    this.undoRedoTimer = props.newProp.undoRedoTimer;\n                    break;\n            }\n        }\n    };\n    UndoRedoManager.prototype.removeEventListener = function () {\n        this.parent.observer.off(EVENTS.KEY_UP_HANDLER, this.keyUp);\n        this.parent.observer.off(EVENTS.KEY_DOWN_HANDLER, this.keyDown);\n        this.parent.observer.off(EVENTS.ACTION, this.onAction);\n    };\n    /**\n     * onAction method\n     *\n     * @param {IHtmlSubCommands} e - specifies the sub command\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    UndoRedoManager.prototype.onAction = function (e) {\n        if (e.subCommand === 'Undo') {\n            this.undo(e);\n        }\n        else {\n            this.redo(e);\n        }\n    };\n    /**\n     * Destroys the ToolBar.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    UndoRedoManager.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    UndoRedoManager.prototype.keyDown = function (e) {\n        var event = e.event;\n        // eslint-disable-next-line\n        var proxy = this;\n        switch (event.action) {\n            case 'undo':\n                event.preventDefault();\n                proxy.undo(e);\n                break;\n            case 'redo':\n                event.preventDefault();\n                proxy.redo(e);\n                break;\n        }\n    };\n    UndoRedoManager.prototype.keyUp = function (e) {\n        if (e.event.keyCode !== 17 && !e.event.ctrlKey) {\n            this.saveData(e);\n        }\n    };\n    UndoRedoManager.prototype.getTextContentFromFragment = function (fragment) {\n        var textContent = '';\n        for (var i = 0; i < fragment.childNodes.length; i++) {\n            var childNode = fragment.childNodes[i];\n            if (childNode.nodeType === Node.TEXT_NODE) {\n                textContent += childNode.textContent;\n            }\n            else if (childNode.nodeType === Node.ELEMENT_NODE) {\n                textContent += this.getTextContentFromFragment(childNode);\n            }\n        }\n        return textContent;\n    };\n    /**\n     * RTE collection stored html format.\n     *\n     * @function saveData\n     * @param {KeyboardEvent} e - specifies the keyboard event\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    UndoRedoManager.prototype.saveData = function (e) {\n        var range = new NodeSelection().getRange(this.parent.currentDocument);\n        var currentContainer = this.parent.editableElement === range.startContainer.parentElement ?\n            range.startContainer.parentElement : range.startContainer;\n        for (var i = currentContainer.childNodes.length - 1; i >= 0; i--) {\n            if (!isNullOrUndefined(currentContainer.childNodes[i]) && currentContainer.childNodes[i].nodeName === '#text' &&\n                currentContainer.childNodes[i].textContent.length === 0 && currentContainer.childNodes[i].nodeName !== 'IMG' &&\n                currentContainer.childNodes[i].nodeName !== 'BR' && currentContainer.childNodes[i].nodeName && 'HR') {\n                detach(currentContainer.childNodes[i]);\n            }\n        }\n        range = new NodeSelection().getRange(this.parent.currentDocument);\n        var save = new NodeSelection().save(range, this.parent.currentDocument);\n        var clonedElement = this.parent.editableElement.cloneNode(true);\n        var fragment = document.createDocumentFragment();\n        while (clonedElement.firstChild) {\n            fragment.appendChild(clonedElement.firstChild);\n        }\n        var changEle = { text: fragment, range: save };\n        if (this.undoRedoStack.length >= this.steps) {\n            this.undoRedoStack = this.undoRedoStack.slice(0, this.steps + 1);\n        }\n        if (this.undoRedoStack.length > 1 && (this.undoRedoStack[this.undoRedoStack.length - 1].range.range.collapsed === range.collapsed)\n            && (this.undoRedoStack[this.undoRedoStack.length - 1].range.startOffset === save.range.startOffset) &&\n            (this.undoRedoStack[this.undoRedoStack.length - 1].range.endOffset === save.range.endOffset) &&\n            (this.undoRedoStack[this.undoRedoStack.length - 1].range.range.startContainer === save.range.startContainer) &&\n            (this.getTextContentFromFragment(this.undoRedoStack[this.undoRedoStack.length - 1].text).trim() ===\n                this.getTextContentFromFragment(changEle.text).trim())) {\n            return;\n        }\n        this.undoRedoStack.push(changEle);\n        this.steps = this.undoRedoStack.length - 1;\n        if (this.steps > this.undoRedoSteps) {\n            this.undoRedoStack.shift();\n            this.steps--;\n        }\n        if (e && e.callBack) {\n            e.callBack();\n        }\n    };\n    /**\n     * Undo the editable text.\n     *\n     * @function undo\n     * @param {IHtmlSubCommands} e - specifies the sub commands\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    UndoRedoManager.prototype.undo = function (e) {\n        if (this.steps > 0) {\n            var range = this.undoRedoStack[this.steps - 1].range;\n            var removedContent = this.undoRedoStack[this.steps - 1].text;\n            this.parent.editableElement.innerHTML = '';\n            this.parent.editableElement.appendChild(removedContent.cloneNode(true));\n            this.parent.editableElement.focus();\n            if (isIDevice()) {\n                setEditFrameFocus(this.parent.editableElement, e.selector);\n            }\n            range.restore();\n            this.steps--;\n            if (e.callBack) {\n                e.callBack({\n                    requestType: 'Undo',\n                    editorMode: 'HTML',\n                    range: range,\n                    elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),\n                    event: e.event\n                });\n            }\n        }\n    };\n    /**\n     * Redo the editable text.\n     *\n     * @param {IHtmlSubCommands} e - specifies the sub commands\n     * @function redo\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    UndoRedoManager.prototype.redo = function (e) {\n        if (this.undoRedoStack[this.steps + 1] != null) {\n            var range = this.undoRedoStack[this.steps + 1].range;\n            var addedContent = this.undoRedoStack[this.steps + 1].text;\n            this.parent.editableElement.innerHTML = '';\n            this.parent.editableElement.appendChild(addedContent.cloneNode(true));\n            this.parent.editableElement.focus();\n            if (isIDevice()) {\n                setEditFrameFocus(this.parent.editableElement, e.selector);\n            }\n            range.restore();\n            this.steps++;\n            if (e.callBack) {\n                e.callBack({\n                    requestType: 'Redo',\n                    editorMode: 'HTML',\n                    range: range,\n                    elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),\n                    event: e.event\n                });\n            }\n        }\n    };\n    /**\n     * getUndoStatus method\n     *\n     * @returns {boolean} - returns the boolean value\n     * @hidden\n     * @deprecated\n     */\n    UndoRedoManager.prototype.getUndoStatus = function () {\n        var status = { undo: false, redo: false };\n        if (this.steps > 0) {\n            status.undo = true;\n        }\n        if (this.undoRedoStack[this.steps + 1] != null) {\n            status.redo = true;\n        }\n        return status;\n    };\n    return UndoRedoManager;\n}());\nexport { UndoRedoManager };\n","import * as EVENTS from '../../common/constant';\nimport { createElement, isNullOrUndefined as isNOU, detach } from '@syncfusion/ej2-base';\n/**\n * PasteCleanup for MsWord content\n *\n * @hidden\n * @deprecated\n */\nvar MsWordPaste = /** @class */ (function () {\n    function MsWordPaste(parent) {\n        this.olData = [\n            'decimal',\n            'lower-alpha',\n            'lower-roman',\n            'upper-alpha',\n            'upper-roman',\n            'lower-greek'\n        ];\n        this.ulData = [\n            'disc',\n            'square',\n            'circle',\n            'disc',\n            'square',\n            'circle'\n        ];\n        this.ignorableNodes = ['A', 'APPLET', 'B', 'BLOCKQUOTE', 'BR',\n            'BUTTON', 'CENTER', 'CODE', 'COL', 'COLGROUP', 'DD', 'DEL', 'DFN', 'DIR', 'DIV',\n            'DL', 'DT', 'EM', 'FIELDSET', 'FONT', 'FORM', 'FRAME', 'FRAMESET', 'H1', 'H2',\n            'H3', 'H4', 'H5', 'H6', 'HR', 'I', 'IMG', 'IFRAME', 'INPUT', 'INS', 'LABEL',\n            'LI', 'OL', 'OPTION', 'P', 'PARAM', 'PRE', 'Q', 'S', 'SELECT', 'SPAN', 'STRIKE',\n            'STRONG', 'SUB', 'SUP', 'TABLE', 'TBODY', 'TD', 'TEXTAREA', 'TFOOT', 'TH',\n            'THEAD', 'TITLE', 'TR', 'TT', 'U', 'UL'];\n        this.blockNode = ['div', 'p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',\n            'address', 'blockquote', 'button', 'center', 'dd', 'dir', 'dl', 'dt', 'fieldset',\n            'frameset', 'hr', 'iframe', 'isindex', 'li', 'map', 'menu', 'noframes', 'noscript',\n            'object', 'ol', 'pre', 'table', 'tbody', 'td', 'tfoot', 'th', 'thead', 'tr', 'ul',\n            'header', 'article', 'nav', 'footer', 'section', 'aside', 'main', 'figure', 'figcaption'];\n        this.borderStyle = ['border-top', 'border-right', 'border-bottom', 'border-left'];\n        this.upperRomanNumber = ['I', 'II', 'III', 'IV', 'V', 'VI', 'VII', 'VIII', 'IX',\n            'X', 'XI', 'XII', 'XIII', 'XIV', 'XV', 'XVI', 'XVII', 'XVIII', 'XIX', 'XX'];\n        this.lowerRomanNumber = ['i', 'ii', 'iii', 'iv', 'v', 'vi', 'vii', 'viii', 'ix',\n            'x', 'xi', 'xii', 'xiii', 'xiv', 'xv', 'xvi', 'xvii', 'xviii', 'xix', 'xx'];\n        this.lowerGreekNumber = ['α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ',\n            'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω'];\n        this.removableElements = ['o:p', 'style'];\n        this.listContents = [];\n        this.cropImageDimensions = [];\n        this.parent = parent;\n        this.addEventListener();\n    }\n    MsWordPaste.prototype.addEventListener = function () {\n        this.parent.observer.on(EVENTS.MS_WORD_CLEANUP_PLUGIN, this.wordCleanup, this);\n    };\n    MsWordPaste.prototype.wordCleanup = function (e) {\n        var wordPasteStyleConfig = !isNOU(e.allowedStylePropertiesArray) ? e.allowedStylePropertiesArray : [];\n        var listNodes = [];\n        var tempHTMLContent = e.args.clipboardData.getData('text/HTML');\n        var rtfData = e.args.clipboardData.getData('text/rtf');\n        var elm = createElement('p');\n        elm.setAttribute('id', 'MSWord-Content');\n        elm.innerHTML = tempHTMLContent;\n        var patern = /class='?Mso|style='[^ ]*\\bmso-/i;\n        var patern2 = /class=\"?Mso|style=\"[^ ]*\\bmso-/i;\n        var patern3 = /(class=\"?Mso|class='?Mso|class=\"?Xl|class='?Xl|class=Xl|style=\"[^\"]*\\bmso-|style='[^']*\\bmso-|w:WordDocument)/gi;\n        var pattern4 = /style='mso-width-source:/i;\n        if (patern.test(tempHTMLContent) || patern2.test(tempHTMLContent) || patern3.test(tempHTMLContent) ||\n            pattern4.test(tempHTMLContent)) {\n            this.imageConversion(elm, rtfData);\n            tempHTMLContent = tempHTMLContent.replace(/<img[^>]+>/i, '');\n            this.addListClass(elm);\n            listNodes = this.cleanUp(elm, listNodes);\n            if (!isNOU(listNodes[0]) && listNodes[0].parentElement.tagName !== 'UL' &&\n                listNodes[0].parentElement.tagName !== 'OL') {\n                this.listConverter(listNodes);\n            }\n            this.cleanList(elm, 'UL');\n            this.cleanList(elm, 'OL');\n            this.styleCorrection(elm, wordPasteStyleConfig);\n            this.removingComments(elm);\n            this.removeUnwantedElements(elm);\n            this.removeEmptyElements(elm);\n            this.removeEmptyAnchorTag(elm);\n            this.breakLineAddition(elm);\n            this.removeClassName(elm);\n            if (pattern4.test(tempHTMLContent)) {\n                this.addTableBorderClass(elm);\n            }\n            // Removing the margin for list items\n            var liChildren = elm.querySelectorAll('li');\n            if (liChildren.length > 0) {\n                for (var i = 0; i < liChildren.length; i++) {\n                    if (!isNOU(liChildren[i].style.marginLeft)) {\n                        liChildren[i].style.marginLeft = '';\n                    }\n                }\n            }\n            e.callBack(elm.innerHTML, this.cropImageDimensions);\n        }\n        else {\n            e.callBack(elm.innerHTML);\n        }\n    };\n    MsWordPaste.prototype.cleanList = function (elm, listTag) {\n        var replacableElem = elm.querySelectorAll(listTag + ' div');\n        for (var j = replacableElem.length - 1; j >= 0; j--) {\n            var parentElem = replacableElem[j].parentNode;\n            while (replacableElem[j].firstChild) {\n                parentElem.insertBefore(replacableElem[j].firstChild, replacableElem[j]);\n            }\n            var closestListElem = this.findClosestListElem(replacableElem[j]);\n            if (closestListElem) {\n                this.insertAfter(replacableElem[j], closestListElem);\n            }\n        }\n    };\n    MsWordPaste.prototype.insertAfter = function (newNode, referenceNode) {\n        referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n    };\n    MsWordPaste.prototype.findClosestListElem = function (listElem) {\n        var closestListElem;\n        while (!isNOU(listElem)) {\n            listElem = !isNOU(listElem.closest('ul')) && listElem.tagName !== 'UL' ?\n                listElem.closest('ul') : (listElem.tagName !== 'OL' ? listElem.closest('ol') : null);\n            closestListElem = !isNOU(listElem) ? listElem : closestListElem;\n        }\n        return closestListElem;\n    };\n    MsWordPaste.prototype.addListClass = function (elm) {\n        var allNodes = elm.querySelectorAll('*');\n        for (var index = 0; index < allNodes.length; index++) {\n            if (!isNOU(allNodes[index].getAttribute('style')) && allNodes[index].getAttribute('style').replace(/ /g, '').replace('\\n', '').indexOf('mso-list:l') >= 0 &&\n                allNodes[index].className.toLowerCase().indexOf('msolistparagraph') === -1 &&\n                allNodes[index].tagName.charAt(0) !== 'H' && allNodes[index].tagName !== 'LI' &&\n                allNodes[index].tagName !== 'OL' && allNodes[index].tagName !== 'UL') {\n                allNodes[index].classList.add('msolistparagraph');\n            }\n        }\n    };\n    MsWordPaste.prototype.addTableBorderClass = function (elm) {\n        var allTableElm = elm.querySelectorAll('table');\n        var hasTableBorder = false;\n        for (var i = 0; i < allTableElm.length; i++) {\n            for (var j = 0; j < this.borderStyle.length; j++) {\n                if (allTableElm[i].innerHTML.indexOf(this.borderStyle[j]) >= 0) {\n                    hasTableBorder = true;\n                    break;\n                }\n            }\n            if (hasTableBorder) {\n                allTableElm[i].classList.add('e-rte-table-border');\n                hasTableBorder = false;\n            }\n        }\n    };\n    MsWordPaste.prototype.imageConversion = function (elm, rtfData) {\n        this.checkVShape(elm);\n        var imgElem = elm.querySelectorAll('img');\n        for (var i = 0; i < imgElem.length; i++) {\n            if (!isNOU(imgElem[i].getAttribute('v:shapes')) &&\n                imgElem[i].getAttribute('v:shapes').indexOf('Picture') < 0 &&\n                imgElem[i].getAttribute('v:shapes').indexOf('圖片') < 0 &&\n                imgElem[i].getAttribute('v:shapes').indexOf('Grafik') < 0 &&\n                imgElem[i].getAttribute('v:shapes').toLowerCase().indexOf('image') < 0 &&\n                imgElem[i].getAttribute('v:shapes').indexOf('Graphic') < 0 &&\n                imgElem[i].getAttribute('v:shapes').indexOf('_x0000_s') < 0 &&\n                imgElem[i].getAttribute('v:shapes').indexOf('_x0000_i') < 0) {\n                detach(imgElem[i]);\n            }\n        }\n        imgElem = elm.querySelectorAll('img');\n        var imgSrc = [];\n        var base64Src = [];\n        var imgName = [];\n        // eslint-disable-next-line\n        var linkRegex = new RegExp(/([^\\S]|^)(((https?\\:\\/\\/)|(www\\.))(\\S+))/gi);\n        if (imgElem.length > 0) {\n            for (var i = 0; i < imgElem.length; i++) {\n                imgSrc.push(imgElem[i].getAttribute('src'));\n                imgName.push(imgElem[i].getAttribute('src').split('/')[imgElem[i].getAttribute('src').split('/').length - 1].split('.')[0]);\n            }\n            var hexValue = this.hexConversion(rtfData);\n            for (var i = 0; i < hexValue.length; i++) {\n                base64Src.push({\n                    base64Data: !isNOU(hexValue[i].hex) ? this.convertToBase64(hexValue[i]) : null,\n                    isCroppedImage: hexValue[i].isCroppedImage\n                });\n                if (hexValue[i].isCroppedImage) {\n                    this.cropImageDimensions.push({\n                        goalWidth: hexValue[i].goalWidth,\n                        goalHeight: hexValue[i].goalHeight,\n                        cropLength: hexValue[i].cropLength,\n                        cropTop: hexValue[i].cropTop,\n                        cropR: hexValue[i].cropR,\n                        cropB: hexValue[i].cropB\n                    });\n                }\n            }\n            for (var i = 0; i < imgElem.length; i++) {\n                if (imgSrc[i].match(linkRegex)) {\n                    imgElem[i].setAttribute('src', imgSrc[i]);\n                }\n                else {\n                    if (!isNOU(base64Src[i]) && !isNOU(base64Src[i].base64Data)) {\n                        imgElem[i].setAttribute('src', base64Src[i].base64Data);\n                    }\n                    else {\n                        imgElem[i].removeAttribute('src');\n                        imgElem[i].setAttribute('alt', 'Unsupported file format');\n                    }\n                    if (!isNOU(base64Src[i]) && base64Src[i].isCroppedImage) {\n                        imgElem[i].classList.add('e-img-cropped');\n                    }\n                }\n                imgElem[i].setAttribute('id', 'msWordImg-' + imgName[i]);\n            }\n        }\n    };\n    MsWordPaste.prototype.checkVShape = function (elm) {\n        var allNodes = elm.querySelectorAll('*');\n        for (var i = 0; i < allNodes.length; i++) {\n            switch (allNodes[i].nodeName) {\n                case 'V:SHAPETYPE':\n                    detach(allNodes[i]);\n                    break;\n                case 'V:SHAPE':\n                    if (allNodes[i].firstElementChild.nodeName === 'V:IMAGEDATA') {\n                        var src = allNodes[i].firstElementChild.getAttribute('src');\n                        var imgElement = createElement('img');\n                        imgElement.setAttribute('src', src);\n                        allNodes[i].parentElement.insertBefore(imgElement, allNodes[i]);\n                        detach(allNodes[i]);\n                    }\n                    break;\n            }\n        }\n    };\n    MsWordPaste.prototype.convertToBase64 = function (hexValue) {\n        var byteArr = this.conHexStringToBytes(hexValue.hex);\n        var base64String = this.conBytesToBase64(byteArr);\n        var base64 = hexValue.type ? 'data:' + hexValue.type + ';base64,' + base64String : null;\n        return base64;\n    };\n    MsWordPaste.prototype.conBytesToBase64 = function (byteArr) {\n        var base64Str = '';\n        var base64Char = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n        var byteArrLen = byteArr.length;\n        for (var i = 0; i < byteArrLen; i += 3) {\n            var array3 = byteArr.slice(i, i + 3);\n            var array3length = array3.length;\n            var array4 = [];\n            if (array3length < 3) {\n                for (var j = array3length; j < 3; j++) {\n                    array3[j] = 0;\n                }\n            }\n            array4[0] = (array3[0] & 0xFC) >> 2;\n            array4[1] = ((array3[0] & 0x03) << 4) | (array3[1] >> 4);\n            array4[2] = ((array3[1] & 0x0F) << 2) | ((array3[2] & 0xC0) >> 6);\n            array4[3] = array3[2] & 0x3F;\n            for (var j = 0; j < 4; j++) {\n                if (j <= array3length) {\n                    base64Str += base64Char.charAt(array4[j]);\n                }\n                else {\n                    base64Str += '=';\n                }\n            }\n        }\n        return base64Str;\n    };\n    MsWordPaste.prototype.conHexStringToBytes = function (hex) {\n        var byteArr = [];\n        var byteArrLen = hex.length / 2;\n        for (var i = 0; i < byteArrLen; i++) {\n            byteArr.push(parseInt(hex.substr(i * 2, 2), 16));\n        }\n        return byteArr;\n    };\n    MsWordPaste.prototype.hexConversion = function (rtfData) {\n        // eslint-disable-next-line\n        var picHead = /\\{\\\\pict[\\s\\S]+?\\\\bliptag\\-?\\d+(\\\\blipupi\\-?\\d+)?(\\{\\\\\\*\\\\blipuid\\s?[\\da-fA-F]+)?[\\s\\}]*?/;\n        // eslint-disable-next-line security/detect-non-literal-regexp\n        var pic = new RegExp('(?:(' + picHead.source + '))([\\\\da-fA-F\\\\s]+)\\\\}', 'g');\n        var fullImg = rtfData.match(pic);\n        var imgType;\n        var result = [];\n        if (!isNOU(fullImg)) {\n            for (var i = 0; i < fullImg.length; i++) {\n                var isCroppedImage = false;\n                var goalWidth = 0;\n                var goalHeight = 0;\n                var cropLength = 0;\n                var cropTop = 0;\n                var cropR = 0;\n                var cropB = 0;\n                if (picHead.test(fullImg[i])) {\n                    if (fullImg[i].indexOf('\\\\pngblip') !== -1) {\n                        imgType = 'image/png';\n                    }\n                    else if (fullImg[i].indexOf('\\\\jpegblip') !== -1) {\n                        imgType = 'image/jpeg';\n                    }\n                    else if (fullImg[i].indexOf('\\\\picprop') !== -1) {\n                        imgType = null;\n                    }\n                    else {\n                        continue;\n                    }\n                    isCroppedImage = ((this.extractCropValue('cropl', fullImg[i]) > 0 &&\n                        this.extractCropValue('cropt', fullImg[i]) > 0) ||\n                        this.extractCropValue('cropr', fullImg[i]) > 0 ||\n                        this.extractCropValue('cropb', fullImg[i])) ? true : false;\n                    if (isCroppedImage) {\n                        goalWidth = this.extractCropValue('wgoal', fullImg[i]);\n                        goalHeight = this.extractCropValue('hgoal', fullImg[i]);\n                        cropLength = this.extractCropValue('cropl', fullImg[i]);\n                        cropTop = this.extractCropValue('cropt', fullImg[i]);\n                        cropR = this.extractCropValue('cropr', fullImg[i]);\n                        cropB = this.extractCropValue('cropb', fullImg[i]);\n                    }\n                    result.push({\n                        hex: imgType ? fullImg[i].replace(picHead, '').replace(/[^\\da-fA-F]/g, '') : null,\n                        type: imgType,\n                        isCroppedImage: isCroppedImage,\n                        goalWidth: goalWidth,\n                        goalHeight: goalHeight,\n                        cropLength: cropLength,\n                        cropTop: cropTop,\n                        cropR: cropR,\n                        cropB: cropB\n                    });\n                }\n            }\n        }\n        return result;\n    };\n    MsWordPaste.prototype.extractCropValue = function (crop, rtfData) {\n        // eslint-disable-next-line security/detect-non-literal-regexp\n        var result = new RegExp('\\\\\\\\pic' + crop + '(\\\\-?\\\\d+)\\\\\\\\').exec(rtfData.replace(/\\r\\n\\\\/g, '\\\\').replace(/\\n/g, '\\\\'))[1];\n        return parseInt(result, 10);\n    };\n    MsWordPaste.prototype.removeClassName = function (elm) {\n        var elmWithClass = elm.querySelectorAll('*[class]:not(.e-img-cropped)');\n        for (var i = 0; i < elmWithClass.length; i++) {\n            elmWithClass[i].removeAttribute('class');\n        }\n    };\n    MsWordPaste.prototype.breakLineAddition = function (elm) {\n        var allElements = elm.querySelectorAll('*');\n        for (var i = 0; i < allElements.length; i++) {\n            if (allElements[i].children.length === 0 && allElements[i].innerHTML === '&nbsp;' &&\n                (allElements[i].innerHTML === '&nbsp;' && !allElements[i].closest('li')) &&\n                !allElements[i].closest('td') && (allElements[i].nodeName !== 'SPAN' ||\n                allElements[i].nodeName === 'SPAN' && (isNOU(allElements[i].previousElementSibling) &&\n                    isNOU(allElements[i].nextElementSibling)))) {\n                var detachableElement = this.findDetachElem(allElements[i]);\n                var brElement = createElement('br');\n                var hasNbsp = detachableElement.textContent.length > 0 && detachableElement.textContent.match(/\\u00a0/g)\n                    && detachableElement.textContent.match(/\\u00a0/g).length > 0;\n                if (!hasNbsp && !isNOU(detachableElement.parentElement)) {\n                    detachableElement.parentElement.insertBefore(brElement, detachableElement);\n                    detach(detachableElement);\n                }\n            }\n        }\n    };\n    MsWordPaste.prototype.findDetachElem = function (element) {\n        var removableElement;\n        if (!isNOU(element.parentElement) &&\n            element.parentElement.textContent.trim() === '' && element.parentElement.tagName !== 'TD' &&\n            isNOU(element.parentElement.querySelector('img'))) {\n            removableElement = this.findDetachElem(element.parentElement);\n        }\n        else {\n            removableElement = element;\n        }\n        return removableElement;\n    };\n    MsWordPaste.prototype.removeUnwantedElements = function (elm) {\n        var styleElm = elm.querySelector('style');\n        if (!isNOU(styleElm)) {\n            detach(styleElm);\n        }\n        var innerElement = elm.innerHTML;\n        for (var i = 0; i < this.removableElements.length; i++) {\n            // eslint-disable-next-line security/detect-non-literal-regexp\n            var regExpStartElem = new RegExp('<' + this.removableElements[i] + '>', 'g');\n            // eslint-disable-next-line security/detect-non-literal-regexp\n            var regExpEndElem = new RegExp('</' + this.removableElements[i] + '>', 'g');\n            innerElement = innerElement.replace(regExpStartElem, '');\n            innerElement = innerElement.replace(regExpEndElem, '');\n        }\n        elm.innerHTML = innerElement;\n        elm.querySelectorAll(':empty');\n    };\n    MsWordPaste.prototype.findDetachEmptyElem = function (element) {\n        var removableElement;\n        if (!isNOU(element.parentElement)) {\n            var hasNbsp = element.parentElement.textContent.length > 0 && element.parentElement.textContent.match(/\\u00a0/g)\n                && element.parentElement.textContent.match(/\\u00a0/g).length > 0;\n            if (!hasNbsp && element.parentElement.textContent.trim() === '' &&\n                element.parentElement.getAttribute('id') !== 'MSWord-Content' &&\n                !(this.hasParentWithClass(element, 'MsoListParagraph')) &&\n                isNOU(element.parentElement.querySelector('img'))) {\n                removableElement = this.findDetachEmptyElem(element.parentElement);\n            }\n            else {\n                removableElement = element;\n            }\n        }\n        else {\n            removableElement = null;\n        }\n        return removableElement;\n    };\n    MsWordPaste.prototype.hasParentWithClass = function (element, className) {\n        var currentParentElem = element.parentElement;\n        while (!isNOU(currentParentElem)) {\n            if (currentParentElem.classList.contains(className)) {\n                return true;\n            }\n            currentParentElem = currentParentElem.parentElement;\n        }\n        return false;\n    };\n    MsWordPaste.prototype.removeEmptyElements = function (element) {\n        var emptyElements = element.querySelectorAll(':empty');\n        for (var i = 0; i < emptyElements.length; i++) {\n            if (!isNOU(emptyElements[i].closest('td')) &&\n                !isNOU(emptyElements[i].closest('td').querySelector('.MsoNormal'))) {\n                emptyElements[i].innerHTML = '-';\n            }\n            var lineWithDiv = true;\n            if (emptyElements[i].tagName === 'DIV') {\n                lineWithDiv = emptyElements[i].style.borderBottom === 'none' ||\n                    emptyElements[i].style.borderBottom === '' ? true : false;\n            }\n            if (emptyElements[i].tagName !== 'IMG' && emptyElements[i].tagName !== 'BR' &&\n                emptyElements[i].tagName !== 'IFRAME' && emptyElements[i].tagName !== 'TD' &&\n                emptyElements[i].tagName !== 'HR' && lineWithDiv) {\n                var detachableElement = this.findDetachEmptyElem(emptyElements[i]);\n                if (!isNOU(detachableElement)) {\n                    detach(detachableElement);\n                }\n            }\n        }\n    };\n    MsWordPaste.prototype.styleCorrection = function (elm, wordPasteStyleConfig) {\n        var styleElement = elm.querySelectorAll('style');\n        if (styleElement.length > 0) {\n            var styles = styleElement[0].innerHTML.match(/[\\S ]+\\s+{[\\s\\S]+?}/gi);\n            var styleClassObject_1 = !isNOU(styles) ? this.findStyleObject(styles) : null;\n            var keys = Object.keys(styleClassObject_1);\n            var values = keys.map(function (key) {\n                return styleClassObject_1[\"\" + key];\n            });\n            values = this.removeUnwantedStyle(values, wordPasteStyleConfig);\n            this.filterStyles(elm, wordPasteStyleConfig);\n            var resultElem = void 0;\n            var fromClass = false;\n            for (var i = 0; i < keys.length; i++) {\n                if (keys[i].split('.')[0] === '') {\n                    resultElem = elm.getElementsByClassName(keys[i].split('.')[1]);\n                    fromClass = true;\n                }\n                else if (keys[i].split('.').length === 1 && keys[i].split('.')[0].indexOf('@') >= 0) {\n                    continue;\n                }\n                else if (keys[i].split('.').length === 1 && keys[i].split('.')[0].indexOf('@') < 0) {\n                    resultElem = elm.getElementsByTagName(keys[i]);\n                }\n                else {\n                    resultElem = elm.querySelectorAll(keys[i]);\n                }\n                for (var j = 0; j < resultElem.length; j++) {\n                    var styleProperty = resultElem[j].getAttribute('style');\n                    if (!isNOU(styleProperty) && styleProperty.trim() !== '') {\n                        var valueSplit = values[i].split(';');\n                        if (!fromClass) {\n                            for (var k = 0; k < valueSplit.length; k++) {\n                                if (styleProperty.indexOf(valueSplit[k].split(':')[0]) >= 0) {\n                                    valueSplit.splice(k, 1);\n                                    k--;\n                                }\n                            }\n                        }\n                        var changedValue = styleProperty + valueSplit.join(';') + ';';\n                        resultElem[j].setAttribute('style', changedValue);\n                    }\n                    else {\n                        values[i] = values[i].replace(/text-indent:-(.*?)(?=;|$)/gm, '');\n                        resultElem[j].setAttribute('style', values[i]);\n                    }\n                }\n                fromClass = false;\n            }\n            var listClass = ['MsoListParagraphCxSpFirst', 'MsoListParagraphCxSpMiddle', 'MsoListParagraphCxSpLast'];\n            for (var i = 0; i < listClass.length; i++) {\n                if (keys.indexOf('li.' + listClass[i]) > -1) {\n                    var olULElems = elm.querySelectorAll('ol.' + listClass[i] + ', ul.' + listClass[i]);\n                    for (var j = 0; j < olULElems.length; j++) {\n                        var styleProperty = olULElems[j].getAttribute('style');\n                        if (!isNOU(styleProperty) && styleProperty.trim() !== '' && olULElems[j].style.marginLeft !== '') {\n                            var valueSplit = values[keys.indexOf('li.' + listClass[i])].split(';');\n                            for (var k = 0; k < valueSplit.length; k++) {\n                                if ('margin-left'.indexOf(valueSplit[k].split(':')[0]) >= 0) {\n                                    if (!isNOU(valueSplit[k].split(':')[1]) &&\n                                        valueSplit[k].split(':')[1].indexOf('in') >= 0 &&\n                                        olULElems[j].style.marginLeft.indexOf('in') >= 0) {\n                                        var classStyle = parseFloat(valueSplit[k].split(':')[1].split('in')[0]);\n                                        var inlineStyle = parseFloat(olULElems[j].style.marginLeft.split('in')[0]);\n                                        olULElems[j].style.marginLeft = (inlineStyle - classStyle) + 'in';\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    MsWordPaste.prototype.filterStyles = function (elm, wordPasteStyleConfig) {\n        var elmWithStyles = elm.querySelectorAll('*[style]');\n        for (var i = 0; i < elmWithStyles.length; i++) {\n            var elemStyleProperty = elmWithStyles[i].getAttribute('style').split(';');\n            var styleValue = '';\n            for (var j = 0; j < elemStyleProperty.length; j++) {\n                if (wordPasteStyleConfig.indexOf(elemStyleProperty[j].split(':')[0].trim()) >= 0) {\n                    styleValue += elemStyleProperty[j] + ';';\n                }\n            }\n            elmWithStyles[i].setAttribute('style', styleValue);\n        }\n    };\n    MsWordPaste.prototype.removeUnwantedStyle = function (values, wordPasteStyleConfig) {\n        for (var i = 0; i < values.length; i++) {\n            var styleValues = values[i].split(';');\n            values[i] = '';\n            for (var j = 0; j < styleValues.length; j++) {\n                if (wordPasteStyleConfig.indexOf(styleValues[j].split(':')[0]) >= 0) {\n                    values[i] += styleValues[j] + ';';\n                }\n            }\n        }\n        return values;\n    };\n    MsWordPaste.prototype.findStyleObject = function (styles) {\n        var styleClassObject = {};\n        for (var i = 0; i < styles.length; i++) {\n            var tempStyle = styles[i];\n            var classNameCollection = tempStyle.replace(/([\\S ]+\\s+){[\\s\\S]+?}/gi, '$1');\n            var stylesCollection = tempStyle.replace(/[\\S ]+\\s+{([\\s\\S]+?)}/gi, '$1');\n            classNameCollection = classNameCollection.replace(/^[\\s]|[\\s]$/gm, '');\n            stylesCollection = stylesCollection.replace(/^[\\s]|[\\s]$/gm, '');\n            classNameCollection = classNameCollection.replace(/\\n|\\r|\\n\\r/g, '');\n            stylesCollection = stylesCollection.replace(/\\n|\\r|\\n\\r/g, '');\n            for (var classNames = classNameCollection.split(', '), j = 0; j < classNames.length; j++) {\n                styleClassObject[classNames[j]] = stylesCollection;\n            }\n        }\n        return styleClassObject;\n    };\n    MsWordPaste.prototype.removingComments = function (elm) {\n        var innerElement = elm.innerHTML;\n        innerElement = innerElement.replace(/<!--[\\s\\S]*?-->/g, '');\n        elm.innerHTML = innerElement;\n    };\n    MsWordPaste.prototype.cleanUp = function (node, listNodes) {\n        var tempCleaner = [];\n        var prevflagState;\n        var allNodes = node.querySelectorAll('*');\n        for (var index = 0; index < allNodes.length; index++) {\n            if (this.ignorableNodes.indexOf(allNodes[index].nodeName) === -1 ||\n                (allNodes[index].nodeType === 3 && allNodes[index].textContent.trim() === '')) {\n                tempCleaner.push(allNodes[index]);\n                continue;\n            }\n            else if (allNodes[index].className &&\n                allNodes[index].className.toLowerCase().indexOf('msolistparagraph') !== -1 &&\n                !isNOU(allNodes[index].getAttribute('style')) &&\n                allNodes[index].getAttribute('style').indexOf('mso-list:') >= 0) {\n                if (allNodes[index].className.indexOf('MsoListParagraphCxSpFirst') >= 0 && listNodes.length > 0 &&\n                    listNodes[listNodes.length - 1] !== null) {\n                    listNodes.push(null);\n                }\n                listNodes.push(allNodes[index]);\n            }\n            if (prevflagState && (this.blockNode.indexOf(allNodes[index].nodeName.toLowerCase()) !== -1) &&\n                !(allNodes[index].className &&\n                    allNodes[index].className.toLowerCase().indexOf('msolistparagraph') !== -1 && !isNOU(allNodes[index].getAttribute('style')) &&\n                    allNodes[index].getAttribute('style').indexOf('mso-list:') >= 0)) {\n                listNodes.push(null);\n            }\n            if (this.blockNode.indexOf(allNodes[index].nodeName.toLowerCase()) !== -1) {\n                if (allNodes[index].className &&\n                    allNodes[index].className.toLowerCase().indexOf('msolistparagraph') !== -1 && !isNOU(allNodes[index].getAttribute('style')) &&\n                    allNodes[index].getAttribute('style').indexOf('mso-list:') >= 0) {\n                    prevflagState = true;\n                }\n                else {\n                    prevflagState = false;\n                }\n            }\n        }\n        if (listNodes.length && (listNodes[listNodes.length - 1] !== null)) {\n            listNodes.push(null);\n        }\n        return listNodes;\n    };\n    MsWordPaste.prototype.listConverter = function (listNodes) {\n        var level;\n        var data = [];\n        var collection = [];\n        var content = '';\n        var stNode;\n        var currentListStyle = '';\n        for (var i = 0; i < listNodes.length; i++) {\n            if (listNodes[i] === null) {\n                data.push({ content: this.makeConversion(collection), node: listNodes[i - 1] });\n                collection = [];\n                continue;\n            }\n            if (listNodes[i].getAttribute('style') && listNodes[i].getAttribute('style').indexOf('mso-outline-level') !== -1) {\n                listNodes[i].setAttribute('style', listNodes[i].getAttribute('style').replace('mso-outline-level', 'mso-outline'));\n            }\n            content = listNodes[i].getAttribute('style');\n            if (content && content.indexOf('level') !== -1) {\n                // eslint-disable-next-line\n                level = parseInt(content.charAt(content.indexOf('level') + 5), null);\n            }\n            else {\n                level = 1;\n            }\n            this.listContents = [];\n            this.getListContent(listNodes[i]);\n            var type = void 0;\n            var listStyleType = void 0;\n            var startAttr = void 0;\n            var styleMarginLeft = void 0;\n            if (!isNOU(this.listContents[0])) {\n                type = this.listContents[0].trim().length > 1 ? 'ol' : 'ul';\n                listStyleType = this.getlistStyleType(this.listContents[0], type);\n                if (type === 'ol' && (i === 0 || listNodes[i - 1] === null)) {\n                    var startString = this.listContents[0].split('.')[0];\n                    var listTypes = ['A', 'a', 'I', 'i', 'α', '1', '1-']; // Add '1-' for rare list type.\n                    if (listTypes.indexOf(startString) === -1) {\n                        if (listStyleType === 'decimal') {\n                            // Bug in getlistStyleType() list style stype is returned as decimal for nested list with start attribute\n                            if (!isNaN(parseInt(startString, 10))) {\n                                startAttr = parseInt(startString, 10);\n                            }\n                        }\n                        else if (listStyleType === 'upper-alpha') {\n                            startAttr = (startString.split('.')[0].charCodeAt(0) - 64);\n                        }\n                        else if (listStyleType === 'lower-alpha') {\n                            startAttr = (startString.split('.')[0].charCodeAt(0) - 96);\n                        }\n                        else if (listStyleType === 'upper-roman') {\n                            startAttr = this.upperRomanNumber.indexOf(this.listContents[0].split('.')[0]) + 1;\n                        }\n                        else if (listStyleType === 'lower-roman') {\n                            startAttr = this.lowerRomanNumber.indexOf(this.listContents[0].split('.')[0]) + 1;\n                        }\n                        else if (listStyleType === 'lower-greek') {\n                            startAttr = this.lowerGreekNumber.indexOf(this.listContents[0].split('.')[0]) + 1;\n                        }\n                    }\n                    if (listNodes[i].style.marginLeft !== '') {\n                        styleMarginLeft = listNodes[i].style.marginLeft;\n                    }\n                }\n                var tempNode = [];\n                for (var j = 1; j < this.listContents.length; j++) {\n                    tempNode.push(this.listContents[j]);\n                }\n                var currentClassName = void 0;\n                if (!isNOU(listNodes[i].className)) {\n                    currentClassName = listNodes[i].className;\n                }\n                if (!isNOU(listNodes[i].getAttribute('style'))) {\n                    listNodes[i].setAttribute('style', listNodes[i].getAttribute('style').replace('text-align:start;', ''));\n                    listNodes[i].style.textIndent = '';\n                    currentListStyle = listNodes[i].getAttribute('style');\n                }\n                collection.push({\n                    listType: type, content: tempNode, nestedLevel: level, class: currentClassName,\n                    listStyle: currentListStyle, listStyleTypeName: listStyleType, start: startAttr, styleMarginLeft: styleMarginLeft\n                });\n            }\n        }\n        stNode = listNodes.shift();\n        while (stNode) {\n            var elemColl = [];\n            for (var temp1 = 0; temp1 < data.length; temp1++) {\n                if (data[temp1].node === stNode) {\n                    for (var index = 0; index < data[temp1].content.childNodes.length; index++) {\n                        elemColl.push(data[temp1].content.childNodes[index]);\n                    }\n                    for (var index = 0; index < elemColl.length; index++) {\n                        stNode.parentElement.insertBefore(elemColl[index], stNode);\n                    }\n                    break;\n                }\n            }\n            stNode.remove();\n            stNode = listNodes.shift();\n            if (!stNode) {\n                stNode = listNodes.shift();\n            }\n        }\n    };\n    MsWordPaste.prototype.getlistStyleType = function (listContent, type) {\n        var currentListClass;\n        if (type === 'ol') {\n            var charCode = listContent.split('.')[0].charCodeAt(0);\n            switch (true) {\n                case this.upperRomanNumber.indexOf(listContent.split('.')[0]) > -1:\n                    currentListClass = 'upper-roman';\n                    break;\n                case this.lowerRomanNumber.indexOf(listContent.split('.')[0]) > -1:\n                    currentListClass = 'lower-roman';\n                    break;\n                case this.lowerGreekNumber.indexOf(listContent.split('.')[0]) > -1:\n                    currentListClass = 'lower-greek';\n                    break;\n                case (charCode > 64 && charCode < 91):\n                    currentListClass = 'upper-alpha';\n                    break;\n                case (charCode > 96 && charCode < 123):\n                    currentListClass = 'lower-alpha';\n                    break;\n                default:\n                    currentListClass = 'decimal';\n                    break;\n            }\n        }\n        else {\n            switch (listContent.split('.')[0]) {\n                case 'o':\n                    currentListClass = 'circle';\n                    break;\n                case '§':\n                    currentListClass = 'square';\n                    break;\n                default:\n                    currentListClass = 'disc';\n                    break;\n            }\n        }\n        return currentListClass;\n    };\n    MsWordPaste.prototype.makeConversion = function (collection) {\n        var root = createElement('div');\n        var temp;\n        var pLevel = 1;\n        var prevList;\n        var listCount = 0;\n        var elem;\n        for (var index = 0; index < collection.length; index++) {\n            var listClass = ['MsoListParagraphCxSpFirst', 'MsoListParagraphCxSpMiddle', 'MsoListParagraphCxSpLast'];\n            var isNormalList = false;\n            for (var i = 0; i < listClass.length; i++) {\n                if (listClass[i].indexOf(collection[index].class) >= 0) {\n                    isNormalList = true;\n                    break;\n                }\n            }\n            if (!isNOU(prevList) && index !== 0 &&\n                collection[index - 1].listType !== collection[index].listType &&\n                !isNormalList) {\n                prevList = null;\n            }\n            var pElement = createElement('p');\n            pElement.innerHTML = collection[index].content.join(' ');\n            if ((collection[index].nestedLevel === 1) && listCount === 0 && collection[index].content) {\n                root.appendChild(temp = createElement(collection[index].listType, { className: collection[index].class }));\n                prevList = createElement('li');\n                prevList.appendChild(pElement);\n                temp.appendChild(prevList);\n                temp.setAttribute('level', collection[index].nestedLevel.toString());\n                temp.style.marginLeft = collection[index].styleMarginLeft;\n                temp.style.listStyleType = collection[index].listStyleTypeName;\n            }\n            else if (collection[index].nestedLevel === pLevel) {\n                if (!isNOU(prevList) && !isNOU(prevList.parentElement)\n                    && prevList.parentElement.tagName.toLowerCase() === collection[index].listType) {\n                    prevList.parentElement.appendChild(prevList = createElement('li'));\n                    prevList.appendChild(pElement);\n                }\n                else if (isNOU(prevList)) {\n                    temp = createElement(collection[index].listType);\n                    temp.style.listStyleType = collection[index].listStyleTypeName;\n                    prevList = createElement('li');\n                    prevList.appendChild(pElement);\n                    temp.appendChild(prevList);\n                    temp.setAttribute('level', collection[index].nestedLevel.toString());\n                    root.appendChild(temp);\n                }\n                else {\n                    temp = createElement(collection[index].listType);\n                    temp.style.listStyleType = collection[index].listStyleTypeName;\n                    prevList.parentElement.parentElement.appendChild(temp);\n                    prevList = createElement('li');\n                    prevList.appendChild(pElement);\n                    temp.appendChild(prevList);\n                    temp.setAttribute('level', collection[index].nestedLevel.toString());\n                }\n            }\n            else if (collection[index].nestedLevel > pLevel) {\n                if (!isNOU(prevList)) {\n                    for (var j = 0; j < collection[index].nestedLevel - pLevel; j++) {\n                        prevList.appendChild(temp = createElement(collection[index].listType));\n                        prevList = createElement('li');\n                        if (j !== collection[index].nestedLevel - pLevel - 1 &&\n                            collection[index].nestedLevel - pLevel > 1) {\n                            prevList.style.listStyleType = 'none';\n                        }\n                        temp.appendChild(prevList);\n                    }\n                    prevList.appendChild(pElement);\n                    temp.setAttribute('level', collection[index].nestedLevel.toString());\n                    temp.style.listStyleType = collection[index].listStyleTypeName;\n                }\n                else {\n                    if (collection[index].nestedLevel > pLevel && isNormalList) {\n                        var initialNode = createElement(collection[index].listType);\n                        prevList = createElement('li');\n                        initialNode.appendChild(prevList);\n                        initialNode.style.listStyleType = 'none';\n                        for (var j = 0; j < collection[index].nestedLevel - 1; j++) {\n                            prevList.appendChild(temp = createElement(collection[index].listType));\n                            prevList = createElement('li');\n                            temp.appendChild(prevList);\n                            temp.style.listStyleType = 'none';\n                        }\n                        prevList.appendChild(pElement);\n                        root.appendChild(initialNode);\n                        temp.setAttribute('level', collection[index].nestedLevel.toString());\n                        temp.style.listStyleType = collection[index].listStyleTypeName;\n                    }\n                    else {\n                        root.appendChild(temp = createElement(collection[index].listType));\n                        prevList = createElement('li');\n                        prevList.appendChild(pElement);\n                        temp.appendChild(prevList);\n                        temp.setAttribute('level', collection[index].nestedLevel.toString());\n                        temp.style.listStyleType = collection[index].listStyleTypeName;\n                    }\n                }\n            }\n            else if (collection[index].nestedLevel === 1) {\n                if (root.lastChild.tagName.toLowerCase() === collection[index].listType) {\n                    temp = root.lastChild;\n                }\n                else {\n                    root.appendChild(temp = createElement(collection[index].listType));\n                    temp.style.listStyleType = collection[index].listStyleTypeName;\n                }\n                prevList = createElement('li');\n                prevList.appendChild(pElement);\n                temp.appendChild(prevList);\n                temp.setAttribute('level', collection[index].nestedLevel.toString());\n            }\n            else {\n                elem = prevList;\n                while (elem.parentElement) {\n                    elem = elem.parentElement;\n                    if (elem.attributes.getNamedItem('level')) {\n                        // eslint-disable-next-line\n                        if (parseInt(elem.attributes.getNamedItem('level').textContent, null) === collection[index].nestedLevel) {\n                            prevList = createElement('li');\n                            prevList.appendChild(pElement);\n                            elem.appendChild(prevList);\n                            break;\n                            // eslint-disable-next-line\n                        }\n                        else if (collection[index].nestedLevel > parseInt(elem.attributes.getNamedItem('level').textContent, null)) {\n                            elem.appendChild(temp = createElement(collection[index].listType));\n                            prevList = createElement('li');\n                            prevList.appendChild(pElement);\n                            temp.appendChild(prevList);\n                            temp.setAttribute('level', collection[index].nestedLevel.toString());\n                            temp.style.listStyleType = collection[index].listStyleTypeName;\n                            break;\n                        }\n                    }\n                    continue;\n                }\n            }\n            prevList.setAttribute('class', collection[index].class);\n            prevList.setAttribute('style', (!isNOU(collection[index].listStyle) ? collection[index].listStyle : ''));\n            pLevel = collection[index].nestedLevel;\n            listCount++;\n            if (!isNOU(collection[index].start)) {\n                temp.setAttribute('start', collection[index].start.toString());\n            }\n        }\n        return root;\n    };\n    MsWordPaste.prototype.getListContent = function (elem) {\n        var pushContent = '';\n        var firstChild = elem.firstElementChild;\n        if (firstChild.textContent.trim() === '' && !isNOU(firstChild.firstElementChild) &&\n            firstChild.firstElementChild.nodeName === 'IMG') {\n            pushContent = elem.innerHTML.trim();\n            this.listContents.push('');\n            this.listContents.push(pushContent);\n        }\n        else {\n            //Add to support separate list which looks like same list and also to add all tags as it is inside list\n            if (firstChild.childNodes.length > 0) {\n                var listIgnoreTag = firstChild.querySelectorAll('[style*=\"mso-list\"]');\n                for (var i = 0; i < listIgnoreTag.length; i++) {\n                    listIgnoreTag[i].setAttribute('style', listIgnoreTag[i].getAttribute('style').replace(/\\n/g, ''));\n                }\n                var listOrder = firstChild.querySelector('span[style=\"mso-list:Ignore\"]');\n                if (!isNOU(listOrder)) {\n                    this.listContents.push(listOrder.textContent.trim());\n                    detach(listOrder);\n                    this.removingComments(elem);\n                    this.removeUnwantedElements(elem);\n                }\n            }\n        }\n        this.listContents.push(elem.innerHTML);\n    };\n    MsWordPaste.prototype.removeEmptyAnchorTag = function (element) {\n        var removableElement = element.querySelectorAll('a:not([href])');\n        for (var j = removableElement.length - 1; j >= 0; j--) {\n            var parentElem = removableElement[j].parentNode;\n            while (removableElement[j].firstChild) {\n                parentElem.insertBefore(removableElement[j].firstChild, removableElement[j]);\n            }\n            parentElem.removeChild(removableElement[j]);\n        }\n    };\n    return MsWordPaste;\n}());\nexport { MsWordPaste };\n","import * as CONSTANT from '../base/constant';\nimport { InsertHtml } from './inserthtml';\n/**\n * Insert a Text Node or Text\n *\n * @hidden\n * @deprecated\n */\nvar InsertTextExec = /** @class */ (function () {\n    /**\n     * Constructor for creating the InsertText plugin\n     *\n     * @param {EditorManager} parent - specifies the parent element\n     * @hidden\n     * @deprecated\n     */\n    function InsertTextExec(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    InsertTextExec.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.INSERT_TEXT_TYPE, this.insertText, this);\n    };\n    InsertTextExec.prototype.insertText = function (e) {\n        var node = document.createTextNode(e.value);\n        InsertHtml.Insert(this.parent.currentDocument, node, this.parent.editableElement);\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    return InsertTextExec;\n}());\nexport { InsertTextExec };\n","import { IsFormatted } from './isformatted';\nimport * as CONSTANT from './../base/constant';\nimport { NodeSelection } from './../../selection/index';\nimport { getDefaultHtmlTbStatus } from './../../common/util';\n/**\n * Update Toolbar Status\n *\n * @hidden\n * @deprecated\n */\nexport var statusCollection = getDefaultHtmlTbStatus();\nvar ToolbarStatus = /** @class */ (function () {\n    function ToolbarStatus() {\n    }\n    /**\n     * get method\n     *\n     * @param {Document} docElement - specifies the document element\n     * @param {Node} targetNode - specifies the target node\n     * @param {string[]} formatNode - specifies the format node\n     * @param {string[]} fontSize - specifies the font size\n     * @param {string[]} fontName - specifies the font name.\n     * @param {Node} documentNode - specifies the document node.\n     * @returns {IToolbarStatus} - returns the toolbar status\n     * @hidden\n     * @deprecated\n     */\n    ToolbarStatus.get = function (docElement, targetNode, formatNode, fontSize, fontName, documentNode) {\n        var formatCollection = JSON.parse(JSON.stringify(statusCollection));\n        var nodeCollection = JSON.parse(JSON.stringify(statusCollection));\n        var nodeSelection = new NodeSelection();\n        var range = nodeSelection.getRange(docElement);\n        var nodes = documentNode ? [documentNode] : range.collapsed ? nodeSelection.getNodeCollection(range) :\n            nodeSelection.getSelectionNodeCollectionBr(range);\n        var nodesLength = nodes.length;\n        var isNodeChanged = false;\n        for (var index = 0; index < nodes.length; index++) {\n            while (nodes[index].nodeType === 3 && range.startContainer.nodeType === 3 && nodes[index].parentNode &&\n                nodes[index].parentNode.lastElementChild && nodes[index].parentNode.lastElementChild.nodeName !== 'BR' &&\n                (this.getImmediateBlockNode(nodes[index].parentNode)).textContent.replace(/\\u200B/g, '').length === 0 &&\n                range.startContainer.textContent.replace(/\\u200B/g, '').length === 0 &&\n                nodeSelection.get(docElement).toString().replace(/\\u200B/g, '').length === 0) {\n                nodes[index] = nodes[index].parentNode.lastElementChild.firstChild;\n                isNodeChanged = true;\n            }\n            if (isNodeChanged && nodes[index]) {\n                nodeSelection.setCursorPoint(docElement, nodes[index], nodes[index].textContent.length);\n                isNodeChanged = false;\n            }\n            if ((nodes[index].nodeName !== 'BR' && nodes[index].nodeType !== 3) ||\n                (nodesLength > 1 && nodes[index].nodeType === 3 && nodes[index].textContent.trim() === '')) {\n                nodes.splice(index, 1);\n                index--;\n            }\n        }\n        for (var index = 0; index < nodes.length; index++) {\n            // eslint-disable-next-line max-len\n            formatCollection = this.getFormatParent(docElement, formatCollection, nodes[index], targetNode, formatNode, fontSize, fontName);\n            if ((index === 0 && formatCollection.bold) || !formatCollection.bold) {\n                nodeCollection.bold = formatCollection.bold;\n            }\n            if ((index === 0 && formatCollection.insertcode) || !formatCollection.insertcode) {\n                nodeCollection.insertcode = formatCollection.insertcode;\n            }\n            if ((index === 0 && formatCollection.italic) || !formatCollection.italic) {\n                nodeCollection.italic = formatCollection.italic;\n            }\n            if ((index === 0 && formatCollection.underline) || !formatCollection.underline) {\n                nodeCollection.underline = formatCollection.underline;\n            }\n            if ((index === 0 && formatCollection.strikethrough) || !formatCollection.strikethrough) {\n                nodeCollection.strikethrough = formatCollection.strikethrough;\n            }\n            if ((index === 0 && formatCollection.superscript) || !formatCollection.superscript) {\n                nodeCollection.superscript = formatCollection.superscript;\n            }\n            if ((index === 0 && formatCollection.subscript) || !formatCollection.subscript) {\n                nodeCollection.subscript = formatCollection.subscript;\n            }\n            if ((index === 0 && formatCollection.fontcolor) || !formatCollection.fontcolor) {\n                nodeCollection.fontcolor = formatCollection.fontcolor;\n            }\n            if (index === 0 && formatCollection.fontname) {\n                nodeCollection.fontname = formatCollection.fontname;\n            }\n            else {\n                nodeCollection.fontname = formatCollection.fontname === nodeCollection.fontname ? formatCollection.fontname : 'empty';\n            }\n            if (index === 0 && formatCollection.fontsize) {\n                nodeCollection.fontsize = formatCollection.fontsize;\n            }\n            else {\n                nodeCollection.fontsize = formatCollection.fontsize === nodeCollection.fontsize ? formatCollection.fontsize : 'empty';\n            }\n            if ((index === 0 && formatCollection.backgroundcolor) || !formatCollection.backgroundcolor) {\n                nodeCollection.backgroundcolor = formatCollection.backgroundcolor;\n            }\n            if ((index === 0 && formatCollection.orderedlist) || !formatCollection.orderedlist) {\n                nodeCollection.orderedlist = formatCollection.orderedlist;\n            }\n            if ((index === 0 && formatCollection.unorderedlist) || !formatCollection.unorderedlist) {\n                nodeCollection.unorderedlist = formatCollection.unorderedlist;\n            }\n            if ((index === 0 && formatCollection.alignments) || !formatCollection.alignments) {\n                nodeCollection.alignments = formatCollection.alignments;\n            }\n            if (index === 0 && formatCollection.formats) {\n                nodeCollection.formats = formatCollection.formats;\n            }\n            else {\n                nodeCollection.formats = formatCollection.formats === nodeCollection.formats ? formatCollection.formats : 'empty';\n            }\n            if ((index === 0 && formatCollection.createlink) || !formatCollection.createlink) {\n                nodeCollection.createlink = formatCollection.createlink;\n            }\n            if ((index === 0 && formatCollection.numberFormatList) || !formatCollection.numberFormatList) {\n                nodeCollection.numberFormatList = formatCollection.numberFormatList;\n            }\n            if ((index === 0 && formatCollection.bulletFormatList) || !formatCollection.bulletFormatList) {\n                nodeCollection.bulletFormatList = formatCollection.bulletFormatList;\n            }\n            formatCollection = JSON.parse(JSON.stringify(statusCollection));\n        }\n        return nodeCollection;\n    };\n    ToolbarStatus.getImmediateBlockNode = function (node) {\n        do {\n            node = node.parentNode;\n        } while (node && CONSTANT.BLOCK_TAGS.indexOf(node.nodeName.toLocaleLowerCase()) < 0);\n        return node;\n    };\n    ToolbarStatus.getFormatParent = function (docElement, formatCollection, node, targetNode, formatNode, fontSize, fontName) {\n        if (targetNode.contains(node) ||\n            (node.nodeType === 3 && targetNode.nodeType !== 3 && targetNode.contains(node.parentNode))) {\n            do {\n                formatCollection = this.isFormattedNode(docElement, formatCollection, node, formatNode, fontSize, fontName);\n                node = node.parentNode;\n            } while (node && (node !== targetNode));\n        }\n        return formatCollection;\n    };\n    ToolbarStatus.isFormattedNode = function (docElement, formatCollection, node, formatNode, fontSize, fontName) {\n        if (!formatCollection.bold) {\n            formatCollection.bold = IsFormatted.isBold(node);\n        }\n        if (!formatCollection.italic) {\n            formatCollection.italic = IsFormatted.isItalic(node);\n        }\n        if (!formatCollection.underline) {\n            formatCollection.underline = IsFormatted.isUnderline(node);\n        }\n        if (!formatCollection.strikethrough) {\n            formatCollection.strikethrough = IsFormatted.isStrikethrough(node);\n        }\n        if (!formatCollection.superscript) {\n            formatCollection.superscript = IsFormatted.isSuperscript(node);\n        }\n        if (!formatCollection.subscript) {\n            formatCollection.subscript = IsFormatted.isSubscript(node);\n        }\n        if (!formatCollection.fontcolor) {\n            formatCollection.fontcolor = this.isFontColor(docElement, node);\n        }\n        if (!formatCollection.fontname) {\n            formatCollection.fontname = this.isFontName(docElement, node, fontName);\n        }\n        if (!formatCollection.fontsize) {\n            formatCollection.fontsize = this.isFontSize(docElement, node, fontSize);\n        }\n        if (!formatCollection.backgroundcolor) {\n            formatCollection.backgroundcolor = this.isBackgroundColor(node);\n        }\n        if (!formatCollection.orderedlist) {\n            formatCollection.orderedlist = this.isOrderedList(node);\n        }\n        if (!formatCollection.unorderedlist) {\n            formatCollection.unorderedlist = this.isUnorderedList(node);\n        }\n        if (!formatCollection.alignments) {\n            formatCollection.alignments = this.isAlignment(node);\n        }\n        if (!formatCollection.formats) {\n            formatCollection.formats = this.isFormats(node, formatNode);\n            if (formatCollection.formats === 'pre') {\n                formatCollection.insertcode = true;\n            }\n        }\n        if (!formatCollection.createlink) {\n            formatCollection.createlink = this.isLink(node);\n        }\n        if (!formatCollection.numberFormatList) {\n            formatCollection.numberFormatList = this.isNumberFormatList(node);\n        }\n        if (!formatCollection.bulletFormatList) {\n            formatCollection.bulletFormatList = this.isBulletFormatList(node);\n        }\n        return formatCollection;\n    };\n    ToolbarStatus.isFontColor = function (docElement, node) {\n        var color = node.style && node.style.color;\n        if ((color === null || color === undefined || color === '') && node.nodeType !== 3) {\n            color = this.getComputedStyle(docElement, node, 'color');\n        }\n        if (color !== null && color !== '' && color !== undefined) {\n            return color;\n        }\n        else {\n            return null;\n        }\n    };\n    ToolbarStatus.isLink = function (node) {\n        if (node.nodeName.toLocaleLowerCase() === 'a') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    ToolbarStatus.isBackgroundColor = function (node) {\n        var backColor = node.style && node.style.backgroundColor;\n        if (backColor !== null && backColor !== '' && backColor !== undefined) {\n            return backColor;\n        }\n        else {\n            return null;\n        }\n    };\n    ToolbarStatus.isFontSize = function (docElement, node, fontSize) {\n        var size = node.style && node.style.fontSize;\n        if ((size === null || size === undefined || size === '') && node.nodeType !== 3 &&\n            node.parentElement.classList.contains('e-content')) {\n            size = this.getComputedStyle(docElement, node, 'font-size');\n        }\n        if ((size !== null && size !== '' && size !== undefined)\n            && (fontSize === null || fontSize === undefined || (fontSize.indexOf(size) > -1))) {\n            return size;\n        }\n        else {\n            return null;\n        }\n    };\n    ToolbarStatus.isFontName = function (docElement, node, fontName) {\n        var name = node.style && node.style.fontFamily;\n        if ((name === null || name === undefined || name === '') && node.nodeType !== 3) {\n            name = this.getComputedStyle(docElement, node, 'font-family');\n        }\n        var index = null;\n        if ((name !== null && name !== '' && name !== undefined)\n            && (fontName === null || fontName === undefined || (fontName.filter(function (value, pos) {\n                // eslint-disable-next-line\n                var pattern = new RegExp(name, 'i');\n                if ((value.replace(/\"/g, '').replace(/ /g, '').toLowerCase() === name.replace(/\"/g, '').replace(/ /g, '').toLowerCase()) ||\n                    (value.split(',')[0] && value.split(',')[0].search(pattern) > -1)) {\n                    index = pos;\n                }\n            }) && (index !== null)))) {\n            // eslint-disable-next-line\n            return (index !== null) ? fontName[index] : name.replace(/\"/g, '');\n        }\n        else {\n            return null;\n        }\n    };\n    ToolbarStatus.isOrderedList = function (node) {\n        if (node.nodeName.toLocaleLowerCase() === 'ol') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    ToolbarStatus.isUnorderedList = function (node) {\n        if (node.nodeName.toLocaleLowerCase() === 'ul') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    ToolbarStatus.isAlignment = function (node) {\n        var align = node.style && node.style.textAlign;\n        if (align === 'left') {\n            return 'justifyleft';\n        }\n        else if (align === 'center') {\n            return 'justifycenter';\n        }\n        else if (align === 'right') {\n            return 'justifyright';\n        }\n        else if (align === 'justify') {\n            return 'justifyfull';\n        }\n        else {\n            return null;\n        }\n    };\n    ToolbarStatus.isFormats = function (node, formatNode) {\n        if (((formatNode === undefined || formatNode === null)\n            && CONSTANT.BLOCK_TAGS.indexOf(node.nodeName.toLocaleLowerCase()) > -1)\n            || (formatNode !== null && formatNode !== undefined\n                && formatNode.indexOf(node.nodeName.toLocaleLowerCase()) > -1)) {\n            return node.nodeName.toLocaleLowerCase();\n        }\n        else {\n            return null;\n        }\n    };\n    ToolbarStatus.getComputedStyle = function (docElement, node, prop) {\n        return docElement.defaultView.getComputedStyle(node, null).getPropertyValue(prop);\n    };\n    ToolbarStatus.isNumberFormatList = function (node) {\n        var list = node.style && node.style.listStyleType;\n        if (list === 'lower-alpha') {\n            return 'Lower Alpha';\n        }\n        else if (list === 'number') {\n            return 'Number';\n        }\n        else if (list === 'upper-alpha') {\n            return 'Upper Alpha';\n        }\n        else if (list === 'lower-roman') {\n            return 'Lower Roman';\n        }\n        else if (list === 'upper-roman') {\n            return 'Upper Roman';\n        }\n        else if (list === 'lower-greek') {\n            return 'Lower Greek';\n        }\n        else if (list === 'none') {\n            return 'None';\n        }\n        else if (this.isOrderedList(node)) {\n            return true;\n        }\n        else {\n            return null;\n        }\n    };\n    ToolbarStatus.isBulletFormatList = function (node) {\n        var list = node.style && node.style.listStyleType;\n        if (list === 'circle') {\n            return 'Circle';\n        }\n        else if (list === 'square') {\n            return 'Square';\n        }\n        else if (list === 'none') {\n            return 'None';\n        }\n        else if (list === 'disc') {\n            return 'Disc';\n        }\n        else if (this.isUnorderedList(node)) {\n            return true;\n        }\n        else {\n            return null;\n        }\n    };\n    return ToolbarStatus;\n}());\nexport { ToolbarStatus };\n","import * as EVENTS from './../../common/constant';\nimport { InsertHtml } from './inserthtml';\nvar EmojiPickerAction = /** @class */ (function () {\n    function EmojiPickerAction(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    EmojiPickerAction.prototype.addEventListener = function () {\n        this.parent.observer.on(EVENTS.EMOJI_PICKER_ACTIONS, this.emojiInsert, this);\n    };\n    EmojiPickerAction.prototype.emojiInsert = function (args) {\n        var node = document.createTextNode(args.value);\n        var selection = this.parent.currentDocument.getSelection();\n        var range = selection.getRangeAt(0);\n        var cursorPos = range.startOffset;\n        for (var i = cursorPos - 1; i >= cursorPos - 15; i--) {\n            var prevChar_1 = selection.focusNode.textContent.substring(i - 1, i);\n            var isPrevSpace_1 = /:$/.test(prevChar_1);\n            if (isPrevSpace_1) {\n                this.beforeApplyFormat(true);\n                break;\n            }\n        }\n        var colon = /:$/.test(selection.focusNode.textContent.charAt(cursorPos - 1));\n        var prevChar = selection.focusNode.textContent.charAt(cursorPos - 2);\n        var isPrevSpace = /\\s/.test(prevChar);\n        if (colon && (isPrevSpace || selection.focusOffset === 1)) {\n            this.beforeApplyFormat(true);\n        }\n        InsertHtml.Insert(this.parent.currentDocument, node, this.parent.editableElement);\n        if (args.callBack) {\n            args.callBack({\n                requestType: args.subCommand,\n                editorMode: 'HTML',\n                event: args.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    EmojiPickerAction.prototype.beforeApplyFormat = function (isBlockFormat) {\n        var range1 = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        var node = this.parent.nodeSelection.getNodeCollection(range1)[0];\n        var blockNewLine = !(node.parentElement.innerHTML.replace(/&nbsp;|<br>/g, '').trim() === ':' || node.textContent.trim().indexOf('/') === 0);\n        var startNode = node;\n        if (blockNewLine && isBlockFormat) {\n            while (startNode !== this.parent.editableElement) {\n                startNode = startNode.parentElement;\n            }\n        }\n        var startPoint = range1.startOffset;\n        while (this.parent.nodeSelection.getRange(document).toString().indexOf(':') === -1) {\n            this.parent.nodeSelection.setSelectionText(document, node, node, startPoint, range1.endOffset);\n            startPoint--;\n        }\n        var range2 = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        var node2 = this.parent.nodeCutter.GetSpliceNode(range2, node);\n        node2.parentNode.removeChild(node2);\n    };\n    return EmojiPickerAction;\n}());\nexport { EmojiPickerAction };\n","import { closest, createElement, detach, isNullOrUndefined as isNOU, removeClass } from '@syncfusion/ej2-base';\nimport * as EVENTS from '../../common/constant';\nimport { SelectionCommands } from '../plugin';\nvar FormatPainterActions = /** @class */ (function () {\n    function FormatPainterActions(parent, options) {\n        this.INVALID_TAGS = ['A', 'AUDIO', 'IMG', 'VIDEO', 'IFRAME'];\n        this.parent = parent;\n        this.settings = options;\n        this.addEventListener();\n        this.setDeniedFormats();\n    }\n    FormatPainterActions.prototype.addEventListener = function () {\n        this.parent.observer.on(EVENTS.FORMAT_PAINTER_ACTIONS, this.actionHandler, this);\n        this.parent.observer.on(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged, this);\n    };\n    FormatPainterActions.prototype.onPropertyChanged = function (prop) {\n        if (prop && prop.module === 'formatPainter') {\n            if (!isNOU(prop.newProp.formatPainterSettings.allowedFormats)) {\n                this.settings.allowedFormats = prop.newProp.formatPainterSettings.allowedFormats;\n            }\n            if (!isNOU(prop.newProp.formatPainterSettings.deniedFormats)) {\n                this.settings.deniedFormats = prop.newProp.formatPainterSettings.deniedFormats;\n                this.setDeniedFormats();\n            }\n        }\n    };\n    FormatPainterActions.prototype.removeEventListener = function () {\n        this.parent.observer.off(EVENTS.FORMAT_PAINTER_ACTIONS, this.actionHandler);\n        this.parent.observer.off(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged);\n    };\n    /**\n     * Destroys the format painter.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    FormatPainterActions.prototype.destroy = function () {\n        this.removeEventListener();\n        this.INVALID_TAGS = null;\n        this.copyCollection = null;\n        this.deniedFormatsCollection = null;\n        this.newElem = null;\n        this.newElemLastChild = null;\n        this.settings = null;\n        this.parent = null;\n    };\n    FormatPainterActions.prototype.actionHandler = function (args) {\n        this.settings.allowedContext = ['Text', 'List', 'Table'];\n        if (!isNOU(args) && !isNOU(args.item) && !isNOU(args.item.formatPainterAction)) {\n            switch (args.item.formatPainterAction) {\n                case 'format-copy':\n                    this.copyAction();\n                    break;\n                case 'format-paste':\n                    this.pasteAction();\n                    break;\n                case 'escape':\n                    this.escapeAction();\n                    break;\n            }\n            this.callBack(args);\n        }\n    };\n    FormatPainterActions.prototype.callBack = function (event) {\n        if (event.callBack) {\n            event.callBack({\n                requestType: 'FormatPainter',\n                action: event.item.formatPainterAction,\n                event: event.event,\n                editorMode: 'HTML',\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    FormatPainterActions.prototype.generateElement = function () {\n        var copyCollection = this.copyCollection.slice(); // To clone without reversing the collcection array\n        copyCollection.reverse();\n        var length = copyCollection.length;\n        var elemCollection = createElement('div', { className: 'e-format-paste-wrapper' });\n        var lastAppendChild;\n        for (var i = 0; i < length; i++) {\n            var _a = copyCollection[i], attrs = _a.attrs, className = _a.className, styles = _a.styles, tagName = _a.tagName;\n            var elem = createElement(tagName);\n            if (className !== '') {\n                elem.className = className;\n            }\n            for (var i_1 = 0; i_1 < attrs.length; i_1++) {\n                var property = attrs[i_1].name;\n                var value = attrs[i_1].value;\n                elem.setAttribute(property, value);\n            }\n            for (var i_2 = 0; i_2 < styles.length; i_2++) {\n                var property = styles[i_2].property;\n                var value = styles[i_2].value;\n                var priority = styles[i_2].priority;\n                elem.style.setProperty(property, value, priority);\n            }\n            if (elemCollection.childElementCount === 0) {\n                elemCollection.append(elem);\n                lastAppendChild = elem;\n            }\n            else {\n                lastAppendChild.append(elem);\n                lastAppendChild = elem;\n            }\n        }\n        var elemChild = this.removeDeniedFormats(elemCollection);\n        var currentElem = elemChild;\n        while (currentElem) {\n            if (currentElem.firstChild === null) {\n                lastAppendChild = currentElem;\n                currentElem = undefined;\n            }\n            else {\n                currentElem = currentElem.firstChild;\n            }\n        }\n        this.newElem = elemChild;\n        this.newElemLastChild = lastAppendChild;\n    };\n    FormatPainterActions.prototype.pasteAction = function () {\n        if (isNOU(this.copyCollection) || this.copyCollection.length === 0) {\n            this.paintPlainTextFormat();\n            return;\n        }\n        this.insertFormatNode(this.newElem, this.newElemLastChild);\n    };\n    FormatPainterActions.prototype.removeDeniedFormats = function (parentElement) {\n        if (!isNOU(this.deniedFormatsCollection) && this.deniedFormatsCollection.length > 0) {\n            var deniedPropArray = this.deniedFormatsCollection;\n            var length_1 = deniedPropArray.length;\n            for (var i = 0; i < length_1; i++) {\n                var tag = deniedPropArray[i].tag;\n                if (deniedPropArray[i].tag) {\n                    var elementsList = parentElement.querySelectorAll(tag);\n                    for (var j = 0; j < elementsList.length; j++) {\n                        if (deniedPropArray[i].classes.length > 0) {\n                            var classes = deniedPropArray[i].classes;\n                            var classLength = classes.length;\n                            for (var k = 0; k < classLength; k++) {\n                                if (elementsList[j].classList.contains(classes[k])) {\n                                    removeClass([elementsList[j]], classes[k].trim());\n                                }\n                            }\n                            if (elementsList[j].classList.length === 0) {\n                                elementsList[j].removeAttribute('class');\n                            }\n                        }\n                        if (deniedPropArray[i].styles.length > 0) {\n                            var styles = deniedPropArray[i].styles;\n                            var styleLength = styles.length;\n                            for (var k = 0; k < styleLength; k++) {\n                                elementsList[j].style.removeProperty(styles[k].trim());\n                            }\n                            if (elementsList[j].style.length === 0) {\n                                elementsList[j].removeAttribute('style');\n                            }\n                        }\n                        if (deniedPropArray[i].attributes.length > 0) {\n                            var attributes = deniedPropArray[i].attributes;\n                            var attributeLength = attributes.length;\n                            for (var k = 0; k < attributeLength; k++) {\n                                elementsList[j].removeAttribute(attributes[k].trim());\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return parentElement.firstElementChild;\n    };\n    FormatPainterActions.prototype.copyAction = function () {\n        var copyCollection = [];\n        var range = this.parent.nodeSelection.getRange(document);\n        var domSelection = this.parent.nodeSelection;\n        var nodes = range.collapsed ? domSelection.getSelectionNodeCollection(range) :\n            domSelection.getSelectionNodeCollectionBr(range);\n        if (nodes.length === 0 && domSelection.getSelectionNodeCollectionBr(range).length === 0) {\n            return;\n        }\n        else {\n            nodes = nodes.length === 0 ? domSelection.getSelectionNodeCollectionBr(range) : nodes;\n        }\n        var parentElem = nodes[0].parentElement;\n        var currentContext = this.findCurrentContext(parentElem);\n        var allowedRulesArray = this.settings.allowedFormats.indexOf(';') > -1 ? this.settings.allowedFormats.split(';') :\n            [this.settings.allowedFormats];\n        for (var i = 0; i < allowedRulesArray.length; i++) {\n            allowedRulesArray[i] = allowedRulesArray[i].trim();\n        }\n        var _a = this.getRangeParentElem(currentContext, parentElem), rangeParentElem = _a[0], context = _a[1];\n        if (currentContext === null) {\n            currentContext = context;\n        }\n        if (!isNOU(currentContext) && this.settings.allowedContext.indexOf(currentContext) > -1) {\n            if (range.startContainer.nodeName === '#text') {\n                parentElem = range.startContainer.parentElement;\n            }\n            var lastElement = parentElem;\n            do {\n                if (allowedRulesArray.indexOf(parentElem.nodeName.toLowerCase()) > -1) {\n                    var allAttributes = parentElem.attributes;\n                    var attribute = [];\n                    for (var i = 0; i < allAttributes.length; i++) {\n                        if (allAttributes[i].name !== 'class' && allAttributes[i].name !== 'style') {\n                            attribute.push(allAttributes[i]);\n                        }\n                    }\n                    var classes = parentElem.className;\n                    var allStyles = parentElem.style;\n                    var styleProp = [];\n                    for (var i = 0; i < allStyles.length; i++) {\n                        var property = allStyles[i];\n                        var value = allStyles.getPropertyValue(property);\n                        var priority = allStyles.getPropertyPriority(property);\n                        styleProp.push({ property: property, value: value, priority: priority });\n                    }\n                    copyCollection.push({\n                        attrs: attribute, className: classes, styles: styleProp, tagName: parentElem.nodeName\n                    });\n                }\n                if (rangeParentElem === parentElem) {\n                    parentElem = undefined;\n                }\n                else if (!isNOU(parentElem.parentElement)) {\n                    parentElem = parentElem.parentElement;\n                }\n                if (lastElement === parentElem) {\n                    break;\n                }\n            } while (!isNOU(parentElem) || parentElem === this.parent.editableElement);\n            this.copyCollection = copyCollection;\n        }\n        this.generateElement();\n    };\n    FormatPainterActions.prototype.getRangeParentElem = function (currentContext, rangeParent) {\n        var startContainer = rangeParent;\n        var rangeParentELem;\n        if (startContainer.nodeType === 3) {\n            startContainer = startContainer.parentElement;\n        }\n        switch (currentContext) {\n            case 'Table':\n                rangeParentELem = closest(startContainer, 'td');\n                if (isNOU(rangeParentELem)) {\n                    rangeParentELem = closest(startContainer, 'th');\n                }\n                break;\n            case 'List':\n                rangeParentELem = closest(startContainer, 'li');\n                break;\n            case 'Text':\n                rangeParentELem = closest(startContainer, 'p');\n                break;\n        }\n        if (isNOU(rangeParentELem)) {\n            var nearBlockParentName = this.getNearestBlockParentElement(rangeParent);\n            if (!isNOU(nearBlockParentName) && nearBlockParentName !== 'UL' &&\n                nearBlockParentName !== 'OL' && nearBlockParentName !== 'LI') {\n                rangeParentELem = closest(startContainer, nearBlockParentName);\n                currentContext = 'Text';\n            }\n        }\n        if (currentContext === 'List') {\n            rangeParentELem = rangeParentELem.parentElement;\n        }\n        return [rangeParentELem, currentContext];\n    };\n    FormatPainterActions.prototype.getNearestBlockParentElement = function (rangeParent) {\n        var node = rangeParent;\n        if (node.nodeType === 3) {\n            node = node.parentNode;\n        }\n        // iterate untill the content editable div\n        while (node && node !== this.parent.editableElement) {\n            // If true return the block node name.\n            if (!isNOU(node) && this.isBlockElement(node)) {\n                return node.nodeName;\n            }\n            // if false re assign node to parent node\n            node = node.parentNode;\n        }\n        return null;\n    };\n    FormatPainterActions.prototype.isBlockElement = function (node) {\n        var blockTags = ['P', 'DIV', 'UL', 'OL', 'LI', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6',\n            'ADDRESS', 'ARTICLE', 'ASIDE', 'BLOCKQUOTE', 'FIGCAPTION', 'FIGURE', 'FOOTER', 'HEADER',\n            'HR', 'MAIN', 'NAV', 'SECTION', 'SUMMARY', 'PRE'];\n        return blockTags.indexOf(node.nodeName) > -1;\n    };\n    FormatPainterActions.prototype.escapeAction = function () {\n        this.copyCollection = [];\n    };\n    FormatPainterActions.prototype.paintPlainTextFormat = function () {\n        var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        var domSelection = this.parent.nodeSelection;\n        var nodes = range.collapsed ? domSelection.getSelectionNodeCollection(range) :\n            domSelection.getSelectionNodeCollectionBr(range);\n        var isInValid;\n        if (nodes.length > 1) {\n            for (var i = 0; i < nodes.length; i++) {\n                isInValid = this.validateELementTag(nodes[i]);\n            }\n        }\n        else {\n            isInValid = this.validateELementTag(range.startContainer) && this.validateELementTag(range.endContainer);\n        }\n        if (!isInValid) {\n            this.parent.execCommand('Clear', 'ClearFormat', null, null);\n        }\n    };\n    FormatPainterActions.prototype.validateELementTag = function (node) {\n        if (node.nodeType === 3) {\n            node = node.parentElement;\n        }\n        return this.INVALID_TAGS.indexOf(node.tagName) > -1;\n    };\n    FormatPainterActions.prototype.findCurrentContext = function (parentElem) {\n        var closestParagraph = closest(parentElem, 'p');\n        var closestList = closest(parentElem, 'li');\n        if (closestParagraph && !closestList) {\n            return 'Text';\n        }\n        else if (closest(parentElem, 'li')) {\n            if (!isNOU(closestParagraph) && !isNOU(closestList) && closestParagraph.textContent.trim() !== closestList.textContent.trim()) {\n                return 'Text';\n            }\n            return 'List';\n        }\n        else if (closest(parentElem, 'td') || closest(parentElem, 'tr') || closest(parentElem, 'th')) {\n            return 'Table';\n        }\n        return null;\n    };\n    FormatPainterActions.prototype.insertFormatNode = function (elem, lastChild) {\n        var clonedElem = elem.cloneNode(true);\n        if (!this.isBlockElement(elem)) {\n            var newBlockElem = createElement('P');\n            newBlockElem.appendChild(elem);\n            clonedElem = newBlockElem.cloneNode(true);\n        }\n        var endNode = this.parent.editableElement;\n        var docElement = this.parent.currentDocument;\n        var childElem = clonedElem.firstChild;\n        var inlineElement;\n        while (childElem) {\n            if (this.isBlockElement(childElem)) {\n                childElem = childElem.firstChild;\n            }\n            else {\n                inlineElement = childElem.parentNode.removeChild(childElem);\n                break;\n            }\n        }\n        var formatValues = {\n            element: inlineElement,\n            lastChild: lastChild\n        };\n        SelectionCommands.applyFormat(docElement, null, endNode, 'P', 'formatPainter', null, formatValues);\n        var range = this.parent.nodeSelection.getRange(docElement);\n        var isCollapsed = range.collapsed;\n        var blockNodes = this.parent.domNode.blockNodes();\n        var isFullNodeSelected = false;\n        if (blockNodes.length === 1) {\n            isFullNodeSelected = blockNodes[0].textContent.trim() === range.toString().trim();\n        }\n        if (this.isBlockElement(clonedElem) && isCollapsed || blockNodes.length > 1 || isFullNodeSelected) {\n            this.insertBlockNode(clonedElem, range, docElement, blockNodes);\n        }\n    };\n    FormatPainterActions.prototype.insertBlockNode = function (element, range, docElement, nodes) {\n        var domSelection = this.parent.nodeSelection;\n        var saveSelection = domSelection.save(range, docElement);\n        this.parent.domNode.setMarker(saveSelection);\n        var listElement; // To clone to multiple list elements\n        var cloneListParentNode;\n        var sameListType = false;\n        if (element.nodeName === 'UL' || element.nodeName === 'OL') {\n            cloneListParentNode = element.cloneNode(true);\n            listElement = cloneListParentNode.firstChild;\n        }\n        var cloneElementNode = isNOU(cloneListParentNode) ? element : element.firstChild;\n        for (var index = 0; index < nodes.length; index++) {\n            if (this.INVALID_TAGS.indexOf(nodes[index].nodeName) > -1 ||\n                nodes[index].querySelectorAll('img,audio,video,iframe').length > 0) {\n                continue;\n            }\n            var cloneParentNode = cloneElementNode.cloneNode(false);\n            // Appending all the child elements\n            while (nodes[index].firstChild) {\n                if (nodes[index].textContent.trim().length !== 0) {\n                    cloneParentNode.appendChild(nodes[index].firstChild);\n                }\n                else {\n                    nodes[index].removeChild(nodes[index].firstChild);\n                }\n            }\n            if (nodes[index].nodeName === 'TD' || nodes[index].nodeName === 'TH') {\n                if (isNOU(cloneListParentNode)) {\n                    nodes[index].appendChild(cloneParentNode);\n                    continue;\n                }\n                else if (index === 0 && !isNOU(cloneListParentNode)) {\n                    nodes[index].appendChild(cloneListParentNode);\n                    cloneListParentNode.appendChild(cloneParentNode);\n                    continue;\n                }\n                else {\n                    nodes[index].appendChild(cloneParentNode);\n                    continue;\n                }\n            }\n            if (!isNOU(cloneListParentNode)) {\n                sameListType = this.isSameListType(element, nodes[index]);\n            }\n            if (cloneParentNode.nodeName === 'LI' && !sameListType) {\n                this.insertNewList(range, nodes, index, cloneListParentNode, cloneParentNode);\n            }\n            else if (sameListType) {\n                this.insertSameList(nodes, index, cloneListParentNode, cloneParentNode);\n            }\n            else {\n                nodes[index].parentNode.replaceChild(cloneParentNode, nodes[index]);\n            }\n            /**Removing the inserted block node in list and appending to previous element sibling */\n            if (cloneParentNode.nodeName !== 'LI' && (cloneParentNode.parentElement.nodeName === 'OL' ||\n                cloneParentNode.parentElement.nodeName === 'UL')) {\n                var parent_1 = cloneParentNode.parentElement;\n                // Cutting single ul or ol to two ul or ol based on the range\n                this.parent.nodeCutter.SplitNode(range, parent_1, true);\n                if (!isNOU(parent_1.previousElementSibling)) {\n                    parent_1.previousElementSibling.after(cloneParentNode);\n                    // To remove the nested list items out of the block element\n                    if (cloneParentNode.childNodes.length > 1) {\n                        for (var j = 0; j < cloneParentNode.childNodes.length; j++) {\n                            var currentChild = cloneParentNode.childNodes[j];\n                            if (currentChild.nodeName === 'OL' || currentChild.nodeName === 'UL') {\n                                cloneParentNode.after(currentChild);\n                            }\n                        }\n                    }\n                }\n                else {\n                    parent_1.parentElement.prepend(cloneParentNode);\n                }\n            }\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n        !isNOU(listElement) ? detach(listElement) : false;\n        this.cleanEmptyLists();\n        var save = this.parent.domNode.saveMarker(saveSelection, null);\n        save.restore();\n    };\n    FormatPainterActions.prototype.insertNewList = function (range, nodes, index, cloneListParentNode, cloneParentNode) {\n        // Appending the li nodes to the ol or ul node\n        if (index === 0) {\n            var nodeName = nodes[index].nodeName;\n            nodes[index] = nodes[index].parentNode.replaceChild(cloneListParentNode, nodes[index]);\n            var parent_2 = nodeName === 'LI' ? cloneListParentNode.parentElement\n                : cloneListParentNode;\n            // Splicing and then inserting the node to previous element sibling of the Listparent.parent\n            this.parent.nodeCutter.SplitNode(range, parent_2, true);\n            if (nodes[index].nodeName === 'LI' && !isNOU(parent_2)) {\n                cloneListParentNode.append(cloneParentNode);\n                if (!isNOU(parent_2.parentNode)) {\n                    parent_2.parentNode.insertBefore(cloneListParentNode, parent_2);\n                }\n            }\n            else {\n                if (!isNOU(parent_2)) {\n                    if (!isNOU(parent_2.previousElementSibling) && parent_2.previousElementSibling.nodeName === cloneListParentNode.nodeName) {\n                        var currentParent = parent_2.previousElementSibling;\n                        currentParent.append(cloneParentNode);\n                        while (currentParent.firstChild) {\n                            cloneListParentNode.append(currentParent.firstChild);\n                        }\n                    }\n                    else if (!isNOU(parent_2.nextElementSibling) && parent_2.nextElementSibling.nodeName === cloneListParentNode.nodeName) {\n                        var currentParent = parent_2.nextElementSibling;\n                        currentParent.prepend(cloneParentNode);\n                        while (currentParent.firstChild) {\n                            cloneListParentNode.append(currentParent.firstChild);\n                        }\n                    }\n                    else {\n                        cloneListParentNode.append(cloneParentNode);\n                    }\n                }\n                else {\n                    cloneListParentNode.append(cloneParentNode);\n                }\n            }\n        }\n        else {\n            cloneListParentNode.append(cloneParentNode);\n        }\n        this.detachEmptyBlockNodes(nodes[index]);\n    };\n    FormatPainterActions.prototype.insertSameList = function (nodes, index, cloneListParentNode, cloneParentNode) {\n        if (index === 0) {\n            if (!isNOU(nodes[index].parentNode) && (nodes[index].parentNode.nodeName === 'UL' || nodes[index].parentNode.nodeName === 'OL')) {\n                // append the nodes[index].parentNode.childNodes to the clonelistparentnode\n                if (nodes.length === 1) {\n                    // When clicked with cursor in the single list item\n                    while (cloneParentNode.firstChild) {\n                        nodes[index].append(cloneParentNode.firstChild);\n                    }\n                    for (var i = 0; i < nodes[index].parentNode.childNodes.length; i++) {\n                        var currentChild = nodes[index].parentNode.childNodes[i];\n                        cloneListParentNode.append(currentChild.cloneNode(true));\n                    }\n                }\n                else {\n                    cloneListParentNode.append(cloneParentNode);\n                }\n                // replace the older ol and ul with new ol and ul of clonelistparentnode\n                nodes[index].parentNode.parentNode.replaceChild(cloneListParentNode, nodes[index].parentNode);\n            }\n        }\n        else {\n            cloneListParentNode.append(cloneParentNode);\n        }\n        this.detachEmptyBlockNodes(nodes[index]);\n    };\n    FormatPainterActions.prototype.isSameListType = function (element, node) {\n        var isSameListType = false;\n        var nearestListNode = closest(node, 'ol, ul');\n        if (!isNOU(nearestListNode) && nearestListNode.querySelectorAll('li').length > 0) {\n            if (nearestListNode.nodeName === element.nodeName) {\n                isSameListType = true;\n            }\n            else {\n                isSameListType = false;\n            }\n        }\n        return isSameListType;\n    };\n    FormatPainterActions.prototype.cleanEmptyLists = function () {\n        var listElem = this.parent.editableElement.querySelectorAll('ol, ul');\n        for (var i = 0; i < listElem.length; i++) {\n            if (listElem[i].textContent.trim() === '') {\n                detach(listElem[i]);\n            }\n        }\n    };\n    FormatPainterActions.prototype.setDeniedFormats = function () {\n        var deniedFormatsCollection = [];\n        if (isNOU(this.settings) || isNOU(this.settings.deniedFormats)) {\n            return;\n        }\n        var deniedFormats = this.settings.deniedFormats.indexOf(';') > -1 ? this.settings.deniedFormats.split(';') :\n            [this.settings.deniedFormats];\n        var length = deniedFormats.length;\n        for (var i = 0; i < length; i++) {\n            var formatString = deniedFormats[i];\n            if (formatString !== '') {\n                formatString.trim();\n                var collection = this.makeDeniedFormatsCollection(formatString);\n                if (!isNOU(collection)) {\n                    deniedFormatsCollection.push(collection);\n                }\n            }\n        }\n        this.deniedFormatsCollection = deniedFormatsCollection;\n    };\n    FormatPainterActions.prototype.detachEmptyBlockNodes = function (node) {\n        if (!isNOU(node) && node.textContent.trim() === '') {\n            detach(node);\n        }\n    };\n    FormatPainterActions.prototype.makeDeniedFormatsCollection = function (value) {\n        var openParenIndex = value.indexOf('(');\n        var closeParenIndex = value.indexOf(')');\n        var openBracketIndex = value.indexOf('[');\n        var closeBracketIndex = value.indexOf(']');\n        var openBraceIndex = value.indexOf('{');\n        var closeBraceIndex = value.indexOf('}');\n        var classes = [];\n        var attributes = '';\n        var styles = '';\n        var tagName = '';\n        var classList = [];\n        var attributesList = [];\n        var stylesList = [];\n        if (openParenIndex > -1 && closeParenIndex > -1) {\n            classes = value.substring(openParenIndex + 1, closeParenIndex).split(' ');\n            classList = classes[0].split(')')[0].split(',');\n        }\n        if (openBracketIndex > -1 && closeBracketIndex > -1) {\n            attributes = value.substring(openBracketIndex + 1, closeBracketIndex);\n            attributesList = attributes.split(',');\n        }\n        if (openBraceIndex > -1 && closeBraceIndex > -1) {\n            styles = value.substring(openBraceIndex + 1, closeBraceIndex);\n            stylesList = styles.split(',');\n        }\n        var openIndexArray = [openParenIndex, openBracketIndex, openBraceIndex];\n        openIndexArray = openIndexArray.filter(function (index) { return index > -1; });\n        var len = openIndexArray.length;\n        var min;\n        if (len === 1) {\n            min = openIndexArray[0];\n        }\n        else if (len === 2) {\n            min = Math.min(openIndexArray[0], openIndexArray[1]);\n        }\n        else if (len === 3) {\n            min = Math.min(openIndexArray[0], openIndexArray[1], openIndexArray[2]);\n        }\n        tagName = value.substring(0, min);\n        tagName = tagName.trim();\n        return ({\n            tag: tagName, styles: stylesList, classes: classList,\n            attributes: attributesList\n        });\n    };\n    return FormatPainterActions;\n}());\nexport { FormatPainterActions };\n","import { Observer } from '@syncfusion/ej2-base';\nimport * as CONSTANT from './constant';\nimport { Lists } from './../plugin/lists';\nimport { NodeSelection } from './../../selection/index';\nimport { DOMNode } from './../plugin/dom-node';\nimport { Formats } from './../plugin/formats';\nimport { LinkCommand } from './../plugin/link';\nimport { Alignments } from './../plugin/alignments';\nimport { Indents } from './../plugin/indents';\nimport { ImageCommand } from './../plugin/image';\nimport { AudioCommand } from './../plugin/audio';\nimport { VideoCommand } from './../plugin/video';\nimport { TableCommand } from './../plugin/table';\nimport { SelectionBasedExec } from './../plugin/selection-exec';\nimport { InsertHtmlExec } from './../plugin/inserthtml-exec';\nimport { ClearFormatExec } from './../plugin/clearformat-exec';\nimport { UndoRedoManager } from './../plugin/undo';\nimport { MsWordPaste } from '../plugin/ms-word-clean-up';\nimport * as EVENTS from './../../common/constant';\nimport { InsertTextExec } from '../plugin/insert-text';\nimport { NodeCutter } from '../plugin/nodecutter';\nimport { FormatPainterActions } from '../plugin/format-painter-actions';\nimport { EmojiPickerAction } from '../plugin/emoji-picker-action';\n/**\n * EditorManager internal component\n *\n * @hidden\n * @deprecated\n */\nvar EditorManager = /** @class */ (function () {\n    /**\n     * Constructor for creating the component\n     *\n     * @hidden\n     * @deprecated\n     * @param {ICommandModel} options - specifies the command Model\n     */\n    function EditorManager(options) {\n        this.currentDocument = options.document;\n        this.editableElement = options.editableElement;\n        this.nodeSelection = new NodeSelection();\n        this.nodeCutter = new NodeCutter();\n        this.domNode = new DOMNode(this.editableElement, this.currentDocument);\n        this.observer = new Observer(this);\n        this.listObj = new Lists(this);\n        this.formatObj = new Formats(this);\n        this.alignmentObj = new Alignments(this);\n        this.indentsObj = new Indents(this);\n        this.linkObj = new LinkCommand(this);\n        this.imgObj = new ImageCommand(this);\n        this.audioObj = new AudioCommand(this);\n        this.videoObj = new VideoCommand(this);\n        this.selectionObj = new SelectionBasedExec(this);\n        this.inserthtmlObj = new InsertHtmlExec(this);\n        this.insertTextObj = new InsertTextExec(this);\n        this.clearObj = new ClearFormatExec(this);\n        this.tableObj = new TableCommand(this);\n        this.undoRedoManager = new UndoRedoManager(this, options.options);\n        this.msWordPaste = new MsWordPaste(this);\n        this.formatPainterEditor = new FormatPainterActions(this, options.formatPainterSettings);\n        this.emojiPickerObj = new EmojiPickerAction(this);\n        this.wireEvents();\n    }\n    EditorManager.prototype.wireEvents = function () {\n        this.observer.on(EVENTS.KEY_DOWN, this.editorKeyDown, this);\n        this.observer.on(EVENTS.KEY_UP, this.editorKeyUp, this);\n        this.observer.on(EVENTS.KEY_UP, this.editorKeyUp, this);\n        this.observer.on(EVENTS.MODEL_CHANGED, this.onPropertyChanged, this);\n        this.observer.on(EVENTS.MS_WORD_CLEANUP, this.onWordPaste, this);\n        this.observer.on(EVENTS.ON_BEGIN, this.onBegin, this);\n    };\n    EditorManager.prototype.onWordPaste = function (e) {\n        this.observer.notify(EVENTS.MS_WORD_CLEANUP_PLUGIN, e);\n    };\n    EditorManager.prototype.onPropertyChanged = function (props) {\n        this.observer.notify(EVENTS.MODEL_CHANGED_PLUGIN, props);\n    };\n    EditorManager.prototype.editorKeyDown = function (e) {\n        this.observer.notify(EVENTS.KEY_DOWN_HANDLER, e);\n    };\n    EditorManager.prototype.editorKeyUp = function (e) {\n        this.observer.notify(EVENTS.KEY_UP_HANDLER, e);\n    };\n    EditorManager.prototype.onBegin = function (e) {\n        this.observer.notify(EVENTS.SPACE_ACTION, e);\n    };\n    /* eslint-disable */\n    /**\n     * execCommand\n     *\n     * @param {ExecCommand} command - specifies the execution command\n     * @param {T} value - specifes the value.\n     * @param {Event} event - specifies the call back event\n     * @param {Function} callBack - specifies the function\n     * @param {string} text - specifies the string value\n     * @param {T} exeValue - specifies the values to be executed\n     * @param {string} selector - specifies the selector values\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    /* eslint-enable */\n    EditorManager.prototype.execCommand = function (command, value, event, callBack, text, exeValue, selector, enterAction) {\n        switch (command.toLowerCase()) {\n            case 'lists':\n                this.observer.notify(EVENTS.LIST_TYPE, { subCommand: value, event: event, callBack: callBack,\n                    selector: selector, item: exeValue, enterAction: enterAction });\n                break;\n            case 'formats':\n                this.observer.notify(EVENTS.FORMAT_TYPE, { subCommand: value, event: event, callBack: callBack,\n                    selector: selector, exeValue: exeValue, enterAction: enterAction\n                });\n                break;\n            case 'alignments':\n                this.observer.notify(CONSTANT.ALIGNMENT_TYPE, {\n                    subCommand: value, event: event, callBack: callBack,\n                    selector: selector,\n                    value: exeValue\n                });\n                break;\n            case 'indents':\n                this.observer.notify(CONSTANT.INDENT_TYPE, { subCommand: value, event: event, callBack: callBack, selector: selector });\n                break;\n            case 'links':\n                this.observer.notify(CONSTANT.LINK, { command: command, value: value, item: exeValue, event: event, callBack: callBack });\n                break;\n            case 'files':\n                this.observer.notify(CONSTANT.IMAGE, {\n                    command: command, value: 'Image', item: exeValue, event: event, callBack: callBack, selector: selector\n                });\n                break;\n            case 'images':\n                this.observer.notify(CONSTANT.IMAGE, {\n                    command: command, value: value, item: exeValue, event: event, callBack: callBack, selector: selector\n                });\n                break;\n            case 'audios':\n                this.observer.notify(CONSTANT.AUDIO, {\n                    command: command, value: value, item: exeValue, event: event, callBack: callBack, selector: selector\n                });\n                break;\n            case 'videos':\n                this.observer.notify(CONSTANT.VIDEO, {\n                    command: command, value: value, item: exeValue, event: event, callBack: callBack, selector: selector\n                });\n                break;\n            case 'table':\n                switch (value.toString().toLocaleLowerCase()) {\n                    case 'createtable':\n                        this.observer.notify(CONSTANT.TABLE, { item: exeValue, event: event, callBack: callBack, enterAction: enterAction });\n                        break;\n                    case 'insertrowbefore':\n                    case 'insertrowafter':\n                        this.observer.notify(CONSTANT.INSERT_ROW, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'insertcolumnleft':\n                    case 'insertcolumnright':\n                        this.observer.notify(CONSTANT.INSERT_COLUMN, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'deleterow':\n                        this.observer.notify(CONSTANT.DELETEROW, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'deletecolumn':\n                        this.observer.notify(CONSTANT.DELETECOLUMN, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'tableremove':\n                        this.observer.notify(CONSTANT.REMOVETABLE, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'tableheader':\n                        this.observer.notify(CONSTANT.TABLEHEADER, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'aligntop':\n                    case 'alignmiddle':\n                    case 'alignbottom':\n                        this.observer.notify(CONSTANT.TABLE_VERTICAL_ALIGN, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'merge':\n                        this.observer.notify(CONSTANT.TABLE_MERGE, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'horizontalsplit':\n                        this.observer.notify(CONSTANT.TABLE_HORIZONTAL_SPLIT, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'verticalsplit':\n                        this.observer.notify(CONSTANT.TABLE_VERTICAL_SPLIT, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                }\n                break;\n            case 'font':\n            case 'style':\n            case 'effects':\n            case 'casing':\n                this.observer.notify(CONSTANT.SELECTION_TYPE, { subCommand: value, event: event, callBack: callBack, value: text, selector: selector, enterAction: enterAction });\n                break;\n            case 'inserthtml':\n                this.observer.notify(CONSTANT.INSERTHTML_TYPE, { subCommand: value, callBack: callBack, value: text, enterAction: enterAction });\n                break;\n            case 'inserttext':\n                this.observer.notify(CONSTANT.INSERT_TEXT_TYPE, { subCommand: value, callBack: callBack, value: text });\n                break;\n            case 'clear':\n                this.observer.notify(CONSTANT.CLEAR_TYPE, { subCommand: value, event: event, callBack: callBack, selector: selector, enterAction: enterAction });\n                break;\n            case 'actions':\n                this.observer.notify(EVENTS.ACTION, { subCommand: value, event: event, callBack: callBack, selector: selector });\n                break;\n            case 'formatpainter':\n                this.observer.notify(EVENTS.FORMAT_PAINTER_ACTIONS, { item: exeValue, subCommand: value, event: event, callBack: callBack });\n                break;\n            case 'emojipicker':\n                this.observer.notify(EVENTS.EMOJI_PICKER_ACTIONS, { item: exeValue, subCommand: value, value: text,\n                    event: event, callBack: callBack });\n        }\n    };\n    return EditorManager;\n}());\nexport { EditorManager };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Formatter } from './formatter';\nimport { EditorManager } from './../../editor-manager/base/editor-manager';\nimport { extend } from '@syncfusion/ej2-base';\nimport { htmlKeyConfig } from './../../common/config';\n/**\n * HTML adapter\n *\n * @hidden\n * @deprecated\n */\nvar HTMLFormatter = /** @class */ (function (_super) {\n    __extends(HTMLFormatter, _super);\n    function HTMLFormatter(options) {\n        var _this = _super.call(this) || this;\n        _this.initialize();\n        extend(_this, _this, options, true);\n        if (_this.currentDocument && _this.element) {\n            _this.updateFormatter(_this.element, _this.currentDocument, options.options, options.formatPainterSettings);\n        }\n        return _this;\n    }\n    HTMLFormatter.prototype.initialize = function () {\n        this.keyConfig = htmlKeyConfig;\n    };\n    /**\n     * Update the formatter of RichTextEditor\n     *\n     * @param {Element} editElement - specifies the edit element.\n     * @param {Document} doc - specifies the doucment\n     * @param {number} options - specifies the options\n     * @param {FormatPainterSettingsModel} formatPainterSettings - specifies the format painter settings\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    HTMLFormatter.prototype.updateFormatter = function (editElement, doc, options, formatPainterSettings) {\n        if (editElement && doc) {\n            this.editorManager = new EditorManager({\n                document: doc,\n                editableElement: editElement,\n                options: options,\n                formatPainterSettings: formatPainterSettings\n            });\n        }\n    };\n    return HTMLFormatter;\n}(Formatter));\nexport { HTMLFormatter };\n","import * as events from '../base/constant';\nimport { ToolbarStatus } from '../../editor-manager/plugin/toolbar-status';\nimport { getDefaultHtmlTbStatus } from '../../common/util';\n/**\n * HtmlToolbarStatus module for refresh the toolbar status\n */\nvar HtmlToolbarStatus = /** @class */ (function () {\n    function HtmlToolbarStatus(parent) {\n        this.parent = parent;\n        this.toolbarStatus = this.prevToolbarStatus = getDefaultHtmlTbStatus();\n        this.addEventListener();\n    }\n    HtmlToolbarStatus.prototype.addEventListener = function () {\n        this.parent.on(events.toolbarRefresh, this.onRefreshHandler, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    HtmlToolbarStatus.prototype.removeEventListener = function () {\n        this.parent.off(events.toolbarRefresh, this.onRefreshHandler);\n        this.parent.off(events.destroy, this.removeEventListener);\n    };\n    HtmlToolbarStatus.prototype.onRefreshHandler = function (args) {\n        if (this.parent.readonly) {\n            return;\n        }\n        var fontsize = [];\n        var fontName = [];\n        var formats = [];\n        this.parent.fontSize.items.forEach(function (item) {\n            fontsize.push(item.value);\n        });\n        this.parent.fontFamily.items.forEach(function (item) {\n            fontName.push(item.value);\n        });\n        this.parent.format.types.forEach(function (item) {\n            formats.push(item.value.toLocaleLowerCase());\n        });\n        this.toolbarStatus = ToolbarStatus.get(this.parent.contentModule.getDocument(), this.parent.contentModule.getEditPanel(), formats, fontsize, fontName, args.documentNode);\n        var tbStatusString = JSON.stringify(this.toolbarStatus);\n        this.parent.notify(events.toolbarUpdated, this.toolbarStatus);\n        if (JSON.stringify(this.prevToolbarStatus) !== tbStatusString) {\n            this.parent.notify(events.updateTbItemsStatus, { html: JSON.parse(tbStatusString), markdown: null });\n            this.prevToolbarStatus = JSON.parse(tbStatusString);\n        }\n    };\n    return HtmlToolbarStatus;\n}());\nexport { HtmlToolbarStatus };\n","import { getEditValue } from '../base/util';\n/**\n * Content module is used to render Rich Text Editor content\n *\n * @hidden\n * @deprecated\n */\nvar ContentRender = /** @class */ (function () {\n    /**\n     * Constructor for content renderer module\n     *\n     * @param {IRichTextEditor} parent - specifies the parent element.\n     * @param {ServiceLocator} serviceLocator - specifies the service.\n     * @returns {void}\n     */\n    function ContentRender(parent, serviceLocator) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n    }\n    /**\n     * The function is used to render Rich Text Editor content div\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    ContentRender.prototype.renderPanel = function () {\n        var rteObj = this.parent;\n        var div = this.parent.createElement('div', { className: 'e-rte-content', id: this.parent.getID() + 'rte-view' });\n        var rteContent = getEditValue(rteObj.value, rteObj);\n        this.editableElement = this.parent.createElement('div', {\n            className: 'e-content',\n            id: this.parent.getID() + '_rte-edit-view',\n            attrs: {\n                'contenteditable': 'true'\n            },\n            innerHTML: rteContent\n        });\n        div.appendChild(this.editableElement);\n        this.setPanel(div);\n        rteObj.element.appendChild(div);\n    };\n    /**\n     * Get the content div element of RichTextEditor\n     *\n     * @returns {Element} - specifies the element.\n     * @hidden\n     * @deprecated\n     */\n    ContentRender.prototype.getPanel = function () {\n        return this.contentPanel;\n    };\n    /**\n     * Get the editable element of RichTextEditor\n     *\n     * @returns {Element} - specifies the return element.\n     * @hidden\n     * @deprecated\n     */\n    ContentRender.prototype.getEditPanel = function () {\n        return this.editableElement;\n    };\n    /**\n     * Returns the text content as string.\n     *\n     * @returns {string} - specifies the string element.\n     */\n    ContentRender.prototype.getText = function () {\n        var textString = this.getEditPanel().innerText;\n        return textString === '\\n' ? '' : textString;\n    };\n    /**\n     * Set the content div element of RichTextEditor\n     *\n     * @param {Element} panel - specifies the panel element.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    ContentRender.prototype.setPanel = function (panel) {\n        this.contentPanel = panel;\n    };\n    /**\n     * Get the document of RichTextEditor\n     *\n     * @returns {Document} - specifies the document.\n     * @hidden\n     * @deprecated\n     */\n    ContentRender.prototype.getDocument = function () {\n        return this.getEditPanel().ownerDocument;\n    };\n    return ContentRender;\n}());\nexport { ContentRender };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { ContentRender } from '../renderer/content-renderer';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getEditValue } from '../base/util';\nvar IFRAMEHEADER = \"\\n<!DOCTYPE html> \\n    <html>\\n         <head>\\n            <meta charset='utf-8' /> \\n            <style>\\n                @charset \\\"UTF-8\\\";\\n                body {\\n                    font-family: \\\"Roboto\\\", sans-serif;\\n                    font-size: 14px;\\n                }\\n                html, body{height: 100%;margin: 0;}\\n                body.e-cursor{cursor:default}\\n                span.e-selected-node\\t{background-color: #939393;color: white;}\\n                span.e-selected-node.e-highlight {background-color: #1d9dd8;}\\n                body{color:#333;word-wrap:break-word;padding: 8px;box-sizing: border-box;}\\n                .e-rte-image, .e-rte-audio, .e-rte-video  {border: 0;cursor: pointer;display:\\n                    block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\\n                .e-rte-image.e-imginline, .e-rte-audio.e-audio-inline, .e-rte-video.e-video-inline {display: inline-block;float: none;max-width: calc(100% - (2 * 5px));padding: 1px;vertical-align: bottom;}\\n                .e-rte-image.e-imgcenter, .e-rte-video.e-video-center {cursor: pointer;display: block;float: none;margin: 5px auto;max-width: 100%;position: relative;}\\n                .e-rte-image.e-imgright, .e-rte-video.e-video-right { float: right; margin: 0 auto;margin-left: 5px;text-align: right;}\\n                .e-rte-image.e-imgleft, .e-rte-video.e-video-left {float: left;margin: 0 auto;margin-right: 5px;text-align: left;}\\n                .e-img-caption { display: inline-block; float: none; margin: 5px auto; max-width: 100%;position: relative;}\\n                .e-img-caption.e-caption-inline {display: inline-block;float: none;\\n                    margin: 5px auto;margin-left: 5px;margin-right: 5px;max-width: calc(100% - (2 * 5px));\\n                    position: relativetext-align: center;vertical-align: bottom;}\\n                .e-img-inner {box-sizing: border-box;display: block;font-size: 16px;font-weight: initial;\\n                    margin: auto;opacity: .9;text-align: center;width: 100%;}\\n                .e-img-wrap {display: inline-block;margin: auto;padding: 0;text-align: center;width: 100%;}\\n                .e-imgleft, .e-video-left {float: left;margin: 0 5px 0 0;text-align: left;}\\n                .e-imgright, .e-video-right {float: right;margin: 0 0 0 5px;text-align: right;}\\n                .e-imgcenter, .e-video-center {cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\\n                .e-control img:not(.e-resize) {border: 2px solid transparent; z-index: 1000}\\n                .e-imginline , .e-audio-inline, .e-video-inline {display: inline-block;float: none;margin-left: 5px;margin-right: 5px;\\n                    max-width: calc(100% - (2 * 5px));vertical-align: bottom;}\\n                .e-imgbreak, .e-audio-break, .e-video-break {border: 0;cursor: pointer;\\n                    display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\\n                .e-rte-image.e-img-focus:not(.e-resize), .e-audio-focus:not(.e-resize), .e-video-focus:not(.e-resize) {border: solid 2px #4a90e2;}\\n                img.e-img-focus::selection, audio.e-audio-focus::selection, .e-video-focus::selection { background: transparent;color: transparent;}\\n                span.e-rte-imageboxmark {  width: 10px; height: 10px; position: absolute; display: block;\\n                    background: #4a90e2; border: 1px solid #fff; z-index: 1000;}\\n                .e-mob-rte.e-mob-span span.e-rte-imageboxmark { background: #4a90e2; border: 1px solid #fff; }\\n                .e-mob-rte span.e-rte-imageboxmark { background: #fff; border: 1px solid #4a90e2;\\n                    border-radius: 15px; height: 20px; width: 20px; }\\n                .e-mob-rte.e-mob-span span.e-rte-imageboxmark { background: #4a90e2; border: 1px solid #fff; }\\n                .e-rte-content .e-content img.e-resize, .e-rte-content .e-content video.e-resize { z-index: 1000; }\\n                .e-img-caption .e-img-inner { outline: 0; }\\n                .e-img-caption a:focus-visible { outline: none; }\\n                .e-img-caption .e-rte-image.e-imgright, .e-img-caption .e-rte-image.e-imgleft { float: none; margin: 0;}\\n                body{box-sizing: border-box;min-height: 100px;outline: 0 solid transparent;\\n                    overflow-x: auto;padding: 16px;position: relative;text-align: inherit;z-index: 2;}\\n                p{margin: 0 0 10px;margin-bottom: 10px;}\\n                li{margin-bottom: 10px;}\\n                h1{font-size: 2.17em;font-weight: 400;line-height: 1;margin: 10px 0;}\\n                h2{font-size: 1.74em;font-weight: 400;margin: 10px 0;}\\n                h3{font-size: 1.31em;font-weight: 400;margin: 10px 0;}\\n                h4{font-size: 16px;font-weight: 400;line-height: 1.5;margin: 0;}\\n                h5{font-size: 00.8em;font-weight: 400;margin: 0;}\\n                h6{font-size: 00.65em;font-weight: 400;margin: 0;}\\n                blockquote{margin: 10px 0;margin-left: 0;padding-left: 5px;border-left: solid 2px #5c5c5c;}\\n                pre{background-color: inherit;border: 0;border-radius: 0;color: #333;\\n                    font-size: inherit;line-height: inherit;margin: 0 0 10px;overflow: visible;padding: 0;\\n                    white-space: pre-wrap;word-break: inherit;word-wrap: break-word;}\\n                strong, b{font-weight: 700;}\\n                a{text-decoration: none;user-select: auto;}\\n                a:hover{text-decoration: underline;};\\n                p:last-child, pre:last-child, blockquote:last-child{margin-bottom: 0;}\\n                h3+h4, h4+h5, h5+h6{margin-top: 00.6em;}\\n                ul:last-child{margin-bottom: 0;}\\n                table { border-collapse: collapse; empty-cells: show;}\\n                table td,table th {border: 1px solid #BDBDBD; height: 20px; padding: 2px 5px; vertical-align: middle;}\\n                table.e-alternate-border tbody tr:nth-child(2n) {background-color: #F5F5F5;}\\n                table th {background-color: #E0E0E0;}\\n                table.e-dashed-border td,table.e-dashed-border th { border: 1px dashed #BDBDBD} \\n                table .e-cell-select {border: 1px double #4a90e2;}\\n                span.e-table-box { cursor: nwse-resize; display: block; height: 10px; position: absolute; width: 10px; }\\n                span.e-table-box.e-rmob {height: 14px;width: 14px;}\\n                .e-row-resize, .e-column-resize { background-color: transparent; background-repeat: repeat;\\n                    bottom: 0;cursor: col-resize;height: 1px;overflow: visible;position: absolute;width: 1px; }\\n                .e-row-resize { cursor: row-resize; height: 1px;}\\n                .e-table-rhelper { cursor: col-resize; opacity: .87;position: absolute;}\\n                .e-table-rhelper.e-column-helper { width: 1px; }\\n                .e-table-rhelper.e-row-helper {height: 1px;}\\n                .e-reicon::before { border-bottom: 6px solid transparent; border-right: 6px solid;\\n                    border-top: 6px solid transparent; content: ''; display: block; height: 0;\\n                    position: absolute; right: 4px; top: 4px; width: 20px; }\\n                .e-reicon::after { border-bottom: 6px solid transparent; border-left: 6px solid;\\n                    border-top: 6px solid transparent; content: ''; display: block;\\n                    height: 0; left: 4px; position: absolute; top: 4px; width: 20px; z-index: 3; }\\n                .e-row-helper.e-reicon::after { top: 10px; transform: rotate(90deg); }\\n                .e-row-helper.e-reicon::before { left: 4px; top: -20px; transform: rotate(90deg); }\\n                span.e-table-box { background-color: #ffffff; border: 1px solid #BDBDBD; }\\n                span.e-table-box.e-rbox-select { background-color: #BDBDBD; border: 1px solid #BDBDBD; }\\n                .e-table-rhelper { background-color: #4a90e2;}\\n                .e-rtl { direction: rtl; }\\n                .e-rte-placeholder::before { content: attr(placeholder); opacity: 0.54; overflow: hidden; padding-top: 16px; position: absolute; text-align: start; top: 0; z-index: 1; }\\n            </style>\\n        </head>\";\n/**\n * Content module is used to render Rich Text Editor content\n *\n * @hidden\n * @deprecated\n */\nvar IframeContentRender = /** @class */ (function (_super) {\n    __extends(IframeContentRender, _super);\n    function IframeContentRender() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * The function is used to render Rich Text Editor iframe\n     *\n     * @hidden\n     * @deprecated\n     */\n    IframeContentRender.prototype.renderPanel = function () {\n        var rteObj = this.parent;\n        var rteContent = getEditValue(rteObj.value, rteObj);\n        var iFrameBodyContent = '<body spellcheck=\"false\" autocorrect=\"off\" contenteditable=\"true\">' +\n            rteContent + '</body></html>';\n        var iFrameContent = IFRAMEHEADER + iFrameBodyContent;\n        var iframe = this.parent.createElement('iframe', {\n            id: this.parent.getID() + '_rte-view',\n            className: 'e-rte-content',\n            styles: 'display:block;',\n            attrs: { 'srcdoc': iFrameContent }\n        });\n        this.setPanel(iframe);\n        rteObj.element.appendChild(iframe);\n        iframe.contentDocument.body.id = this.parent.getID() + '_rte-edit-view';\n        iframe.contentDocument.body.setAttribute('aria-owns', this.parent.getID());\n        iframe.contentDocument.open();\n        iFrameContent = this.setThemeColor(iFrameContent, { color: '#333' });\n        iframe.contentDocument.write(iFrameContent);\n        iframe.contentDocument.close();\n        if (rteObj.enableRtl) {\n            this.contentPanel.contentDocument.body.setAttribute('class', 'e-rtl');\n        }\n    };\n    IframeContentRender.prototype.setThemeColor = function (content, styles) {\n        var fontColor = getComputedStyle(this.parent.element, '.e-richtexteditor').getPropertyValue('color');\n        return content.replace(styles.color, fontColor);\n    };\n    /**\n     * Get the editable element of RichTextEditor\n     *\n     * @returns {Element} - specifies the element.\n     * @hidden\n     * @deprecated\n     */\n    IframeContentRender.prototype.getEditPanel = function () {\n        var editNode;\n        if (!isNullOrUndefined(this.contentPanel.contentDocument)) {\n            editNode = this.contentPanel.contentDocument.body;\n        }\n        else {\n            editNode = this.parent.inputElement;\n        }\n        return editNode;\n    };\n    /**\n     * Get the document of RichTextEditor\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    IframeContentRender.prototype.getDocument = function () {\n        return this.getEditPanel().ownerDocument;\n    };\n    return IframeContentRender;\n}(ContentRender));\nexport { IframeContentRender };\n","import * as events from '../base/constant';\nimport { detach, isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * XhtmlValidation module called when set enableXhtml as true\n */\nvar XhtmlValidation = /** @class */ (function () {\n    function XhtmlValidation(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    XhtmlValidation.prototype.addEventListener = function () {\n        this.parent.on(events.xhtmlValidation, this.enableXhtmlValidation, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    XhtmlValidation.prototype.removeEventListener = function () {\n        this.parent.off(events.xhtmlValidation, this.enableXhtmlValidation);\n        this.parent.off(events.destroy, this.removeEventListener);\n    };\n    XhtmlValidation.prototype.enableXhtmlValidation = function () {\n        if (this.parent.enableXhtml) {\n            if (isNullOrUndefined(this.parent.inputElement)) {\n                this.currentElement = this.parent.element;\n            }\n            else {\n                this.currentElement = this.parent.inputElement;\n            }\n            this.clean(this.currentElement);\n            this.ImageTags();\n            this.removeTags();\n            this.RemoveUnsupported();\n            this.currentElement.innerHTML = this.selfEncloseValidation(this.currentElement.innerHTML, this.currentElement.innerText === '\\n' ?\n                this.currentElement.innerText.length : this.currentElement.innerText.trim().length);\n            this.parent.setProperties({ value: this.currentElement.innerHTML }, true);\n        }\n    };\n    /**\n     * @param {string} currentValue - specifies the string value.\n     * @param {number} valueLength - specifies the length of the current value.\n     * @returns {void}\n     * @deprecated\n     */\n    XhtmlValidation.prototype.selfEncloseValidation = function (currentValue, valueLength) {\n        if (valueLength === 0 && currentValue.indexOf('table') < 0 && currentValue.indexOf('img') < 0 &&\n            currentValue.includes('&nbsp;')) {\n            var arrayValue = currentValue.split('&nbsp;');\n            arrayValue[arrayValue.length - 1] = '&#8203;' + arrayValue[arrayValue.length - 1];\n            currentValue = arrayValue.join('');\n        }\n        currentValue = currentValue.replace(/<br>/g, '<br/>').replace(/<hr>/g, '<hr/>').replace(/ /g, ' ');\n        var valueTemp;\n        var valueDupe = [];\n        var valueOriginal = [];\n        var imgRegexp = [/<img(.*?)>/gi, /<area(.*?)>/gi, /<base(.*?)>/gi, /<col (.*?)>/gi, /<embed(.*?)>/gi,\n            /<input(.*?)>/gi, /<link(.*?)>/gi, /<meta(.*?)>/gi, /<param(.*?)>/gi, /<source(.*?)>/gi,\n            /<track(.*?)>/gi, /<wbr(.*?)>/gi];\n        for (var j = 0; j < imgRegexp.length; j++) {\n            valueTemp = imgRegexp[j].exec(currentValue);\n            while ((valueTemp) !== null) {\n                valueDupe.push(valueTemp[0].toString());\n                valueTemp = imgRegexp[j].exec(currentValue);\n            }\n            valueOriginal = valueDupe.slice(0);\n            for (var i = 0; i < valueDupe.length; i++) {\n                if (valueDupe[i].indexOf('/') === -1 || valueDupe[i].lastIndexOf('/') !== valueDupe[i].length - 2) {\n                    valueDupe[i] = valueDupe[i].substr(0, valueDupe[i].length - 1) + ' /' +\n                        valueDupe[i].substr(valueDupe[i].length - 1, valueDupe[i].length);\n                }\n            }\n            for (var g = 0; g <= valueDupe.length - 1; g++) {\n                currentValue = currentValue.replace(valueOriginal[g], valueDupe[g]);\n            }\n        }\n        return currentValue;\n    };\n    XhtmlValidation.prototype.clean = function (node) {\n        for (var n = 0; n < node.childNodes.length; n++) {\n            var child = node.childNodes[n];\n            if (child.nodeType === 8 || child.nodeName === 'V:IMAGE') {\n                node.removeChild(child);\n                n--;\n            }\n            else if (child.nodeType === 1) {\n                this.clean(child);\n            }\n        }\n        return this.currentElement.innerHTML;\n    };\n    XhtmlValidation.prototype.ImageTags = function () {\n        var imgNodes = this.currentElement.querySelectorAll('IMG');\n        for (var i = imgNodes.length - 1; i >= 0; i--) {\n            if (!imgNodes[i].hasAttribute('alt')) {\n                var img = imgNodes[i];\n                img.setAttribute('alt', '');\n            }\n        }\n    };\n    XhtmlValidation.prototype.removeTags = function () {\n        var removeAttribute = [['br', 'ul'], ['br', 'ol'], ['table', 'span'], ['div', 'span'], ['p', 'span']];\n        for (var i = 0; i < removeAttribute.length; i++) {\n            this.RemoveElementNode(removeAttribute[i][0], removeAttribute[i][1]);\n        }\n    };\n    XhtmlValidation.prototype.RemoveElementNode = function (rmvNode, parentNode) {\n        var parentArray = this.currentElement.querySelectorAll(parentNode);\n        for (var i = 0; i < parentArray.length; i++) {\n            var rmvArray = parentArray[i].querySelectorAll(rmvNode);\n            for (var j = rmvArray.length; j > 0; j--) {\n                detach(rmvArray[j - 1]);\n            }\n        }\n    };\n    XhtmlValidation.prototype.RemoveUnsupported = function () {\n        var underlineEle = this.currentElement.querySelectorAll('u');\n        for (var i = underlineEle.length - 1; i >= 0; i--) {\n            var spanEle = this.parent.createElement('span');\n            spanEle.style.textDecoration = 'underline';\n            spanEle.innerHTML = underlineEle[i].innerHTML;\n            underlineEle[i].parentNode.insertBefore(spanEle, underlineEle[i]);\n            detach(underlineEle[i]);\n        }\n        var strongEle = this.currentElement.querySelectorAll('strong');\n        for (var i = strongEle.length - 1; i >= 0; i--) {\n            var boldEle = this.parent.createElement('b');\n            boldEle.innerHTML = strongEle[i].innerHTML;\n            strongEle[i].parentNode.insertBefore(boldEle, strongEle[i]);\n            detach(strongEle[i]);\n        }\n        var attrArray = ['language', 'role', 'target', 'contenteditable', 'cellspacing',\n            'cellpadding', 'border', 'valign', 'colspan'];\n        for (var i = 0; i <= attrArray.length; i++) {\n            this.RemoveAttributeByName(attrArray[i]);\n        }\n    };\n    XhtmlValidation.prototype.RemoveAttributeByName = function (attrName) {\n        if (this.currentElement.firstChild !== null) {\n            if (this.currentElement.firstChild.nodeType !== 3) {\n                for (var i = 0; i < this.currentElement.childNodes.length; i++) {\n                    var ele = this.currentElement.childNodes[i];\n                    if (ele.nodeType !== 3 && ele.nodeName !== 'TABLE' && ele.nodeName !== 'TBODY' && ele.nodeName !== 'THEAD' &&\n                        ele.nodeName !== 'TH' && ele.nodeName !== 'TR' && ele.nodeName !== 'TD') {\n                        if (ele.hasAttribute(attrName)) {\n                            ele.removeAttribute(attrName);\n                        }\n                        if (ele.hasChildNodes()) {\n                            for (var j = 0; j < ele.childNodes.length; j++) {\n                                var childEle = ele.childNodes[j];\n                                if (childEle.nodeType !== 3 && childEle.nodeName !== 'TABLE' && childEle.nodeName !== 'TBODY' &&\n                                    childEle.nodeName !== 'THEAD' && childEle.nodeName !== 'TH' && childEle.nodeName !== 'TR' &&\n                                    childEle.nodeName !== 'TD' && childEle.hasAttribute(attrName) &&\n                                    !childEle.classList.contains('e-mention-chip')) {\n                                    childEle.removeAttribute(attrName);\n                                }\n                                if (childEle.hasChildNodes()) {\n                                    for (var k = 0; k < childEle.childNodes.length; k++) {\n                                        if (childEle.childNodes[k].nodeType !== 3 && childEle.childNodes[k].nodeName !== 'TABLE' &&\n                                            childEle.childNodes[k].nodeName !== 'TBODY' && childEle.childNodes[k].nodeName !== 'THEAD' &&\n                                            childEle.childNodes[k].nodeName !== 'TH' && childEle.childNodes[k].nodeName !== 'TR'\n                                            && childEle.childNodes[k].nodeName !== 'TD'\n                                            && childEle.childNodes[k].hasAttribute(attrName)) {\n                                            childEle.childNodes[k].removeAttribute(attrName);\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    return XhtmlValidation;\n}());\nexport { XhtmlValidation };\n","import * as events from '../base/constant';\nimport { isNullOrUndefined, closest, attributes, removeClass, addClass, Browser, detach } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { HTMLFormatter } from '../formatter/html-formatter';\nimport { RenderType } from '../base/enum';\nimport * as classes from '../base/classes';\nimport { HtmlToolbarStatus } from './html-toolbar-status';\nimport { IframeContentRender } from '../renderer/iframe-content-renderer';\nimport { ContentRender } from '../renderer/content-renderer';\nimport { ColorPickerInput } from './color-picker';\nimport { NodeSelection } from '../../selection/selection';\nimport { InsertHtml } from '../../editor-manager/plugin/inserthtml';\nimport { getTextNodesUnder, sanitizeHelper, getDefaultValue } from '../base/util';\nimport { isIDevice } from '../../common/util';\nimport { XhtmlValidation } from './xhtml-validation';\nimport { ON_BEGIN } from './../../common/constant';\n/**\n * `HtmlEditor` module is used to HTML editor\n */\nvar HtmlEditor = /** @class */ (function () {\n    function HtmlEditor(parent, serviceLocator) {\n        this.rangeCollection = [];\n        this.isImageDelete = false;\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.xhtmlValidation = new XhtmlValidation(parent);\n        this.addEventListener();\n    }\n    /**\n     * Destroys the Markdown.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    HtmlEditor.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    /**\n     * @param {string} value - specifies the string value\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    HtmlEditor.prototype.sanitizeHelper = function (value) {\n        value = sanitizeHelper(value, this.parent);\n        return value;\n    };\n    HtmlEditor.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.nodeSelectionObj = new NodeSelection();\n        this.colorPickerModule = new ColorPickerInput(this.parent, this.locator);\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n        this.parent.on(events.htmlToolbarClick, this.onToolbarClick, this);\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.keyUp, this.onKeyUp, this);\n        this.parent.on(events.renderColorPicker, this.renderColorPicker, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.selectAll, this.selectAll, this);\n        this.parent.on(events.selectRange, this.selectRange, this);\n        this.parent.on(events.getSelectedHtml, this.getSelectedHtml, this);\n        this.parent.on(events.selectionSave, this.onSelectionSave, this);\n        this.parent.on(events.selectionRestore, this.onSelectionRestore, this);\n        this.parent.on(events.readOnlyMode, this.updateReadOnly, this);\n        this.parent.on(events.paste, this.onPaste, this);\n        this.parent.on(events.tableclass, this.isTableClassAdded, this);\n    };\n    HtmlEditor.prototype.updateReadOnly = function () {\n        if (this.parent.readonly) {\n            attributes(this.parent.contentModule.getEditPanel(), { contenteditable: 'false' });\n            addClass([this.parent.element], classes.CLS_RTE_READONLY);\n        }\n        else {\n            attributes(this.parent.contentModule.getEditPanel(), { contenteditable: 'true' });\n            removeClass([this.parent.element], classes.CLS_RTE_READONLY);\n        }\n    };\n    HtmlEditor.prototype.onSelectionSave = function () {\n        var currentDocument = this.contentRenderer.getDocument();\n        var range = this.nodeSelectionObj.getRange(currentDocument);\n        this.saveSelection = this.nodeSelectionObj.save(range, currentDocument);\n    };\n    HtmlEditor.prototype.onSelectionRestore = function (e) {\n        this.parent.isBlur = false;\n        this.contentRenderer.getEditPanel().focus();\n        if (isNullOrUndefined(e.items) || e.items) {\n            this.saveSelection.restore();\n        }\n    };\n    HtmlEditor.prototype.isTableClassAdded = function () {\n        var tableElement = this.parent.inputElement.querySelectorAll('table');\n        for (var i = 0; i < tableElement.length; i++) {\n            if (!tableElement[i].classList.contains('e-rte-table')) {\n                tableElement[i].classList.add('e-rte-table');\n            }\n        }\n    };\n    HtmlEditor.prototype.onKeyUp = function (e) {\n        var args = e.args;\n        var restrictKeys = [8, 9, 13, 16, 17, 18, 20, 27, 37, 38, 39, 40, 44, 45, 46, 91,\n            112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123];\n        var range = this.parent.getRange();\n        // eslint-disable-next-line\n        var regEx = new RegExp(String.fromCharCode(8203), 'g');\n        var pointer;\n        var isRootParent = false;\n        if (restrictKeys.indexOf(args.keyCode) < 0 && !args.shiftKey && !args.ctrlKey && !args.altKey) {\n            pointer = range.startOffset;\n            // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n            range.startContainer.nodeName === '#text' ? range.startContainer.parentElement !== this.parent.inputElement ? range.startContainer.parentElement.classList.add('currentStartMark')\n                : isRootParent = true : range.startContainer.classList.add('currentStartMark');\n            if (range.startContainer.textContent.charCodeAt(0) === 8203) {\n                var previousLength_1 = range.startContainer.textContent.length;\n                var previousRange = range.startOffset;\n                range.startContainer.textContent = range.startContainer.textContent.replace(regEx, '');\n                pointer = previousRange === 0 ? previousRange : previousRange - (previousLength_1 - range.startContainer.textContent.length);\n                this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(), range.startContainer, pointer);\n            }\n            var previousLength = this.parent.inputElement.innerHTML.length;\n            var currentLength = this.parent.inputElement.innerHTML.replace(regEx, '').length;\n            var focusNode = range.startContainer;\n            if (previousLength > currentLength && !isRootParent) {\n                if (focusNode.textContent.trim().length !== 0 && focusNode.previousSibling) {\n                    var tempSpan = document.createElement('span');\n                    tempSpan.className = 'tempSpan';\n                    range.insertNode(tempSpan);\n                }\n                var currentChild = this.parent.inputElement.firstChild;\n                while (!isNOU(currentChild) && currentChild.textContent.replace(regEx, '').trim().length > 0) {\n                    currentChild.innerHTML = currentChild.innerHTML.replace(regEx, '');\n                    currentChild = currentChild.nextElementSibling;\n                }\n                var tempSpanToRemove = this.parent.inputElement.querySelector('.tempSpan');\n                if (tempSpanToRemove && tempSpanToRemove.previousSibling && focusNode.textContent.trim().length !== 0) {\n                    focusNode = tempSpanToRemove.previousSibling;\n                    pointer = tempSpanToRemove.previousSibling.textContent.length;\n                    var parentElement = tempSpanToRemove.parentNode;\n                    parentElement.removeChild(tempSpanToRemove);\n                    tempSpanToRemove = null;\n                }\n                var currentChildNode = this.parent.inputElement.querySelector('.currentStartMark').childNodes;\n                if (currentChildNode.length > 1) {\n                    for (var i = 0; i < currentChildNode.length; i++) {\n                        if (currentChildNode[i].nodeName === '#text' && currentChildNode[i].textContent.length === 0) {\n                            detach(currentChildNode[i]);\n                            i--;\n                        }\n                        if (!isNOU(currentChildNode[i]) && focusNode.textContent.replace(regEx, '') === currentChildNode[i].textContent) {\n                            pointer = focusNode.textContent.length > 1 ?\n                                (focusNode.textContent === currentChildNode[i].textContent ? pointer :\n                                    pointer - (focusNode.textContent.length - focusNode.textContent.replace(regEx, '').length)) :\n                                focusNode.textContent.length;\n                            focusNode = currentChildNode[i];\n                        }\n                    }\n                }\n                else if (currentChildNode.length === 1) {\n                    if (focusNode.textContent.replace(regEx, '') === currentChildNode[0].textContent) {\n                        focusNode = currentChildNode[0];\n                    }\n                }\n                this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(), focusNode, pointer);\n            }\n            var currentElem = this.parent.inputElement.querySelector('.currentStartMark');\n            if (!isNOU(currentElem)) {\n                currentElem.classList.remove('currentStartMark');\n                if (currentElem.getAttribute('class').trim() === '') {\n                    currentElem.removeAttribute('class');\n                }\n            }\n            if (!isNOU(range.startContainer.previousSibling) && !isNOU(range.startContainer.previousSibling.parentElement) &&\n                range.startContainer.parentElement === range.startContainer.previousSibling.parentElement &&\n                range.startContainer.previousSibling.textContent.charCodeAt(0) === 8203 &&\n                range.startContainer.previousSibling.textContent.length <= 1) {\n                range.startContainer.previousSibling.textContent = range.startContainer.previousSibling.textContent.replace(regEx, '');\n            }\n            if (range.endContainer.textContent.charCodeAt(range.endOffset) === 8203) {\n                pointer = range.startOffset;\n                range.endContainer.textContent = range.endContainer.textContent.replace(regEx, '');\n                this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(), range.startContainer, pointer);\n            }\n        }\n    };\n    HtmlEditor.prototype.onKeyDown = function (e) {\n        var _this = this;\n        var currentRange;\n        var args = e.args;\n        if (Browser.info.name === 'chrome') {\n            currentRange = this.parent.getRange();\n            this.backSpaceCleanup(e, currentRange);\n            this.deleteCleanup(e, currentRange);\n        }\n        if (args.keyCode === 9 && this.parent.enableTabKey) {\n            if (!isNOU(args.target) && isNullOrUndefined(closest(args.target, '.e-rte-toolbar'))) {\n                var range = this.nodeSelectionObj.getRange(this.contentRenderer.getDocument());\n                var parentNode = this.nodeSelectionObj.getParentNodeCollection(range);\n                if (!((parentNode[0].nodeName === 'LI' || closest(parentNode[0], 'li') ||\n                    closest(parentNode[0], 'table')) && range.startOffset === 0)) {\n                    args.preventDefault();\n                    if (!args.shiftKey) {\n                        InsertHtml.Insert(this.contentRenderer.getDocument(), '&nbsp;&nbsp;&nbsp;&nbsp;');\n                        this.rangeCollection.push(this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()));\n                    }\n                    else if (this.rangeCollection.length > 0 &&\n                        this.rangeCollection[this.rangeCollection.length - 1].startContainer.textContent.length === 4) {\n                        var textCont = this.rangeCollection[this.rangeCollection.length - 1].startContainer;\n                        this.nodeSelectionObj.setSelectionText(this.contentRenderer.getDocument(), textCont, textCont, 0, textCont.textContent.length);\n                        InsertHtml.Insert(this.contentRenderer.getDocument(), document.createTextNode(''));\n                        this.rangeCollection.pop();\n                    }\n                }\n            }\n        }\n        if (e.args.action === 'space' ||\n            e.args.action === 'enter' ||\n            e.args.keyCode === 13) {\n            this.spaceLink(e.args);\n            if (this.parent.editorMode === 'HTML' && !this.parent.readonly) {\n                var currentLength = this.parent.getText().trim().length;\n                var selectionLength = this.parent.getSelection().length;\n                var totalLength = (currentLength - selectionLength) + 1;\n                if (!(this.parent.maxLength === -1 || totalLength <= this.parent.maxLength) &&\n                    e.args.keyCode === 13) {\n                    e.args.preventDefault();\n                    return;\n                }\n                else {\n                    this.parent.notify(events.enterHandler, { args: e.args });\n                }\n            }\n        }\n        if (e.args.action === 'space') {\n            var currentRange_1 = this.parent.getRange();\n            var editorValue = currentRange_1.startContainer.textContent.slice(0, currentRange_1.startOffset);\n            var orderedList_1 = this.isOrderedList(editorValue);\n            var unOrderedList = this.isUnOrderedList(editorValue);\n            if (orderedList_1 && !unOrderedList || unOrderedList && !orderedList_1) {\n                var eventArgs_1 = {\n                    callBack: null,\n                    event: e.args,\n                    name: 'keydown-handler'\n                };\n                var actionBeginArgs = {\n                    cancel: false,\n                    item: { command: 'Lists', subCommand: orderedList_1 ? 'OL' : 'UL' },\n                    name: 'actionBegin',\n                    originalEvent: e.args,\n                    requestType: orderedList_1 ? 'OL' : 'UL'\n                };\n                this.parent.trigger(events.actionBegin, actionBeginArgs, function (actionBeginArgs) {\n                    if (!actionBeginArgs.cancel) {\n                        _this.parent.formatter.editorManager.observer.notify(ON_BEGIN, eventArgs_1);\n                        _this.parent.trigger(events.actionComplete, {\n                            editorMode: _this.parent.editorMode,\n                            elements: _this.parent.formatter.editorManager.domNode.blockNodes(),\n                            event: e.args,\n                            name: events.actionComplete,\n                            range: _this.parent.getRange(),\n                            requestType: orderedList_1 ? 'OL' : 'UL'\n                        });\n                    }\n                });\n            }\n        }\n        if (Browser.info.name === 'chrome' && (!isNullOrUndefined(this.rangeElement) && !isNullOrUndefined(this.oldRangeElement) ||\n            !isNullOrUndefined(this.deleteRangeElement) && !isNullOrUndefined(this.deleteOldRangeElement)) &&\n            currentRange.startContainer.parentElement.tagName !== 'TD' && currentRange.startContainer.parentElement.tagName !== 'TH') {\n            this.rangeElement = null;\n            this.oldRangeElement = null;\n            this.deleteRangeElement = null;\n            this.deleteOldRangeElement = null;\n            if (!this.isImageDelete) {\n                args.preventDefault();\n            }\n            args.preventDefault();\n        }\n    };\n    HtmlEditor.prototype.isOrderedList = function (editorValue) {\n        editorValue = editorValue.replace(/\\u200B/g, '');\n        var olListStartRegex = [/^[1]+[.]+$/, /^[i]+[.]+$/, /^[a]+[.]+$/];\n        if (!isNullOrUndefined(editorValue)) {\n            for (var i = 0; i < olListStartRegex.length; i++) {\n                if (olListStartRegex[i].test(editorValue)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    HtmlEditor.prototype.isUnOrderedList = function (editorValue) {\n        editorValue = editorValue.replace(/\\u200B/g, '');\n        var ulListStartRegex = [/^[*]$/, /^[-]$/];\n        if (!isNullOrUndefined(editorValue)) {\n            for (var i = 0; i < ulListStartRegex.length; i++) {\n                if (ulListStartRegex[i].test(editorValue)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    HtmlEditor.prototype.backSpaceCleanup = function (e, currentRange) {\n        var isLiElement = false;\n        var isPreviousNotContentEditable = true;\n        if (!isNOU(currentRange.startContainer.previousSibling) &&\n            currentRange.startContainer.previousSibling.nodeName === 'SPAN') {\n            isPreviousNotContentEditable = currentRange.startContainer.previousSibling.contentEditable === 'false' ? false : true;\n        }\n        if (e.args.code === 'Backspace' && e.args.keyCode === 8 && currentRange.startOffset === 0 &&\n            currentRange.endOffset === 0 && this.parent.getSelection().length === 0 && currentRange.startContainer.textContent.length > 0 &&\n            currentRange.startContainer.parentElement.tagName !== 'TD' && currentRange.startContainer.parentElement.tagName !== 'TH' &&\n            isPreviousNotContentEditable) {\n            var checkNode = currentRange.startContainer.nodeName === '#text' ? currentRange.startContainer.parentElement : currentRange.startContainer;\n            if ((!this.parent.formatter.editorManager.domNode.isBlockNode(checkNode) &&\n                !isNOU(checkNode.previousSibling) && checkNode.previousSibling.nodeName === 'BR') ||\n                (!isNOU(currentRange.startContainer.previousSibling) && currentRange.startContainer.previousSibling.nodeName === 'BR')) {\n                return;\n            }\n            this.rangeElement = this.getRootBlockNode(currentRange.startContainer);\n            if (this.rangeElement.tagName === 'OL' || this.rangeElement.tagName === 'UL') {\n                var liElement = this.getRangeLiNode(currentRange.startContainer);\n                if (liElement.previousElementSibling && liElement.previousElementSibling.childElementCount > 0) {\n                    this.oldRangeElement = liElement.previousElementSibling.lastElementChild.nodeName === 'BR' ?\n                        liElement.previousElementSibling : liElement.previousElementSibling.lastElementChild;\n                    if (!isNullOrUndefined(liElement.lastElementChild) && liElement.lastElementChild.nodeName !== 'BR') {\n                        this.rangeElement = liElement.lastElementChild;\n                        isLiElement = true;\n                    }\n                    else {\n                        this.rangeElement = liElement;\n                    }\n                }\n            }\n            else if (this.rangeElement === this.parent.inputElement || this.rangeElement.tagName === 'TABLE' ||\n                (!isNullOrUndefined(this.rangeElement.previousElementSibling) && this.rangeElement.previousElementSibling.tagName === 'TABLE')) {\n                return;\n            }\n            else {\n                this.oldRangeElement = this.rangeElement.previousElementSibling;\n            }\n            if (isNullOrUndefined(this.oldRangeElement)) {\n                return;\n            }\n            else {\n                if (this.oldRangeElement.tagName === 'OL' || this.oldRangeElement.tagName === 'UL') {\n                    this.oldRangeElement = this.oldRangeElement.lastElementChild.lastElementChild\n                        ? this.oldRangeElement.lastElementChild.lastElementChild :\n                        this.oldRangeElement.lastElementChild;\n                }\n                var lastNode = this.oldRangeElement.lastChild;\n                while (lastNode.nodeType !== 3 && lastNode.nodeName !== '#text' &&\n                    lastNode.nodeName !== 'BR') {\n                    lastNode = lastNode.lastChild;\n                }\n                this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(), \n                // eslint-disable-next-line\n                lastNode, lastNode.textContent.length);\n                if (this.oldRangeElement.querySelectorAll('BR').length === 1) {\n                    detach(this.oldRangeElement.querySelector('BR'));\n                }\n                if (!isNullOrUndefined(this.rangeElement) && this.oldRangeElement !== this.rangeElement) {\n                    while (this.rangeElement.firstChild) {\n                        this.oldRangeElement.appendChild(this.rangeElement.childNodes[0]);\n                    }\n                    // eslint-disable-next-line\n                    !isLiElement ? detach(this.rangeElement) : detach(this.rangeElement.parentElement);\n                    this.oldRangeElement.normalize();\n                }\n            }\n        }\n    };\n    HtmlEditor.prototype.deleteCleanup = function (e, currentRange) {\n        var isLiElement = false;\n        var liElement;\n        var rootElement;\n        if (e.args.code === 'Delete' && e.args.keyCode === 46 &&\n            this.parent.contentModule.getText().trim().length !== 0 && this.parent.getSelection().length === 0 && currentRange.startContainer.parentElement.tagName !== 'TD' &&\n            currentRange.startContainer.parentElement.tagName !== 'TH') {\n            this.deleteRangeElement = rootElement = this.getRootBlockNode(currentRange.startContainer);\n            if (this.deleteRangeElement.tagName === 'OL' || this.deleteRangeElement.tagName === 'UL') {\n                liElement = this.getRangeLiNode(currentRange.startContainer);\n                if (liElement.nextElementSibling && liElement.nextElementSibling.childElementCount > 0\n                    && !liElement.nextElementSibling.querySelector('BR')) {\n                    if (!isNullOrUndefined(liElement.lastElementChild)) {\n                        this.deleteRangeElement = liElement.lastElementChild;\n                        isLiElement = true;\n                    }\n                    else {\n                        this.deleteRangeElement = liElement;\n                    }\n                }\n                else {\n                    this.deleteRangeElement = this.getRangeElement(liElement);\n                }\n            }\n            else if (this.deleteRangeElement.nodeType === 3 || (this.deleteRangeElement.tagName === 'TABLE' ||\n                (!isNullOrUndefined(this.deleteRangeElement.nextElementSibling) && this.deleteRangeElement.nextElementSibling.tagName === 'TABLE'))) {\n                return;\n            }\n            if (this.getCaretIndex(currentRange, this.deleteRangeElement) === this.deleteRangeElement.textContent.length) {\n                if (!isNullOrUndefined(liElement)) {\n                    if (isLiElement || !isNullOrUndefined(liElement.nextElementSibling)) {\n                        this.deleteOldRangeElement = this.getRangeElement(liElement.nextElementSibling);\n                    }\n                    else {\n                        this.deleteOldRangeElement = rootElement.nextElementSibling;\n                    }\n                }\n                else {\n                    this.deleteOldRangeElement = this.deleteRangeElement.nextElementSibling;\n                }\n                if (isNullOrUndefined(this.deleteOldRangeElement)) {\n                    return;\n                }\n                else {\n                    if (currentRange.startOffset === 0 && currentRange.endOffset === 1 &&\n                        this.deleteRangeElement.childNodes[0].nodeName === 'IMG') {\n                        this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.contentModule.getDocument(), this.deleteRangeElement, this.deleteRangeElement, 0, 1);\n                        this.isImageDelete = true;\n                    }\n                    else {\n                        this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(), this.deleteRangeElement, this.deleteRangeElement.childNodes.length);\n                        this.isImageDelete = false;\n                    }\n                    if (this.deleteRangeElement.querySelector('BR')) {\n                        detach(this.deleteRangeElement.querySelector('BR'));\n                    }\n                    if (!isNullOrUndefined(this.deleteRangeElement) && (this.deleteOldRangeElement.tagName !== 'OL' && this.deleteOldRangeElement.tagName !== 'UL')\n                        && this.deleteOldRangeElement !== this.deleteRangeElement) {\n                        while (this.deleteOldRangeElement.firstChild) {\n                            this.deleteRangeElement.appendChild(this.deleteOldRangeElement.childNodes[0]);\n                        }\n                        if (!isLiElement) {\n                            detach(this.deleteOldRangeElement);\n                        }\n                        else {\n                            detach(this.deleteOldRangeElement.parentElement);\n                        }\n                        this.deleteRangeElement.normalize();\n                    }\n                    else {\n                        this.deleteRangeElement = null;\n                        this.deleteOldRangeElement = null;\n                    }\n                }\n            }\n            else {\n                this.deleteRangeElement = null;\n            }\n        }\n    };\n    HtmlEditor.prototype.getCaretIndex = function (currentRange, element) {\n        var position = 0;\n        if (this.parent.contentModule.getDocument().getSelection().rangeCount !== 0) {\n            var preCaretRange = currentRange.cloneRange();\n            preCaretRange.selectNodeContents(element);\n            preCaretRange.setEnd(currentRange.endContainer, currentRange.endOffset);\n            position = preCaretRange.toString().length;\n        }\n        return position;\n    };\n    HtmlEditor.prototype.getRangeElement = function (element) {\n        var rangeElement = element.lastElementChild ? element.lastElementChild.tagName === 'BR' ?\n            element.lastElementChild.previousElementSibling ? element.lastElementChild.previousElementSibling\n                : element : element.lastElementChild : element;\n        return rangeElement;\n    };\n    HtmlEditor.prototype.getRootBlockNode = function (rangeBlockNode) {\n        // eslint-disable-next-line\n        for (; rangeBlockNode && this.parent && this.parent.inputElement !== rangeBlockNode; rangeBlockNode = rangeBlockNode) {\n            if (rangeBlockNode.parentElement === this.parent.inputElement) {\n                break;\n            }\n            else {\n                rangeBlockNode = rangeBlockNode.parentElement;\n            }\n        }\n        return rangeBlockNode;\n    };\n    HtmlEditor.prototype.getRangeLiNode = function (rangeLiNode) {\n        var node = rangeLiNode.parentElement;\n        while (node !== this.parent.inputElement) {\n            if (node.nodeType === 1 && node.tagName === 'LI') {\n                break;\n            }\n            node = node.parentElement;\n        }\n        return node;\n    };\n    HtmlEditor.prototype.onPaste = function (e) {\n        // eslint-disable-next-line\n        var regex = new RegExp(/([^\\S]|^)(((https?\\:\\/\\/)|(www\\.))(\\S+))/gi);\n        if (e.text.match(regex)) {\n            if (e.isWordPaste) {\n                return;\n            }\n            e.args.preventDefault();\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            // eslint-disable-next-line\n            var saveSelection = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n            // eslint-disable-next-line\n            var httpRegex = new RegExp(/([^\\S]|^)(((https?\\:\\/\\/)))/gi);\n            var wwwRegex = new RegExp(/([^\\S]|^)(((www\\.))(\\S+))/gi);\n            var enterSplitText = e.text.split('\\n');\n            var contentInnerElem = '';\n            for (var i = 0; i < enterSplitText.length; i++) {\n                if (enterSplitText[i].trim() === '') {\n                    contentInnerElem += getDefaultValue(this.parent);\n                }\n                else {\n                    var contentWithSpace = '';\n                    var spaceBetweenContent = true;\n                    var spaceSplit = enterSplitText[i].split(' ');\n                    for (var j = 0; j < spaceSplit.length; j++) {\n                        if (spaceSplit[j].trim() === '') {\n                            contentWithSpace += spaceBetweenContent ? '&nbsp;' : ' ';\n                        }\n                        else {\n                            spaceBetweenContent = false;\n                            contentWithSpace += spaceSplit[j] + ' ';\n                        }\n                    }\n                    if (i === 0) {\n                        contentInnerElem += '<span>' + contentWithSpace.trim() + '</span>';\n                    }\n                    else {\n                        contentInnerElem += '<p>' + contentWithSpace.trim() + '</p>';\n                    }\n                }\n            }\n            var divElement = this.parent.createElement('div');\n            divElement.setAttribute('class', 'pasteContent');\n            divElement.style.display = 'inline';\n            divElement.innerHTML = contentInnerElem.replace('&para', '&amp;para');\n            var paraElem = divElement.querySelectorAll('span, p');\n            for (var i = 0; i < paraElem.length; i++) {\n                var splitTextContent = paraElem[i].innerHTML.split(' ');\n                var resultSplitContent = '';\n                for (var j = 0; j < splitTextContent.length; j++) {\n                    if (splitTextContent[j].match(httpRegex) || splitTextContent[j].match(wwwRegex)) {\n                        resultSplitContent += '<a class=\"e-rte-anchor\" href=\"' + splitTextContent[j] +\n                            '\" title=\"' + splitTextContent[j] + '\"target=\"_blank\">' + splitTextContent[j] + ' </a>';\n                    }\n                    else {\n                        resultSplitContent += splitTextContent[j] + ' ';\n                    }\n                }\n                paraElem[i].innerHTML = resultSplitContent.trim();\n            }\n            if (!isNullOrUndefined(this.parent.pasteCleanupModule)) {\n                e.callBack(divElement.innerHTML);\n            }\n            else {\n                this.parent.formatter.editorManager.execCommand('insertHTML', null, null, null, divElement);\n            }\n        }\n    };\n    HtmlEditor.prototype.spaceLink = function (e) {\n        var range = this.nodeSelectionObj.getRange(this.contentRenderer.getDocument());\n        var selectNodeEle = this.nodeSelectionObj.getParentNodeCollection(range);\n        var text = range.startContainer.textContent.substr(0, range.endOffset);\n        var splitText = text.split(' ');\n        var urlText = splitText[splitText.length - 1];\n        var urlTextRange = range.startOffset - (text.length - splitText[splitText.length - 1].length);\n        urlText = urlText.slice(0, urlTextRange);\n        // eslint-disable-next-line\n        var regex = new RegExp(/([^\\S]|^)(((https?\\:\\/\\/)|(www\\.))(\\S+))/gi);\n        if (selectNodeEle[0].nodeName !== 'A' && urlText.match(regex)) {\n            var selection = this.nodeSelectionObj.save(range, this.parent.contentModule.getDocument());\n            var url = urlText.indexOf('http') > -1 ? urlText : 'http://' + urlText;\n            var selectParent = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n            var value = {\n                url: url,\n                selection: selection, selectParent: selectParent,\n                text: urlText,\n                title: '',\n                target: '_blank'\n            };\n            this.parent.formatter.process(this.parent, {\n                item: {\n                    'command': 'Links',\n                    'subCommand': 'CreateLink'\n                }\n            }, e, value);\n        }\n    };\n    HtmlEditor.prototype.onToolbarClick = function (args) {\n        var _this = this;\n        var save;\n        var selectNodeEle;\n        var selectParentEle;\n        var item = args.item;\n        var closestElement = closest(args.originalEvent.target, '.e-rte-quick-popup');\n        if (item.command !== 'FormatPainter') {\n            if (closestElement && !closestElement.classList.contains('e-rte-inline-popup') && !closestElement.classList.contains('e-rte-text-popup')) {\n                if (!(item.subCommand === 'SourceCode' || item.subCommand === 'Preview' ||\n                    item.subCommand === 'FontColor' || item.subCommand === 'BackgroundColor')) {\n                    if (isIDevice() && item.command === 'Images') {\n                        this.nodeSelectionObj.restore();\n                    }\n                    var range = this.nodeSelectionObj.getRange(this.parent.contentModule.getDocument());\n                    save = this.nodeSelectionObj.save(range, this.parent.contentModule.getDocument());\n                    selectNodeEle = this.nodeSelectionObj.getNodeCollection(range);\n                    selectParentEle = this.nodeSelectionObj.getParentNodeCollection(range);\n                }\n                if (item.command === 'Images') {\n                    this.parent.notify(events.imageToolbarAction, {\n                        member: 'image', args: args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                    });\n                }\n                if (item.command === 'Audios') {\n                    this.parent.notify(events.audioToolbarAction, {\n                        member: 'audio', args: args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                    });\n                }\n                if (item.command === 'Videos') {\n                    this.parent.notify(events.videoToolbarAction, {\n                        member: 'video', args: args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                    });\n                }\n                if (item.command === 'Links') {\n                    this.parent.notify(events.linkToolbarAction, {\n                        member: 'link', args: args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                    });\n                }\n                if (item.command === 'Table') {\n                    this.parent.notify(events.tableToolbarAction, {\n                        member: 'table', args: args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                    });\n                }\n            }\n            else {\n                var linkDialog = document.getElementById(this.parent.getID() + '_rtelink');\n                var imageDialog = document.getElementById(this.parent.getID() + '_image');\n                if (!(item.subCommand === 'SourceCode' || item.subCommand === 'Preview' ||\n                    item.subCommand === 'FontColor' || item.subCommand === 'BackgroundColor')) {\n                    var range = this.nodeSelectionObj.getRange(this.parent.contentModule.getDocument());\n                    if (isNullOrUndefined(linkDialog) && isNullOrUndefined(imageDialog)) {\n                        save = this.nodeSelectionObj.save(range, this.parent.contentModule.getDocument());\n                    }\n                    selectNodeEle = this.nodeSelectionObj.getNodeCollection(range);\n                    selectParentEle = this.nodeSelectionObj.getParentNodeCollection(range);\n                }\n                switch (item.subCommand) {\n                    case 'Maximize':\n                        this.parent.notify(events.enableFullScreen, { args: args });\n                        break;\n                    case 'Minimize':\n                        this.parent.notify(events.disableFullScreen, { args: args });\n                        break;\n                    case 'CreateLink':\n                        this.parent.notify(events.insertLink, {\n                            member: 'link', args: args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                        });\n                        break;\n                    case 'RemoveLink':\n                        this.parent.notify(events.unLink, {\n                            member: 'link', args: args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                        });\n                        break;\n                    case 'Print':\n                        this.parent.print();\n                        break;\n                    case 'Image':\n                        this.parent.notify(events.insertImage, {\n                            member: 'image', args: args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                        });\n                        break;\n                    case 'Audio':\n                        this.parent.notify(events.insertAudio, {\n                            member: 'audio', args: args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                        });\n                        break;\n                    case 'Video':\n                        this.parent.notify(events.insertVideo, {\n                            member: 'video', args: args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                        });\n                        break;\n                    case 'CreateTable':\n                        this.parent.notify(events.createTable, {\n                            member: 'table', args: args, selection: save\n                        });\n                        break;\n                    case 'SourceCode':\n                        this.parent.notify(events.sourceCode, { member: 'viewSource', args: args });\n                        break;\n                    case 'Preview':\n                        this.parent.notify(events.updateSource, { member: 'updateSource', args: args });\n                        break;\n                    case 'FontColor':\n                    case 'BackgroundColor':\n                        break;\n                    case 'File':\n                        this.parent.notify(events.renderFileManager, {\n                            member: 'fileManager', args: args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                        });\n                        break;\n                    case 'EmojiPicker':\n                        this.parent.notify(events.emojiPicker, { member: 'emojiPicker', args: args });\n                        break;\n                    default:\n                        this.parent.formatter.process(this.parent, args, args.originalEvent, null);\n                        break;\n                }\n            }\n        }\n        else {\n            if (args.originalEvent.detail === 1) {\n                clearTimeout(this.clickTimeout);\n                this.clickTimeout = setTimeout(function () {\n                    _this.parent.notify(events.formatPainterClick, {\n                        member: 'formatPainter', args: args\n                    });\n                }, 200);\n            }\n            else {\n                clearTimeout(this.clickTimeout);\n                this.parent.notify(events.formatPainterDoubleClick, {\n                    member: 'formatPainter', args: args\n                });\n            }\n        }\n    };\n    HtmlEditor.prototype.renderColorPicker = function (args) {\n        this.colorPickerModule.renderColorPickerInput(args);\n    };\n    HtmlEditor.prototype.instantiateRenderer = function () {\n        if (this.parent.iframeSettings.enable) {\n            this.renderFactory.addRenderer(RenderType.Content, new IframeContentRender(this.parent, this.locator));\n        }\n        else {\n            this.renderFactory.addRenderer(RenderType.Content, new ContentRender(this.parent, this.locator));\n        }\n    };\n    HtmlEditor.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        this.parent.off(events.htmlToolbarClick, this.onToolbarClick);\n        this.parent.off(events.renderColorPicker, this.renderColorPicker);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.keyDown, this.onKeyDown);\n        this.parent.off(events.initialLoad, this.instantiateRenderer);\n        this.parent.off(events.selectAll, this.selectAll);\n        this.parent.off(events.selectRange, this.selectRange);\n        this.parent.off(events.getSelectedHtml, this.getSelectedHtml);\n        this.parent.off(events.selectionSave, this.onSelectionSave);\n        this.parent.off(events.selectionRestore, this.onSelectionRestore);\n        this.parent.off(events.readOnlyMode, this.updateReadOnly);\n        this.parent.off(events.paste, this.onPaste);\n        this.parent.off(events.tableclass, this.isTableClassAdded);\n    };\n    HtmlEditor.prototype.render = function () {\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        var editElement = this.contentRenderer.getEditPanel();\n        var option = { undoRedoSteps: this.parent.undoRedoSteps, undoRedoTimer: this.parent.undoRedoTimer };\n        if (isNullOrUndefined(this.parent.formatter)) {\n            var formatterClass = new HTMLFormatter({\n                currentDocument: this.contentRenderer.getDocument(),\n                element: editElement,\n                options: option,\n                formatPainterSettings: this.parent.formatPainterSettings\n            });\n            this.parent.setProperties({ formatter: formatterClass }, true);\n        }\n        else {\n            this.parent.formatter.updateFormatter(editElement, this.contentRenderer.getDocument(), option);\n        }\n        if (this.parent.enableXhtml) {\n            this.parent.notify(events.xhtmlValidation, {});\n        }\n        if (this.parent.toolbarSettings.enable) {\n            this.toolbarUpdate = new HtmlToolbarStatus(this.parent);\n        }\n        if (this.parent.inlineMode.enable) {\n            if (!isNullOrUndefined(this.parent.fontFamily.default)) {\n                editElement.style.fontFamily = this.parent.fontFamily.default;\n            }\n            if (!isNullOrUndefined(this.parent.fontSize.default)) {\n                editElement.style.fontSize = this.parent.fontSize.default;\n            }\n        }\n        this.parent.notify(events.bindOnEnd, {});\n    };\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {RichTextEditorModel} e - specifies the editor model\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    HtmlEditor.prototype.onPropertyChanged = function (e) {\n        // On property code change here\n        if (!isNOU(e) && !isNOU(e.newProp.toolbarSettings) && !isNOU(e.newProp.toolbarSettings.enable)) {\n            this.toolbarUpdate = new HtmlToolbarStatus(this.parent);\n        }\n        if (!isNullOrUndefined(e.newProp.formatter)) {\n            var editElement = this.contentRenderer.getEditPanel();\n            var option = { undoRedoSteps: this.parent.undoRedoSteps,\n                undoRedoTimer: this.parent.undoRedoTimer };\n            this.parent.formatter.updateFormatter(editElement, this.contentRenderer.getDocument(), option);\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} - returns the string value\n     * @hidden\n     */\n    HtmlEditor.prototype.getModuleName = function () {\n        return 'htmlEditor';\n    };\n    /**\n     * For selecting all content in RTE\n     *\n     * @returns {void}\n     * @private\n     * @hidden\n     */\n    HtmlEditor.prototype.selectAll = function () {\n        var nodes = getTextNodesUnder(this.parent.contentModule.getDocument(), this.parent.contentModule.getEditPanel());\n        if (nodes.length > 0) {\n            this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.contentModule.getDocument(), nodes[0], nodes[nodes.length - 1], 0, nodes[nodes.length - 1].textContent.length);\n        }\n    };\n    /**\n     * For selecting all content in RTE\n     *\n     * @param {NotifyArgs} e - specifies the notified arguments\n     * @returns {void}\n     * @private\n     * @hidden\n     */\n    HtmlEditor.prototype.selectRange = function (e) {\n        this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.contentModule.getDocument(), e.range);\n    };\n    /**\n     * For get a selected text in RTE\n     *\n     * @param {NotifyArgs} e - specifies the notified arguments\n     * @returns {void}\n     * @hidden\n     */\n    HtmlEditor.prototype.getSelectedHtml = function (e) {\n        e.callBack(this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()).toString());\n    };\n    return HtmlEditor;\n}());\nexport { HtmlEditor };\n","import * as events from '../base/constant';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { RadioButton } from '@syncfusion/ej2-buttons';\nimport { isNullOrUndefined as isNOU, isNullOrUndefined, detach, extend, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { getUniqueID, Browser } from '@syncfusion/ej2-base';\nimport { CLS_RTE_PASTE_KEEP_FORMAT, CLS_RTE_PASTE_REMOVE_FORMAT, CLS_RTE_PASTE_PLAIN_FORMAT } from '../base/classes';\nimport { CLS_RTE_PASTE_OK, CLS_RTE_PASTE_CANCEL, CLS_RTE_DIALOG_MIN_HEIGHT } from '../base/classes';\nimport { CLS_RTE_IMAGE, CLS_IMGINLINE, CLS_IMGBREAK } from '../base/classes';\nimport { pasteCleanupGroupingTags } from '../../common/config';\nimport { NodeSelection } from '../../selection/selection';\nimport * as EVENTS from './../../common/constant';\nimport { RenderType } from '../base/enum';\nimport { Uploader } from '@syncfusion/ej2-inputs';\nimport * as classes from '../base/classes';\nimport { sanitizeHelper, convertToBlob, getDefaultValue } from '../base/util';\n/**\n * PasteCleanup module called when pasting content in RichTextEditor\n */\nvar PasteCleanup = /** @class */ (function () {\n    function PasteCleanup(parent, serviceLocator) {\n        this.inlineNode = ['a', 'abbr', 'acronym', 'audio', 'b', 'bdi', 'bdo', 'big', 'br', 'button',\n            'canvas', 'cite', 'code', 'data', 'datalist', 'del', 'dfn', 'em', 'embed', 'font', 'i', 'iframe', 'img', 'input',\n            'ins', 'kbd', 'label', 'map', 'mark', 'meter', 'noscript', 'object', 'output', 'picture', 'progress',\n            'q', 'ruby', 's', 'samp', 'script', 'select', 'slot', 'small', 'span', 'strong', 'sub', 'sup', 'svg',\n            'template', 'textarea', 'time', 'u', 'tt', 'var', 'video', 'wbr'];\n        this.blockNode = ['div', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',\n            'address', 'blockquote', 'button', 'center', 'dd', 'dir', 'dl', 'dt', 'fieldset',\n            'frameset', 'hr', 'iframe', 'isindex', 'li', 'map', 'menu', 'noframes', 'noscript',\n            'object', 'ol', 'pre', 'td', 'tr', 'th', 'tbody', 'tfoot', 'thead', 'table', 'ul',\n            'header', 'article', 'nav', 'footer', 'section', 'aside', 'main', 'figure', 'figcaption'];\n        this.isNotFromHtml = false;\n        this.containsHtml = false;\n        this.cropImageData = [];\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.i10n = serviceLocator.getService('rteLocale');\n        this.dialogRenderObj = serviceLocator.getService('dialogRenderObject');\n        this.addEventListener();\n    }\n    PasteCleanup.prototype.addEventListener = function () {\n        this.nodeSelectionObj = new NodeSelection();\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.pasteClean, this.pasteClean, this);\n        this.parent.on(events.bindCssClass, this.setCssClass, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    };\n    PasteCleanup.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    PasteCleanup.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.pasteClean, this.pasteClean);\n        this.parent.off(events.bindCssClass, this.setCssClass);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    PasteCleanup.prototype.pasteClean = function (e) {\n        var _this = this;\n        var args = {\n            requestType: 'Paste',\n            editorMode: this.parent.editorMode,\n            event: e\n        };\n        var value = null;\n        var imageproperties;\n        if (e.args && !isNOU(e.args.clipboardData)) {\n            value = e.args.clipboardData.getData('text/html');\n        }\n        this.parent.trigger(events.beforePasteCleanup, { value: value });\n        if (e.args && value !== null && this.parent.editorMode === 'HTML') {\n            var file = void 0;\n            if (value.length === 0) {\n                var htmlRegex = new RegExp(/<\\/[a-z][\\s\\S]*>/i);\n                value = e.args.clipboardData.getData('text/plain');\n                this.isNotFromHtml = value !== '' ? true : false;\n                value = value.replace(/</g, '&lt;');\n                value = value.replace(/>/g, '&gt;');\n                this.containsHtml = htmlRegex.test(value);\n                file = e && e.args.clipboardData &&\n                    e.args.clipboardData.items.length > 0 ?\n                    (e.args.clipboardData.items[0].getAsFile() === null ?\n                        (!isNOU(e.args.clipboardData.items[1]) ?\n                            e.args.clipboardData.items[1].getAsFile() : null) :\n                        e.args.clipboardData.items[0].getAsFile()) : null;\n                this.parent.notify(events.paste, {\n                    file: file,\n                    args: e.args,\n                    text: value,\n                    callBack: function (b) {\n                        imageproperties = b;\n                        if (typeof (imageproperties) === 'object') {\n                            _this.parent.formatter.editorManager.execCommand('Images', 'Image', e.args, _this.imageFormatting.bind(_this, args), 'pasteCleanup', imageproperties, 'pasteCleanupModule');\n                        }\n                        else {\n                            value = imageproperties;\n                        }\n                    }\n                });\n                if (!htmlRegex.test(value)) {\n                    var divElement = this.parent.createElement('div');\n                    divElement.innerHTML = this.splitBreakLine(value);\n                    value = divElement.innerHTML;\n                }\n            }\n            else if (value.length > 0) {\n                this.parent.formatter.editorManager.observer.notify(EVENTS.MS_WORD_CLEANUP, {\n                    args: e.args,\n                    text: e.text,\n                    allowedStylePropertiesArray: this.parent.pasteCleanupSettings.allowedStyleProps,\n                    callBack: function (a, cropImageData) {\n                        value = a.trim();\n                        _this.cropImageData = cropImageData;\n                    }\n                });\n            }\n            this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n            var currentDocument = this.contentRenderer.getDocument();\n            var range = this.nodeSelectionObj.getRange(currentDocument);\n            this.saveSelection = this.nodeSelectionObj.save(range, currentDocument);\n            var tempDivElem = this.parent.createElement('div');\n            tempDivElem.innerHTML = value;\n            var isValueNotEmpty = tempDivElem.textContent !== '' || !isNOU(tempDivElem.querySelector('img')) ||\n                !isNOU(tempDivElem.querySelector('table'));\n            if (this.parent.pasteCleanupSettings.prompt) {\n                if (isValueNotEmpty) {\n                    e.args.preventDefault();\n                    this.pasteDialog(value, args);\n                }\n                else if (Browser.userAgent.indexOf('Firefox') !== -1 && isNOU(file)) {\n                    this.fireFoxImageUpload();\n                }\n            }\n            else if (!isValueNotEmpty && !this.parent.pasteCleanupSettings.plainText &&\n                Browser.userAgent.indexOf('Firefox') !== -1) {\n                this.fireFoxImageUpload();\n            }\n            else if (this.parent.pasteCleanupSettings.plainText) {\n                e.args.preventDefault();\n                this.plainFormatting(value, args);\n            }\n            else if (this.parent.pasteCleanupSettings.keepFormat) {\n                e.args.preventDefault();\n                this.formatting(value, false, args);\n            }\n            else {\n                e.args.preventDefault();\n                this.formatting(value, true, args);\n            }\n        }\n    };\n    PasteCleanup.prototype.fireFoxImageUpload = function () {\n        var _this = this;\n        setTimeout(function () {\n            if (Browser.userAgent.indexOf('Firefox') !== -1) {\n                var currentFocusNode = _this.nodeSelectionObj.getRange(_this.contentRenderer.getDocument()).startContainer;\n                if (currentFocusNode.nodeName !== '#text') {\n                    // eslint-disable-next-line\n                    currentFocusNode = currentFocusNode.childNodes[_this.nodeSelectionObj.getRange(_this.contentRenderer.getDocument()).startOffset];\n                }\n                if (currentFocusNode.previousSibling.nodeName === 'IMG') {\n                    if (!isNOU(currentFocusNode.previousSibling.getAttribute('src'))) {\n                        currentFocusNode.previousSibling.classList.add('pasteContent_Img');\n                    }\n                    currentFocusNode.previousSibling.classList.add(CLS_RTE_IMAGE);\n                    if (_this.parent.insertImageSettings.display === 'inline') {\n                        currentFocusNode.previousSibling.classList.add(CLS_IMGINLINE);\n                    }\n                    else {\n                        currentFocusNode.previousSibling.classList.add(CLS_IMGBREAK);\n                    }\n                    currentFocusNode.previousSibling.classList.add();\n                    _this.setImageProperties(currentFocusNode.previousSibling);\n                }\n            }\n            _this.imgUploading(_this.parent.inputElement);\n        }, 500);\n    };\n    PasteCleanup.prototype.splitBreakLine = function (value) {\n        var enterSplitText = value.split('\\n');\n        var contentInnerElem = '';\n        for (var i = 0; i < enterSplitText.length; i++) {\n            if (enterSplitText[i].trim() === '') {\n                contentInnerElem += getDefaultValue(this.parent);\n            }\n            else {\n                var contentWithSpace = this.makeSpace(enterSplitText[i]);\n                contentInnerElem += '<p>' + contentWithSpace.trim() + '</p>';\n            }\n        }\n        return contentInnerElem;\n    };\n    PasteCleanup.prototype.makeSpace = function (enterSplitText) {\n        var contentWithSpace = '';\n        var spaceBetweenContent = true;\n        enterSplitText = enterSplitText.replace(/\\t/g, '&nbsp;&nbsp;&nbsp;&nbsp;');\n        var spaceSplit = enterSplitText.split(' ');\n        for (var j = 0; j < spaceSplit.length; j++) {\n            if (spaceSplit[j].trim() === '') {\n                contentWithSpace += spaceBetweenContent ? '&nbsp;' : ' ';\n            }\n            else {\n                spaceBetweenContent = false;\n                contentWithSpace += spaceSplit[j] + ' ';\n            }\n        }\n        return contentWithSpace;\n    };\n    PasteCleanup.prototype.imgUploading = function (elm) {\n        var allImgElm = elm.querySelectorAll('.pasteContent_Img');\n        if (this.parent.insertImageSettings.saveUrl && allImgElm.length > 0) {\n            var base64Src = [];\n            var imgName = [];\n            var uploadImg = [];\n            for (var i = 0; i < allImgElm.length; i++) {\n                if (!isNOU(allImgElm[i].getAttribute('src')) &&\n                    allImgElm[i].getAttribute('src').split(',')[0].indexOf('base64') >= 0) {\n                    base64Src.push(allImgElm[i].getAttribute('src'));\n                    imgName.push(getUniqueID('rte_image'));\n                    uploadImg.push(allImgElm[i]);\n                }\n            }\n            var fileList = [];\n            for (var i = 0; i < base64Src.length; i++) {\n                fileList.push(this.base64ToFile(base64Src[i], imgName[i]));\n            }\n            for (var i = 0; i < fileList.length; i++) {\n                this.uploadMethod(fileList[i], uploadImg[i]);\n            }\n            if (isNOU(this.parent.insertImageSettings.path) &&\n                this.parent.insertImageSettings.saveFormat === 'Blob') {\n                this.getBlob(allImgElm);\n            }\n        }\n        else if (this.parent.insertImageSettings.saveFormat === 'Blob') {\n            this.getBlob(allImgElm);\n        }\n        var allImgElmId = elm.querySelectorAll('.pasteContent_Img');\n        for (var i = 0; i < allImgElmId.length; i++) {\n            allImgElmId[i].classList.remove('pasteContent_Img');\n            if (allImgElmId[i].getAttribute('class').trim() === '') {\n                allImgElm[i].removeAttribute('class');\n            }\n        }\n    };\n    PasteCleanup.prototype.getBlob = function (allImgElm) {\n        for (var i = 0; i < allImgElm.length; i++) {\n            if (!isNOU(allImgElm[i].getAttribute('src')) &&\n                allImgElm[i].getAttribute('src').split(',')[0].indexOf('base64') >= 0) {\n                var blopUrl = URL.createObjectURL(convertToBlob(allImgElm[i].getAttribute('src')));\n                allImgElm[i].setAttribute('src', blopUrl);\n            }\n        }\n    };\n    PasteCleanup.prototype.toolbarEnableDisable = function (state) {\n        if (!this.parent.inlineMode.enable) {\n            this.parent.toolbarModule.baseToolbar.toolbarObj.disable(state);\n        }\n    };\n    PasteCleanup.prototype.uploadMethod = function (fileList, imgElem) {\n        var _this = this;\n        var uploadEle = document.createElement('div');\n        document.body.appendChild(uploadEle);\n        uploadEle.setAttribute('display', 'none');\n        imgElem.style.opacity = '0.5';\n        var popupEle = this.parent.createElement('div');\n        this.parent.element.appendChild(popupEle);\n        var contentEle = this.parent.createElement('input', {\n            id: this.parent.getID() + '_upload', attrs: { type: 'File', name: 'UploadFiles' }\n        });\n        var offsetY = this.parent.iframeSettings.enable ? -50 : -90;\n        this.popupObj = new Popup(popupEle, {\n            relateTo: imgElem,\n            height: '85px',\n            width: '300px',\n            offsetY: offsetY,\n            content: contentEle,\n            viewPortElement: this.parent.element,\n            position: { X: 'center', Y: 'top' },\n            enableRtl: this.parent.enableRtl,\n            zIndex: 10001,\n            // eslint-disable-next-line\n            close: function (event) {\n                _this.parent.isBlur = false;\n                _this.popupObj.destroy();\n                detach(_this.popupObj.element);\n            }\n        });\n        this.popupObj.element.style.display = 'none';\n        addClass([this.popupObj.element], [classes.CLS_POPUP_OPEN, classes.CLS_RTE_UPLOAD_POPUP]);\n        if (!isNOU(this.parent.cssClass)) {\n            addClass([this.popupObj.element], this.parent.cssClass);\n        }\n        var timeOut = fileList.size > 1000000 ? 300 : 100;\n        setTimeout(function () {\n            _this.refreshPopup(imgElem, _this.popupObj);\n        }, timeOut);\n        var rawFile;\n        this.uploadObj = new Uploader({\n            asyncSettings: {\n                saveUrl: this.parent.insertImageSettings.saveUrl,\n                removeUrl: this.parent.insertImageSettings.removeUrl\n            },\n            cssClass: classes.CLS_RTE_DIALOG_UPLOAD,\n            dropArea: this.parent.inputElement,\n            allowedExtensions: this.parent.insertImageSettings.allowedTypes.toString(),\n            success: function (e) {\n                setTimeout(function () {\n                    _this.popupClose(_this.popupObj, _this.uploadObj, imgElem, e);\n                }, 900);\n            },\n            uploading: function (e) {\n                if (!_this.parent.isServerRendered) {\n                    _this.parent.trigger(events.imageUploading, e, function (imageUploadingArgs) {\n                        if (imageUploadingArgs.cancel) {\n                            if (!isNullOrUndefined(imgElem)) {\n                                detach(imgElem);\n                            }\n                            if (!isNullOrUndefined(_this.popupObj.element)) {\n                                detach(_this.popupObj.element);\n                            }\n                        }\n                        else {\n                            _this.parent.inputElement.contentEditable = 'false';\n                        }\n                    });\n                }\n            },\n            beforeUpload: function (args) {\n                _this.parent.trigger(events.beforeImageUpload, args);\n                _this.toolbarEnableDisable(true);\n            },\n            // eslint-disable-next-line\n            failure: function (e) {\n                setTimeout(function () {\n                    _this.uploadFailure(imgElem, _this.uploadObj, _this.popupObj, e);\n                }, 900);\n            },\n            canceling: function () {\n                _this.parent.inputElement.contentEditable = 'true';\n                if (imgElem.nextSibling.textContent === ' ') {\n                    detach(imgElem.nextSibling);\n                }\n                detach(imgElem);\n                _this.popupObj.close();\n            },\n            selected: function (e) {\n                e.cancel = true;\n            },\n            removing: function () {\n                _this.parent.inputElement.contentEditable = 'true';\n                if (imgElem.nextSibling.textContent === ' ') {\n                    detach(imgElem.nextSibling);\n                }\n                detach(imgElem);\n                _this.popupObj.close();\n            }\n        });\n        this.uploadObj.appendTo(this.popupObj.element.childNodes[0]);\n        /* eslint-disable */\n        var fileData = [{\n                name: fileList.name,\n                rawFile: fileList,\n                size: fileList.size,\n                type: fileList.type,\n                validationMessages: { minSize: \"\", maxSize: \"\" },\n                statusCode: '1'\n            }];\n        this.uploadObj.createFileList(fileData);\n        rawFile = fileData;\n        /* eslint-enable */\n        this.uploadObj.upload(fileData);\n        this.popupObj.element.getElementsByClassName('e-file-select-wrap')[0].style.display = 'none';\n        detach(this.popupObj.element.querySelector('.e-rte-dialog-upload .e-file-select-wrap'));\n    };\n    PasteCleanup.prototype.uploadFailure = function (imgElem, uploadObj, popupObj, e) {\n        this.parent.inputElement.contentEditable = 'true';\n        detach(imgElem);\n        if (popupObj) {\n            popupObj.close();\n        }\n        this.parent.trigger(events.imageUploadFailed, e);\n        uploadObj.destroy();\n    };\n    PasteCleanup.prototype.popupClose = function (popupObj, uploadObj, imgElem, e) {\n        var _this = this;\n        this.parent.inputElement.contentEditable = 'true';\n        e.element = imgElem;\n        this.parent.trigger(events.imageUploadSuccess, e, function (e) {\n            if (!isNullOrUndefined(_this.parent.insertImageSettings.path)) {\n                var url = _this.parent.insertImageSettings.path + e.file.name;\n                imgElem.src = url;\n                imgElem.setAttribute('alt', e.file.name);\n            }\n        });\n        popupObj.close();\n        imgElem.style.opacity = '1';\n        uploadObj.destroy();\n        this.toolbarEnableDisable(false);\n    };\n    PasteCleanup.prototype.refreshPopup = function (imageElement, popupObj) {\n        var imgPosition = this.parent.iframeSettings.enable ? this.parent.element.offsetTop +\n            imageElement.offsetTop : imageElement.offsetTop;\n        var rtePosition = this.parent.element.offsetTop + this.parent.element.offsetHeight;\n        if (imgPosition > rtePosition) {\n            popupObj.relateTo = this.parent.inputElement;\n            popupObj.offsetY = this.parent.iframeSettings.enable ? -30 : -65;\n            popupObj.element.style.display = 'block';\n        }\n        else {\n            if (popupObj) {\n                popupObj.refreshPosition(imageElement);\n                popupObj.element.style.display = 'block';\n            }\n        }\n    };\n    PasteCleanup.prototype.base64ToFile = function (base64, filename) {\n        var baseStr = base64.split(',');\n        var typeStr = baseStr[0].match(/:(.*?);/)[1];\n        var extension = typeStr.split('/')[1];\n        var decodeStr = atob(baseStr[1]);\n        var strLen = decodeStr.length;\n        var decodeArr = new Uint8Array(strLen);\n        while (strLen--) {\n            decodeArr[strLen] = decodeStr.charCodeAt(strLen);\n        }\n        if (Browser.isIE || navigator.appVersion.indexOf('Edge') > -1) {\n            var blob = new Blob([decodeArr], { type: extension });\n            extend(blob, { name: filename + '.' + (!isNOU(extension) ? extension : '') });\n            return blob;\n        }\n        else {\n            return new File([decodeArr], filename + '.' + (!isNOU(extension) ? extension : ''), { type: extension });\n        }\n    };\n    /**\n     * Method for image formatting when pasting\n     *\n     * @param {Object} pasteArgs - specifies the paste arguments.\n     * @param {Element []} imgElement - specifies the array elements.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    PasteCleanup.prototype.imageFormatting = function (pasteArgs, imgElement) {\n        if (!isNOU(imgElement.elements[0].getAttribute('src'))) {\n            imgElement.elements[0].classList.add('pasteContent_Img');\n        }\n        var imageElement = this.parent.createElement('span');\n        imageElement.appendChild(imgElement.elements[0]);\n        var imageValue = imageElement.innerHTML;\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        var currentDocument = this.contentRenderer.getDocument();\n        var range = this.nodeSelectionObj.getRange(currentDocument);\n        this.saveSelection = this.nodeSelectionObj.save(range, currentDocument);\n        if (this.parent.pasteCleanupSettings.prompt) {\n            this.pasteDialog(imageValue, pasteArgs);\n        }\n        else if (this.parent.pasteCleanupSettings.plainText) {\n            this.plainFormatting(imageValue, pasteArgs);\n        }\n        else if (this.parent.pasteCleanupSettings.keepFormat) {\n            this.formatting(imageValue, false, pasteArgs);\n        }\n        else {\n            this.formatting(imageValue, true, pasteArgs);\n        }\n    };\n    PasteCleanup.prototype.radioRender = function () {\n        this.keepRadioButton = new RadioButton({ label: this.i10n.getConstant('keepFormat'),\n            name: 'pasteOption', checked: true });\n        this.keepRadioButton.isStringTemplate = true;\n        var keepFormatElement = this.parent.element.querySelector('#keepFormating');\n        this.keepRadioButton.appendTo(keepFormatElement);\n        this.cleanRadioButton = new RadioButton({ label: this.i10n.getConstant('cleanFormat'), name: 'pasteOption' });\n        this.cleanRadioButton.isStringTemplate = true;\n        var cleanFormatElement = this.parent.element.querySelector('#cleanFormat');\n        this.cleanRadioButton.appendTo(cleanFormatElement);\n        this.plainTextRadioButton = new RadioButton({ label: this.i10n.getConstant('plainText'), name: 'pasteOption' });\n        this.plainTextRadioButton.isStringTemplate = true;\n        var plainTextElement = this.parent.element.querySelector('#plainTextFormat');\n        this.plainTextRadioButton.appendTo(plainTextElement);\n    };\n    PasteCleanup.prototype.selectFormatting = function (value, args, keepChecked, cleanChecked) {\n        if (keepChecked) {\n            this.formatting(value, false, args);\n        }\n        else if (cleanChecked) {\n            this.formatting(value, true, args);\n        }\n        else {\n            this.plainFormatting(value, args);\n        }\n    };\n    PasteCleanup.prototype.pasteDialog = function (value, args) {\n        var _this = this;\n        var isHeight = false;\n        var preRTEHeight = this.parent.height;\n        var dialogModel = {\n            buttons: [\n                {\n                    click: function () {\n                        if (!_this.dialogObj.isDestroyed) {\n                            var keepChecked = _this.parent.element.querySelector('#keepFormating').checked;\n                            var cleanChecked = _this.parent.element.querySelector('#cleanFormat').checked;\n                            _this.dialogObj.hide();\n                            _this.parent.height = isHeight ? preRTEHeight : _this.parent.height;\n                            isHeight = false;\n                            var argument = _this.dialogObj;\n                            _this.dialogRenderObj.close(argument);\n                            _this.dialogObj.destroy();\n                            _this.selectFormatting(value, args, keepChecked, cleanChecked);\n                        }\n                    },\n                    buttonModel: {\n                        isPrimary: true,\n                        cssClass: 'e-flat ' + CLS_RTE_PASTE_OK,\n                        content: this.i10n.getConstant('pasteDialogOk')\n                    }\n                },\n                {\n                    click: function () {\n                        if (!_this.dialogObj.isDestroyed) {\n                            _this.dialogObj.hide();\n                            _this.parent.height = isHeight ? preRTEHeight : _this.parent.height;\n                            isHeight = false;\n                            var args_1 = _this.dialogObj;\n                            _this.dialogRenderObj.close(args_1);\n                            _this.dialogObj.destroy();\n                        }\n                    },\n                    buttonModel: {\n                        cssClass: 'e-flat ' + CLS_RTE_PASTE_CANCEL,\n                        content: this.i10n.getConstant('pasteDialogCancel')\n                    }\n                }\n            ],\n            header: this.i10n.getConstant('pasteFormat'),\n            content: this.i10n.getConstant('pasteFormatContent') + '<br/><div><div style=\"padding-top:24px;\">' +\n                '<input type=\"radio\" class=\"' + CLS_RTE_PASTE_KEEP_FORMAT + '\" id=\"keepFormating\"/>' +\n                '</div><div style=\"padding-top:20px;\"><input type=\"radio\" class=\"' +\n                CLS_RTE_PASTE_REMOVE_FORMAT + '\" id=\"cleanFormat\"/></div>' +\n                '<div style=\"padding-top:20px;\"><input type=\"radio\" class=\"' +\n                CLS_RTE_PASTE_PLAIN_FORMAT + '\" id=\"plainTextFormat\"/></div></div>',\n            target: this.parent.element,\n            width: '300px',\n            height: '265px',\n            cssClass: CLS_RTE_DIALOG_MIN_HEIGHT,\n            isModal: true,\n            visible: false\n        };\n        this.dialogObj = this.dialogRenderObj.render(dialogModel);\n        var rteDialogWrapper = this.parent.element.querySelector('#' + this.parent.getID()\n            + '_pasteCleanupDialog');\n        if (rteDialogWrapper !== null && rteDialogWrapper.innerHTML !== '') {\n            this.destroyDialog(rteDialogWrapper);\n        }\n        if (rteDialogWrapper === null) {\n            rteDialogWrapper = this.parent.createElement('div', {\n                id: this.parent.getID() + '_pasteCleanupDialog'\n            });\n            this.parent.element.appendChild(rteDialogWrapper);\n        }\n        this.dialogObj.appendTo(rteDialogWrapper);\n        this.radioRender();\n        /* eslint-disable */\n        if (this.parent.element.offsetHeight < parseInt(this.dialogObj.height.split('px')[0], null)) {\n            this.parent.setProperties({ height: parseInt(this.dialogObj.height.split('px')[0], null) + 40 });\n            /* eslint-enable */\n            isHeight = true;\n        }\n        this.dialogObj.show();\n        this.setCssClass({ cssClass: this.parent.cssClass });\n    };\n    PasteCleanup.prototype.updateCss = function (currentObj, e) {\n        if (currentObj && e.cssClass) {\n            if (isNullOrUndefined(e.oldCssClass)) {\n                currentObj.setProperties({ cssClass: (currentObj.cssClass + ' ' + e.cssClass).trim() });\n            }\n            else {\n                currentObj.setProperties({ cssClass: (currentObj.cssClass.replace(e.oldCssClass, '').trim() + ' ' + e.cssClass).trim() });\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/tslint/config\n    PasteCleanup.prototype.setCssClass = function (e) {\n        if (this.popupObj && e.cssClass) {\n            if (isNullOrUndefined(e.oldCssClass)) {\n                addClass([this.popupObj.element], e.cssClass);\n            }\n            else {\n                removeClass([this.popupObj.element], e.oldCssClass);\n                addClass([this.popupObj.element], e.cssClass);\n            }\n        }\n        this.updateCss(this.dialogObj, e);\n        this.updateCss(this.uploadObj, e);\n        this.updateCss(this.plainTextRadioButton, e);\n        this.updateCss(this.cleanRadioButton, e);\n        this.updateCss(this.keepRadioButton, e);\n    };\n    PasteCleanup.prototype.destroyDialog = function (rteDialogWrapper) {\n        var rteDialogContainer = this.parent.element.querySelector('.e-dlg-container');\n        detach(rteDialogContainer);\n        var rteDialogWrapperChildLength = rteDialogWrapper.children.length;\n        for (var i = 0; i < rteDialogWrapperChildLength; i++) {\n            detach(rteDialogWrapper.children[0]);\n        }\n    };\n    PasteCleanup.prototype.cleanAppleClass = function (elem) {\n        var appleClassElem = elem.querySelectorAll('br.Apple-interchange-newline');\n        for (var i = 0; i < appleClassElem.length; i++) {\n            detach(appleClassElem[i]);\n        }\n        return elem;\n    };\n    PasteCleanup.prototype.formatting = function (value, clean, args) {\n        var _this = this;\n        var clipBoardElem = this.parent.createElement('div', { className: 'pasteContent', styles: 'display:inline;' });\n        if (this.isNotFromHtml && this.containsHtml) {\n            value = this.splitBreakLine(value);\n        }\n        clipBoardElem.innerHTML = value;\n        clipBoardElem = this.cleanAppleClass(clipBoardElem);\n        if (this.parent.pasteCleanupSettings.deniedTags !== null) {\n            clipBoardElem = this.deniedTags(clipBoardElem);\n        }\n        if (clean) {\n            clipBoardElem = this.deniedAttributes(clipBoardElem, clean);\n        }\n        else if (this.parent.pasteCleanupSettings.deniedAttrs !== null) {\n            clipBoardElem = this.deniedAttributes(clipBoardElem, clean);\n        }\n        if (this.parent.pasteCleanupSettings.allowedStyleProps !== null) {\n            clipBoardElem = this.allowedStyle(clipBoardElem);\n        }\n        this.saveSelection.restore();\n        clipBoardElem.innerHTML = this.sanitizeHelper(clipBoardElem.innerHTML);\n        var allImg = clipBoardElem.querySelectorAll('img');\n        for (var i = 0; i < allImg.length; i++) {\n            if (!isNOU(allImg[i].getAttribute('src'))) {\n                allImg[i].classList.add('pasteContent_Img');\n            }\n            this.setImageProperties(allImg[i]);\n        }\n        this.addTempClass(clipBoardElem);\n        if (clipBoardElem.textContent !== '' || !isNOU(clipBoardElem.querySelector('img')) ||\n            !isNOU(clipBoardElem.querySelector('table'))) {\n            var tempWrapperElem = this.parent.createElement('div');\n            tempWrapperElem.innerHTML = value;\n            var filesData = [];\n            if (!isNOU(tempWrapperElem.querySelector('img'))) {\n                var imgElem = tempWrapperElem.querySelectorAll('img');\n                var base64Src = [];\n                var imgName = [];\n                var uploadImg = [];\n                for (var i = 0; i < imgElem.length; i++) {\n                    if (imgElem[i].getAttribute('src') &&\n                        imgElem[i].getAttribute('src').split(',')[0].indexOf('base64') >= 0) {\n                        base64Src.push(imgElem[i].getAttribute('src'));\n                        imgName.push(getUniqueID('rte_image'));\n                        uploadImg.push(imgElem[i]);\n                    }\n                }\n                var fileList = [];\n                var currentData = void 0;\n                for (var i = 0; i < base64Src.length; i++) {\n                    fileList.push(this.base64ToFile(base64Src[i], imgName[i]));\n                    currentData = {\n                        name: fileList[i].name, rawFile: fileList[i],\n                        size: fileList[i].size, type: fileList[i].type,\n                        status: '', validationMessages: { minSize: '', maxSize: '' }, statusCode: '1'\n                    };\n                    filesData.push(currentData);\n                }\n            }\n            this.parent.trigger(events.afterPasteCleanup, { value: clipBoardElem.innerHTML, filesData: filesData }, function (updatedArgs) { value = updatedArgs.value; });\n            clipBoardElem.innerHTML = value;\n            clipBoardElem = this.addTableClass(clipBoardElem);\n            this.parent.formatter.editorManager.execCommand('inserthtml', 'pasteCleanup', args, function (returnArgs) {\n                extend(args, { elements: returnArgs.elements, imageElements: returnArgs.imgElem }, true);\n                _this.parent.formatter.onSuccess(_this.parent, args);\n            }, clipBoardElem, null, null, this.parent.enterKey);\n            this.removeTempClass();\n            this.parent.notify(events.toolbarRefresh, {});\n            this.cropImageHandler(this.parent.inputElement);\n        }\n    };\n    PasteCleanup.prototype.cropImageHandler = function (element) {\n        var _this = this;\n        var allImgElm = element.querySelectorAll('.e-img-cropped');\n        if (allImgElm.length > 0) {\n            var _loop_1 = function (i) {\n                if (allImgElm[i].getAttribute('src').split(',')[0].indexOf('base64') >= 0) {\n                    var image_1 = new Image();\n                    image_1.src = allImgElm[i].getAttribute('src');\n                    var canvas_1 = document.createElement('canvas');\n                    var ctx_1 = canvas_1.getContext('2d');\n                    image_1.onload = function () {\n                        var wGoalWidth = _this.cropImageData[i].goalWidth / image_1.naturalWidth;\n                        var hGoalHeight = _this.cropImageData[i].goalHeight / image_1.naturalHeight;\n                        var cropLength = _this.cropImageData[i].cropLength / wGoalWidth;\n                        var cropTop = _this.cropImageData[i].cropTop / hGoalHeight;\n                        var cropWidth = (_this.cropImageData[i].goalWidth -\n                            _this.cropImageData[i].cropLength -\n                            _this.cropImageData[i].cropR) / wGoalWidth;\n                        var cropHeight = (_this.cropImageData[i].goalHeight -\n                            _this.cropImageData[i].cropTop -\n                            _this.cropImageData[i].cropB) / hGoalHeight;\n                        canvas_1.width = cropWidth;\n                        canvas_1.height = cropHeight;\n                        // Draw the cropped portion of the image onto the canvas\n                        ctx_1.drawImage(image_1, cropLength, cropTop, cropWidth, cropHeight, 0, 0, cropWidth, cropHeight);\n                        // Convert the cropped canvas to a base64 encoded image\n                        var croppedBase64 = canvas_1.toDataURL('image/png');\n                        // Call the provided callback with the cropped base64 data\n                        allImgElm[i].setAttribute('src', croppedBase64);\n                        allImgElm[i].classList.remove('e-img-cropped');\n                        _this.imgUploading(_this.parent.inputElement);\n                        if (_this.parent.iframeSettings.enable) {\n                            _this.parent.updateValue();\n                        }\n                    };\n                }\n            };\n            for (var i = 0; i < allImgElm.length; i++) {\n                _loop_1(i);\n            }\n        }\n        else {\n            this.imgUploading(this.parent.inputElement);\n            if (this.parent.iframeSettings.enable) {\n                this.parent.updateValue();\n            }\n        }\n    };\n    PasteCleanup.prototype.addTableClass = function (element) {\n        var tableElement = element.querySelectorAll('table');\n        for (var i = 0; i < tableElement.length; i++) {\n            if (!tableElement[i].classList.contains('e-rte-table')) {\n                tableElement[i].classList.add('e-rte-table');\n            }\n        }\n        return element;\n    };\n    PasteCleanup.prototype.setImageProperties = function (allImg) {\n        if (this.parent.insertImageSettings.width !== 'auto') {\n            allImg.setAttribute('width', this.parent.insertImageSettings.width);\n        }\n        if (this.parent.insertImageSettings.minWidth !== '0' && this.parent.insertImageSettings.minWidth !== 0) {\n            allImg.style.minWidth = this.parent.insertImageSettings.minWidth.toString();\n        }\n        if (this.parent.insertImageSettings.maxWidth !== null) {\n            allImg.style.maxWidth = this.parent.getInsertImgMaxWidth().toString();\n        }\n        if (this.parent.insertImageSettings.height !== 'auto') {\n            allImg.setAttribute('height', this.parent.insertImageSettings.height);\n        }\n        if (this.parent.insertImageSettings.minHeight !== '0' && this.parent.insertImageSettings.minHeight !== 0) {\n            allImg.style.minHeight = this.parent.insertImageSettings.minHeight.toString();\n        }\n        if (this.parent.insertImageSettings.maxHeight !== null) {\n            allImg.style.maxHeight = this.parent.insertImageSettings.maxHeight.toString();\n        }\n    };\n    PasteCleanup.prototype.addTempClass = function (clipBoardElem) {\n        var allChild = clipBoardElem.children;\n        for (var i = 0; i < allChild.length; i++) {\n            allChild[i].classList.add('pasteContent_RTE');\n        }\n    };\n    PasteCleanup.prototype.removeTempClass = function () {\n        var classElm = this.parent.inputElement.querySelectorAll('.pasteContent_RTE');\n        for (var i = 0; i < classElm.length; i++) {\n            classElm[i].classList.remove('pasteContent_RTE');\n            if (classElm[i].getAttribute('class') === '') {\n                classElm[i].removeAttribute('class');\n            }\n        }\n    };\n    PasteCleanup.prototype.sanitizeHelper = function (value) {\n        value = sanitizeHelper(value, this.parent);\n        return value;\n    };\n    //Plain Formatting\n    PasteCleanup.prototype.plainFormatting = function (value, args) {\n        var _this = this;\n        var clipBoardElem = this.parent.createElement('div', { className: 'pasteContent', styles: 'display:inline;' });\n        clipBoardElem.innerHTML = value;\n        this.detachInlineElements(clipBoardElem);\n        this.getTextContent(clipBoardElem);\n        if (clipBoardElem.textContent.trim() !== '') {\n            if (!isNOU(clipBoardElem.firstElementChild) && clipBoardElem.firstElementChild.tagName !== 'BR') {\n                var firstElm = clipBoardElem.firstElementChild;\n                if (!isNOU(clipBoardElem.firstElementChild)) {\n                    var spanElm = this.parent.createElement('span');\n                    for (var i = 0, j = 0; i < firstElm.childNodes.length; i++, j++) {\n                        if (firstElm.childNodes[i].nodeName === '#text') {\n                            spanElm.appendChild(firstElm.childNodes[i]);\n                            clipBoardElem.insertBefore(spanElm, clipBoardElem.firstElementChild);\n                            i--;\n                        }\n                        else if (firstElm.childNodes[i].nodeName !== '#text' && j === 0) {\n                            for (var k = 0; k < firstElm.childNodes[i].childNodes.length; k++) {\n                                spanElm.appendChild(firstElm.childNodes[i].childNodes[k]);\n                                clipBoardElem.insertBefore(spanElm, clipBoardElem.firstElementChild);\n                                k--;\n                            }\n                            i--;\n                        }\n                        else {\n                            break;\n                        }\n                    }\n                    if (!firstElm.hasChildNodes()) {\n                        detach(firstElm);\n                    }\n                }\n            }\n            this.removeEmptyElements(clipBoardElem);\n            this.saveSelection.restore();\n            clipBoardElem.innerHTML = this.sanitizeHelper(clipBoardElem.innerHTML);\n            this.addTempClass(clipBoardElem);\n            this.parent.trigger(events.afterPasteCleanup, { value: clipBoardElem.innerHTML, filesData: null }, function (updatedArgs) { value = updatedArgs.value; });\n            clipBoardElem.innerHTML = value;\n            this.parent.formatter.editorManager.execCommand('inserthtml', 'pasteCleanup', args, function (returnArgs) {\n                extend(args, { elements: returnArgs.elements, imageElements: returnArgs.imgElem }, true);\n                _this.parent.formatter.onSuccess(_this.parent, args);\n            }, clipBoardElem, null, null, this.parent.enterKey);\n            this.removeTempClass();\n        }\n        else {\n            this.saveSelection.restore();\n            extend(args, { elements: [] }, true);\n            this.parent.formatter.onSuccess(this.parent, args);\n        }\n    };\n    PasteCleanup.prototype.getTextContent = function (clipBoardElem) {\n        for (var i = 0; i < this.blockNode.length; i++) {\n            var inElem = clipBoardElem.querySelectorAll(this.blockNode[i]);\n            for (var j = 0; j < inElem.length; j++) {\n                var parElem = void 0;\n                for (var k = 0, l = 0, preNode = void 0; k < inElem[j].childNodes.length; k++, l++) {\n                    if (inElem[j].childNodes[k].nodeName === 'DIV' || inElem[j].childNodes[k].nodeName === 'P' ||\n                        (inElem[j].childNodes[k].nodeName === '#text' &&\n                            (inElem[j].childNodes[k].nodeValue.replace(/\\u00a0/g, '&nbsp;') !== '&nbsp;') &&\n                            inElem[j].childNodes[k].textContent.trim() === '')) {\n                        parElem = inElem[j].childNodes[k].parentElement;\n                        inElem[j].childNodes[k].parentElement.parentElement.insertBefore(inElem[j].childNodes[k], inElem[j].childNodes[k].parentElement);\n                        k--;\n                    }\n                    else {\n                        parElem = inElem[j].childNodes[k].parentElement;\n                        if (preNode === 'text') {\n                            var previousElem = parElem.previousElementSibling;\n                            previousElem.appendChild(inElem[j].childNodes[k]);\n                        }\n                        else {\n                            var divElement = this.parent.createElement('div', { id: 'newDiv' });\n                            divElement.appendChild(inElem[j].childNodes[k]);\n                            parElem.parentElement.insertBefore(divElement, parElem);\n                        }\n                        k--;\n                        preNode = 'text';\n                    }\n                }\n                if (!isNOU(parElem)) {\n                    detach(parElem);\n                }\n            }\n        }\n        var allElems = clipBoardElem.querySelectorAll('*');\n        for (var i = 0; i < allElems.length; i++) {\n            var allAtr = allElems[i].attributes;\n            for (var j = 0; j < allAtr.length; j++) {\n                allElems[i].removeAttribute(allAtr[j].name);\n                j--;\n            }\n        }\n    };\n    PasteCleanup.prototype.detachInlineElements = function (clipBoardElem) {\n        for (var i = 0; i < this.inlineNode.length; i++) {\n            var inElem = clipBoardElem.querySelectorAll(this.inlineNode[i]);\n            for (var j = 0; j < inElem.length; j++) {\n                var parElem = void 0;\n                for (var k = 0; k < inElem[j].childNodes.length; k++) {\n                    parElem = inElem[j].childNodes[k].parentElement;\n                    inElem[j].childNodes[k].parentElement.parentElement.insertBefore(inElem[j].childNodes[k], inElem[j].childNodes[k].parentElement);\n                    k--;\n                }\n                if (!isNOU(parElem)) {\n                    detach(parElem);\n                }\n            }\n        }\n    };\n    PasteCleanup.prototype.findDetachEmptyElem = function (element) {\n        var removableElement;\n        if (!isNOU(element.parentElement)) {\n            var hasNbsp = element.parentElement.textContent.length > 0 && element.parentElement.textContent.match(/\\u00a0/g)\n                && element.parentElement.textContent.match(/\\u00a0/g).length > 0;\n            if (!hasNbsp && element.parentElement.textContent.trim() === '' &&\n                element.parentElement.getAttribute('class') !== 'pasteContent') {\n                removableElement = this.findDetachEmptyElem(element.parentElement);\n            }\n            else {\n                removableElement = element;\n            }\n        }\n        else {\n            removableElement = null;\n        }\n        return removableElement;\n    };\n    PasteCleanup.prototype.removeEmptyElements = function (element) {\n        var emptyElements = element.querySelectorAll(':empty');\n        for (var i = 0; i < emptyElements.length; i++) {\n            if (emptyElements[i].tagName !== 'BR') {\n                var detachableElement = this.findDetachEmptyElem(emptyElements[i]);\n                if (!isNOU(detachableElement)) {\n                    detach(detachableElement);\n                }\n            }\n        }\n    };\n    //GroupingTags\n    PasteCleanup.prototype.tagGrouping = function (deniedTags) {\n        var groupingTags = deniedTags.slice();\n        var keys = Object.keys(pasteCleanupGroupingTags);\n        var values = keys.map(function (key) {\n            return pasteCleanupGroupingTags[\"\" + key];\n        });\n        var addTags = [];\n        for (var i = 0; i < groupingTags.length; i++) {\n            //The value split using '[' because to retrieve the tag name from the user given format which may contain tag with attributes\n            if (groupingTags[i].split('[').length > 1) {\n                groupingTags[i] = groupingTags[i].split('[')[0].trim();\n            }\n            if (keys.indexOf(groupingTags[i]) > -1) {\n                for (var j = 0; j < values[keys.indexOf(groupingTags[i])].length; j++) {\n                    if (groupingTags.indexOf(values[keys.indexOf(groupingTags[i])][j]) < 0 &&\n                        addTags.indexOf(values[keys.indexOf(groupingTags[i])][j]) < 0) {\n                        addTags.push(values[keys.indexOf(groupingTags[i])][j]);\n                    }\n                }\n            }\n        }\n        return deniedTags = deniedTags.concat(addTags);\n    };\n    //Filter Attributes in Denied Tags\n    PasteCleanup.prototype.attributesfilter = function (deniedTags) {\n        for (var i = 0; i < deniedTags.length; i++) {\n            if (deniedTags[i].split('[').length > 1) {\n                var userAttributes = deniedTags[i].split('[')[1].split(']')[0].split(',');\n                var allowedAttributeArray = [];\n                var deniedAttributeArray = [];\n                for (var j = 0; j < userAttributes.length; j++) {\n                    // eslint-disable-next-line\n                    userAttributes[j].indexOf('!') < 0 ? allowedAttributeArray.push(userAttributes[j].trim())\n                        : deniedAttributeArray.push(userAttributes[j].split('!')[1].trim());\n                }\n                var allowedAttribute = allowedAttributeArray.length > 1 ?\n                    (allowedAttributeArray.join('][')) : (allowedAttributeArray.join());\n                var deniedAttribute = deniedAttributeArray.length > 1 ?\n                    deniedAttributeArray.join('][') : (deniedAttributeArray.join());\n                if (deniedAttribute.length > 0) {\n                    var select = allowedAttribute !== '' ? deniedTags[i].split('[')[0] +\n                        '[' + allowedAttribute + ']' : deniedTags[i].split('[')[0];\n                    deniedTags[i] = select + ':not([' + deniedAttribute + '])';\n                }\n                else {\n                    deniedTags[i] = deniedTags[i].split('[')[0] + '[' + allowedAttribute + ']';\n                }\n            }\n        }\n        return deniedTags;\n    };\n    //Denied Tags\n    PasteCleanup.prototype.deniedTags = function (clipBoardElem) {\n        var deniedTags = isNullOrUndefined(this.parent.pasteCleanupSettings.deniedTags) ? [] : this.parent.pasteCleanupSettings.deniedTags.slice();\n        deniedTags = this.attributesfilter(deniedTags);\n        deniedTags = this.tagGrouping(deniedTags);\n        for (var i = 0; i < deniedTags.length; i++) {\n            var removableElement = clipBoardElem.querySelectorAll(deniedTags[i]);\n            for (var j = removableElement.length - 1; j >= 0; j--) {\n                var parentElem = removableElement[j].parentNode;\n                while (removableElement[j].firstChild) {\n                    parentElem.insertBefore(removableElement[j].firstChild, removableElement[j]);\n                }\n                parentElem.removeChild(removableElement[j]);\n            }\n        }\n        return clipBoardElem;\n    };\n    //Denied Attributes\n    PasteCleanup.prototype.deniedAttributes = function (clipBoardElem, clean) {\n        var deniedAttrs = isNullOrUndefined(this.parent.pasteCleanupSettings.deniedAttrs) ? [] : this.parent.pasteCleanupSettings.deniedAttrs.slice();\n        if (clean) {\n            deniedAttrs.push('style');\n        }\n        for (var i = 0; i < deniedAttrs.length; i++) {\n            var removableAttrElement = clipBoardElem.\n                querySelectorAll('[' + deniedAttrs[i] + ']');\n            for (var j = 0; j < removableAttrElement.length; j++) {\n                removableAttrElement[j].removeAttribute(deniedAttrs[i]);\n            }\n        }\n        return clipBoardElem;\n    };\n    //Allowed Style Properties\n    PasteCleanup.prototype.allowedStyle = function (clipBoardElem) {\n        var allowedStyleProps = isNullOrUndefined(this.parent.pasteCleanupSettings.allowedStyleProps) ? [] : this.parent.pasteCleanupSettings.allowedStyleProps.slice();\n        allowedStyleProps.push('list-style-type', 'list-style');\n        var styleElement = clipBoardElem.querySelectorAll('[style]');\n        for (var i = 0; i < styleElement.length; i++) {\n            var allowedStyleValue = '';\n            var allowedStyleValueArray = [];\n            var styleValue = styleElement[i].getAttribute('style').split(';');\n            for (var k = 0; k < styleValue.length; k++) {\n                if (allowedStyleProps.indexOf(styleValue[k].split(':')[0].trim()) >= 0) {\n                    allowedStyleValueArray.push(styleValue[k]);\n                }\n            }\n            styleElement[i].removeAttribute('style');\n            allowedStyleValue = allowedStyleValueArray.join(';').trim() === '' ?\n                allowedStyleValueArray.join(';') : allowedStyleValueArray.join(';') + ';';\n            if (allowedStyleValue) {\n                styleElement[i].setAttribute('style', allowedStyleValue);\n            }\n        }\n        return clipBoardElem;\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    PasteCleanup.prototype.getModuleName = function () {\n        return 'pasteCleanup';\n    };\n    return PasteCleanup;\n}());\nexport { PasteCleanup };\n","import { EventHandler, Browser, isNullOrUndefined, detach } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\n/**\n * `Resize` module is used to resize the editor\n */\nvar Resize = /** @class */ (function () {\n    function Resize(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Resize.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.renderResizable, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    };\n    Resize.prototype.renderResizable = function () {\n        var enableRtlClass = (this.parent.enableRtl) ? classes.CLS_RTE_RES_WEST : classes.CLS_RTE_RES_EAST;\n        this.resizer = this.parent.createElement('div', {\n            id: this.parent.getID() + '-resizable', className: 'e-icons'\n                + ' ' + classes.CLS_RTE_RES_HANDLE + ' ' + enableRtlClass\n        });\n        this.parent.element.classList.add(classes.CLS_RTE_RES_CNT);\n        this.parent.element.appendChild(this.resizer);\n        this.touchStartEvent = (Browser.info.name === 'msie') ? 'pointerdown' : 'touchstart';\n        EventHandler.add(this.resizer, 'mousedown', this.resizeStart, this);\n        EventHandler.add(this.resizer, this.touchStartEvent, this.resizeStart, this);\n    };\n    Resize.prototype.resizeStart = function (e) {\n        var _this = this;\n        if (e.cancelable) {\n            e.preventDefault();\n        }\n        this.wireResizeEvents();\n        this.parent.notify(events.resizeInitialized, {});\n        var args = { event: e, requestType: 'editor' };\n        this.parent.trigger(events.resizeStart, args, function (resizeStartArgs) {\n            if (resizeStartArgs.cancel) {\n                _this.unwireResizeEvents();\n            }\n        });\n    };\n    Resize.prototype.performResize = function (e) {\n        var _this = this;\n        var args = { event: e, requestType: 'editor' };\n        this.parent.trigger(events.onResize, args, function (resizingArgs) {\n            if (resizingArgs.cancel) {\n                _this.unwireResizeEvents();\n            }\n        });\n        var boundRect = this.parent.element.getBoundingClientRect();\n        if (this.isMouseEvent(e)) {\n            this.parent.element.style.height = e.clientY - boundRect.top + 'px';\n            this.parent.element.style.width = (!this.parent.enableRtl) ? e.clientX - boundRect.left + 'px' :\n                boundRect.right - e.clientX + 'px';\n            var toolBarEle = this.parent.toolbarModule.getToolbarElement();\n            if (toolBarEle !== null) {\n                if (toolBarEle.classList.contains(classes.CLS_TB_FLOAT) && this.parent.toolbarSettings.enableFloating &&\n                    this.parent.getToolbar() && !this.parent.inlineMode.enable) {\n                    var contentPanel = this.parent.contentModule.getPanel();\n                    var contentPanelWidth = contentPanel.getBoundingClientRect().width;\n                    toolBarEle.style.width = contentPanelWidth + 'px';\n                }\n            }\n        }\n        else {\n            var eventType = Browser.info.name !== 'msie' ? e.touches[0] : e;\n            this.parent.element.style.height = eventType.clientY - boundRect.top + 'px';\n            this.parent.element.style.width = (!this.parent.enableRtl) ? eventType.clientX - boundRect.left + 'px' : boundRect.right - eventType.clientX + 'px';\n        }\n        if (!this.parent.toolbarSettings.enable) {\n            this.parent.setContentHeight('', false);\n        }\n        this.parent.refreshUI();\n    };\n    Resize.prototype.stopResize = function (e) {\n        this.parent.refreshUI();\n        this.unwireResizeEvents();\n        var args = { event: e, requestType: 'editor' };\n        this.parent.trigger(events.resizeStop, args);\n    };\n    Resize.prototype.getEventType = function (e) {\n        return (e.indexOf('mouse') > -1) ? 'mouse' : 'touch';\n    };\n    Resize.prototype.isMouseEvent = function (e) {\n        var isMouse = false;\n        if (this.getEventType(e.type) === 'mouse' || (!isNullOrUndefined(e.pointerType) &&\n            this.getEventType(e.pointerType) === 'mouse')) {\n            isMouse = true;\n        }\n        return isMouse;\n    };\n    Resize.prototype.wireResizeEvents = function () {\n        EventHandler.add(document, 'mousemove', this.performResize, this);\n        EventHandler.add(document, 'mouseup', this.stopResize, this);\n        this.touchMoveEvent = (Browser.info.name === 'msie') ? 'pointermove' : 'touchmove';\n        this.touchEndEvent = (Browser.info.name === 'msie') ? 'pointerup' : 'touchend';\n        EventHandler.add(document, this.touchMoveEvent, this.performResize, this);\n        EventHandler.add(document, this.touchEndEvent, this.stopResize, this);\n    };\n    Resize.prototype.unwireResizeEvents = function () {\n        EventHandler.remove(document, 'mousemove', this.performResize);\n        EventHandler.remove(document, 'mouseup', this.stopResize);\n        EventHandler.remove(document, this.touchMoveEvent, this.performResize);\n        EventHandler.remove(document, this.touchEndEvent, this.stopResize);\n    };\n    Resize.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    Resize.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.renderResizable);\n        this.parent.element.classList.remove(classes.CLS_RTE_RES_CNT);\n        EventHandler.remove(this.resizer, 'mousedown', this.resizeStart);\n        EventHandler.remove(this.resizer, this.touchStartEvent, this.resizeStart);\n        if (this.resizer) {\n            detach(this.resizer);\n        }\n        this.parent.off(events.destroy, this.destroy);\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Resize.prototype.getModuleName = function () {\n        return 'resize';\n    };\n    return Resize;\n}());\nexport { Resize };\n","import { Browser, detach, closest, isNullOrUndefined as isNOU, EventHandler, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ContextMenu, DetailsView, FileManager as EJ2FileManager } from '@syncfusion/ej2-filemanager';\nimport { NavigationPane, Toolbar } from '@syncfusion/ej2-filemanager';\nimport { RenderType } from '../base/enum';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { dispatchEvent } from '../base/util';\n/**\n * `FileManager` module is used to display the directories and images inside the editor.\n */\nvar FileManager = /** @class */ (function () {\n    function FileManager(parent, locator) {\n        EJ2FileManager.Inject(ContextMenu, DetailsView, NavigationPane, Toolbar);\n        this.parent = parent;\n        this.i10n = locator.getService('rteLocale');\n        this.dialogRenderObj = locator.getService('dialogRenderObject');\n        this.rendererFactory = locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    FileManager.prototype.initialize = function () {\n        this.parent.fileManagerModule = this;\n        this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n    };\n    FileManager.prototype.render = function (e) {\n        var _this = this;\n        var dlgInsert;\n        if (e.selectNode && e.selectNode[0].nodeName === 'IMG') {\n            dlgInsert = this.parent.localeObj.getConstant('dialogUpdate');\n        }\n        else {\n            dlgInsert = this.i10n.getConstant('dialogInsert');\n        }\n        var dlgHeader = this.parent.localeObj.getConstant('fileDialogHeader');\n        var dlgCancel = this.i10n.getConstant('dialogCancel');\n        this.dlgButtons = [{\n                click: this.insertImageUrl.bind(this),\n                buttonModel: { content: dlgInsert, cssClass: 'e-flat e-insertImage', isPrimary: true }\n            },\n            {\n                // eslint-disable-next-line\n                click: function (e) {\n                    _this.cancelDialog();\n                },\n                buttonModel: { cssClass: 'e-flat e-cancel', content: dlgCancel }\n            }];\n        this.dlgButtons[0].buttonModel.disabled = true;\n        this.selectObj = { selection: e.selection, args: e.args, selectParent: e.selectParent };\n        var dlgTarget = this.parent.createElement('div', {\n            className: 'e-rte-file-manager-dialog', id: this.parent.getID() + '_file-manager-dialog',\n            attrs: { 'aria-owns': this.parent.getID() }\n        });\n        document.body.appendChild(dlgTarget);\n        this.fileWrap = this.parent.createElement('div', {\n            id: this.parent.getID() + '_rte-file-manager', className: 'e-img-file-wrap'\n        });\n        dlgTarget.appendChild(this.fileWrap);\n        dlgTarget.appendChild(this.getInputUrlElement());\n        var dialogModel = {\n            visible: false,\n            isModal: true, header: dlgHeader,\n            target: document.body, locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl, cssClass: classes.CLS_RTE_ELEMENTS,\n            animationSettings: { effect: 'None' },\n            showCloseIcon: true, closeOnEscape: true, width: '720px', height: 'auto',\n            position: { X: 'center', Y: 'center' },\n            buttons: this.dlgButtons,\n            created: this.renderFileManager.bind(this),\n            close: function (e) {\n                _this.parent.isBlur = false;\n                if (e && e.event.returnValue) {\n                    _this.selectObj.selection.restore();\n                }\n                _this.destroyComponents();\n                _this.dialogRenderObj.close(e);\n            }\n        };\n        this.dialogObj = this.dialogRenderObj.render(dialogModel);\n        this.dialogObj.createElement = this.parent.createElement;\n        this.dialogObj.appendTo(dlgTarget);\n        this.dialogObj.show(Browser.isDevice ? true : false);\n        this.setCssClass({ cssClass: this.parent.cssClass });\n    };\n    // eslint-disable-next-line @typescript-eslint/tslint/config\n    FileManager.prototype.setCssClass = function (e) {\n        if (this.dialogObj && e.cssClass) {\n            if (isNullOrUndefined(e.oldCssClass)) {\n                this.dialogObj.setProperties({ cssClass: (this.dialogObj.cssClass + ' ' + e.cssClass).trim() });\n            }\n            else {\n                this.dialogObj.setProperties({ cssClass: (this.dialogObj.cssClass.replace(e.oldCssClass, '').trim() + ' ' + e.cssClass).trim() });\n            }\n        }\n    };\n    FileManager.prototype.renderFileManager = function () {\n        var _this = this;\n        // eslint-disable-next-line\n        var proxy = this;\n        this.fileObj = new EJ2FileManager({\n            allowMultiSelection: false,\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            path: this.parent.fileManagerSettings.path,\n            view: this.parent.fileManagerSettings.view,\n            enablePersistence: this.parent.enablePersistence,\n            cssClass: this.parent.fileManagerSettings.cssClass,\n            sortOrder: this.parent.fileManagerSettings.sortOrder,\n            ajaxSettings: this.parent.fileManagerSettings.ajaxSettings,\n            showThumbnail: this.parent.fileManagerSettings.showThumbnail,\n            rootAliasName: this.parent.fileManagerSettings.rootAliasName,\n            uploadSettings: this.parent.fileManagerSettings.uploadSettings,\n            searchSettings: this.parent.fileManagerSettings.searchSettings,\n            toolbarSettings: this.parent.fileManagerSettings.toolbarSettings,\n            showHiddenItems: this.parent.fileManagerSettings.showHiddenItems,\n            allowDragAndDrop: this.parent.fileManagerSettings.allowDragAndDrop,\n            showFileExtension: this.parent.fileManagerSettings.showFileExtension,\n            detailsViewSettings: this.parent.fileManagerSettings.detailsViewSettings,\n            contextMenuSettings: this.parent.fileManagerSettings.contextMenuSettings,\n            navigationPaneSettings: this.parent.fileManagerSettings.navigationPaneSettings,\n            beforeSend: this.parent.fileManagerSettings.beforeSend,\n            fileSelect: function (e) {\n                var selectedFile = e.fileDetails;\n                if (selectedFile.isFile && proxy.parent.insertImageSettings.allowedTypes.indexOf(selectedFile.type) > -1) {\n                    proxy.inputUrl.value = proxy.parent.fileManagerSettings.ajaxSettings.getImageUrl + '?path=' +\n                        (selectedFile.filterPath && selectedFile.filterPath.replace(/\\\\/g, '/')) + selectedFile.name;\n                    _this.dlgButtons[0].buttonModel.disabled = false;\n                }\n                else {\n                    proxy.inputUrl.value = '';\n                    _this.dlgButtons[0].buttonModel.disabled = true;\n                }\n                _this.dialogObj.buttons = _this.dlgButtons;\n            },\n            created: function () {\n                _this.inputUrl.removeAttribute('disabled');\n            },\n            success: function () {\n                _this.fileObj.refreshLayout();\n            }\n        });\n        if (Browser.isDevice) {\n            this.fileObj.height = '85%';\n        }\n        this.fileObj.appendTo(this.fileWrap);\n        EventHandler.add(this.parent.element.ownerDocument, 'mousedown', this.onDocumentClick, this);\n    };\n    FileManager.prototype.getInputUrlElement = function () {\n        var imgUrl = this.parent.createElement('div', { className: 'imgUrl' });\n        var urlLabel = this.parent.createElement('div', { className: 'e-rte-label' });\n        urlLabel.innerHTML = '<label for=\"rteSample_img_url\">' + this.i10n.getConstant('linkWebUrl') + '</label>';\n        imgUrl.appendChild(urlLabel);\n        var placeUrl = this.i10n.getConstant('imageUrl');\n        this.inputUrl = this.parent.createElement('input', {\n            className: 'e-input e-img-url',\n            attrs: { placeholder: placeUrl, spellcheck: 'false', disabled: 'true' }\n        });\n        imgUrl.appendChild(this.inputUrl);\n        return imgUrl;\n    };\n    // eslint-disable-next-line\n    FileManager.prototype.insertImageUrl = function (e) {\n        var url = this.inputUrl.value;\n        if (this.parent.formatter.getUndoRedoStack().length === 0) {\n            this.parent.formatter.saveData();\n        }\n        if (url !== '') {\n            if (this.parent.editorMode === 'HTML' &&\n                isNOU(closest(this.selectObj.selection.range.startContainer.parentNode, '#' + this.contentModule.getPanel().id))) {\n                this.contentModule.getEditPanel().focus();\n                var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n                this.selectObj.selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n                this.selectObj.selectParent = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n            }\n            var regex = /[\\w-]+.(jpg|png|jpeg|gif)/g;\n            var matchUrl = (!isNOU(url.match(regex)) && this.parent.editorMode === 'HTML') ? url.match(regex)[0] : '';\n            var value = {\n                cssClass: (this.parent.insertImageSettings.display === 'inline' ? classes.CLS_IMGINLINE : classes.CLS_IMGBREAK),\n                url: url, selection: this.selectObj.selection, altText: matchUrl, selectParent: this.selectObj.selectParent,\n                width: {\n                    width: this.parent.insertImageSettings.width, minWidth: this.parent.insertImageSettings.minWidth,\n                    maxWidth: this.parent.getInsertImgMaxWidth()\n                },\n                height: {\n                    height: this.parent.insertImageSettings.height, minHeight: this.parent.insertImageSettings.minHeight,\n                    maxHeight: this.parent.insertImageSettings.maxHeight\n                }\n            };\n            this.parent.formatter.process(this.parent, this.selectObj.args, this.selectObj.args.originalEvent, value);\n            this.dialogObj.hide({ returnValue: false });\n        }\n    };\n    FileManager.prototype.cancelDialog = function () {\n        this.parent.isBlur = false;\n        this.dialogObj.hide({ returnValue: true });\n    };\n    FileManager.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        var prevEle = target.nodeName !== '#document' && !isNOU(target.previousElementSibling) && target.previousElementSibling;\n        if (!isNOU(this.dialogObj) &&\n            (!closest(target, '#' + this.parent.getID() + '_file-manager-dialog') &&\n                !closest(target, '#' + this.parent.getID() + '_rte-file-manager_tb_sortby-popup') &&\n                !closest(target, '#' + this.parent.getID() + '_rte-file-manager_tb_view-popup') &&\n                !closest(target, '#' + this.parent.getID() + '_rte-file-manager_contextmenu') &&\n                (!(!isNOU(closest(target, '.e-contextmenu-wrapper')) &&\n                    closest(target, '.e-contextmenu-wrapper').querySelector('#' + this.parent.getID() + '_rte-file-manager_contextmenu'))) &&\n                (!isNOU(prevEle) && !prevEle.classList.contains('e-rte-file-manager-dialog')) &&\n                (!isNOU(prevEle) && prevEle.id !== this.parent.getID() + '_rte-file-manager_contextmenu'))) {\n            this.dialogObj.hide({ returnValue: true });\n            this.parent.isBlur = true;\n            dispatchEvent(this.parent.element, 'focusout');\n        }\n        else {\n            this.parent.isRTE = true;\n        }\n    };\n    FileManager.prototype.addEventListener = function () {\n        this.parent.on(events.initialEnd, this.initialize, this);\n        this.parent.on(events.renderFileManager, this.render, this);\n        this.parent.on(events.bindCssClass, this.setCssClass, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    };\n    FileManager.prototype.removeEventListener = function () {\n        EventHandler.remove(this.parent.element.ownerDocument, 'mousedown', this.onDocumentClick);\n        this.parent.off(events.initialEnd, this.initialize);\n        this.parent.off(events.renderFileManager, this.render);\n        this.parent.off(events.bindCssClass, this.setCssClass);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    FileManager.prototype.destroyComponents = function () {\n        if (this.fileObj) {\n            this.fileObj.destroy();\n            this.fileObj = null;\n        }\n        if (this.dialogObj) {\n            this.dialogObj.destroy();\n            detach(this.dialogObj.element);\n            this.dialogObj = null;\n        }\n    };\n    FileManager.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.destroyComponents();\n        this.removeEventListener();\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} - returns the string value\n     * @hidden\n     */\n    FileManager.prototype.getModuleName = function () {\n        return 'fileManager';\n    };\n    return FileManager;\n}());\nexport { FileManager };\n","import { Browser, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { getScrollableParent } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { addClass, removeClass } from '@syncfusion/ej2-base';\n/**\n * `FullScreen` module is used to maximize and minimize screen\n */\nvar FullScreen = /** @class */ (function () {\n    function FullScreen(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * showFullScreen method\n     *\n     * @param {MouseEvent} event - specifies the mouse event\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    FullScreen.prototype.showFullScreen = function (event) {\n        var _this = this;\n        if (this.parent.toolbarSettings.enable === true && this.parent.editorMode !== 'Markdown'\n            && !isNOU(this.parent.quickToolbarModule)) {\n            this.parent.quickToolbarModule.hideQuickToolbars();\n        }\n        if (this.parent.showTooltip && !isNOU(document.querySelector('.e-tooltip-wrap'))) {\n            this.parent.notify(events.maximizeMinimizeClick, { args: event });\n        }\n        this.scrollableParent = getScrollableParent(this.parent.element);\n        if (!this.parent.element.classList.contains(classes.CLS_FULL_SCREEN)) {\n            var evenArgs = {\n                cancel: false,\n                requestType: 'Maximize',\n                targetItem: 'Maximize',\n                args: event\n            };\n            this.parent.trigger(events.actionBegin, evenArgs, function (beginEventArgs) {\n                if (!beginEventArgs.cancel) {\n                    if (_this.parent.toolbarSettings.enableFloating &&\n                        !_this.parent.inlineMode.enable && _this.parent.toolbarSettings.enable) {\n                        _this.parent.getToolbarElement().style.width = '100%';\n                        _this.parent.getToolbarElement().style.top = '0px';\n                    }\n                    _this.parent.element.classList.add(classes.CLS_FULL_SCREEN);\n                    _this.toggleParentOverflow(true);\n                    var isExpand = _this.parent.element.querySelectorAll('.e-toolbar-extended.e-popup-open').length > 0 ? true : false;\n                    _this.parent.setContentHeight(null, isExpand);\n                    if (_this.parent.toolbarModule) {\n                        if (!_this.parent.getBaseToolbarObject().toolbarObj.items[0].properties) {\n                            _this.parent.getBaseToolbarObject().toolbarObj.removeItems(0);\n                        }\n                        if (Browser.isDevice) {\n                            _this.parent.toolbarModule.removeFixedTBarClass();\n                        }\n                        _this.parent.toolbarModule.updateItem({\n                            targetItem: 'Maximize',\n                            updateItem: 'Minimize',\n                            baseToolbar: _this.parent.getBaseToolbarObject()\n                        });\n                    }\n                    _this.parent.refreshUI();\n                    _this.parent.trigger(events.actionComplete, { requestType: 'Maximize', targetItem: 'Maximize', args: event });\n                }\n            });\n        }\n    };\n    /**\n     * hideFullScreen method\n     *\n     * @param {MouseEvent} event - specifies the mouse event\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    FullScreen.prototype.hideFullScreen = function (event) {\n        var _this = this;\n        if (this.parent.toolbarSettings.enable === true && this.parent.editorMode !== 'Markdown'\n            && !isNOU(this.parent.quickToolbarModule)) {\n            this.parent.quickToolbarModule.hideQuickToolbars();\n        }\n        if (this.parent.showTooltip && !isNOU(document.querySelector('.e-tooltip-wrap'))) {\n            this.parent.notify(events.maximizeMinimizeClick, { args: event });\n        }\n        if (this.parent.element.classList.contains(classes.CLS_FULL_SCREEN)) {\n            var evenArgs = {\n                cancel: false,\n                requestType: 'Minimize',\n                targetItem: 'Minimize',\n                args: event\n            };\n            this.parent.trigger(events.actionBegin, evenArgs, function (beginEventArgs) {\n                if (!beginEventArgs.cancel) {\n                    _this.parent.element.classList.remove(classes.CLS_FULL_SCREEN);\n                    var elem = document.querySelectorAll('.e-rte-overflow');\n                    for (var i = 0; i < elem.length; i++) {\n                        removeClass([elem[i]], ['e-rte-overflow']);\n                    }\n                    var isExpand = _this.parent.element.querySelectorAll('.e-toolbar-extended.e-popup-open').length > 0 ? true : false;\n                    _this.parent.setContentHeight(null, isExpand);\n                    if (_this.parent.toolbarModule) {\n                        if (!_this.parent.getBaseToolbarObject().toolbarObj.items[0].properties) {\n                            _this.parent.getBaseToolbarObject().toolbarObj.removeItems(0);\n                        }\n                        _this.parent.toolbarModule.updateItem({\n                            targetItem: 'Minimize',\n                            updateItem: 'Maximize',\n                            baseToolbar: _this.parent.getBaseToolbarObject()\n                        });\n                        if (Browser.isDevice && _this.parent.inlineMode.enable) {\n                            _this.parent.toolbarModule.addFixedTBarClass();\n                        }\n                    }\n                    _this.parent.trigger(events.actionComplete, { requestType: 'Minimize', targetItem: 'Minimize', args: event });\n                }\n            });\n        }\n    };\n    // eslint-disable-next-line\n    FullScreen.prototype.toggleParentOverflow = function (isAdd) {\n        if (isNOU(this.scrollableParent)) {\n            return;\n        }\n        for (var i = 0; i < this.scrollableParent.length; i++) {\n            if (this.scrollableParent[i].nodeName === '#document') {\n                var elem = document.querySelector('body');\n                addClass([elem], ['e-rte-overflow']);\n            }\n            else {\n                var elem = this.scrollableParent[i];\n                addClass([elem], ['e-rte-overflow']);\n            }\n        }\n    };\n    FullScreen.prototype.onKeyDown = function (event) {\n        var originalEvent = event.args;\n        switch (originalEvent.action) {\n            case 'full-screen':\n                this.showFullScreen(event.args);\n                originalEvent.preventDefault();\n                break;\n            case 'escape':\n                this.hideFullScreen(event.args);\n                originalEvent.preventDefault();\n                break;\n        }\n    };\n    FullScreen.prototype.addEventListener = function () {\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.moduleDestroy, this.moduleDestroy, this);\n    };\n    FullScreen.prototype.removeEventListener = function () {\n        this.parent.off(events.keyDown, this.onKeyDown);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.moduleDestroy, this.moduleDestroy);\n    };\n    /**\n     * destroy method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    FullScreen.prototype.destroy = function () {\n        if (isNOU(this.parent)) {\n            return;\n        }\n        if (this.parent.element.classList.contains(classes.CLS_FULL_SCREEN)) {\n            this.toggleParentOverflow(false);\n        }\n        var elem = document.querySelectorAll('.e-rte-overflow');\n        for (var i = 0; i < elem.length; i++) {\n            removeClass([elem[i]], ['e-rte-overflow']);\n        }\n        this.removeEventListener();\n    };\n    FullScreen.prototype.moduleDestroy = function () {\n        this.parent = null;\n    };\n    return FullScreen;\n}());\nexport { FullScreen };\n","import { addClass, isNullOrUndefined as isNOU, removeClass } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nvar FormatPainter = /** @class */ (function () {\n    function FormatPainter(parent) {\n        this.isSticky = false;\n        this.isActive = false;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    FormatPainter.prototype.addEventListener = function () {\n        this.parent.on(events.formatPainterClick, this.toolbarClick, this);\n        this.parent.on(events.formatPainterDoubleClick, this.toolbarDoubleClick, this);\n        this.parent.on(events.editAreaClick, this.editAreaClick, this);\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    };\n    FormatPainter.prototype.toolbarClick = function (clickargs) {\n        this.parent.focusIn();\n        if (!this.isSticky) {\n            this.isActive = true;\n            this.actionHandler(clickargs, 'click');\n        }\n        else {\n            // Handling the format painter double click toolbar esape action\n            clickargs.args.action = 'escape';\n            this.actionHandler(clickargs, 'keyBoard');\n        }\n        if (this.parent.quickToolbarModule && !isNOU(this.parent.quickToolbarSettings.text) &&\n            this.parent.element.ownerDocument.contains(this.parent.quickToolbarModule.textQTBar.element)) {\n            this.parent.quickToolbarModule.textQTBar.hidePopup();\n        }\n    };\n    FormatPainter.prototype.toolbarDoubleClick = function (args) {\n        this.isActive = true;\n        this.isSticky = true;\n        this.parent.focusIn();\n        this.actionHandler(args, 'dbClick');\n    };\n    FormatPainter.prototype.onKeyDown = function (event) {\n        var originalEvent = event.args;\n        if ((originalEvent.altKey && originalEvent.shiftKey && (originalEvent.action === 'format-copy' || originalEvent.action === 'format-paste'))\n            || (originalEvent.action === 'escape' && (this.previousAction === 'format-copy' || this.previousAction === 'format-paste'))) {\n            if ((originalEvent.action === 'format-copy' || originalEvent.action === 'format-paste')) {\n                originalEvent.stopPropagation();\n            }\n            this.actionHandler(event, 'keyBoard');\n        }\n    };\n    FormatPainter.prototype.actionHandler = function (event, type) {\n        var action;\n        var isKeyboard = false;\n        var originalEvent;\n        var args;\n        var item;\n        switch (type) {\n            case 'dbClick':\n                args = event.args;\n                item = args.item;\n                originalEvent = event.args.originalEvent;\n                action = 'format-copy';\n                break;\n            case 'keyBoard':\n                args = null;\n                originalEvent = event.args;\n                isKeyboard = true;\n                action = event.args.action;\n                if (action === 'escape') {\n                    this.isSticky = false;\n                    this.isActive = false;\n                }\n                break;\n            case 'click':\n                args = event.args;\n                item = args.item;\n                originalEvent = event.args.originalEvent;\n                action = 'format-copy';\n                break;\n            case 'docClick':\n                originalEvent = event;\n                action = 'format-paste';\n                break;\n        }\n        this.updateCursor(isKeyboard);\n        var enable = type === 'docClick' || action === 'escape' ? false : true;\n        this.updateToolbarBtn(enable);\n        if (isNOU(item)) {\n            item = {\n                command: 'FormatPainter',\n                subCommand: 'FormatPainter'\n            };\n        }\n        var actionBeginArgs = {\n            requestType: 'FormatPainter', originalEvent: originalEvent, name: action, item: item\n        };\n        var value = {\n            formatPainterAction: action\n        };\n        this.parent.formatter.process(this.parent, actionBeginArgs, originalEvent, value);\n        this.previousAction = action;\n    };\n    FormatPainter.prototype.updateCursor = function (isKeyboard) {\n        if (!this.parent.inputElement.classList.contains('e-rte-cursor-brush') && !isKeyboard) {\n            addClass([this.parent.inputElement], 'e-rte-cursor-brush');\n        }\n        else if (!this.isSticky) {\n            removeClass([this.parent.inputElement], 'e-rte-cursor-brush');\n        }\n    };\n    FormatPainter.prototype.updateToolbarBtn = function (enable) {\n        if (!isNOU(this.parent.element.querySelector('.e-rte-format-painter'))) {\n            var toolbarBtn = this.parent.element.querySelector('.e-rte-format-painter').parentElement.parentElement;\n            if (enable) {\n                addClass([toolbarBtn], 'e-active');\n            }\n            else if (!this.isSticky) {\n                removeClass([toolbarBtn], 'e-active');\n            }\n        }\n    };\n    FormatPainter.prototype.editAreaClick = function (args) {\n        if (this.isActive) {\n            if (!this.isSticky) {\n                this.isActive = false;\n            }\n            this.actionHandler(args, 'docClick');\n            this.updateToolbarBtn(false);\n        }\n    };\n    FormatPainter.prototype.destroy = function () {\n        if (isNOU(this.parent) || this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.formatPainterClick, this.toolbarClick);\n        this.parent.off(events.editAreaClick, this.editAreaClick);\n        this.parent.off(events.formatPainterDoubleClick, this.toolbarDoubleClick);\n        this.parent.off(events.keyDown, this.onKeyDown);\n        this.parent.off(events.destroy, this.destroy);\n        if (!isNOU(this.parent.formatter.editorManager.formatPainterEditor)) {\n            this.parent.formatter.editorManager.formatPainterEditor.destroy();\n        }\n        this.parent = undefined;\n        this.isSticky = undefined;\n        this.isActive = undefined;\n        this.previousAction = undefined;\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    FormatPainter.prototype.getModuleName = function () {\n        return 'formatPainter';\n    };\n    return FormatPainter;\n}());\nexport { FormatPainter };\n","import * as events from '../base/constant';\nimport { detach, addClass, isNullOrUndefined as isNOU, removeClass, closest, createElement, EventHandler } from '@syncfusion/ej2-base';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { BaseToolbar } from './base-toolbar';\nimport { TextBox } from '@syncfusion/ej2-inputs';\nvar EmojiPicker = /** @class */ (function () {\n    function EmojiPicker(parent, serviceLocator) {\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.i10n = serviceLocator.getService('rteLocale');\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.baseToolbar = new BaseToolbar(this.parent, this.locator);\n        this.addEventListener();\n    }\n    /**\n     * Destroys the Count.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    EmojiPicker.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    EmojiPicker.prototype.addEventListener = function () {\n        this.parent.on(events.emojiPicker, this.toolbarClick, this);\n        this.parent.on(events.docClick, this.docClick, this);\n        this.parent.on(events.keyDown, this.onkeyPress, this);\n        this.parent.on(events.keyUp, this.onkeyUp, this);\n        this.parent.on(events.contentscroll, this.contentscroll, this);\n        this.parent.on(events.scroll, this.contentscroll, this);\n    };\n    // eslint-disable-next-line\n    EmojiPicker.prototype.toolbarClick = function (args) {\n        var _this = this;\n        var _a, _b;\n        var spanElement;\n        if (!isNOU(this.parent.element.querySelector('.e-emoji'))) {\n            spanElement = this.parent.element.querySelector('.e-emoji');\n        }\n        else if (this.parent.inlineMode.enable) {\n            spanElement = this.parent.element.ownerDocument.querySelector('.e-emoji');\n        }\n        this.divElement = spanElement.closest('div');\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n        this.save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n        this.clickEvent = args.args;\n        var emojiPicker = this.parent.emojiPickerSettings.iconsSet;\n        if (this.popupObj) {\n            removeClass([this.divElement], 'e-active');\n            if (this.popupObj.element.querySelector('.e-rte-emoji-search') || !this.parent.emojiPickerSettings.showSearchBox) {\n                this.popupObj.hide();\n                return;\n            }\n            this.popupObj.hide();\n        }\n        this.popDiv = this.parent.createElement('div', { className: 'e-rte-emojipicker-popup', id: this.parent.getID() + '_emojiPicker' });\n        if (!isNOU(this.parent.getToolbar()) && !this.parent.inlineMode.enable) {\n            this.parent.getToolbar().appendChild(this.popDiv);\n        }\n        else if (this.parent.inlineMode.enable) {\n            this.parent.inputElement.appendChild(this.popDiv);\n        }\n        EventHandler.add(this.popDiv, 'keydown', this.onKeyDown, this);\n        EventHandler.add(this.popDiv, 'keyup', this.searchFilter, this);\n        var extendEle = this.parent.element.querySelector('.e-toolbar-extended');\n        var zIndex;\n        if (!isNOU(extendEle)) {\n            var computedStyle = window.getComputedStyle(extendEle);\n            zIndex = computedStyle.getPropertyValue('z-index');\n        }\n        else {\n            zIndex = '10001';\n        }\n        var target;\n        var xValue;\n        var yValue;\n        if (!isNOU(args.args) && !this.parent.inlineMode.enable &&\n            isNOU(this.parent.quickToolbarSettings.text)) {\n            target = args.args.originalEvent.target;\n            target = target.classList.contains('e-toolbar-item') ? target.firstChild : target.parentElement;\n            xValue = 'left';\n            yValue = 'bottom';\n        }\n        else if (isNOU(args.x) && isNOU(args.y) && !this.parent.inlineMode.enable && isNOU(this.parent.quickToolbarSettings.text)) {\n            target = this.parent.inputElement;\n            if (this.parent.contentModule.getDocument().getSelection().rangeCount > 0) {\n                var coordinates = this.getCoordinates();\n                xValue = coordinates.left;\n                yValue = coordinates.top;\n            }\n        }\n        else if (isNOU(args.x) && isNOU(args.y) && (this.parent.inlineMode.enable || !isNOU(this.parent.quickToolbarSettings.text))) {\n            this.parent.notify(events.hidePopup, {});\n            if (this.parent.contentModule.getDocument().getSelection().rangeCount > 0) {\n                var coordinates = this.getCoordinates();\n                xValue = coordinates.left;\n                yValue = coordinates.top;\n            }\n        }\n        else {\n            target = this.parent.inputElement;\n            xValue = args.x;\n            yValue = args.y;\n        }\n        this.popupObj = new Popup(this.popDiv, {\n            targetType: 'relative',\n            relateTo: target,\n            collision: { X: 'fit', Y: 'none' },\n            offsetY: 8,\n            viewPortElement: this.parent.element,\n            position: { X: xValue, Y: yValue },\n            enableRtl: this.parent.enableRtl,\n            zIndex: parseInt(zIndex, 10) + 1,\n            actionOnScroll: 'hide',\n            // eslint-disable-next-line\n            close: function (event) {\n                _this.parent.isBlur = false;\n                _this.popupObj.destroy();\n                detach(_this.popupObj.element);\n                _this.popupObj = null;\n            }\n        });\n        addClass([this.popupObj.element], 'e-popup-open');\n        this.popupObj.refreshPosition(target);\n        // header search element\n        if ((!isNOU(args.args) || (isNOU(args.x) && isNOU(args.y))) &&\n            this.parent.emojiPickerSettings.showSearchBox) {\n            var inputEle = createElement('input', { id: 'e-rte-emoji-search', className: 'e-rte-emoji-search' });\n            this.popDiv.append(inputEle);\n            var inputobj = new TextBox({\n                placeholder: this.i10n.getConstant('emojiPickerTypeToFind'),\n                showClearButton: true\n            });\n            inputobj.appendTo(inputEle);\n            inputEle.focus();\n        }\n        var closeIcon = this.popupObj.element.querySelector('.e-clear-icon');\n        if (!isNOU(closeIcon)) {\n            EventHandler.add(closeIcon, 'mousedown', this.searchFilter, this);\n        }\n        // Header emoji toolbar div\n        var emojiToolBar = this.parent.createElement('div', { className: 'e-rte-emojipicker-toolbar' });\n        this.popDiv.appendChild(emojiToolBar);\n        var pushToolBar = [];\n        for (var i = 0; i < this.parent.emojiPickerSettings.iconsSet.length; i++) {\n            if (!isNOU(this.parent.emojiPickerSettings.iconsSet[i].iconCss)) {\n                pushToolBar.push({ prefixIcon: this.parent.emojiPickerSettings.iconsSet[i].iconCss, htmlAttributes: (_a = {}, _a['title'] = this.parent.emojiPickerSettings.iconsSet[i].name, _a) });\n            }\n            else {\n                pushToolBar.push({ text: '&#x' + this.parent.emojiPickerSettings.iconsSet[i].code + ';', htmlAttributes: (_b = {}, _b['title'] = this.parent.emojiPickerSettings.iconsSet[i].name, _b) });\n            }\n        }\n        var toolbarObj = new Toolbar({\n            items: pushToolBar,\n            clicked: this.emojiToolbarClick.bind(this)\n        });\n        toolbarObj.appendTo(emojiToolBar);\n        // emoji btn div\n        var emojiBtnDiv = this.parent.createElement('div', { className: 'e-rte-emojipicker-btn' });\n        this.popDiv.appendChild(emojiBtnDiv);\n        var height;\n        var popupBorder = window.getComputedStyle(this.popDiv);\n        if ((isNOU(args.args) && !(isNOU(args.x) && isNOU(args.y))) ||\n            !this.parent.emojiPickerSettings.showSearchBox) {\n            height = (this.popDiv.getBoundingClientRect().height - emojiToolBar.getBoundingClientRect().height - (2 * parseFloat(popupBorder.borderWidth))) + 'px';\n            emojiBtnDiv.style.setProperty('height', height, 'important');\n        }\n        else {\n            var inputELe = this.parent.element.querySelector('.e-rte-emoji-search').parentElement;\n            var getComputedStyle_1 = window.getComputedStyle(inputELe);\n            height = (this.popDiv.getBoundingClientRect().height - emojiToolBar.getBoundingClientRect().height\n                - inputELe.getBoundingClientRect().height\n                - parseFloat(getComputedStyle_1.marginTop) - parseFloat(getComputedStyle_1.marginBottom)\n                - (2 * parseFloat(popupBorder.borderWidth))) + 'px';\n            emojiBtnDiv.style.setProperty('height', height, 'important');\n        }\n        for (var i = 0; i < emojiPicker.length; i++) {\n            var emojiGroupDiv = this.parent.createElement('div', { className: 'e-rte-emojipicker-group' });\n            emojiBtnDiv.appendChild(emojiGroupDiv);\n            var emojiName = this.parent.createElement('div', { className: 'e-rte-emojipicker-name' });\n            emojiName.innerText = this.parent.emojiPickerSettings.iconsSet[i].name;\n            emojiName.setAttribute('aria-label', this.parent.emojiPickerSettings.iconsSet[i].name);\n            emojiGroupDiv.appendChild(emojiName);\n            var emojiBtn = this.parent.createElement('div', { className: 'e-rte-emojipickerbtn-group' });\n            emojiGroupDiv.appendChild(emojiBtn);\n            for (var j = 0; j < emojiPicker[i].icons.length; j++) {\n                var button = this.parent.createElement('button', { className: 'e-btn ' + ' ' + 'e-control' });\n                button.innerHTML = this.buttoncode(this.parent.emojiPickerSettings.iconsSet[i].icons[j].code);\n                button.setAttribute('aria-label', (this.parent.emojiPickerSettings.iconsSet[i].icons[j].desc));\n                button.setAttribute('title', (this.parent.emojiPickerSettings.iconsSet[i].icons[j].desc));\n                emojiBtn.appendChild(button);\n                if (button.innerHTML.length > 2) {\n                    button.style.fontSize = '17px';\n                }\n            }\n        }\n        EventHandler.add(emojiBtnDiv, 'scroll', this.scrollEvent, this);\n        EventHandler.add(emojiBtnDiv, 'click', this.emojiBtnClick, this);\n        var emojiButtons = this.parent.element.querySelectorAll('.e-rte-emojipicker-btn button');\n        if (isNOU(this.parent.element.querySelector('.e-rte-emoji-search')) && !isNOU(args.args)) {\n            emojiButtons[0].focus();\n            addClass([emojiButtons[0]], 'e-focus');\n        }\n        var popup = this.parent.element.querySelector('.e-rte-emojipicker-btn');\n        var toolbarName = this.parent.element.querySelectorAll('.e-rte-emojipicker-toolbar button');\n        var scrollTop;\n        if (!isNOU(popup)) {\n            scrollTop = Math.round(popup.scrollTop);\n        }\n        if (scrollTop < toolbarName[0].offsetHeight) {\n            addClass([toolbarName[0]], 'e-selected');\n        }\n        if (this.popupObj) {\n            addClass([this.divElement], 'e-active');\n        }\n    };\n    EmojiPicker.prototype.buttoncode = function (value) {\n        var valueLength = value.split('-');\n        // eslint-disable-next-line\n        var joinedEmoji = valueLength.map(function (cp) { return String.fromCodePoint(parseInt(cp, 16)); }).join('\\u200D');\n        return joinedEmoji;\n    };\n    EmojiPicker.prototype.docClick = function (e) {\n        var target = e.args.target;\n        if (target && target.classList && ((this.popupObj && !closest(target, '[id=' + '\\'' + this.popupObj.element.id + '\\'' + ']')))\n            && (!target.classList.contains('e-emoji') && !target.classList.contains('e-toolbar-item'))) {\n            if (this.popupObj) {\n                removeClass([this.divElement], 'e-active');\n                this.popupObj.hide();\n            }\n        }\n    };\n    EmojiPicker.prototype.scrollEvent = function () {\n        var popup = this.parent.element.querySelector('.e-rte-emojipicker-btn');\n        var emojiSet = this.parent.element.querySelectorAll('.e-rte-emojipicker-group');\n        var toolbarName = this.parent.element.querySelectorAll('.e-rte-emojipicker-toolbar button');\n        var scrollTop;\n        if (!isNOU(popup)) {\n            scrollTop = Math.round(popup.scrollTop);\n        }\n        var firstSetWidth = 0;\n        for (var j = 0; j < toolbarName.length; j++) {\n            if (scrollTop < toolbarName[0].offsetHeight) {\n                if (!isNOU(toolbarName[j + 1])) {\n                    removeClass([toolbarName[j + 1]], 'e-selected');\n                }\n                addClass([toolbarName[0]], 'e-selected');\n            }\n        }\n        for (var i = 0; i < emojiSet.length; i++) {\n            // eslint-disable-next-line\n            firstSetWidth += Math.round(emojiSet[i].offsetHeight);\n            if (scrollTop >= firstSetWidth) {\n                for (var k = 0; k < toolbarName.length; k++) {\n                    /* eslint-disable */\n                    if (toolbarName[k].classList.contains('e-selected')) {\n                        removeClass([toolbarName[k]], 'e-selected');\n                    }\n                    /* eslint-enable */\n                }\n                if (!isNOU(toolbarName[i + 1])) {\n                    addClass([toolbarName[i + 1]], 'e-selected');\n                }\n            }\n        }\n    };\n    EmojiPicker.prototype.contentscroll = function () {\n        if (isNOU(this.clickEvent) && this.popupObj) {\n            removeClass([this.divElement], 'e-active');\n            this.popupObj.hide();\n            return;\n        }\n    };\n    EmojiPicker.prototype.emojiToolbarClick = function (e) {\n        var args = {\n            // eslint-disable-next-line\n            text: e.item.htmlAttributes.title,\n        };\n        var currentEleName = args.text;\n        var emojiGroups = this.parent.element.querySelectorAll('.e-rte-emojipicker-group');\n        var emojiButtons = this.parent.element.querySelectorAll('.e-rte-emojipicker-btn button');\n        var toolbarName = this.parent.element.querySelectorAll('.e-rte-emojipicker-toolbar button');\n        for (var i = 0; i < toolbarName.length; i++) {\n            /* eslint-disable */\n            if (toolbarName[i].classList.contains('e-selected')) {\n                removeClass([toolbarName[i]], 'e-selected');\n            }\n            /* eslint-enable */\n        }\n        for (var i = 0; i < emojiButtons.length; i++) {\n            if (emojiButtons[i].classList.contains('e-focus')) {\n                removeClass([emojiButtons[i]], 'e-focus');\n            }\n        }\n        // Loop through the selected elements and perform the same operation on each element\n        var emojiGroupsheight = this.parent.element.querySelector('.e-rte-emojipicker-btn');\n        var emojiHeight = 0;\n        // eslint-disable-next-line\n        emojiGroups.forEach(function (group) {\n            var childNodes = group.childNodes[0];\n            var focusBtn = group.childNodes[1].childNodes[0];\n            var ariaLabel = childNodes.getAttribute('aria-label');\n            if (currentEleName === ariaLabel) {\n                if (childNodes) {\n                    emojiGroupsheight.scrollTop = emojiHeight + 10;\n                    addClass([focusBtn], 'e-focus');\n                    focusBtn.focus();\n                }\n            }\n            else {\n                emojiHeight += group.scrollHeight;\n                removeClass([focusBtn], 'e-focus');\n            }\n        });\n    };\n    EmojiPicker.prototype.onKeyDown = function (e) {\n        // Select all emoji buttons\n        var emojiButtons = this.parent.element.querySelectorAll('.e-rte-emojipicker-btn button');\n        var emojiGroups = this.parent.element.querySelectorAll('.e-rte-emojipickerbtn-group');\n        var searchKeyHandler = this.parent.element.querySelector('.e-rte-emojisearch-btn button');\n        if (e.keyCode === 27) {\n            if (this.popupObj) {\n                removeClass([this.divElement], 'e-active');\n                this.popupObj.hide();\n            }\n        }\n        if (e.keyCode === 13) {\n            var activeEle = document.activeElement;\n            if (activeEle.classList.contains('e-btn')) {\n                this.emojiBtnClick(e);\n                e.preventDefault();\n            }\n        }\n        var srcElement = e.srcElement;\n        if (!isNOU(srcElement)) {\n            if (srcElement.classList.contains('e-rte-emoji-search') && e.keyCode === 40) {\n                for (var i = 0; i < emojiButtons.length; i++) {\n                    if (emojiButtons[i].classList.contains('e-focus')) {\n                        removeClass([emojiButtons[i]], 'e-focus');\n                    }\n                }\n            }\n        }\n        if (!isNOU(searchKeyHandler)) {\n            this.filterKeyHandler(e);\n        }\n        else {\n            for (var i = 0; i < emojiButtons.length; i++) {\n                var focusIndex = i;\n                if (emojiButtons[i].classList.contains('e-focus')) {\n                    if (e.keyCode === 40) {\n                        // Move focus to next row if there is one\n                        if (emojiButtons.length - 4 > i) {\n                            var count = 0;\n                            for (var j = 0; j < emojiGroups.length; j++) {\n                                for (var k = 0; k < emojiGroups[j].childNodes.length; k++) {\n                                    // eslint-disable-next-line\n                                    var childNodes = emojiGroups[j].childNodes[k];\n                                    if (childNodes.classList.contains('e-focus') && count !== 1) {\n                                        var currentIndex = k;\n                                        var lastChild = emojiGroups[j].lastChild;\n                                        var lastRowIndex = Math.floor((k) % 6);\n                                        var lastEleLength = emojiGroups[j].childNodes.length - 1;\n                                        var lastEleIndex = Math.floor((lastEleLength) % 6);\n                                        if (currentIndex !== -1) {\n                                            var nextRowIndex = currentIndex + 6;\n                                            if (!isNOU(emojiGroups[j].childNodes[nextRowIndex])) {\n                                                // next row has six buttons\n                                                // handle focus change here\n                                                var firstFocusEle = emojiButtons[i];\n                                                removeClass([firstFocusEle], 'e-focus');\n                                                var focusEle = emojiButtons[focusIndex += 6];\n                                                addClass([focusEle], 'e-focus');\n                                                focusEle.focus();\n                                                break;\n                                            }\n                                            else if (isNOU(emojiGroups[j].childNodes[nextRowIndex]) && !lastChild.classList.contains('e-focus') && lastEleIndex < lastRowIndex) {\n                                                var firstFocusEle = emojiButtons[i];\n                                                removeClass([firstFocusEle], 'e-focus');\n                                                var focusEle = emojiGroups[j].lastChild;\n                                                addClass([focusEle], 'e-focus');\n                                                focusEle.focus();\n                                                count = 1;\n                                                break;\n                                            }\n                                            else {\n                                                var firstFocusEle = emojiButtons[i];\n                                                removeClass([firstFocusEle], 'e-focus');\n                                                var focusEle = emojiGroups[j + 1]\n                                                    .childNodes[lastRowIndex];\n                                                addClass([focusEle], 'e-focus');\n                                                focusEle.focus();\n                                                count = 1;\n                                                break;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                            break;\n                        }\n                    }\n                    else if (e.keyCode === 38) {\n                        // Move focus to previous row if there is one\n                        if (i >= 6) {\n                            var count = 0;\n                            for (var j = 0; j < emojiGroups.length; j++) {\n                                for (var k = 0; k < emojiGroups[j].childNodes.length; k++) {\n                                    var childNodes = emojiGroups[j].childNodes[k];\n                                    if (childNodes.classList.contains('e-focus') && count !== 1) {\n                                        // eslint-disable-next-line\n                                        var currentIndex = k;\n                                        var previousRowLength = isNOU(emojiGroups[j - 1]) ? null :\n                                            emojiGroups[j - 1].childNodes.length % 6 || 6;\n                                        if (currentIndex !== -1) {\n                                            var previousRowIndex = currentIndex - 6;\n                                            if (!isNOU(emojiGroups[j].childNodes[previousRowIndex])) {\n                                                // previous row has six buttons\n                                                // handle focus change here\n                                                var firstFocusEle = emojiButtons[i];\n                                                removeClass([firstFocusEle], 'e-focus');\n                                                var focusEle = emojiButtons[focusIndex -= 6];\n                                                addClass([focusEle], 'e-focus');\n                                                focusEle.focus();\n                                                break;\n                                            }\n                                            else if (isNOU(emojiGroups[j - 1].childNodes[emojiGroups[j - 1]\n                                                .childNodes.length - (previousRowLength - k)])) {\n                                                var firstFocusEle = emojiButtons[i];\n                                                removeClass([firstFocusEle], 'e-focus');\n                                                var focusEle = emojiGroups[j - 1].lastChild;\n                                                addClass([focusEle], 'e-focus');\n                                                focusEle.focus();\n                                                count = 1;\n                                                break;\n                                            }\n                                            else {\n                                                // previous row has less than six buttons\n                                                // handle focus change here\n                                                var firstFocusEle = emojiButtons[i];\n                                                removeClass([firstFocusEle], 'e-focus');\n                                                var focusEle = emojiGroups[j - 1].childNodes[emojiGroups[j - 1].\n                                                    childNodes.length - (previousRowLength - k)];\n                                                addClass([focusEle], 'e-focus');\n                                                focusEle.focus();\n                                                count = 1;\n                                                break;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                        else {\n                            var firstFocusEle = emojiButtons[i];\n                            removeClass([firstFocusEle], 'e-focus');\n                            var focusEle = emojiButtons[focusIndex -= 1];\n                            var inputELe = this.popupObj.element.querySelector('.e-rte-emoji-search');\n                            if (isNOU(focusEle) && !isNOU(inputELe)) {\n                                inputELe.focus();\n                                break;\n                            }\n                            addClass([focusEle], 'e-focus');\n                            focusEle.focus();\n                        }\n                        break;\n                    }\n                    else if (e.keyCode === 39) {\n                        // Move focus to next button in current row\n                        if (emojiButtons.length !== i + 1) {\n                            var firstFocusEle = emojiButtons[i];\n                            removeClass([firstFocusEle], 'e-focus');\n                            var focusEle = emojiButtons[focusIndex += 1];\n                            addClass([focusEle], 'e-focus');\n                            emojiButtons[focusIndex].focus();\n                        }\n                        break;\n                    }\n                    else if (e.keyCode === 37) {\n                        // Move focus to previous button in current row\n                        if (i > 0) {\n                            var firstFocusEle = emojiButtons[i];\n                            removeClass([firstFocusEle], 'e-focus');\n                            var focusEle = emojiButtons[focusIndex -= 1];\n                            addClass([focusEle], 'e-focus');\n                            emojiButtons[focusIndex].focus();\n                        }\n                        break;\n                    }\n                }\n            }\n        }\n        if (e.keyCode === 40) {\n            var firstFocusEle = this.parent.element.querySelector('.e-focus');\n            if (isNOU(firstFocusEle)) {\n                var focusEle = emojiButtons[0];\n                addClass([focusEle], 'e-focus');\n                emojiButtons[0].focus();\n            }\n        }\n    };\n    EmojiPicker.prototype.filterKeyHandler = function (e) {\n        var emojiButtons = this.parent.element.querySelectorAll('.e-rte-emojisearch-btn button');\n        var firstFocusEle = this.parent.element.querySelector('.e-focus');\n        if (isNOU(firstFocusEle) && e.keyCode === 40) {\n            var focusEle = emojiButtons[0];\n            addClass([focusEle], 'e-focus');\n            emojiButtons[0].focus();\n        }\n        else {\n            for (var i = 0; i < emojiButtons.length; i++) {\n                var focusIndex = i;\n                // eslint-disable-next-line\n                var childNodes = emojiButtons[i];\n                if (childNodes.classList.contains('e-focus')) {\n                    if (e.keyCode === 38) {\n                        if (i >= 6) {\n                            var firstFocusEle_1 = emojiButtons[i];\n                            removeClass([firstFocusEle_1], 'e-focus');\n                            var focusEle = emojiButtons[focusIndex -= 6];\n                            addClass([focusEle], 'e-focus');\n                            focusEle.focus();\n                            break;\n                        }\n                        else {\n                            var firstFocusEle_2 = emojiButtons[i];\n                            removeClass([firstFocusEle_2], 'e-focus');\n                            var focusEle = emojiButtons[focusIndex -= 1];\n                            var inputELe = this.popupObj.element.querySelector('.e-rte-emoji-search');\n                            if (isNOU(focusEle) && !isNOU(inputELe)) {\n                                inputELe.focus();\n                                break;\n                            }\n                            addClass([focusEle], 'e-focus');\n                            focusEle.focus();\n                        }\n                    }\n                    else if (e.keyCode === 40) {\n                        if (emojiButtons.length - 6 > i) {\n                            var firstFocusEle_3 = emojiButtons[i];\n                            removeClass([firstFocusEle_3], 'e-focus');\n                            var focusEle = emojiButtons[focusIndex += 6];\n                            addClass([focusEle], 'e-focus');\n                            focusEle.focus();\n                            break;\n                        }\n                    }\n                    else if (e.keyCode === 39) {\n                        if (emojiButtons.length !== i + 1) {\n                            var firstFocusEle_4 = emojiButtons[i];\n                            removeClass([firstFocusEle_4], 'e-focus');\n                            var focusEle = emojiButtons[focusIndex += 1];\n                            addClass([focusEle], 'e-focus');\n                            emojiButtons[focusIndex].focus();\n                        }\n                        break;\n                    }\n                    else if (e.keyCode === 37) {\n                        if (i > 0) {\n                            var firstFocusEle_5 = emojiButtons[i];\n                            removeClass([firstFocusEle_5], 'e-focus');\n                            var focusEle = emojiButtons[focusIndex -= 1];\n                            addClass([focusEle], 'e-focus');\n                            emojiButtons[focusIndex].focus();\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n    };\n    EmojiPicker.prototype.searchFilter = function (e, value) {\n        var inputElement = this.parent.element.querySelector('.e-rte-emoji-search');\n        var contentELe = this.parent.element.querySelector('.e-content');\n        if (document.activeElement === inputElement || document.activeElement === contentELe) {\n            var trimmedStr = void 0;\n            if (value !== ':' && !isNOU(value)) {\n                trimmedStr = value.replace(/^:/, '');\n            }\n            else if (!isNOU(value)) {\n                trimmedStr = value;\n            }\n            var inputValue = isNOU(inputElement) ? trimmedStr : inputElement.value;\n            var emojiButtons = this.parent.element.querySelectorAll('.e-rte-emojipicker-btn button');\n            var emojipickerAll = this.parent.element.querySelector('.e-rte-emojipicker-btn');\n            var emojiGroups = this.parent.element.querySelectorAll('.e-rte-emojipicker-group');\n            var toolbarGroup = this.parent.element.querySelector('.e-rte-emojipicker-toolbar');\n            var excludedDiv_1 = this.parent.element.querySelector('.e-rte-emojisearch-btn');\n            var firstChild = this.popDiv.childNodes[0];\n            var getComputedStyle_2 = window.getComputedStyle(firstChild);\n            var inputHeight = firstChild.nodeName === 'SPAN' ? (firstChild.getBoundingClientRect().height + parseFloat(getComputedStyle_2.marginTop) +\n                parseFloat(getComputedStyle_2.marginBottom)) : 0;\n            var popupBorder = window.getComputedStyle(this.popDiv);\n            // eslint-disable-next-line @typescript-eslint/tslint/config\n            var filteredButtons = isNOU(excludedDiv_1) ? emojiButtons :\n                // eslint-disable-next-line @typescript-eslint/tslint/config\n                Array.from(emojiButtons).filter(function (button) { return !excludedDiv_1.contains(button); });\n            if (inputValue === '' || value === ':') {\n                toolbarGroup.style.display = '';\n                emojipickerAll.style.height = (this.popDiv.getBoundingClientRect().height - toolbarGroup.getBoundingClientRect().height - inputHeight - (2 * parseFloat(popupBorder.borderWidth))) + 'px';\n                // eslint-disable-next-line @typescript-eslint/tslint/config\n                emojiGroups.forEach(function (element) {\n                    element.style.display = '';\n                });\n            }\n            else {\n                // eslint-disable-next-line @typescript-eslint/tslint/config\n                emojiGroups.forEach(function (element) {\n                    element.style.display = 'none';\n                });\n                toolbarGroup.style.display = 'none';\n                emojipickerAll.style.height = (this.popDiv.getBoundingClientRect().height - inputHeight - (2 * parseFloat(popupBorder.borderWidth))) + 'px';\n            }\n            var emojiBtnDiv = this.parent.createElement('div', { className: 'e-rte-emojisearch-btn' });\n            var emojis = this.parent.element.querySelector('.e-rte-emojisearch-btn');\n            if (emojis) {\n                emojis.remove();\n            }\n            var noEmojiObj = this.parent.createElement('div', { className: 'e-rte-emojiSearch-noEmoji' });\n            var noEMoji = true;\n            for (var i = 0; i < filteredButtons.length; i++) {\n                if (!isNOU(filteredButtons[i].getAttribute('title'))) {\n                    var title = filteredButtons[i].getAttribute('title').toLowerCase();\n                    var titleLength = title.split(' ');\n                    for (var j = 0; j < titleLength.length; j++) {\n                        if (titleLength[j].startsWith(inputValue.toLowerCase()) && inputValue !== '') {\n                            var emoji = filteredButtons[i].cloneNode(true);\n                            emojiBtnDiv.appendChild(emoji);\n                            noEMoji = false;\n                            break;\n                        }\n                    }\n                }\n            }\n            if (noEMoji && !this.parent.element.querySelector('.e-rte-emojiSearch-noEmoji') && (inputValue !== '' && value !== ':')) {\n                noEmojiObj.innerHTML = '<span style=\"color: rgba(0, 0, 0, 0.75); font-weight: 500; font-size: 16px;\">' + this.i10n.getConstant('emojiPickerNoResultFound') + ' 😥 </span>' + '<br>' + '<span style=\"color: rgba(0, 0, 0, 0.75);\"> ' + this.i10n.getConstant('emojiPickerTrySomethingElse') + ' ? </span>';\n                noEmojiObj.style.margin = '55px';\n                emojipickerAll.appendChild(noEmojiObj);\n            }\n            else if (!noEMoji && this.parent.element.querySelector('.e-rte-emojiSearch-noEmoji') || (inputValue === '' && value === ':')) {\n                emojipickerAll.removeChild(this.parent.element.querySelector('.e-rte-emojiSearch-noEmoji'));\n            }\n            emojipickerAll.appendChild(emojiBtnDiv);\n        }\n        else {\n            return;\n        }\n    };\n    EmojiPicker.prototype.emojiBtnClick = function (e) {\n        var event = new MouseEvent('mouseleave', { bubbles: true, cancelable: true });\n        // Includes the emote button element tooltip and toolbar tooltip\n        var emotePickerTooltips = this.parent.element.querySelectorAll('.e-rte-emojipicker-popup [data-tooltip-id]');\n        for (var i = 0; i < emotePickerTooltips.length; i++) {\n            emotePickerTooltips[i].dispatchEvent(event);\n        }\n        var targetEle = e.target;\n        if (targetEle.tagName !== 'BUTTON') {\n            return;\n        }\n        targetEle.focus();\n        var startOffset = this.save.startOffset;\n        var textContent = this.save.range.startContainer.textContent;\n        var previousText = textContent.substring(startOffset, startOffset + 1);\n        // When toolbar action is clicked then only restore the range.\n        if (!isNOU(this.clickEvent) || previousText !== ':') {\n            this.save.restore();\n        }\n        if (this.popupObj) {\n            removeClass([this.divElement], 'e-active');\n            this.popupObj.hide();\n        }\n        var originalEvent = e;\n        this.parent.formatter.process(this.parent, {\n            item: {\n                'command': 'EmojiPicker',\n                'subCommand': 'EmojiPicker',\n                value: targetEle.innerHTML\n            }\n        }, e, originalEvent);\n    };\n    EmojiPicker.prototype.onkeyPress = function (e) {\n        var originalEvent = e.args;\n        var selection = this.parent.contentModule.getDocument().getSelection();\n        if (selection.rangeCount <= 0) {\n            return;\n        }\n        var range = selection.getRangeAt(0);\n        var cursorPos = range.startOffset;\n        var prevChar = selection.focusNode.textContent.substring(cursorPos - 1, cursorPos);\n        var isPrevSpace = /\\s/.test(prevChar);\n        var isPrevColon = selection.focusNode.textContent.substring(cursorPos - 1, cursorPos) === ':';\n        var colon = selection.focusNode.textContent.charAt(cursorPos - 1) === ':';\n        if (originalEvent.keyCode === 186 && originalEvent.shiftKey && (isPrevSpace || selection.focusOffset === 0)) {\n            var coordinates = this.getCoordinates();\n            this.parent.showEmojiPicker(coordinates.left, coordinates.top);\n        }\n        if (originalEvent.keyCode === 8 && colon && this.popupObj) {\n            removeClass([this.divElement], 'e-active');\n            this.popupObj.hide();\n        }\n        if (originalEvent.keyCode === 32 && isPrevColon && this.popupObj) {\n            removeClass([this.divElement], 'e-active');\n            this.popupObj.hide();\n        }\n        if (this.popupObj && (originalEvent.keyCode === 37 || originalEvent.keyCode === 38 || originalEvent.keyCode === 39\n            || originalEvent.keyCode === 27 || originalEvent.keyCode === 40)) {\n            this.onKeyDown(originalEvent);\n            originalEvent.preventDefault();\n        }\n    };\n    EmojiPicker.prototype.onkeyUp = function (e) {\n        var originalEvent = e.args;\n        var selection = this.parent.contentModule.getDocument().getSelection();\n        if (selection.rangeCount <= 0) {\n            return;\n        }\n        var range = selection.getRangeAt(0);\n        var cursorPos = range.startOffset;\n        // eslint-disable-next-line\n        var selectedValue;\n        var count = 0;\n        for (var i = cursorPos - 1; i >= cursorPos - 15; i--) {\n            var prevChar = selection.focusNode.textContent.substring(i - 1, i);\n            var isPrevSpace = /:$/.test(prevChar);\n            if (isPrevSpace && !isNOU(this.popDiv) && count === 0) {\n                selectedValue = range.startContainer.textContent.substring(i - 1, cursorPos);\n                this.searchFilter(originalEvent, selectedValue);\n                count = 1;\n            }\n        }\n        var colon = selection.focusNode.textContent.substring(cursorPos - 1, cursorPos);\n        if (colon === ':' && !isNOU(this.popupObj)) {\n            selectedValue = colon;\n            this.searchFilter(originalEvent, selectedValue);\n        }\n    };\n    EmojiPicker.prototype.getCoordinates = function () {\n        var coordinates;\n        var selection = this.parent.contentModule.getDocument().getSelection();\n        var range = selection.getRangeAt(0);\n        var firstChild;\n        if (range.startContainer.nodeName === 'P' || range.startContainer.nodeName === 'DIV') {\n            if (range.startContainer.childNodes[0].nodeName !== '#text') {\n                firstChild = range.startContainer.childNodes[0];\n            }\n        }\n        // eslint-disable-next-line\n        var rect = isNOU(firstChild) ? range.getBoundingClientRect() : firstChild.getBoundingClientRect();\n        var rteContent = this.parent.element.querySelector('.e-rte-content');\n        var rteEle = this.parent.element;\n        var toolbarHeight = rteEle.offsetHeight - rteContent.offsetHeight;\n        var cursorTop = rect.top - this.parent.inputElement.getBoundingClientRect().top;\n        var cursorLeft = rect.left - this.parent.inputElement.getBoundingClientRect().left;\n        var screenHeight = window.innerHeight;\n        var popupHeight = 330;\n        var popupTop = cursorTop;\n        var popupLeft = cursorLeft + rect.width;\n        if (rteEle.getBoundingClientRect().top < 0) {\n            popupTop = popupTop + rteContent.getBoundingClientRect().top - toolbarHeight;\n        }\n        if (rect.top < popupHeight) {\n            // eslint-disable-next-line\n            popupTop = popupTop;\n        }\n        else if (rect.top + popupHeight > screenHeight) {\n            popupTop -= popupHeight + 20;\n        }\n        if (this.parent.inputElement) {\n            coordinates = {\n                top: popupTop + 60,\n                left: popupLeft + 8\n            };\n        }\n        return coordinates;\n    };\n    EmojiPicker.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.emojiPicker, this.toolbarClick);\n        this.parent.off(events.docClick, this.docClick);\n        this.parent.off(events.keyDown, this.onkeyPress);\n        this.parent.off(events.keyUp, this.onkeyUp);\n        this.parent.off(events.contentscroll, this.contentscroll);\n        this.parent.off(events.scroll, this.contentscroll);\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} - returns the string value\n     */\n    EmojiPicker.prototype.getModuleName = function () {\n        return 'emojiPicker';\n    };\n    return EmojiPicker;\n}());\nexport { EmojiPicker };\n","import { RenderType } from '../base/enum';\nimport * as events from '../base/constant';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * Content module is used to render Rich Text Editor content\n *\n * @hidden\n * @deprecated\n */\nvar Render = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     *\n     * @param {IRichTextEditor} parent - specifies the parent\n     * @param {ServiceLocator} locator - specifies the locator.\n     * @returns {void}\n     */\n    function Render(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.renderer = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    /**\n     * To initialize Rich Text Editor header, content and footer rendering\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    Render.prototype.render = function () {\n        // eslint-disable-next-line\n        var rteObj = this.parent;\n        this.contentRenderer = this.renderer.getRenderer(RenderType.Content);\n        this.contentRenderer.renderPanel();\n    };\n    /**\n     * Refresh the entire RichTextEditor.\n     *\n     * @param {NotifyArgs} e - specifies the arguments.\n     * @returns {void}\n     */\n    Render.prototype.refresh = function (e) {\n        if (e === void 0) { e = { requestType: 'refresh' }; }\n        this.parent.notify(e.requestType + \"-begin\", e);\n    };\n    /**\n     * Destroy the entire RichTextEditor.\n     *\n     * @returns {void}\n     */\n    Render.prototype.destroy = function () {\n        if (isNullOrUndefined(this.parent)) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    Render.prototype.moduleDestroy = function () {\n        this.parent = null;\n    };\n    Render.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.modelChanged, this.refresh, this);\n        this.parent.on(events.keyUp, this.keyUp, this);\n        this.parent.on(events.moduleDestroy, this.moduleDestroy, this);\n    };\n    Render.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.modelChanged, this.refresh);\n        this.parent.off(events.keyUp, this.keyUp);\n        this.parent.off(events.moduleDestroy, this.moduleDestroy);\n    };\n    Render.prototype.keyUp = function (e) {\n        if (this.parent.editorMode === 'HTML') {\n            switch (e.args.which) {\n                case 46:\n                case 8:\n                    // eslint-disable-next-line\n                    var childNodes = this.parent.contentModule.getEditPanel().childNodes;\n                    if ((childNodes.length === 0) ||\n                        (childNodes.length === 1 && childNodes[0].childNodes.length === 0 && ((childNodes[0].tagName === 'BR') ||\n                            ((childNodes[0].tagName === 'P' || childNodes[0].tagName === 'DIV') && childNodes[0].textContent === '')))) {\n                        var node = this.parent.contentModule.getEditPanel();\n                        if (this.parent.enterKey === 'DIV') {\n                            node.innerHTML = '<div><br/></div>';\n                        }\n                        else if (this.parent.enterKey === 'BR') {\n                            node.innerHTML = '<br/>';\n                        }\n                        else {\n                            node.innerHTML = '<p><br/></p>';\n                        }\n                        this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(), node.childNodes[0], 0);\n                    }\n                    break;\n            }\n        }\n    };\n    return Render;\n}());\nexport { Render };\n","import { EventHandler, detach, isNullOrUndefined, select, extend, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { closest, addClass, removeClass, Browser } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { CLS_RTE_ELEMENTS } from '../base/classes';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\nimport { RenderType } from '../base/enum';\nimport { dispatchEvent, parseHtml } from '../base/util';\nimport { isIDevice } from '../../common/util';\n/**\n * `Link` module is used to handle undo actions.\n */\nvar Link = /** @class */ (function () {\n    function Link(parent, serviceLocator) {\n        this.parent = parent;\n        this.rteID = parent.element.id;\n        this.i10n = serviceLocator.getService('rteLocale');\n        this.addEventListener();\n        this.serviceLocator = serviceLocator;\n        this.rendererFactory = serviceLocator.getService('rendererFactory');\n        this.dialogRenderObj = serviceLocator.getService('dialogRenderObject');\n    }\n    Link.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.insertLink, this.linkDialog, this);\n        this.parent.on(events.showLinkDialog, this.showDialog, this);\n        this.parent.on(events.closeLinkDialog, this.closeDialog, this);\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.insertCompleted, this.showLinkQuickToolbar, this);\n        this.parent.on(events.clearDialogObj, this.clearDialogObj, this);\n        this.parent.on(events.linkToolbarAction, this.onToolbarAction, this);\n        this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n        this.parent.on(events.unLink, this.removeLink, this);\n        this.parent.on(events.editLink, this.editLink, this);\n        this.parent.on(events.openLink, this.openLink, this);\n        this.parent.on(events.editAreaClick, this.editAreaClickHandler, this);\n        this.parent.on(events.bindCssClass, this.setCssClass, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.moduleDestroy, this.moduleDestroy, this);\n    };\n    Link.prototype.onToolbarAction = function (args) {\n        var item = args.args.item;\n        switch (item.subCommand) {\n            case 'OpenLink':\n                this.parent.notify(events.openLink, args);\n                break;\n            case 'EditLink':\n                this.parent.notify(events.editLink, args);\n                break;\n            case 'RemoveLink':\n                this.parent.notify(events.unLink, args);\n                break;\n        }\n    };\n    Link.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.insertLink, this.linkDialog);\n        this.parent.off(events.showLinkDialog, this.showDialog);\n        this.parent.off(events.closeLinkDialog, this.closeDialog);\n        this.parent.off(events.keyDown, this.onKeyDown);\n        this.parent.off(events.insertCompleted, this.showLinkQuickToolbar);\n        this.parent.off(events.clearDialogObj, this.clearDialogObj);\n        this.parent.off(events.linkToolbarAction, this.onToolbarAction);\n        this.parent.off(events.unLink, this.removeLink);\n        this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n        this.parent.off(events.editLink, this.editLink);\n        this.parent.off(events.openLink, this.openLink);\n        this.parent.off(events.editAreaClick, this.editAreaClickHandler);\n        this.parent.off(events.bindCssClass, this.setCssClass);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.moduleDestroy, this.moduleDestroy);\n    };\n    Link.prototype.onIframeMouseDown = function () {\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n        }\n    };\n    Link.prototype.updateCss = function (currentObj, e) {\n        if (currentObj && e.cssClass) {\n            if (isNullOrUndefined(e.oldCssClass)) {\n                currentObj.setProperties({ cssClass: (currentObj.cssClass + ' ' + e.cssClass).trim() });\n            }\n            else {\n                currentObj.setProperties({ cssClass: (currentObj.cssClass.replace(e.oldCssClass, '').trim() + ' ' + e.cssClass).trim() });\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/tslint/config\n    Link.prototype.setCssClass = function (e) {\n        this.updateCss(this.checkBoxObj, e);\n        this.updateCss(this.dialogObj, e);\n    };\n    Link.prototype.showLinkQuickToolbar = function (e) {\n        if (!isNullOrUndefined(e.args) && e.args.action !== 'enter' &&\n            e.args.action !== 'space') {\n            var pageX = void 0;\n            var pageY = void 0;\n            if (e.type !== 'Links' || isNullOrUndefined(this.parent.quickToolbarModule) ||\n                isNullOrUndefined(this.parent.quickToolbarModule.linkQTBar)) {\n                return;\n            }\n            this.quickToolObj = this.parent.quickToolbarModule;\n            var parentTop = this.parent.element.getBoundingClientRect().top;\n            var parentLeft = this.parent.element.getBoundingClientRect().left;\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            var target_1;\n            [].forEach.call(e.elements, function (element, index) {\n                if (index === 0) {\n                    target_1 = ((element.nodeName === '#text') ? (element.parentNode) : element);\n                }\n            });\n            if (e.isNotify) {\n                var tbElement = this.parent.toolbarModule.getToolbarElement();\n                var linkTop = target_1.getBoundingClientRect().top;\n                var linkLeft = target_1.getBoundingClientRect().left;\n                var linkPos = linkTop - parentTop;\n                var tbHeight = (tbElement) ? (tbElement.offsetHeight + this.parent.toolbarModule.getExpandTBarPopHeight()) : 0;\n                pageX = (this.parent.iframeSettings.enable) ? parentLeft + linkLeft : target_1.getBoundingClientRect().left;\n                pageY = window.pageYOffset + ((this.parent.iframeSettings.enable) ?\n                    (parentTop + tbHeight + linkTop) : (parentTop + linkPos));\n            }\n            else {\n                var args = void 0;\n                args = e.args.touches ? e.args.changedTouches[0] : args = e.args;\n                pageX = (this.parent.iframeSettings.enable) ? window.pageXOffset + parentLeft + args.clientX : args.pageX;\n                pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset + parentTop + args.clientY : args.pageY;\n            }\n            if (this.quickToolObj.linkQTBar) {\n                this.quickToolObj.linkQTBar.showPopup(pageX, pageY, range.endContainer);\n            }\n        }\n    };\n    Link.prototype.hideLinkQuickToolbar = function () {\n        if (this.quickToolObj && this.quickToolObj.linkQTBar && document.body.contains(this.quickToolObj.linkQTBar.element)) {\n            this.quickToolObj.linkQTBar.hidePopup();\n        }\n    };\n    Link.prototype.editAreaClickHandler = function (e) {\n        if (this.parent.readonly) {\n            this.hideLinkQuickToolbar();\n            return;\n        }\n        var args = e.args;\n        var showOnRightClick = this.parent.quickToolbarSettings.showOnRightClick;\n        if (args.which === 2 || (showOnRightClick && args.which === 1) || (!showOnRightClick && args.which === 3)) {\n            return;\n        }\n        if (this.parent.editorMode === 'HTML' && this.parent.quickToolbarModule && this.parent.quickToolbarModule.linkQTBar) {\n            this.quickToolObj = this.parent.quickToolbarModule;\n            var target = args.target;\n            target = this.getAnchorNode(target);\n            this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n            var isPopupOpen = this.quickToolObj.linkQTBar.element.classList.contains('e-rte-pop');\n            if (target.nodeName === 'A' && (target.childNodes.length > 0 && target.childNodes[0].nodeName !== 'IMG') &&\n                e.args.target.nodeName !== 'IMG' &&\n                !isNOU(closest(this.parent.getRange().startContainer.parentElement, 'A')) && !isNOU(closest(this.parent.getRange().endContainer.parentElement, 'A'))) {\n                if (isPopupOpen) {\n                    return;\n                }\n                this.showLinkQuickToolbar({\n                    args: args,\n                    isNotify: false,\n                    type: 'Links',\n                    elements: [args.target]\n                });\n            }\n            else {\n                this.hideLinkQuickToolbar();\n            }\n        }\n    };\n    Link.prototype.onKeyDown = function (event) {\n        var originalEvent = event.args;\n        switch (originalEvent.action) {\n            case 'escape':\n                if (!isNullOrUndefined(this.dialogObj)) {\n                    this.dialogObj.close();\n                }\n                break;\n            case 'insert-link':\n                this.openDialog(true, event);\n                originalEvent.preventDefault();\n                break;\n        }\n    };\n    Link.prototype.openDialog = function (isInternal, event) {\n        if (!isInternal) {\n            this.parent.contentModule.getEditPanel().focus();\n        }\n        if (this.parent.editorMode === 'HTML') {\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            var save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n            var selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n            var selectParentEle = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n            var eventArgs = {\n                args: event ? event.args : {\n                    item: { command: 'Links', subCommand: 'CreateLink' },\n                    originalEvent: undefined,\n                    name: !isInternal ? 'showDialog' : null\n                },\n                selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n            };\n            this.linkDialog(eventArgs);\n        }\n        else {\n            var textArea = this.parent.contentModule.getEditPanel();\n            this.parent.formatter.editorManager.markdownSelection.save(textArea.selectionStart, textArea.selectionEnd);\n            this.linkDialog({\n                args: {\n                    item: { command: 'Links', subCommand: 'Link' },\n                    originalEvent: event && event.args\n                },\n                member: 'link',\n                text: this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.contentModule.getEditPanel()),\n                module: 'Markdown',\n                name: 'insertLink'\n            });\n        }\n    };\n    Link.prototype.showDialog = function () {\n        this.openDialog(false);\n        this.setCssClass({ cssClass: this.parent.cssClass });\n    };\n    Link.prototype.closeDialog = function () {\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n        }\n    };\n    Link.prototype.clearDialogObj = function () {\n        if (this.dialogObj) {\n            this.dialogObj.destroy();\n            detach(this.dialogObj.element);\n            this.dialogObj = null;\n        }\n    };\n    Link.prototype.linkDialog = function (e, inputDetails) {\n        var _this = this;\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n            return;\n        }\n        if (this.parent.editorMode === 'HTML' && (e.selectParent.length > 0 &&\n            !isNullOrUndefined(e.selectParent[0].classList) &&\n            e.selectParent[0].classList.contains('e-rte-anchor')) && isNullOrUndefined(inputDetails)) {\n            this.editLink(e);\n            return;\n        }\n        var linkWebAddress = this.i10n.getConstant('linkWebUrl');\n        var linkDisplayText = this.i10n.getConstant('linkText');\n        var linkTooltip = this.i10n.getConstant('linkTooltipLabel');\n        var urlPlace = this.i10n.getConstant('linkurl');\n        var textPlace = this.i10n.getConstant('textPlaceholder');\n        var title = this.i10n.getConstant('linkTitle');\n        var linkDialogEle = this.parent.createElement('div', {\n            className: 'e-rte-link-dialog' + ' ' + this.parent.cssClass, id: this.rteID + '_rtelink'\n        });\n        this.parent.element.appendChild(linkDialogEle);\n        var linkContent = this.parent.createElement('div', {\n            className: 'e-rte-linkcontent' + ' ' + this.parent.cssClass, id: this.rteID + '_linkContent'\n        });\n        var htmlTextbox = (this.parent.editorMode === 'HTML') ? '<label>' + linkTooltip +\n            '</label></div><div class=\"e-rte-field' + ' ' + this.parent.cssClass + '\">' +\n            '<input type=\"text\" data-role =\"none\" spellcheck=\"false\" placeholder = \"' + title + '\"aria-label=\"' + this.i10n.getConstant('linkTitle') + '\" class=\"e-input e-rte-linkTitle' + ' ' + this.parent.cssClass + '\"></div>' +\n            '<div class=\"e-rte-label' + ' ' + this.parent.cssClass + '\"></div>' + '<div class=\"e-rte-field' + ' ' + this.parent.cssClass + '\">' +\n            '<input type=\"checkbox\" class=\"e-rte-linkTarget' + ' ' + this.parent.cssClass + '\"  data-role =\"none\"></div>' : '';\n        var content = '<div class=\"e-rte-label' + ' ' + this.parent.cssClass + '\"><label>' + linkWebAddress + '</label></div>' + '<div class=\"e-rte-field' + ' ' + this.parent.cssClass + '\">' +\n            '<input type=\"text\" data-role =\"none\" spellcheck=\"false\" placeholder=\"' + urlPlace + '\"aria-label=\"' + this.i10n.getConstant('linkWebUrl') + '\" class=\"e-input e-rte-linkurl' + ' ' + this.parent.cssClass + '\"/></div>' +\n            '<div class=\"e-rte-label' + ' ' + this.parent.cssClass + '\">' + '<label>' + linkDisplayText + '</label></div><div class=\"e-rte-field' + ' ' + this.parent.cssClass + '\"> ' +\n            '<input type=\"text\" data-role =\"none\" spellcheck=\"false\" class=\"e-input e-rte-linkText' + ' ' + this.parent.cssClass + '\"aria-label=\"' + this.i10n.getConstant('linkText') + '\" placeholder=\"' + textPlace + '\">' +\n            '</div><div class=\"e-rte-label' + ' ' + this.parent.cssClass + '\">' + htmlTextbox;\n        var contentElem = parseHtml(content);\n        linkContent.appendChild(contentElem);\n        var linkTarget = linkContent.querySelector('.e-rte-linkTarget');\n        var linkUrl = linkContent.querySelector('.e-rte-linkurl');\n        var linkText = linkContent.querySelector('.e-rte-linkText');\n        var linkTitle = linkContent.querySelector('.e-rte-linkTitle');\n        var linkOpenLabel = this.i10n.getConstant('linkOpenInNewWindow');\n        this.checkBoxObj = new CheckBox({ label: linkOpenLabel, checked: true, enableRtl: this.parent.enableRtl,\n            cssClass: this.parent.cssClass });\n        this.checkBoxObj.isStringTemplate = true;\n        this.checkBoxObj.createElement = this.parent.createElement;\n        this.checkBoxObj.appendTo(linkTarget);\n        var selectText = (this.parent.editorMode === 'HTML') ?\n            e.selection.getRange(this.parent.contentModule.getDocument()).toString() : e.text;\n        var linkInsert = this.i10n.getConstant('dialogInsert');\n        var linkCancel = this.i10n.getConstant('dialogCancel');\n        var selection = e.selection;\n        var selectObj = { selfLink: this, selection: e.selection, selectParent: e.selectParent, args: e.args };\n        var dialogModel = {\n            header: this.i10n.getConstant('linkHeader'),\n            content: linkContent,\n            cssClass: CLS_RTE_ELEMENTS + ' ' + this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            showCloseIcon: true, closeOnEscape: true, width: (Browser.isDevice) ? '290px' : '310px',\n            isModal: Browser.isDevice,\n            buttons: [{\n                    click: this.insertlink.bind(selectObj),\n                    buttonModel: { content: linkInsert, cssClass: 'e-flat e-insertLink' + ' ' + this.parent.cssClass, isPrimary: true }\n                },\n                { click: this.cancelDialog.bind(selectObj), buttonModel: { cssClass: 'e-flat' + ' ' + this.parent.cssClass, content: linkCancel } }],\n            target: (Browser.isDevice) ? document.body : this.parent.element,\n            animationSettings: { effect: 'None' },\n            close: function (event) {\n                _this.parent.isBlur = false;\n                if (event && event.event.returnValue) {\n                    if (_this.parent.editorMode === 'HTML') {\n                        selection.restore();\n                    }\n                    else {\n                        _this.parent.formatter.editorManager.markdownSelection.restore(_this.parent.contentModule.getEditPanel());\n                    }\n                }\n                _this.dialogObj.destroy();\n                detach(_this.dialogObj.element);\n                var args = _this.dialogObj;\n                _this.dialogRenderObj.close(args);\n                _this.dialogObj = null;\n            }\n        };\n        // eslint-disable-next-line\n        this.dialogObj = this.dialogRenderObj.render(dialogModel);\n        this.dialogObj.createElement = this.parent.createElement;\n        this.dialogObj.appendTo(linkDialogEle);\n        linkDialogEle.style.maxHeight = 'inherit';\n        if (isNullOrUndefined(this.dialogObj)) {\n            return;\n        }\n        if (!isNullOrUndefined(inputDetails)) {\n            linkUrl.value = inputDetails.url;\n            linkText.value = inputDetails.text;\n            linkTitle.value = inputDetails.title;\n            // eslint-disable-next-line\n            (inputDetails.target) ? this.checkBoxObj.checked = true : this.checkBoxObj.checked = false;\n            this.dialogObj.header = inputDetails.header;\n            this.dialogObj.element.querySelector('.e-insertLink').textContent = inputDetails.btnText;\n        }\n        this.checkUrl(false);\n        if ((this.parent.editorMode === 'HTML' && isNullOrUndefined(inputDetails) && ((!isNullOrUndefined(selectText)\n            && selectText !== '') && (e.selection.range.startOffset === 0) || e.selection.range.startOffset !==\n            e.selection.range.endOffset)) || e.module === 'Markdown') {\n            linkText.value = selectText;\n        }\n        EventHandler.add(this.parent.element.ownerDocument, 'mousedown', this.onDocumentClick, this);\n        if (this.quickToolObj) {\n            this.hideLinkQuickToolbar();\n            if (this.quickToolObj.inlineQTBar && document.body.contains(this.quickToolObj.inlineQTBar.element)) {\n                this.quickToolObj.inlineQTBar.hidePopup();\n            }\n            if (this.quickToolObj.textQTBar && this.parent.element.ownerDocument.body.contains(this.quickToolObj.textQTBar.element)) {\n                this.quickToolObj.textQTBar.hidePopup();\n            }\n        }\n    };\n    // eslint-disable-next-line\n    Link.prototype.insertlink = function (e) {\n        var linkEle = this.selfLink.dialogObj.element;\n        var linkUrl = linkEle.querySelector('.e-rte-linkurl').value;\n        var linkText = linkEle.querySelector('.e-rte-linkText').value;\n        var linkTitle;\n        if (this.selfLink.parent.editorMode === 'HTML') {\n            linkTitle = linkEle.querySelector('.e-rte-linkTitle').value;\n        }\n        var target = (this.selfLink.checkBoxObj.checked) ? '_blank' : null;\n        var linkLabel = (this.selfLink.checkBoxObj.checked) ? this.selfLink.i10n.getConstant('linkAriaLabel') : null;\n        if (linkUrl === '') {\n            this.selfLink.checkUrl(true);\n            return;\n        }\n        if (!this.selfLink.isUrl(linkUrl)) {\n            linkText = (linkText === '') ? linkUrl : linkText;\n            if (!this.selfLink.parent.enableAutoUrl) {\n                linkUrl = linkUrl.indexOf('http') > -1 ? linkUrl : 'http://' + linkUrl;\n            }\n            else {\n                // eslint-disable-next-line\n                linkUrl = linkUrl;\n            }\n        }\n        else {\n            this.selfLink.checkUrl(false);\n        }\n        var proxy = this.selfLink;\n        if (proxy.parent.editorMode === 'HTML' && isNullOrUndefined(closest(this.selection.range.startContainer.parentNode, '[id='\n            // eslint-disable-next-line\n            + \"'\" + proxy.parent.contentModule.getPanel().id + \"'\" + ']'))) {\n            proxy.parent.contentModule.getEditPanel().focus();\n            if (Browser.isIE && proxy.parent.iframeSettings.enable) {\n                this.selection.restore();\n            }\n            var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n            this.selection = proxy.parent.formatter.editorManager.nodeSelection.save(range, proxy.parent.contentModule.getDocument());\n            this.selectParent = proxy.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n        }\n        var value = {\n            url: linkUrl, text: linkText, title: linkTitle, target: target, ariaLabel: linkLabel,\n            selection: this.selection, selectParent: this.selectParent\n        };\n        if (document.body.contains(proxy.dialogObj.element)) {\n            this.selfLink.dialogObj.hide({ returnValue: false });\n        }\n        if (isIDevice() && proxy.parent.iframeSettings.enable) {\n            select('iframe', proxy.parent.element).contentWindow.focus();\n        }\n        if (proxy.parent.editorMode === 'HTML') {\n            this.selection.restore();\n        }\n        if (proxy.parent.formatter.getUndoRedoStack().length === 0) {\n            proxy.parent.formatter.saveData();\n        }\n        var argsValue;\n        if (!isNullOrUndefined(this.args) &&\n            this.args.code === 'KeyK') {\n            var originalEvent = this.args;\n            extend(this.args, { item: { command: 'Links', subCommand: 'CreateLink' }, originalEvent: originalEvent }, true);\n            var argsVal = {\n                item: { command: 'Links', subCommand: 'CreateLink' }, originalEvent: originalEvent\n            };\n            argsValue = argsVal;\n        }\n        else {\n            argsValue = this.args;\n        }\n        this.selfLink.parent.formatter.process(this.selfLink.parent, argsValue, (!isNullOrUndefined(this.args) &&\n            this.args.originalEvent), value);\n        this.selfLink.parent.contentModule.getEditPanel().focus();\n    };\n    Link.prototype.isUrl = function (url) {\n        // eslint-disable-next-line\n        var regexp = /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/gi;\n        return regexp.test(url);\n    };\n    Link.prototype.checkUrl = function (e) {\n        var linkEle = this.dialogObj.element;\n        var linkUrl = linkEle.querySelector('.e-rte-linkurl');\n        if (e) {\n            addClass([linkUrl], 'e-error');\n            linkUrl.setSelectionRange(0, linkUrl.value.length);\n            linkUrl.focus();\n        }\n        else {\n            removeClass([linkUrl], 'e-error');\n        }\n    };\n    Link.prototype.removeLink = function (e) {\n        if (this.parent.formatter.getUndoRedoStack().length === 0) {\n            this.parent.formatter.saveData();\n        }\n        var selectParentEle = this.getAnchorNode(e.selectParent[0]);\n        this.parent.formatter.process(this.parent, e.args, e.args, {\n            selectNode: e.selectNode, selectParent: e.selectParent, selection: e.selection,\n            text: selectParentEle.innerText,\n            subCommand: e.args.item.subCommand\n        });\n        if (isIDevice() && this.parent.iframeSettings.enable) {\n            select('iframe', this.parent.element).contentWindow.focus();\n        }\n        else {\n            this.parent.contentModule.getEditPanel().focus();\n        }\n        this.hideLinkQuickToolbar();\n    };\n    Link.prototype.openLink = function (e) {\n        var selectParentEle = this.getAnchorNode(e.selectParent[0]);\n        if (selectParentEle.classList.contains('e-rte-anchor') || selectParentEle.tagName === 'A') {\n            this.parent.formatter.process(this.parent, e.args, e.args, {\n                url: selectParentEle.href, text: selectParentEle.innerText,\n                target: selectParentEle.target === '' ? '_self' : '_blank', selectNode: e.selectNode,\n                subCommand: e.args.item.subCommand\n            });\n        }\n    };\n    Link.prototype.getAnchorNode = function (element) {\n        var selectParent = closest(element, 'a');\n        return (selectParent ? selectParent : element);\n    };\n    Link.prototype.editLink = function (e) {\n        var selectedNode = this.getAnchorNode(e.selectNode[0]);\n        var selectParentEle = this.getAnchorNode(e.selectParent[0]);\n        selectParentEle = selectedNode.nodeName === 'A' ? selectedNode : selectParentEle;\n        if (selectParentEle.classList.contains('e-rte-anchor') || selectParentEle.tagName === 'A') {\n            var linkUpdate = this.i10n.getConstant('dialogUpdate');\n            var inputDetails = {\n                url: selectParentEle.getAttribute('href'), text: selectParentEle.innerText,\n                title: selectParentEle.title, target: selectParentEle.target,\n                header: this.i10n.getConstant('editLink'), btnText: linkUpdate\n            };\n            this.linkDialog(e, inputDetails);\n        }\n    };\n    // eslint-disable-next-line\n    Link.prototype.cancelDialog = function (e) {\n        this.selfLink.parent.isBlur = false;\n        this.selfLink.dialogObj.hide({ returnValue: true });\n        if (isIDevice()) {\n            this.selection.restore();\n        }\n        else {\n            this.selfLink.parent.contentModule.getEditPanel().focus();\n        }\n    };\n    Link.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        if (!isNullOrUndefined(this.dialogObj) && ((\n        // eslint-disable-next-line\n        !closest(target, '[id=' + \"'\" + this.dialogObj.element.id + \"'\" + ']') && this.parent.toolbarSettings.enable &&\n            this.parent.getToolbarElement() && !this.parent.getToolbarElement().contains(e.target)) ||\n            (((this.parent.getToolbarElement() && this.parent.getToolbarElement().contains(e.target)) ||\n                this.parent.inlineMode.enable && !closest(target, '#' + this.dialogObj.element.id)) &&\n                !closest(target, '#' + this.parent.getID() + '_toolbar_CreateLink') &&\n                !target.querySelector('#' + this.parent.getID() + '_toolbar_CreateLink')))) {\n            this.dialogObj.hide({ returnValue: true });\n            EventHandler.remove(this.parent.element.ownerDocument, 'mousedown', this.onDocumentClick);\n            this.parent.isBlur = true;\n            dispatchEvent(this.parent.element, 'focusout');\n        }\n    };\n    /**\n     * Destroys the ToolBar.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    Link.prototype.destroy = function () {\n        if (isNOU(this.parent)) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    Link.prototype.moduleDestroy = function () {\n        this.parent = null;\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {void}\n     */\n    Link.prototype.getModuleName = function () {\n        return 'link';\n    };\n    return Link;\n}());\nexport { Link };\n","import { addClass, detach, EventHandler, isNullOrUndefined, select, Ajax, formatUnit } from '@syncfusion/ej2-base';\nimport { Browser, closest, removeClass, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { Uploader, TextBox } from '@syncfusion/ej2-inputs';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { Button, CheckBox } from '@syncfusion/ej2-buttons';\nimport { RenderType } from '../base/enum';\nimport { dispatchEvent, parseHtml, hasClass, convertToBlob } from '../base/util';\nimport { isIDevice } from '../../common/util';\n/**\n * `Image` module is used to handle image actions.\n */\nvar Image = /** @class */ (function () {\n    function Image(parent, serviceLocator) {\n        this.isImgUploaded = false;\n        this.isAllowedTypes = true;\n        this.pageX = null;\n        this.pageY = null;\n        this.mouseX = null;\n        this.deletedImg = [];\n        this.parent = parent;\n        this.rteID = parent.element.id;\n        this.i10n = serviceLocator.getService('rteLocale');\n        this.rendererFactory = serviceLocator.getService('rendererFactory');\n        this.dialogRenderObj = serviceLocator.getService('dialogRenderObject');\n        this.addEventListener();\n    }\n    Image.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.keyUp, this.onKeyUp, this);\n        this.parent.on(events.insertImage, this.insertImage, this);\n        this.parent.on(events.showImageDialog, this.showDialog, this);\n        this.parent.on(events.closeImageDialog, this.closeDialog, this);\n        this.parent.on(events.windowResize, this.onWindowResize, this);\n        this.parent.on(events.insertCompleted, this.showImageQuickToolbar, this);\n        this.parent.on(events.clearDialogObj, this.clearDialogObj, this);\n        this.parent.on(events.imageToolbarAction, this.onToolbarAction, this);\n        this.parent.on(events.imageCaption, this.caption, this);\n        this.parent.on(events.imageDelete, this.deleteImg, this);\n        this.parent.on(events.imageLink, this.insertImgLink, this);\n        this.parent.on(events.imageAlt, this.insertAltText, this);\n        this.parent.on(events.editAreaClick, this.editAreaClickHandler, this);\n        this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n        this.parent.on(events.imageSize, this.imageSize, this);\n        this.parent.on(events.dropDownSelect, this.alignmentSelect, this);\n        this.parent.on(events.initialEnd, this.afterRender, this);\n        this.parent.on(events.dynamicModule, this.afterRender, this);\n        this.parent.on(events.paste, this.imagePaste, this);\n        this.parent.on(events.bindCssClass, this.setCssClass, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n        this.parent.on(events.moduleDestroy, this.moduleDestroy, this);\n    };\n    Image.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.keyDown, this.onKeyDown);\n        this.parent.off(events.keyUp, this.onKeyUp);\n        this.parent.off(events.windowResize, this.onWindowResize);\n        this.parent.off(events.insertImage, this.insertImage);\n        this.parent.off(events.showImageDialog, this.showDialog);\n        this.parent.off(events.closeImageDialog, this.closeDialog);\n        this.parent.off(events.insertCompleted, this.showImageQuickToolbar);\n        this.parent.off(events.clearDialogObj, this.clearDialogObj);\n        this.parent.off(events.imageCaption, this.caption);\n        this.parent.off(events.imageToolbarAction, this.onToolbarAction);\n        this.parent.off(events.imageDelete, this.deleteImg);\n        this.parent.off(events.imageLink, this.insertImgLink);\n        this.parent.off(events.imageAlt, this.insertAltText);\n        this.parent.off(events.editAreaClick, this.editAreaClickHandler);\n        this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n        this.parent.off(events.imageSize, this.imageSize);\n        this.parent.off(events.dropDownSelect, this.alignmentSelect);\n        this.parent.off(events.initialEnd, this.afterRender);\n        this.parent.off(events.dynamicModule, this.afterRender);\n        this.parent.off(events.paste, this.imagePaste);\n        this.parent.off(events.bindCssClass, this.setCssClass);\n        this.parent.off(events.destroy, this.removeEventListener);\n        this.parent.off(events.moduleDestroy, this.moduleDestroy);\n        var dropElement = this.parent.iframeSettings.enable ? this.parent.inputElement.ownerDocument\n            : this.parent.inputElement;\n        dropElement.removeEventListener('drop', this.dragDrop.bind(this), true);\n        dropElement.removeEventListener('dragstart', this.dragStart.bind(this), true);\n        dropElement.removeEventListener('dragenter', this.dragEnter.bind(this), true);\n        dropElement.removeEventListener('dragover', this.dragOver.bind(this), true);\n        if (!isNullOrUndefined(this.contentModule)) {\n            EventHandler.remove(this.contentModule.getEditPanel(), Browser.touchEndEvent, this.imageClick);\n            this.parent.formatter.editorManager.observer.off(events.checkUndo, this.undoStack);\n            if (this.parent.insertImageSettings.resize) {\n                EventHandler.remove(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart);\n                EventHandler.remove(this.parent.element.ownerDocument, 'mousedown', this.onDocumentClick);\n                EventHandler.remove(this.contentModule.getEditPanel(), 'cut', this.onCutHandler);\n                EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n            }\n        }\n    };\n    Image.prototype.updateCss = function (currentObj, e) {\n        if (currentObj && e.cssClass) {\n            if (isNullOrUndefined(e.oldCssClass)) {\n                currentObj.setProperties({ cssClass: (currentObj.cssClass + ' ' + e.cssClass).trim() });\n            }\n            else {\n                currentObj.setProperties({ cssClass: (currentObj.cssClass.replace(e.oldCssClass, '').trim() + ' ' + e.cssClass).trim() });\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/tslint/config\n    Image.prototype.setCssClass = function (e) {\n        if (this.popupObj && e.cssClass) {\n            if (isNullOrUndefined(e.oldCssClass)) {\n                addClass([this.popupObj.element], e.cssClass);\n            }\n            else {\n                removeClass([this.popupObj.element], e.oldCssClass);\n                addClass([this.popupObj.element], e.cssClass);\n            }\n        }\n        this.updateCss(this.checkBoxObj, e);\n        this.updateCss(this.widthNum, e);\n        this.updateCss(this.heightNum, e);\n        this.updateCss(this.uploadObj, e);\n        this.updateCss(this.dialogObj, e);\n    };\n    Image.prototype.onIframeMouseDown = function () {\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n        }\n    };\n    Image.prototype.afterRender = function () {\n        this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n        EventHandler.add(this.contentModule.getEditPanel(), Browser.touchEndEvent, this.imageClick, this);\n        if (this.parent.insertImageSettings.resize) {\n            EventHandler.add(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart, this);\n            EventHandler.add(this.parent.element.ownerDocument, 'mousedown', this.onDocumentClick, this);\n            EventHandler.add(this.contentModule.getEditPanel(), 'cut', this.onCutHandler, this);\n        }\n        var dropElement = this.parent.iframeSettings.enable ? this.parent.inputElement.ownerDocument :\n            this.parent.inputElement;\n        dropElement.addEventListener('drop', this.dragDrop.bind(this), true);\n        dropElement.addEventListener('dragstart', this.dragStart.bind(this), true);\n        dropElement.addEventListener('dragenter', this.dragOver.bind(this), true);\n        dropElement.addEventListener('dragover', this.dragOver.bind(this), true);\n    };\n    Image.prototype.undoStack = function (args) {\n        if (args.subCommand.toLowerCase() === 'undo' || args.subCommand.toLowerCase() === 'redo') {\n            for (var i = 0; i < this.parent.formatter.getUndoRedoStack().length; i++) {\n                var temp = this.parent.createElement('div');\n                var contentElem = this.parent.formatter.getUndoRedoStack()[i].text;\n                temp.appendChild(contentElem.cloneNode(true));\n                var img = temp.querySelectorAll('img');\n                if (temp.querySelector('.e-img-resize') && img.length > 0) {\n                    for (var j = 0; j < img.length; j++) {\n                        img[j].style.outline = '';\n                    }\n                    detach(temp.querySelector('.e-img-resize'));\n                    var clonedElement = temp.cloneNode(true);\n                    var fragment = document.createDocumentFragment();\n                    while (clonedElement.firstChild) {\n                        fragment.appendChild(clonedElement.firstChild);\n                    }\n                    this.parent.formatter.getUndoRedoStack()[i].text = fragment;\n                }\n            }\n        }\n    };\n    Image.prototype.resizeEnd = function (e) {\n        this.resizeBtnInit();\n        this.imgEle.parentElement.style.cursor = 'auto';\n        if (Browser.isDevice) {\n            removeClass([e.target.parentElement], 'e-mob-span');\n        }\n        var args = { event: e, requestType: 'images' };\n        this.parent.trigger(events.resizeStop, args);\n        /* eslint-disable */\n        var pageX = this.getPointX(e);\n        var pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset +\n            this.parent.element.getBoundingClientRect().top + e.clientY : e.pageY;\n        /* eslint-enable */\n        this.parent.formatter.editorManager.observer.on(events.checkUndo, this.undoStack, this);\n        this.parent.formatter.saveData();\n    };\n    Image.prototype.resizeStart = function (e, ele) {\n        var _this = this;\n        if (this.parent.readonly) {\n            return;\n        }\n        var target = ele ? ele : e.target;\n        this.prevSelectedImgEle = this.imgEle;\n        if (target.tagName === 'IMG') {\n            this.parent.preventDefaultResize(e);\n            var img = target;\n            if (this.imgResizeDiv && this.contentModule.getEditPanel().contains(this.imgResizeDiv)) {\n                detach(this.imgResizeDiv);\n            }\n            this.imageResize(img);\n        }\n        if (target.classList.contains('e-rte-imageboxmark')) {\n            if (this.parent.formatter.getUndoRedoStack().length === 0) {\n                this.parent.formatter.saveData();\n            }\n            this.pageX = this.getPointX(e);\n            this.pageY = this.getPointY(e);\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            this.resizeBtnInit();\n            if (this.quickToolObj) {\n                this.quickToolObj.imageQTBar.hidePopup();\n            }\n            if (target.classList.contains('e-rte-topLeft')) {\n                this.resizeBtnStat.topLeft = true;\n            }\n            if (target.classList.contains('e-rte-topRight')) {\n                this.resizeBtnStat.topRight = true;\n            }\n            if (target.classList.contains('e-rte-botLeft')) {\n                this.resizeBtnStat.botLeft = true;\n            }\n            if (target.classList.contains('e-rte-botRight')) {\n                this.resizeBtnStat.botRight = true;\n            }\n            if (Browser.isDevice && this.contentModule.getEditPanel().contains(this.imgResizeDiv) &&\n                !this.imgResizeDiv.classList.contains('e-mob-span')) {\n                addClass([this.imgResizeDiv], 'e-mob-span');\n            }\n            else {\n                var args = { event: e, requestType: 'images' };\n                this.parent.trigger(events.resizeStart, args, function (resizeStartArgs) {\n                    if (resizeStartArgs.cancel) {\n                        _this.cancelResizeAction();\n                    }\n                });\n            }\n            EventHandler.add(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd, this);\n        }\n    };\n    Image.prototype.imageClick = function (e) {\n        if (Browser.isDevice) {\n            if ((e.target.tagName === 'IMG' &&\n                e.target.parentElement.tagName === 'A') ||\n                (e.target.tagName === 'IMG')) {\n                this.contentModule.getEditPanel().setAttribute('contenteditable', 'false');\n                e.target.focus();\n            }\n            else {\n                if (!this.parent.readonly) {\n                    this.contentModule.getEditPanel().setAttribute('contenteditable', 'true');\n                }\n            }\n        }\n        if (e.target.tagName === 'IMG' &&\n            e.target.parentElement.tagName === 'A') {\n            e.preventDefault();\n        }\n    };\n    Image.prototype.onCutHandler = function () {\n        if (this.imgResizeDiv && this.contentModule.getEditPanel().contains(this.imgResizeDiv)) {\n            this.cancelResizeAction();\n        }\n    };\n    Image.prototype.imageResize = function (e) {\n        this.resizeBtnInit();\n        this.imgEle = e;\n        addClass([this.imgEle], 'e-resize');\n        this.imgResizeDiv = this.parent.createElement('span', { className: 'e-img-resize' + ' ' + this.parent.cssClass, id: this.rteID + '_imgResize' });\n        this.imgResizeDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-rte-imageboxmark e-rte-topLeft' + ' ' + this.parent.cssClass, styles: 'cursor: nwse-resize'\n        }));\n        this.imgResizeDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-rte-imageboxmark e-rte-topRight' + ' ' + this.parent.cssClass, styles: 'cursor: nesw-resize'\n        }));\n        this.imgResizeDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-rte-imageboxmark e-rte-botLeft' + ' ' + this.parent.cssClass, styles: 'cursor: nesw-resize'\n        }));\n        this.imgResizeDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-rte-imageboxmark e-rte-botRight' + ' ' + this.parent.cssClass, styles: 'cursor: nwse-resize'\n        }));\n        if (Browser.isDevice) {\n            addClass([this.imgResizeDiv], 'e-mob-rte');\n        }\n        e.style.outline = '2px solid #4a90e2';\n        this.imgResizePos(e, this.imgResizeDiv);\n        this.resizeImgDupPos(e);\n        this.contentModule.getEditPanel().appendChild(this.imgResizeDiv);\n        EventHandler.add(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing, this);\n    };\n    Image.prototype.getPointX = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageX;\n        }\n        else {\n            return e.pageX;\n        }\n    };\n    Image.prototype.getPointY = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageY;\n        }\n        else {\n            return e.pageY;\n        }\n    };\n    Image.prototype.imgResizePos = function (e, imgResizeDiv) {\n        var pos = this.calcPos(e);\n        var top = pos.top;\n        var left = pos.left;\n        var imgWid = e.getBoundingClientRect().width;\n        var imgHgt = e.getBoundingClientRect().height;\n        var borWid = (Browser.isDevice) ? (4 * parseInt((e.style.outline.slice(-3)), 10)) + 2 :\n            (2 * parseInt((e.style.outline.slice(-3)), 10)) + 2; //span border width + image outline width\n        var devWid = ((Browser.isDevice) ? 0 : 2); // span border width\n        imgResizeDiv.querySelector('.e-rte-botLeft').style.left = (left - borWid) + 'px';\n        imgResizeDiv.querySelector('.e-rte-botLeft').style.top = ((imgHgt - borWid) + top) + 'px';\n        imgResizeDiv.querySelector('.e-rte-botRight').style.left = ((imgWid - (borWid - devWid)) + left) + 'px';\n        imgResizeDiv.querySelector('.e-rte-botRight').style.top = ((imgHgt - borWid) + top) + 'px';\n        imgResizeDiv.querySelector('.e-rte-topRight').style.left = ((imgWid - (borWid - devWid)) + left) + 'px';\n        imgResizeDiv.querySelector('.e-rte-topRight').style.top = (top - (borWid)) + 'px';\n        imgResizeDiv.querySelector('.e-rte-topLeft').style.left = (left - borWid) + 'px';\n        imgResizeDiv.querySelector('.e-rte-topLeft').style.top = (top - borWid) + 'px';\n    };\n    Image.prototype.calcPos = function (elem) {\n        var ignoreOffset = ['TD', 'TH', 'TABLE', 'A'];\n        var parentOffset = { top: 0, left: 0 };\n        var elementOffset;\n        var doc = elem.ownerDocument;\n        var offsetParent = ((elem.offsetParent && (elem.offsetParent.classList.contains('e-img-caption') ||\n            ignoreOffset.indexOf(elem.offsetParent.tagName) > -1)) ?\n            closest(elem, '#' + this.parent.getID() + '_rte-edit-view') : elem.offsetParent) || doc.documentElement;\n        while (offsetParent &&\n            (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            offsetParent.style.position === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n            parentOffset = offsetParent.getBoundingClientRect();\n        }\n        if (elem.offsetParent && (elem.offsetParent.classList.contains('e-img-caption'))) {\n            elementOffset = elem.getBoundingClientRect();\n            return {\n                top: elementOffset.top - parentOffset.top,\n                left: elementOffset.left - parentOffset.left\n            };\n        }\n        else {\n            return {\n                top: elem.offsetTop,\n                left: elem.offsetLeft\n            };\n        }\n    };\n    Image.prototype.setAspectRatio = function (img, expectedX, expectedY, e) {\n        if (isNullOrUndefined(img.width)) {\n            return;\n        }\n        // eslint-disable-next-line security/detect-unsafe-regex\n        var width = img.style.width !== '' ? img.style.width.match(/^\\d+(\\.\\d*)?%$/g) ? parseFloat(img.style.width) :\n            parseInt(img.style.width, 10) : img.width;\n        var height = img.style.height !== '' ? parseInt(img.style.height, 10) : img.height;\n        if (width > height) {\n            img.style.minWidth = this.parent.insertImageSettings.minWidth === 0 ? '20px' : formatUnit(this.parent.insertImageSettings.minWidth);\n            if (this.parent.insertImageSettings.resizeByPercent) {\n                if (parseInt('' + img.getBoundingClientRect().width + '', 10) !== 0 && parseInt('' + width + '', 10) !== 0) {\n                    var original = img.offsetWidth + this.mouseX;\n                    var finalWidthByPerc = (original / img.offsetWidth) * (parseFloat(img.style.width).toString() === 'NaN' ? (img.offsetWidth / (parseFloat(getComputedStyle(this.parent.element).width)) * 100) : parseFloat(img.style.width));\n                    img.style.width = ((finalWidthByPerc > 3) ? finalWidthByPerc : 3) + '%';\n                }\n                else {\n                    img.style.width = this.pixToPerc((width / height * expectedY), (img.previousElementSibling || img.parentElement)) + '%';\n                }\n                img.style.height = null;\n                img.removeAttribute('height');\n            }\n            else if (img.style.width === '' && img.style.height !== '') {\n                img.style.height = expectedY + 'px';\n            }\n            else if (img.style.width !== '' && img.style.height === '') {\n                var currentWidth = ((width / height * expectedY) + width / height) <\n                    (this.parent.inputElement.getBoundingClientRect().right - 32) ?\n                    ((width / height * expectedY) + width / height) : (this.parent.inputElement.getBoundingClientRect().right - 32);\n                img.style.width = currentWidth.toString() + 'px';\n                img.style.height = expectedY + 'px';\n            }\n            else if (img.style.width !== '') {\n                var currentWidth = (width / height * expectedY) < (this.parent.inputElement.getBoundingClientRect().right - 32) ?\n                    (width / height * expectedY) : (this.parent.inputElement.getBoundingClientRect().right - 32);\n                img.style.width = currentWidth + 'px';\n                img.style.height = expectedY + 'px';\n            }\n            else {\n                if (this.parent.iframeSettings.enable) {\n                    img.setAttribute('width', (img.width + this.mouseX).toString());\n                }\n                else {\n                    var currentWidth = img.offsetWidth === 0 ? img.width + this.mouseX + parseInt(img.style.outlineWidth.split('p')[0], 10) : img.offsetWidth + this.mouseX;\n                    img.setAttribute('width', (currentWidth).toString());\n                }\n            }\n        }\n        else if (height > width) {\n            if (this.parent.insertImageSettings.resizeByPercent) {\n                if (parseInt('' + img.getBoundingClientRect().width + '', 10) !== 0 && parseInt('' + width + '', 10) !== 0) {\n                    var original = img.offsetWidth + this.mouseX;\n                    var finalWidthByPerc = (original / img.offsetWidth) * (parseFloat(img.style.width).toString() === 'NaN' ?\n                        (img.offsetWidth / (parseFloat(getComputedStyle(this.parent.element).width)) * 100) :\n                        parseFloat(img.style.width));\n                    img.style.width = ((finalWidthByPerc > 3) ? finalWidthByPerc : 3) + '%';\n                }\n                else {\n                    img.style.width = this.pixToPerc((expectedX / height * expectedY), (img.previousElementSibling || img.parentElement)) + '%';\n                }\n                img.style.height = null;\n                img.removeAttribute('height');\n            }\n            else if (img.style.width !== '') {\n                img.style.width = expectedX + 'px';\n                img.style.height = (height / width * expectedX) + 'px';\n            }\n            else {\n                img.setAttribute('width', this.resizeBtnStat.botRight ? (this.getPointX(e.event) - img.getBoundingClientRect().left).toString() : expectedX.toString());\n            }\n        }\n        else {\n            if (this.parent.insertImageSettings.resizeByPercent) {\n                img.style.width = this.pixToPerc(expectedX, (img.previousElementSibling || img.parentElement)) + '%';\n                img.style.height = null;\n                img.removeAttribute('height');\n            }\n            else {\n                img.style.width = expectedX + 'px';\n                img.style.height = expectedX + 'px';\n            }\n        }\n    };\n    Image.prototype.pixToPerc = function (expected, parentEle) {\n        return expected / parseFloat(getComputedStyle(parentEle).width) * 100;\n    };\n    Image.prototype.imgDupMouseMove = function (width, height, e) {\n        var _this = this;\n        var args = { event: e, requestType: 'images' };\n        this.parent.trigger(events.onResize, args, function (resizingArgs) {\n            if (resizingArgs.cancel) {\n                _this.cancelResizeAction();\n            }\n            else {\n                if ((parseInt(_this.parent.insertImageSettings.minWidth, 10) >= parseInt(width, 10) ||\n                    (parseInt(_this.parent.getInsertImgMaxWidth(), 10) <= parseInt(width, 10) &&\n                        isNOU(_this.imgEle.style.width)))) {\n                    return;\n                }\n                if (!_this.parent.insertImageSettings.resizeByPercent &&\n                    (parseInt(_this.parent.insertImageSettings.minHeight, 10) >= parseInt(height, 10) ||\n                        parseInt(_this.parent.insertImageSettings.maxHeight, 10) <= parseInt(height, 10))) {\n                    return;\n                }\n                _this.imgEle.parentElement.style.cursor = 'pointer';\n                _this.setAspectRatio(_this.imgEle, parseInt(width, 10), parseInt(height, 10), args);\n                _this.resizeImgDupPos(_this.imgEle);\n                _this.imgResizePos(_this.imgEle, _this.imgResizeDiv);\n                _this.parent.setContentHeight('', false);\n            }\n        });\n    };\n    Image.prototype.resizing = function (e) {\n        if (!this.parent) {\n            this.cancelResizeAction();\n            return;\n        }\n        if (this.imgEle.offsetWidth >= this.parent.getInsertImgMaxWidth()) {\n            this.imgEle.style.maxHeight = this.imgEle.offsetHeight + 'px';\n        }\n        else if (isNOU(this.parent.insertImageSettings.maxHeight)) {\n            this.imgEle.style.maxHeight = '';\n        }\n        this.imgEle.style.maxWidth = this.parent.getInsertImgMaxWidth() + 'px';\n        var pageX = this.getPointX(e);\n        var pageY = this.getPointY(e);\n        var mouseX = (this.resizeBtnStat.botLeft || this.resizeBtnStat.topLeft) ? -(pageX - this.pageX) : (pageX - this.pageX);\n        var mouseY = (this.resizeBtnStat.botLeft || this.resizeBtnStat.topLeft) ? -(pageY - this.pageY) : (pageY - this.pageY);\n        var width = parseInt(this.imgDupPos.width, 10) + mouseX;\n        var height = parseInt(this.imgDupPos.height, 10) + mouseY;\n        this.mouseX = mouseX;\n        this.pageX = pageX;\n        this.pageY = pageY;\n        if (this.resizeBtnStat.botRight) {\n            this.imgDupMouseMove(width + 'px', height + 'px', e);\n        }\n        else if (this.resizeBtnStat.botLeft) {\n            this.imgDupMouseMove(width + 'px', height + 'px', e);\n        }\n        else if (this.resizeBtnStat.topRight) {\n            this.imgDupMouseMove(width + 'px', height + 'px', e);\n        }\n        else if (this.resizeBtnStat.topLeft) {\n            this.imgDupMouseMove(width + 'px', height + 'px', e);\n        }\n    };\n    Image.prototype.cancelResizeAction = function () {\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        if (this.imgEle && this.imgResizeDiv && this.contentModule.getEditPanel().contains(this.imgResizeDiv)) {\n            detach(this.imgResizeDiv);\n            this.imgEle.style.outline = '';\n            this.imgResizeDiv = null;\n            this.pageX = null;\n            this.pageY = null;\n        }\n    };\n    Image.prototype.resizeImgDupPos = function (e) {\n        this.imgDupPos = {\n            width: (e.style.width !== '' && (this.parent.insertImageSettings &&\n                !this.parent.insertImageSettings.resizeByPercent)) ? this.imgEle.style.width : e.width + 'px',\n            height: (e.style.height !== '') ? this.imgEle.style.height : e.height + 'px'\n        };\n    };\n    Image.prototype.resizeBtnInit = function () {\n        return this.resizeBtnStat = { botLeft: false, botRight: false, topRight: false, topLeft: false };\n    };\n    Image.prototype.onToolbarAction = function (args) {\n        if (isIDevice()) {\n            this.parent.notify(events.selectionRestore, {});\n        }\n        var item = args.args.item;\n        switch (item.subCommand) {\n            case 'Replace':\n                if (this.parent.fileManagerSettings.enable) {\n                    this.parent.notify(events.renderFileManager, args);\n                }\n                else {\n                    this.parent.notify(events.insertImage, args);\n                }\n                break;\n            case 'Caption':\n                this.parent.notify(events.imageCaption, args);\n                break;\n            case 'InsertLink':\n                this.parent.notify(events.imageLink, args);\n                break;\n            case 'AltText':\n                this.parent.notify(events.imageAlt, args);\n                break;\n            case 'Remove':\n                this.parent.notify(events.imageDelete, args);\n                break;\n            case 'Dimension':\n                this.parent.notify(events.imageSize, args);\n                break;\n            case 'OpenImageLink':\n                this.openImgLink(args);\n                break;\n            case 'EditImageLink':\n                this.editImgLink(args);\n                break;\n            case 'RemoveImageLink':\n                this.removeImgLink(args);\n                break;\n        }\n    };\n    Image.prototype.openImgLink = function (e) {\n        var target = e.selectParent[0].parentNode.target === '' ? '_self' : '_blank';\n        this.parent.formatter.process(this.parent, e.args, e.args, {\n            url: e.selectParent[0].parentNode.href, target: target, selectNode: e.selectNode,\n            subCommand: e.args.item.subCommand\n        });\n    };\n    Image.prototype.editImgLink = function (e) {\n        var selectParentEle = e.selectParent[0].parentNode;\n        var linkUpdate = this.i10n.getConstant('dialogUpdate');\n        var inputDetails = {\n            url: selectParentEle.href, target: selectParentEle.target,\n            header: 'Edit Link', btnText: linkUpdate\n        };\n        this.insertImgLink(e, inputDetails);\n    };\n    Image.prototype.removeImgLink = function (e) {\n        if (Browser.isIE) {\n            this.contentModule.getEditPanel().focus();\n        }\n        e.selection.restore();\n        var isCapLink = (this.contentModule.getEditPanel().contains(this.captionEle) && select('a', this.captionEle)) ?\n            true : false;\n        var selectParent = isCapLink ? [this.captionEle] : [e.selectNode[0].parentElement];\n        this.parent.formatter.process(this.parent, e.args, e.args, {\n            insertElement: e.selectNode[0], selectParent: selectParent, selection: e.selection,\n            subCommand: e.args.item.subCommand\n        });\n        if (this.quickToolObj && document.body.contains(this.quickToolObj.imageQTBar.element)) {\n            this.quickToolObj.imageQTBar.hidePopup();\n            if (!isNullOrUndefined(e.selectParent)) {\n                removeClass([e.selectParent[0]], 'e-img-focus');\n            }\n        }\n        if (isCapLink) {\n            select('.e-img-inner', this.captionEle).focus();\n        }\n    };\n    Image.prototype.onKeyDown = function (event) {\n        var originalEvent = event.args;\n        var range;\n        var save;\n        var selectNodeEle;\n        var selectParentEle;\n        this.deletedImg = [];\n        var isCursor;\n        var keyCodeValues = [27, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123,\n            44, 45, 9, 16, 17, 18, 19, 20, 33, 34, 35, 36, 37, 38, 39, 40, 91, 92, 93, 144, 145, 182, 183];\n        if (this.parent.editorMode === 'HTML') {\n            range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            isCursor = range.startContainer === range.endContainer && range.startOffset === range.endOffset;\n        }\n        if (!isCursor && this.parent.editorMode === 'HTML' && keyCodeValues.indexOf(originalEvent.which) < 0) {\n            var nodes = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n            for (var i = 0; i < nodes.length; i++) {\n                if (nodes[i].nodeName === 'IMG') {\n                    this.deletedImg.push(nodes[i]);\n                }\n            }\n        }\n        if (this.parent.editorMode === 'HTML' && ((originalEvent.which === 8 && originalEvent.code === 'Backspace') ||\n            (originalEvent.which === 46 && originalEvent.code === 'Delete'))) {\n            var isCursor_1 = range.startContainer === range.endContainer && range.startOffset === range.endOffset;\n            if ((originalEvent.which === 8 && originalEvent.code === 'Backspace' && isCursor_1)) {\n                this.checkImageBack(range);\n            }\n            else if ((originalEvent.which === 46 && originalEvent.code === 'Delete' && isCursor_1)) {\n                this.checkImageDel(range);\n            }\n        }\n        if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) &&\n            originalEvent.code !== 'KeyK') {\n            range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n            selectParentEle = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n            if (!originalEvent.ctrlKey && originalEvent.key && (originalEvent.key.length === 1 || originalEvent.action === 'enter') &&\n                (!isNOU(selectParentEle[0]) && selectParentEle[0].tagName === 'IMG') && selectParentEle[0].parentElement) {\n                var prev = selectParentEle[0].parentElement.childNodes[0];\n                if (this.contentModule.getEditPanel().querySelector('.e-img-resize')) {\n                    this.removeResizeEle();\n                }\n                this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(), prev, prev, prev.textContent.length, prev.textContent.length);\n                removeClass([selectParentEle[0]], 'e-img-focus');\n                this.quickToolObj.imageQTBar.hidePopup();\n            }\n        }\n        if (originalEvent.ctrlKey && (originalEvent.keyCode === 89 || originalEvent.keyCode === 90)) {\n            this.undoStack({ subCommand: (originalEvent.keyCode === 90 ? 'undo' : 'redo') });\n        }\n        if (originalEvent.keyCode === 8 || originalEvent.keyCode === 46) {\n            if (selectNodeEle && selectNodeEle[0].nodeName === 'IMG' && selectNodeEle.length < 1) {\n                if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)) {\n                    save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n                }\n                originalEvent.preventDefault();\n                var event_1 = {\n                    selectNode: selectNodeEle, selection: save, selectParent: selectParentEle,\n                    args: {\n                        item: { command: 'Images', subCommand: 'Remove' },\n                        originalEvent: originalEvent\n                    }\n                };\n                this.deleteImg(event_1, originalEvent.keyCode);\n            }\n            if (this.parent.contentModule.getEditPanel().querySelector('.e-img-resize')) {\n                this.removeResizeEle();\n            }\n        }\n        if (originalEvent.code === 'Backspace') {\n            originalEvent.action = 'backspace';\n        }\n        switch (originalEvent.action) {\n            case 'escape':\n                if (!isNullOrUndefined(this.dialogObj)) {\n                    this.dialogObj.close();\n                }\n                break;\n            case 'backspace':\n            case 'delete':\n                for (var i = 0; i < this.deletedImg.length; i++) {\n                    var src = this.deletedImg[i].src;\n                    this.imageRemovePost(src);\n                }\n                if (this.parent.editorMode !== 'Markdown') {\n                    if (range.startContainer.nodeType === 3) {\n                        if (originalEvent.code === 'Backspace') {\n                            if (range.startContainer.previousElementSibling && range.startOffset === 0 &&\n                                range.startContainer.previousElementSibling.classList.contains(classes.CLS_CAPTION) &&\n                                range.startContainer.previousElementSibling.classList.contains(classes.CLS_CAPINLINE)) {\n                                detach(range.startContainer.previousElementSibling);\n                            }\n                        }\n                        else {\n                            if (range.startContainer.nextElementSibling &&\n                                range.endContainer.textContent.length === range.endOffset &&\n                                range.startContainer.nextElementSibling.classList.contains(classes.CLS_CAPTION) &&\n                                range.startContainer.nextElementSibling.classList.contains(classes.CLS_CAPINLINE)) {\n                                detach(range.startContainer.nextElementSibling);\n                            }\n                        }\n                    }\n                    else if ((range.startContainer.nodeType === 1 &&\n                        range.startContainer.querySelector('.' + classes.CLS_CAPTION + '.' + classes.CLS_CAPINLINE))) {\n                        detach(range.startContainer.querySelector('.' + classes.CLS_CAPTION + '.' + classes.CLS_CAPINLINE));\n                    }\n                    else if (range.startContainer.nodeType === 1 &&\n                        range.startContainer.querySelector('.' + classes.CLS_CAPTION + '.' + classes.CLS_IMGBREAK)) {\n                        detach(range.startContainer.querySelector('.' + classes.CLS_CAPTION + '.' + classes.CLS_IMGBREAK));\n                    }\n                }\n                break;\n            case 'insert-image':\n                if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)) {\n                    save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n                }\n                this.openDialog(true, originalEvent, save, selectNodeEle, selectParentEle);\n                originalEvent.preventDefault();\n                break;\n        }\n    };\n    Image.prototype.openDialog = function (isInternal, event, selection, ele, parentEle) {\n        var range;\n        var save;\n        var selectNodeEle;\n        var selectParentEle;\n        if (!isInternal && !isNOU(this.parent.formatter.editorManager.nodeSelection)) {\n            range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n            selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n            selectParentEle = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n        }\n        else {\n            save = selection;\n            selectNodeEle = ele;\n            selectParentEle = parentEle;\n        }\n        if (this.parent.editorMode === 'HTML') {\n            this.insertImage({\n                args: {\n                    item: { command: 'Images', subCommand: 'Image' },\n                    originalEvent: event,\n                    name: !isInternal ? 'showDialog' : null\n                },\n                selectNode: selectNodeEle,\n                selection: save,\n                selectParent: selectParentEle\n            });\n        }\n        else {\n            this.insertImage({\n                args: {\n                    item: { command: 'Images', subCommand: 'Image' },\n                    originalEvent: event,\n                    name: !isInternal ? 'showDialog' : null\n                },\n                member: 'image',\n                text: this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.contentModule.getEditPanel()),\n                module: 'Markdown',\n                name: 'insertImage'\n            });\n        }\n    };\n    Image.prototype.showDialog = function () {\n        this.openDialog(false);\n        this.setCssClass({ cssClass: this.parent.cssClass });\n    };\n    Image.prototype.closeDialog = function () {\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n        }\n    };\n    // eslint-disable-next-line\n    Image.prototype.onKeyUp = function (event) {\n        if (!isNOU(this.deletedImg) && this.deletedImg.length > 0) {\n            for (var i = 0; i < this.deletedImg.length; i++) {\n                var args = {\n                    element: this.deletedImg[i],\n                    src: this.deletedImg[i].getAttribute('src')\n                };\n                this.parent.trigger(events.afterImageDelete, args);\n            }\n        }\n    };\n    Image.prototype.checkImageBack = function (range) {\n        if (range.startContainer.nodeName === '#text' && range.startOffset === 0 &&\n            !isNOU(range.startContainer.previousSibling) && range.startContainer.previousSibling.nodeName === 'IMG') {\n            this.deletedImg.push(range.startContainer.previousSibling);\n        }\n        else if (range.startContainer.nodeName !== '#text' && !isNOU(range.startContainer.childNodes[range.startOffset - 1]) &&\n            range.startContainer.childNodes[range.startOffset - 1].nodeName === 'IMG') {\n            this.deletedImg.push(range.startContainer.childNodes[range.startOffset - 1]);\n        }\n    };\n    Image.prototype.checkImageDel = function (range) {\n        if (range.startContainer.nodeName === '#text' && range.startOffset === range.startContainer.textContent.length &&\n            !isNOU(range.startContainer.nextSibling) && range.startContainer.nextSibling.nodeName === 'IMG') {\n            this.deletedImg.push(range.startContainer.nextSibling);\n        }\n        else if (range.startContainer.nodeName !== '#text' && !isNOU(range.startContainer.childNodes[range.startOffset]) &&\n            range.startContainer.childNodes[range.startOffset].nodeName === 'IMG') {\n            this.deletedImg.push(range.startContainer.childNodes[range.startOffset]);\n        }\n    };\n    Image.prototype.alignmentSelect = function (e) {\n        var item = e.item;\n        if (!document.body.contains(document.body.querySelector('.e-rte-quick-toolbar')) || item.command !== 'Images') {\n            return;\n        }\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n        var selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n        selectNodeEle = (selectNodeEle[0].nodeName === 'IMG') ? selectNodeEle : [this.imgEle];\n        var args = { args: e, selectNode: selectNodeEle };\n        if (this.parent.formatter.getUndoRedoStack().length === 0) {\n            this.parent.formatter.saveData();\n        }\n        switch (item.subCommand) {\n            case 'JustifyLeft':\n                this.alignImage(args, 'JustifyLeft');\n                break;\n            case 'JustifyCenter':\n                this.alignImage(args, 'JustifyCenter');\n                break;\n            case 'JustifyRight':\n                this.alignImage(args, 'JustifyRight');\n                break;\n            case 'Inline':\n                this.inline(args);\n                break;\n            case 'Break':\n                this.break(args);\n                break;\n        }\n        if (this.quickToolObj && document.body.contains(this.quickToolObj.imageQTBar.element)) {\n            this.quickToolObj.imageQTBar.hidePopup();\n            removeClass([selectNodeEle[0]], 'e-img-focus');\n        }\n        this.cancelResizeAction();\n    };\n    Image.prototype.imageWithLinkQTBarItemUpdate = function () {\n        var separator;\n        var items = this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll('.e-toolbar-item');\n        for (var i = 0; i < items.length; i++) {\n            if (items[i].getAttribute('title') === this.i10n.getConstant('openLink') ||\n                items[i].getAttribute('title') === this.i10n.getConstant('editLink') ||\n                items[i].getAttribute('title') === this.i10n.getConstant('removeLink')) {\n                addClass([items[i]], 'e-link-groups');\n                items[i].style.display = 'none';\n            }\n            else if (items[i].getAttribute('title') === 'Insert Link') {\n                items[i].style.display = '';\n            }\n            else if (items[i].classList.contains('e-rte-horizontal-separator')) {\n                // eslint-disable-next-line\n                separator = items[i];\n                detach(items[i]);\n            }\n        }\n        var newItems = this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll('.e-toolbar-item:not(.e-link-groups)');\n        this.quickToolObj.imageQTBar.addQTBarItem(['-'], Math.round(newItems.length / 2));\n    };\n    Image.prototype.showImageQuickToolbar = function (e) {\n        var _this = this;\n        if (e.type !== 'Images' || isNullOrUndefined(this.parent.quickToolbarModule)\n            || isNullOrUndefined(this.parent.quickToolbarModule.imageQTBar) || isNullOrUndefined(e.args)) {\n            return;\n        }\n        this.quickToolObj = this.parent.quickToolbarModule;\n        var args = e.args;\n        var target = e.elements;\n        [].forEach.call(e.elements, function (element, index) {\n            if (index === 0) {\n                target = element;\n            }\n        });\n        if (target && !closest(target, 'a')) {\n            this.imageWithLinkQTBarItemUpdate();\n        }\n        if (target.nodeName === 'IMG') {\n            addClass([target], ['e-img-focus']);\n        }\n        var pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset +\n            this.parent.element.getBoundingClientRect().top + args.clientY : args.pageY;\n        if (this.parent.quickToolbarModule.imageQTBar) {\n            if (e.isNotify) {\n                setTimeout(function () {\n                    _this.parent.formatter.editorManager.nodeSelection.Clear(_this.contentModule.getDocument());\n                    _this.parent.formatter.editorManager.nodeSelection.setSelectionContents(_this.contentModule.getDocument(), target);\n                    _this.quickToolObj.imageQTBar.showPopup(args.pageX, pageY, target);\n                }, 400);\n            }\n            else {\n                this.quickToolObj.imageQTBar.showPopup(args.pageX, pageY, target);\n            }\n        }\n    };\n    Image.prototype.hideImageQuickToolbar = function () {\n        if (!isNullOrUndefined(this.contentModule.getEditPanel().querySelector('.e-img-focus'))) {\n            removeClass([this.contentModule.getEditPanel().querySelector('.e-img-focus')], 'e-img-focus');\n            if (this.quickToolObj && this.quickToolObj.imageQTBar && document.body.contains(this.quickToolObj.imageQTBar.element)) {\n                this.quickToolObj.imageQTBar.hidePopup();\n            }\n        }\n    };\n    Image.prototype.editAreaClickHandler = function (e) {\n        if (this.parent.readonly) {\n            this.hideImageQuickToolbar();\n            return;\n        }\n        var args = e.args;\n        var showOnRightClick = this.parent.quickToolbarSettings.showOnRightClick;\n        if (args.which === 2 || (showOnRightClick && args.which === 1) || (!showOnRightClick && args.which === 3)) {\n            if ((showOnRightClick && args.which === 1) && !isNullOrUndefined(args.target) &&\n                args.target.tagName === 'IMG') {\n                this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(), args.target);\n            }\n            return;\n        }\n        if (this.parent.editorMode === 'HTML' && this.parent.quickToolbarModule && this.parent.quickToolbarModule.imageQTBar) {\n            this.quickToolObj = this.parent.quickToolbarModule;\n            var target = args.target;\n            this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n            var isPopupOpen = this.quickToolObj.imageQTBar.element.classList.contains('e-rte-pop');\n            if (target.nodeName === 'IMG' && this.parent.quickToolbarModule) {\n                if (isPopupOpen) {\n                    return;\n                }\n                this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(), target);\n                if (isIDevice()) {\n                    this.parent.notify(events.selectionSave, e);\n                }\n                addClass([target], 'e-img-focus');\n                var items = this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll('.e-toolbar-item');\n                var separator = void 0;\n                if (closest(target, 'a')) {\n                    for (var i = 0; i < items.length; i++) {\n                        if (items[i].getAttribute('title') === this.i10n.getConstant('openLink') ||\n                            items[i].getAttribute('title') === this.i10n.getConstant('editLink') ||\n                            items[i].getAttribute('title') === this.i10n.getConstant('removeLink')) {\n                            items[i].style.display = '';\n                            removeClass([items[i]], 'e-link-groups');\n                        }\n                        else if (items[i].getAttribute('title') === 'Insert Link') {\n                            items[i].style.display = 'none';\n                        }\n                        else if (items[i].classList.contains('e-rte-horizontal-separator')) {\n                            // eslint-disable-next-line\n                            separator = items[i];\n                            detach(items[i]);\n                        }\n                    }\n                    var newItems = this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll('.e-toolbar-item:not(.e-link-groups)');\n                    this.quickToolObj.imageQTBar.addQTBarItem(['-'], Math.round(newItems.length / 2));\n                }\n                else if (!closest(target, 'a')) {\n                    this.imageWithLinkQTBarItemUpdate();\n                }\n                this.showImageQuickToolbar({ args: args, type: 'Images', elements: [args.target] });\n            }\n            else {\n                this.hideImageQuickToolbar();\n            }\n        }\n    };\n    Image.prototype.insertImgLink = function (e, inputDetails) {\n        var _this = this;\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        this.imagDialog(e);\n        if (!isNullOrUndefined(this.dialogObj)) {\n            var linkWrap = this.parent.createElement('div', { className: 'e-img-linkwrap' + ' ' + this.parent.cssClass });\n            var linkUrl = this.i10n.getConstant('linkurl');\n            var content = '<div class=\"e-rte-field' + ' ' + this.parent.cssClass + '\">' +\n                '<input type=\"text\" data-role =\"none\" class=\"e-input e-img-link' + ' ' + this.parent.cssClass + '\" spellcheck=\"false\" placeholder=\"' + linkUrl + '\"/></div>' +\n                '<div class=\"e-rte-label\"></div>' + '<div class=\"e-rte-field\">' +\n                '<input type=\"checkbox\" class=\"e-rte-linkTarget' + ' ' + this.parent.cssClass + '\"  data-role =\"none\"></div>';\n            var contentElem = parseHtml(content);\n            linkWrap.appendChild(contentElem);\n            var linkTarget = linkWrap.querySelector('.e-rte-linkTarget');\n            var inputLink = linkWrap.querySelector('.e-img-link');\n            var linkOpenLabel = this.i10n.getConstant('linkOpenInNewWindow');\n            this.checkBoxObj = new CheckBox({\n                label: linkOpenLabel, checked: true, enableRtl: this.parent.enableRtl, cssClass: this.parent.cssClass,\n                change: function (e) {\n                    if (e.checked) {\n                        target_1 = '_blank';\n                    }\n                    else {\n                        target_1 = null;\n                    }\n                }\n            });\n            this.checkBoxObj.isStringTemplate = true;\n            this.checkBoxObj.createElement = this.parent.createElement;\n            this.checkBoxObj.appendTo(linkTarget);\n            var target_1 = this.checkBoxObj.checked ? '_blank' : null;\n            var linkUpdate = this.i10n.getConstant('dialogUpdate');\n            var linkargs_1 = {\n                args: e.args,\n                selfImage: this, selection: e.selection,\n                selectNode: e.selectNode, selectParent: e.selectParent, link: inputLink, target: target_1\n            };\n            this.dialogObj.setProperties({\n                height: 'inherit',\n                width: '290px',\n                header: this.parent.localeObj.getConstant('imageInsertLinkHeader'),\n                content: linkWrap,\n                buttons: [{\n                        // eslint-disable-next-line\n                        click: function (e) {\n                            _this.insertlink(linkargs_1);\n                        },\n                        buttonModel: {\n                            content: linkUpdate, cssClass: 'e-flat e-update-link' + ' ' + this.parent.cssClass, isPrimary: true\n                        }\n                    }],\n                cssClass: this.dialogObj.cssClass + ' e-rte-img-link-dialog'\n            });\n            if (!isNOU(this.parent.cssClass)) {\n                this.dialogObj.setProperties({ cssClass: this.parent.cssClass });\n            }\n            if (!isNullOrUndefined(inputDetails)) {\n                inputLink.value = inputDetails.url;\n                // eslint-disable-next-line\n                (inputDetails.target) ? this.checkBoxObj.checked = true : this.checkBoxObj.checked = false;\n                this.dialogObj.header = inputDetails.header;\n            }\n            this.dialogObj.element.style.maxHeight = 'inherit';\n            this.dialogObj.content.querySelector('input').focus();\n        }\n    };\n    Image.prototype.insertAltText = function (e) {\n        var _this = this;\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        this.imagDialog(e);\n        var altText = this.i10n.getConstant('altText');\n        if (!isNullOrUndefined(this.dialogObj)) {\n            var altWrap = this.parent.createElement('div', { className: 'e-img-altwrap' + ' ' + this.parent.cssClass });\n            var altHeader = this.i10n.getConstant('alternateHeader');\n            var linkUpdate = this.i10n.getConstant('dialogUpdate');\n            var getAlt = (e.selectNode[0].getAttribute('alt') === null) ? '' :\n                e.selectNode[0].getAttribute('alt');\n            var content = '<div class=\"e-rte-field' + ' ' + this.parent.cssClass + '\">' +\n                '<input type=\"text\" spellcheck=\"false\"  class=\"e-input e-img-alt' + ' ' + this.parent.cssClass + '\" placeholder=\"' + altText + '\"/>' +\n                '</div>';\n            var contentElem = parseHtml(content);\n            contentElem.querySelector('input').setAttribute('value', getAlt);\n            altWrap.appendChild(contentElem);\n            var inputAlt = altWrap.querySelector('.e-img-alt');\n            var altArgs_1 = {\n                args: e.args, selfImage: this, selection: e.selection, selectNode: e.selectNode,\n                alt: inputAlt\n            };\n            this.dialogObj.setProperties({\n                height: 'inherit', width: '290px', header: altHeader, content: altWrap,\n                buttons: [{\n                        // eslint-disable-next-line\n                        click: function (e) {\n                            _this.insertAlt(altArgs_1);\n                        },\n                        buttonModel: {\n                            content: linkUpdate, cssClass: 'e-flat e-update-alt' + ' ' + this.parent.cssClass, isPrimary: true\n                        }\n                    }],\n                cssClass: this.dialogObj.cssClass + ' e-rte-img-alt-dialog'\n            });\n            if (!isNOU(this.parent.cssClass)) {\n                this.dialogObj.setProperties({ cssClass: this.parent.cssClass });\n            }\n            this.dialogObj.element.style.maxHeight = 'inherit';\n            this.dialogObj.content.querySelector('input').focus();\n        }\n    };\n    Image.prototype.insertAlt = function (e) {\n        if (!isNullOrUndefined(e.alt)) {\n            e.selection.restore();\n            if (this.parent.formatter.getUndoRedoStack().length === 0) {\n                this.parent.formatter.saveData();\n            }\n            var altText = e.alt.value;\n            this.parent.formatter.process(this.parent, e.args, e.args, {\n                altText: altText, selectNode: e.selectNode,\n                subCommand: e.args.item.subCommand\n            });\n            this.dialogObj.hide({ returnValue: false });\n        }\n    };\n    Image.prototype.insertlink = function (e) {\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        var url = e.link.value;\n        if (url === '') {\n            addClass([e.link], 'e-error');\n            e.link.setSelectionRange(0, url.length);\n            e.link.focus();\n            return;\n        }\n        if (!this.isUrl(url)) {\n            url = 'http://' + url;\n        }\n        else {\n            removeClass([e.link], 'e-error');\n        }\n        var proxy = e.selfImage;\n        if (proxy.parent.editorMode === 'HTML') {\n            e.selection.restore();\n        }\n        if (proxy.parent.formatter.getUndoRedoStack().length === 0) {\n            proxy.parent.formatter.saveData();\n        }\n        if (e.selectNode[0].parentElement.nodeName === 'A') {\n            proxy.parent.formatter.process(proxy.parent, e.args, e.args, {\n                url: url, target: proxy.checkBoxObj.checked ? '_blank' : null, selectNode: e.selectNode,\n                subCommand: e.args.item.subCommand\n            });\n            proxy.dialogObj.hide({ returnValue: true });\n            return;\n        }\n        proxy.parent.formatter.process(proxy.parent, e.args, e.args, {\n            url: url, target: proxy.checkBoxObj.checked ? '_blank' : null, selectNode: e.selectNode,\n            subCommand: e.args.item.subCommand, selection: e.selection\n        });\n        var captionEle = closest(e.selectNode[0], '.e-img-caption');\n        if (captionEle) {\n            select('.e-img-inner', captionEle).focus();\n        }\n        if (captionEle) {\n            select('.e-img-inner', captionEle).focus();\n        }\n        proxy.dialogObj.hide({ returnValue: false });\n    };\n    Image.prototype.isUrl = function (url) {\n        // eslint-disable-next-line\n        var regexp = /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/gi;\n        return regexp.test(url);\n    };\n    Image.prototype.deleteImg = function (e, keyCode) {\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        var args = {\n            element: e.selectNode[0],\n            src: e.selectNode[0].getAttribute('src')\n        };\n        if (this.parent.formatter.getUndoRedoStack().length === 0) {\n            this.parent.formatter.saveData();\n        }\n        e.selection.restore();\n        if (this.contentModule.getEditPanel().querySelector('.e-img-resize')) {\n            this.removeResizeEle();\n        }\n        this.parent.formatter.process(this.parent, e.args, e.args, {\n            selectNode: e.selectNode,\n            captionClass: classes.CLS_CAPTION,\n            subCommand: e.args.item.subCommand\n        });\n        this.imageRemovePost(args.src);\n        if (this.quickToolObj && document.body.contains(this.quickToolObj.imageQTBar.element)) {\n            this.quickToolObj.imageQTBar.hidePopup();\n        }\n        this.cancelResizeAction();\n        if (isNullOrUndefined(keyCode)) {\n            this.parent.trigger(events.afterImageDelete, args);\n        }\n    };\n    Image.prototype.imageRemovePost = function (src) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        var absoluteUrl = '';\n        if (isNOU(this.parent.insertImageSettings.removeUrl) || this.parent.insertImageSettings.removeUrl === '') {\n            return;\n        }\n        if (src.indexOf('http://') > -1 || src.indexOf('https://') > -1) {\n            absoluteUrl = src;\n        }\n        else {\n            absoluteUrl = new URL(src, document.baseURI).href;\n        }\n        this.removingImgName = absoluteUrl.replace(/^.*[\\\\/]/, '');\n        var xhr = new XMLHttpRequest();\n        // eslint-disable-next-line @typescript-eslint/tslint/config\n        xhr.addEventListener('readystatechange', function () {\n            if (this.readyState === 4 && this.status === 200) {\n                proxy.triggerPost(this.response);\n            }\n        });\n        xhr.open('GET', absoluteUrl);\n        xhr.responseType = 'blob';\n        xhr.send();\n    };\n    Image.prototype.triggerPost = function (response) {\n        var removeUrl = this.parent.insertImageSettings.removeUrl;\n        if (isNOU(removeUrl) || removeUrl === '') {\n            return;\n        }\n        // eslint-disable-next-line @typescript-eslint/tslint/config\n        var file = new File([response], this.removingImgName);\n        var ajax = new Ajax(removeUrl, 'POST', true, null);\n        var formData = new FormData();\n        formData.append('UploadFiles', file);\n        ajax.send(formData);\n    };\n    Image.prototype.caption = function (e) {\n        var selectNode = e.selectNode[0];\n        if (selectNode.nodeName !== 'IMG') {\n            return;\n        }\n        e.selection.restore();\n        if (this.parent.formatter.getUndoRedoStack().length === 0) {\n            this.parent.formatter.saveData();\n        }\n        this.cancelResizeAction();\n        addClass([selectNode], 'e-rte-image');\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'Caption';\n        if (!isNullOrUndefined(closest(selectNode, '.' + classes.CLS_CAPTION))) {\n            detach(closest(selectNode, '.' + classes.CLS_CAPTION));\n            if (Browser.isIE) {\n                this.contentModule.getEditPanel().focus();\n                e.selection.restore();\n            }\n            if (selectNode.parentElement.tagName === 'A') {\n                this.parent.formatter.process(this.parent, e.args, e.args, { insertElement: selectNode.parentElement, selectNode: e.selectNode, subCommand: subCommand });\n            }\n            else {\n                this.parent.formatter.process(this.parent, e.args, e.args, { insertElement: selectNode, selectNode: e.selectNode, subCommand: subCommand });\n            }\n        }\n        else {\n            this.captionEle = this.parent.createElement('span', {\n                className: classes.CLS_CAPTION + ' ' + classes.CLS_RTE_CAPTION + ' ' + this.parent.cssClass,\n                attrs: { contenteditable: 'false', draggable: 'false', style: 'width:' + this.parent.insertImageSettings.width }\n            });\n            var imgWrap = this.parent.createElement('span', { className: 'e-img-wrap' + ' ' + this.parent.cssClass });\n            var imgInner = this.parent.createElement('span', { className: 'e-img-inner' + ' ' + this.parent.cssClass,\n                attrs: { contenteditable: 'true' } });\n            var parent_1 = e.selectNode[0].parentElement;\n            if (parent_1.tagName === 'A') {\n                parent_1.setAttribute('contenteditable', 'true');\n            }\n            imgWrap.appendChild(parent_1.tagName === 'A' ? parent_1 : e.selectNode[0]);\n            imgWrap.appendChild(imgInner);\n            var imgCaption = this.i10n.getConstant('imageCaption');\n            imgInner.innerHTML = imgCaption;\n            this.captionEle.appendChild(imgWrap);\n            if (selectNode.classList.contains(classes.CLS_IMGINLINE)) {\n                addClass([this.captionEle], classes.CLS_CAPINLINE);\n            }\n            if (selectNode.classList.contains(classes.CLS_IMGBREAK)) {\n                addClass([this.captionEle], classes.CLS_IMGBREAK);\n            }\n            if (selectNode.classList.contains(classes.CLS_IMGLEFT)) {\n                addClass([this.captionEle], classes.CLS_IMGLEFT);\n            }\n            if (selectNode.classList.contains(classes.CLS_IMGRIGHT)) {\n                addClass([this.captionEle], classes.CLS_IMGRIGHT);\n            }\n            if (selectNode.classList.contains(classes.CLS_IMGCENTER)) {\n                addClass([this.captionEle], classes.CLS_IMGCENTER);\n            }\n            this.parent.formatter.process(this.parent, e.args, e.args, { insertElement: this.captionEle, selectNode: e.selectNode, subCommand: subCommand });\n            this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(), imgInner.childNodes[0], imgInner.childNodes[0], 0, imgInner.childNodes[0].textContent.length);\n        }\n        if (this.quickToolObj && document.body.contains(this.quickToolObj.imageQTBar.element)) {\n            this.quickToolObj.imageQTBar.hidePopup();\n            removeClass([selectNode], 'e-img-focus');\n        }\n    };\n    Image.prototype.imageSize = function (e) {\n        var _this = this;\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        this.imagDialog(e);\n        if (!isNullOrUndefined(this.dialogObj)) {\n            var imgSizeHeader = this.i10n.getConstant('imageSizeHeader');\n            var linkUpdate = this.i10n.getConstant('dialogUpdate');\n            var dialogContent = this.imgsizeInput(e);\n            var selectObj_1 = { args: e.args, selfImage: this, selection: e.selection, selectNode: e.selectNode };\n            this.dialogObj.setProperties({\n                height: (Browser.isDevice) ? '300px' : 'inherit', width: '290px', header: imgSizeHeader, content: dialogContent,\n                buttons: [{\n                        // eslint-disable-next-line\n                        click: function (e) {\n                            _this.insertSize(selectObj_1);\n                        },\n                        buttonModel: {\n                            content: linkUpdate, cssClass: 'e-flat e-update-size' + ' ' + this.parent.cssClass, isPrimary: true\n                        }\n                    }],\n                cssClass: this.dialogObj.cssClass + ' e-rte-img-size-dialog'\n            });\n            if (!isNOU(this.parent.cssClass)) {\n                this.dialogObj.setProperties({ cssClass: this.parent.cssClass });\n            }\n            this.dialogObj.element.style.maxHeight = 'inherit';\n            this.dialogObj.content.querySelector('input').focus();\n        }\n    };\n    Image.prototype.break = function (e) {\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'Break';\n        this.parent.formatter.process(this.parent, e.args, e.args, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Image.prototype.inline = function (e) {\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'Inline';\n        this.parent.formatter.process(this.parent, e.args, e.args, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Image.prototype.alignImage = function (e, type) {\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : type;\n        this.parent.formatter.process(this.parent, e.args, e.args, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Image.prototype.clearDialogObj = function () {\n        if (this.dialogObj) {\n            this.dialogObj.destroy();\n            detach(this.dialogObj.element);\n            this.dialogObj = null;\n        }\n    };\n    Image.prototype.imagDialog = function (e) {\n        var _this = this;\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n            return;\n        }\n        var imgDialog = this.parent.createElement('div', { className: 'e-rte-img-dialog' + ' ' + this.parent.cssClass, id: this.rteID + '_image' });\n        this.parent.element.appendChild(imgDialog);\n        var imgInsert = this.i10n.getConstant('dialogInsert');\n        var imglinkCancel = this.i10n.getConstant('dialogCancel');\n        var imgHeader = this.i10n.getConstant('imageHeader');\n        var selection = e.selection;\n        var selectObj = { selfImage: this, selection: e.selection, args: e.args, selectParent: e.selectParent };\n        var dialogModel = {\n            header: imgHeader,\n            cssClass: classes.CLS_RTE_ELEMENTS + ' ' + this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            showCloseIcon: true, closeOnEscape: true, width: (Browser.isDevice) ? '290px' : '340px',\n            isModal: Browser.isDevice,\n            buttons: [{\n                    click: this.insertImageUrl.bind(selectObj),\n                    buttonModel: { content: imgInsert, cssClass: 'e-flat e-insertImage' + ' ' + this.parent.cssClass, isPrimary: true, disabled: true }\n                },\n                {\n                    click: function (e) {\n                        _this.cancelDialog(e);\n                    },\n                    buttonModel: { cssClass: 'e-flat e-cancel' + ' ' + this.parent.cssClass, content: imglinkCancel }\n                }],\n            target: (Browser.isDevice) ? document.body : this.parent.element,\n            animationSettings: { effect: 'None' },\n            close: function (event) {\n                if (_this.isImgUploaded) {\n                    _this.uploadObj.removing();\n                }\n                _this.parent.isBlur = false;\n                if (event && event.event.returnValue) {\n                    if (_this.parent.editorMode === 'HTML') {\n                        selection.restore();\n                    }\n                    else {\n                        _this.parent.formatter.editorManager.markdownSelection.restore(_this.parent.contentModule.getEditPanel());\n                    }\n                }\n                _this.dialogObj.destroy();\n                detach(_this.dialogObj.element);\n                _this.dialogRenderObj.close(event);\n                _this.dialogObj = null;\n            }\n        };\n        var dialogContent = this.parent.createElement('div', { className: 'e-img-content' + ' ' + this.parent.cssClass });\n        if ((!isNullOrUndefined(this.parent.insertImageSettings.path) && this.parent.editorMode === 'Markdown')\n            || this.parent.editorMode === 'HTML') {\n            dialogContent.appendChild(this.imgUpload(e));\n        }\n        var linkHeader = this.parent.createElement('div', { className: 'e-linkheader' + ' ' + this.parent.cssClass });\n        var linkHeaderText = this.i10n.getConstant('imageLinkHeader');\n        if (this.parent.editorMode === 'HTML') {\n            linkHeader.innerHTML = linkHeaderText;\n        }\n        else {\n            linkHeader.innerHTML = this.i10n.getConstant('mdimageLink');\n        }\n        dialogContent.appendChild(linkHeader);\n        dialogContent.appendChild(this.imageUrlPopup(e));\n        if (e.selectNode && e.selectNode[0].nodeName === 'IMG') {\n            dialogModel.header = this.parent.localeObj.getConstant('editImageHeader');\n            dialogModel.content = dialogContent;\n        }\n        else {\n            dialogModel.content = dialogContent;\n        }\n        this.dialogObj = this.dialogRenderObj.render(dialogModel);\n        this.dialogObj.createElement = this.parent.createElement;\n        this.dialogObj.appendTo(imgDialog);\n        if (isNullOrUndefined(this.dialogObj)) {\n            return;\n        }\n        if (e.selectNode && e.selectNode[0].nodeName === 'IMG' && (e.name === 'insertImage')) {\n            this.dialogObj.element.querySelector('.e-insertImage').textContent = this.parent.localeObj.getConstant('dialogUpdate');\n        }\n        imgDialog.style.maxHeight = 'inherit';\n        if (this.quickToolObj) {\n            if (this.quickToolObj.imageQTBar && document.body.contains(this.quickToolObj.imageQTBar.element)) {\n                this.quickToolObj.imageQTBar.hidePopup();\n                if (!isNullOrUndefined(e.selectParent)) {\n                    removeClass([e.selectParent[0]], 'e-img-focus');\n                }\n            }\n            if (this.quickToolObj.inlineQTBar && document.body.contains(this.quickToolObj.inlineQTBar.element)) {\n                this.quickToolObj.inlineQTBar.hidePopup();\n            }\n            if (this.quickToolObj.textQTBar && this.parent.element.ownerDocument.body.contains(this.quickToolObj.textQTBar.element)) {\n                this.quickToolObj.textQTBar.hidePopup();\n            }\n        }\n    };\n    // eslint-disable-next-line\n    Image.prototype.cancelDialog = function (e) {\n        this.parent.isBlur = false;\n        this.dialogObj.hide({ returnValue: true });\n        if (this.isImgUploaded) {\n            this.uploadObj.removing();\n        }\n    };\n    Image.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        if (target.nodeName === 'IMG') {\n            this.imgEle = target;\n        }\n        if (!this.parent) {\n            return;\n        }\n        if (target.nodeName !== '#document') {\n            this.parent.currentTarget = e.target;\n        }\n        if (!isNullOrUndefined(this.dialogObj) && ((\n        // eslint-disable-next-line\n        !closest(target, '[id=' + \"'\" + this.dialogObj.element.id + \"'\" + ']') && this.parent.toolbarSettings.enable && this.parent.getToolbarElement() &&\n            !this.parent.getToolbarElement().contains(e.target)) ||\n            (this.parent.getToolbarElement() && this.parent.getToolbarElement().contains(e.target) &&\n                !closest(target, '#' + this.parent.getID() + '_toolbar_Image') &&\n                !target.querySelector('#' + this.parent.getID() + '_toolbar_Image')))) {\n            /* eslint-disable */\n            if (e.offsetX > e.target.clientWidth || e.offsetY > e.target.clientHeight) {\n            }\n            else {\n                this.dialogObj.hide({ returnValue: true });\n                this.parent.isBlur = true;\n                dispatchEvent(this.parent.element, 'focusout');\n            }\n            /* eslint-enable */\n        }\n        if (!(this.parent.iframeSettings.enable && !isNOU(this.parent.currentTarget) && this.parent.currentTarget.nodeName === 'IMG') &&\n            e.target.tagName !== 'IMG' && this.imgResizeDiv && !(this.quickToolObj &&\n            this.quickToolObj.imageQTBar && this.quickToolObj.imageQTBar.element.contains(e.target)) &&\n            this.contentModule.getEditPanel().contains(this.imgResizeDiv)) {\n            this.cancelResizeAction();\n        }\n        if (this.contentModule.getEditPanel().querySelector('.e-img-resize') && !(this.parent.iframeSettings.enable && this.parent.currentTarget.nodeName === 'IMG')) {\n            if (target.tagName !== 'IMG') {\n                this.removeResizeEle();\n            }\n            if (target.tagName !== 'IMG' && !isNOU(this.imgEle)) {\n                this.imgEle.style.outline = '';\n            }\n            else if (!isNOU(this.prevSelectedImgEle) && this.prevSelectedImgEle !== target) {\n                this.prevSelectedImgEle.style.outline = '';\n            }\n        }\n        if (target.tagName !== 'IMG') {\n            var items = this.contentModule.getEditPanel().querySelectorAll('img');\n            for (var i = 0; i < items.length; i++) {\n                removeClass([items[i]], 'e-img-focus');\n                removeClass([items[i]], 'e-resize');\n                items[i].style.maxWidth = '';\n            }\n        }\n    };\n    Image.prototype.removeResizeEle = function () {\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        detach(this.contentModule.getEditPanel().querySelector('.e-img-resize'));\n    };\n    Image.prototype.onWindowResize = function () {\n        if (!isNOU(this.contentModule) && !isNOU(this.contentModule.getEditPanel().querySelector('.e-img-resize'))) {\n            this.cancelResizeAction();\n        }\n    };\n    // eslint-disable-next-line\n    Image.prototype.imageUrlPopup = function (e) {\n        var _this = this;\n        var imgUrl = this.parent.createElement('div', { className: 'imgUrl' + ' ' + this.parent.cssClass });\n        var placeUrl = this.i10n.getConstant('imageUrl');\n        this.inputUrl = this.parent.createElement('input', {\n            className: 'e-input e-img-url' + ' ' + this.parent.cssClass,\n            attrs: { placeholder: placeUrl, spellcheck: 'false', 'aria-label': this.i10n.getConstant('imageLinkHeader') }\n        });\n        this.inputUrl.addEventListener('input', function () {\n            if (!isNOU(_this.inputUrl)) {\n                if (_this.inputUrl.value.length === 0) {\n                    _this.dialogObj.getButtons(0).element.disabled = true;\n                }\n                else {\n                    _this.dialogObj.getButtons(0).element.removeAttribute('disabled');\n                }\n            }\n        });\n        imgUrl.appendChild(this.inputUrl);\n        return imgUrl;\n    };\n    // eslint-disable-next-line\n    Image.prototype.insertImageUrl = function (e) {\n        var proxy = this.selfImage;\n        proxy.isImgUploaded = false;\n        var url = proxy.inputUrl.value;\n        if (proxy.parent.formatter.getUndoRedoStack().length === 0) {\n            proxy.parent.formatter.saveData();\n        }\n        if (!isNullOrUndefined(proxy.uploadUrl) && proxy.uploadUrl.url !== '') {\n            proxy.uploadUrl.cssClass = (proxy.parent.insertImageSettings.display === 'inline' ?\n                classes.CLS_IMGINLINE : classes.CLS_IMGBREAK);\n            proxy.dialogObj.hide({ returnValue: false });\n            proxy.parent.formatter.process(proxy.parent, this.args, this.args.originalEvent, proxy.uploadUrl);\n            proxy.uploadUrl.url = '';\n            if (proxy.contentModule.getEditPanel().querySelector('.e-img-resize')) {\n                proxy.imgEle.style.outline = '';\n                proxy.removeResizeEle();\n            }\n        }\n        else if (url !== '') {\n            if (proxy.parent.editorMode === 'HTML' && isNullOrUndefined(closest(\n            // eslint-disable-next-line\n            this.selection.range.startContainer.parentNode, '[id=' + \"'\" + proxy.contentModule.getPanel().id + \"'\" + ']'))) {\n                proxy.contentModule.getEditPanel().focus();\n                var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.contentModule.getDocument());\n                this.selection = proxy.parent.formatter.editorManager.nodeSelection.save(range, proxy.contentModule.getDocument());\n                this.selectParent = proxy.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n            }\n            var regex = /[\\w-]+.(jpg|png|jpeg|gif)/g;\n            var matchUrl = (!isNullOrUndefined(url.match(regex)) && proxy.parent.editorMode === 'HTML') ? url.match(regex)[0] : '';\n            var value = {\n                cssClass: (proxy.parent.insertImageSettings.display === 'inline' ? classes.CLS_IMGINLINE : classes.CLS_IMGBREAK),\n                url: url, selection: this.selection, altText: matchUrl,\n                selectParent: this.selectParent, width: {\n                    width: proxy.parent.insertImageSettings.width, minWidth: proxy.parent.insertImageSettings.minWidth,\n                    maxWidth: proxy.parent.getInsertImgMaxWidth()\n                },\n                height: {\n                    height: proxy.parent.insertImageSettings.height, minHeight: proxy.parent.insertImageSettings.minHeight,\n                    maxHeight: proxy.parent.insertImageSettings.maxHeight\n                }\n            };\n            proxy.parent.formatter.process(proxy.parent, this.args, this.args.originalEvent, value);\n            proxy.dialogObj.hide({ returnValue: false });\n        }\n    };\n    Image.prototype.imgsizeInput = function (e) {\n        var _this = this;\n        var selectNode = e.selectNode[0];\n        var imgHeight = this.i10n.getConstant('imageHeight');\n        var imgWidth = this.i10n.getConstant('imageWidth');\n        var imgSizeWrap = this.parent.createElement('div', { className: 'e-img-sizewrap' + ' ' + this.parent.cssClass });\n        var widthVal = isNullOrUndefined(this.changedWidthValue) && (selectNode.style.width.toString() === 'auto' ||\n            selectNode.style.width !== '') ? selectNode.style.width : !isNullOrUndefined(this.changedWidthValue) ?\n            this.changedWidthValue : (parseInt(selectNode.getClientRects()[0].width.toString(), 10)).toString();\n        var heightVal = isNullOrUndefined(this.changedHeightValue) && (selectNode.style.height.toString() === 'auto' ||\n            selectNode.style.height !== '') ? selectNode.style.height : !isNullOrUndefined(this.changedHeightValue) ?\n            this.changedHeightValue : (parseInt(selectNode.getClientRects()[0].height.toString(), 10)).toString();\n        this.changedWidthValue = null;\n        this.changedHeightValue = null;\n        var content = '<div class=\"e-rte-label' + ' ' + this.parent.cssClass + '\"><label>' + imgWidth +\n            '</label></div><div class=\"e-rte-field' + ' ' + this.parent.cssClass + '\"><input type=\"text\" id=\"imgwidth\" class=\"e-img-width' + ' ' + this.parent.cssClass + '/></div>' +\n            '<div class=\"e-rte-label' + ' ' + this.parent.cssClass + '\">' + '<label>' + imgHeight + '</label></div><div class=\"e-rte-field' + ' ' + this.parent.cssClass + '\"> ' +\n            '<input type=\"text\" id=\"imgheight\" class=\"e-img-height' + ' ' + this.parent.cssClass + '\"/></div>';\n        var contentElem = parseHtml(content);\n        contentElem.getElementById('imgwidth').setAttribute('value', widthVal);\n        contentElem.getElementById('imgheight').setAttribute('value', heightVal);\n        imgSizeWrap.appendChild(contentElem);\n        this.widthNum = new TextBox({\n            value: formatUnit(widthVal),\n            enableRtl: this.parent.enableRtl,\n            cssClass: this.parent.cssClass,\n            input: function (e) {\n                _this.inputWidthValue = formatUnit(_this.inputValue(e.value));\n            }\n        });\n        this.widthNum.createElement = this.parent.createElement;\n        this.widthNum.appendTo(imgSizeWrap.querySelector('#imgwidth'));\n        this.heightNum = new TextBox({\n            value: formatUnit(heightVal),\n            enableRtl: this.parent.enableRtl,\n            cssClass: this.parent.cssClass,\n            input: function (e) {\n                _this.inputHeightValue = formatUnit(_this.inputValue(e.value));\n            }\n        });\n        this.heightNum.createElement = this.parent.createElement;\n        this.heightNum.appendTo(imgSizeWrap.querySelector('#imgheight'));\n        return imgSizeWrap;\n    };\n    Image.prototype.inputValue = function (value) {\n        if (value === 'auto' || value.indexOf('%') !== -1 || value.indexOf('px') !== -1\n            || value.match(/(\\d+)/)) {\n            return value;\n        }\n        else {\n            return 'auto';\n        }\n    };\n    Image.prototype.insertSize = function (e) {\n        e.selection.restore();\n        var proxy = e.selfImage;\n        if (proxy.parent.formatter.getUndoRedoStack().length === 0) {\n            proxy.parent.formatter.saveData();\n        }\n        var dialogEle = proxy.dialogObj.element;\n        this.changedWidthValue = this.inputWidthValue;\n        this.changedHeightValue = this.inputHeightValue;\n        var width = dialogEle.querySelector('.e-img-width').value;\n        var height = dialogEle.parentElement.querySelector('.e-img-height').value;\n        proxy.parent.formatter.process(this.parent, e.args, e.args, {\n            width: width, height: height, selectNode: e.selectNode,\n            subCommand: e.args.item.subCommand\n        });\n        if (this.imgResizeDiv) {\n            proxy.imgResizePos(e.selectNode[0], this.imgResizeDiv);\n        }\n        proxy.dialogObj.hide({ returnValue: true });\n    };\n    Image.prototype.insertImage = function (e) {\n        this.imagDialog(e);\n        if (!isNullOrUndefined(this.dialogObj)) {\n            this.dialogObj.element.style.maxHeight = 'inherit';\n            var dialogContent = this.dialogObj.element.querySelector('.e-img-content');\n            if (((!isNullOrUndefined(this.parent.insertImageSettings.path) && this.parent.editorMode === 'Markdown')\n                || this.parent.editorMode === 'HTML')) {\n                document.getElementById(this.rteID + '_insertImage').focus();\n            }\n            else {\n                dialogContent.querySelector('.e-img-url').focus();\n            }\n        }\n    };\n    Image.prototype.imgUpload = function (e) {\n        var _this = this;\n        var save;\n        var selectParent;\n        // eslint-disable-next-line\n        var proxy = this;\n        var iframe = proxy.parent.iframeSettings.enable;\n        if (proxy.parent.editorMode === 'HTML' && (!iframe && isNullOrUndefined(closest(e.selection.range.startContainer.parentNode, '[id='\n            // eslint-disable-next-line\n            + \"'\" + this.parent.contentModule.getPanel().id + \"'\" + ']'))\n            || (iframe && !hasClass(e.selection.range.startContainer.parentNode.ownerDocument.querySelector('body'), 'e-lib')))) {\n            this.contentModule.getEditPanel().focus();\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n            selectParent = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n        }\n        else {\n            save = e.selection;\n            selectParent = e.selectParent;\n        }\n        var uploadParentEle = this.parent.createElement('div', { className: 'e-img-uploadwrap e-droparea' + ' ' + this.parent.cssClass });\n        var deviceImgUpMsg = this.i10n.getConstant('imageDeviceUploadMessage');\n        var imgUpMsg = this.i10n.getConstant('imageUploadMessage');\n        var span = this.parent.createElement('span', { className: 'e-droptext' + ' ' + this.parent.cssClass });\n        var spanMsg = this.parent.createElement('span', {\n            className: 'e-rte-upload-text' + ' ' + this.parent.cssClass, innerHTML: ((Browser.isDevice) ? deviceImgUpMsg : imgUpMsg)\n        });\n        span.appendChild(spanMsg);\n        var btnEle = this.parent.createElement('button', {\n            className: 'e-browsebtn' + ' ' + this.parent.cssClass, id: this.rteID + '_insertImage', attrs: { autofocus: 'true', type: 'button' }\n        });\n        span.appendChild(btnEle);\n        uploadParentEle.appendChild(span);\n        var browserMsg = this.i10n.getConstant('browse');\n        this.browseButton = new Button({ content: browserMsg, enableRtl: this.parent.enableRtl });\n        this.browseButton.isStringTemplate = true;\n        this.browseButton.createElement = this.parent.createElement;\n        this.browseButton.appendTo(btnEle);\n        var btnClick = (Browser.isDevice) ? span : btnEle;\n        EventHandler.add(btnClick, 'click', this.fileSelect, this);\n        var uploadEle = this.parent.createElement('input', {\n            id: this.rteID + '_upload', attrs: { type: 'File', name: 'UploadFiles' }, className: this.parent.cssClass\n        });\n        uploadParentEle.appendChild(uploadEle);\n        var altText;\n        var selectArgs;\n        var filesData;\n        this.uploadObj = new Uploader({\n            asyncSettings: { saveUrl: this.parent.insertImageSettings.saveUrl, removeUrl: this.parent.insertImageSettings.removeUrl },\n            dropArea: span, multiple: false, enableRtl: this.parent.enableRtl, cssClass: this.parent.cssClass,\n            allowedExtensions: this.parent.insertImageSettings.allowedTypes.toString(),\n            selected: function (e) {\n                proxy.isImgUploaded = true;\n                selectArgs = e;\n                // eslint-disable-next-line\n                filesData = e.filesData;\n                _this.parent.trigger(events.imageSelected, selectArgs, function (selectArgs) {\n                    if (!selectArgs.cancel) {\n                        _this.checkExtension(selectArgs.filesData[0]);\n                        altText = selectArgs.filesData[0].name;\n                        if (_this.parent.editorMode === 'HTML' && isNullOrUndefined(_this.parent.insertImageSettings.path)) {\n                            var reader_1 = new FileReader();\n                            // eslint-disable-next-line\n                            reader_1.addEventListener('load', function (e) {\n                                var url = _this.parent.insertImageSettings.saveFormat === 'Base64' ? reader_1.result :\n                                    URL.createObjectURL(convertToBlob(reader_1.result));\n                                proxy.uploadUrl = {\n                                    url: url, selection: save, altText: altText,\n                                    selectParent: selectParent,\n                                    width: {\n                                        width: proxy.parent.insertImageSettings.width, minWidth: proxy.parent.insertImageSettings.minWidth,\n                                        maxWidth: proxy.parent.getInsertImgMaxWidth()\n                                    }, height: {\n                                        height: proxy.parent.insertImageSettings.height,\n                                        minHeight: proxy.parent.insertImageSettings.minHeight,\n                                        maxHeight: proxy.parent.insertImageSettings.maxHeight\n                                    }\n                                };\n                                proxy.inputUrl.setAttribute('disabled', 'true');\n                                if (isNullOrUndefined(proxy.parent.insertImageSettings.saveUrl) && _this.isAllowedTypes\n                                    && !isNullOrUndefined(_this.dialogObj)) {\n                                    _this.dialogObj.getButtons(0).element.removeAttribute('disabled');\n                                }\n                            });\n                            reader_1.readAsDataURL(selectArgs.filesData[0].rawFile);\n                        }\n                    }\n                });\n            },\n            beforeUpload: function (args) {\n                _this.parent.trigger(events.beforeImageUpload, args);\n            },\n            uploading: function (e) {\n                if (!_this.parent.isServerRendered) {\n                    _this.parent.trigger(events.imageUploading, e);\n                }\n            },\n            success: function (e) {\n                _this.parent.trigger(events.imageUploadSuccess, e, function (e) {\n                    if (!isNullOrUndefined(_this.parent.insertImageSettings.path)) {\n                        var url = _this.parent.insertImageSettings.path + e.file.name;\n                        // eslint-disable-next-line\n                        var value = { url: url, selection: save };\n                        proxy.uploadUrl = {\n                            url: url, selection: save, altText: altText, selectParent: selectParent,\n                            width: {\n                                width: proxy.parent.insertImageSettings.width, minWidth: proxy.parent.insertImageSettings.minWidth,\n                                maxWidth: proxy.parent.getInsertImgMaxWidth()\n                            }, height: {\n                                height: proxy.parent.insertImageSettings.height, minHeight: proxy.parent.insertImageSettings.minHeight,\n                                maxHeight: proxy.parent.insertImageSettings.maxHeight\n                            }\n                        };\n                        proxy.inputUrl.setAttribute('disabled', 'true');\n                    }\n                    if (e.operation === 'upload' && !isNullOrUndefined(_this.dialogObj)) {\n                        _this.dialogObj.getButtons(0).element.removeAttribute('disabled');\n                    }\n                });\n            },\n            failure: function (e) {\n                _this.parent.trigger(events.imageUploadFailed, e);\n            },\n            removing: function () {\n                // eslint-disable-next-line\n                _this.parent.trigger(events.imageRemoving, e, function (e) {\n                    proxy.isImgUploaded = false;\n                    _this.dialogObj.getButtons(0).element.disabled = true;\n                    proxy.inputUrl.removeAttribute('disabled');\n                    if (proxy.uploadUrl) {\n                        proxy.uploadUrl.url = '';\n                    }\n                });\n            }\n        });\n        this.uploadObj.isStringTemplate = true;\n        this.uploadObj.createElement = this.parent.createElement;\n        this.uploadObj.appendTo(uploadEle);\n        return uploadParentEle;\n    };\n    Image.prototype.checkExtension = function (e) {\n        if (this.uploadObj.allowedExtensions) {\n            if (this.uploadObj.allowedExtensions.toLocaleLowerCase().indexOf(('.' + e.type).toLocaleLowerCase()) === -1) {\n                this.dialogObj.getButtons(0).element.setAttribute('disabled', 'disabled');\n                this.isAllowedTypes = false;\n            }\n            else {\n                this.isAllowedTypes = true;\n            }\n        }\n    };\n    Image.prototype.fileSelect = function () {\n        this.dialogObj.element.getElementsByClassName('e-file-select-wrap')[0].querySelector('button').click();\n        return false;\n    };\n    Image.prototype.dragStart = function (e) {\n        if (e.target.nodeName === 'IMG') {\n            this.parent.trigger(events.actionBegin, e, function (actionBeginArgs) {\n                if (actionBeginArgs.cancel) {\n                    e.preventDefault();\n                }\n                else {\n                    e.dataTransfer.effectAllowed = 'copyMove';\n                    e.target.classList.add(classes.CLS_RTE_DRAG_IMAGE);\n                }\n            });\n        }\n        else {\n            return true;\n        }\n    };\n    Image.prototype.dragEnter = function (e) {\n        e.dataTransfer.dropEffect = 'copy';\n        e.preventDefault();\n    };\n    Image.prototype.dragOver = function (e) {\n        if ((Browser.info.name === 'edge' && e.dataTransfer.items[0].type.split('/')[0].indexOf('image') > -1) ||\n            (Browser.isIE && e.dataTransfer.types[0] === 'Files')) {\n            e.preventDefault();\n        }\n        else {\n            return true;\n        }\n    };\n    /**\n     * Used to set range When drop an image\n     *\n     * @param {ImageDropEventArgs} args - specifies the image arguments.\n     * @returns {void}\n     */\n    Image.prototype.dragDrop = function (args) {\n        var _this = this;\n        this.parent.trigger(events.beforeImageDrop, args, function (e) {\n            var imgElement = _this.parent.inputElement.ownerDocument.querySelector('.' + classes.CLS_RTE_DRAG_IMAGE);\n            var isImgOrFileDrop = (imgElement && imgElement.tagName === 'IMG') || e.dataTransfer.files.length > 0;\n            if (!e.cancel && isImgOrFileDrop) {\n                _this.parent.trigger(events.actionBegin, e, function (actionBeginArgs) {\n                    if (actionBeginArgs.cancel) {\n                        e.preventDefault();\n                    }\n                    else {\n                        if (closest(e.target, '#' + _this.parent.getID() + '_toolbar') ||\n                            _this.parent.inputElement.contentEditable === 'false') {\n                            e.preventDefault();\n                            return;\n                        }\n                        if (_this.parent.element.querySelector('.' + classes.CLS_IMG_RESIZE)) {\n                            detach(_this.imgResizeDiv);\n                        }\n                        e.preventDefault();\n                        var range = void 0;\n                        if (_this.contentModule.getDocument().caretRangeFromPoint) { //For chrome\n                            range = _this.contentModule.getDocument().caretRangeFromPoint(e.clientX, e.clientY);\n                        }\n                        else if ((e.rangeParent)) { //For mozilla firefox\n                            range = _this.contentModule.getDocument().createRange();\n                            range.setStart(e.rangeParent, e.rangeOffset);\n                        }\n                        else {\n                            range = _this.getDropRange(e.clientX, e.clientY); //For internet explorer\n                        }\n                        _this.parent.notify(events.selectRange, { range: range });\n                        var uploadArea = _this.parent.element.querySelector('.' + classes.CLS_DROPAREA);\n                        if (uploadArea) {\n                            return;\n                        }\n                        _this.insertDragImage(e);\n                    }\n                });\n            }\n            else {\n                if (isImgOrFileDrop) {\n                    e.preventDefault();\n                }\n            }\n        });\n    };\n    /**\n     * Used to calculate range on internet explorer\n     *\n     * @param {number} x - specifies the x range.\n     * @param {number} y - specifies the y range.\n     * @returns {void}\n     */\n    Image.prototype.getDropRange = function (x, y) {\n        var startRange = this.contentModule.getDocument().createRange();\n        this.parent.formatter.editorManager.nodeSelection.setRange(this.contentModule.getDocument(), startRange);\n        var elem = this.contentModule.getDocument().elementFromPoint(x, y);\n        var startNode = (elem.childNodes.length > 0 ? elem.childNodes[0] : elem);\n        var startCharIndexCharacter = 0;\n        if (this.parent.inputElement.firstChild.innerHTML === '<br>') {\n            startRange.setStart(startNode, startCharIndexCharacter);\n            startRange.setEnd(startNode, startCharIndexCharacter);\n        }\n        else {\n            var rangeRect = void 0;\n            do {\n                startCharIndexCharacter++;\n                startRange.setStart(startNode, startCharIndexCharacter);\n                startRange.setEnd(startNode, startCharIndexCharacter + 1);\n                rangeRect = startRange.getBoundingClientRect();\n            } while (rangeRect.left < x && startCharIndexCharacter < startNode.length - 1);\n        }\n        return startRange;\n    };\n    Image.prototype.insertDragImage = function (e) {\n        var _this = this;\n        e.preventDefault();\n        var activePopupElement = this.parent.element.querySelector('' + classes.CLS_POPUP_OPEN);\n        this.parent.notify(events.drop, { args: e });\n        if (activePopupElement) {\n            activePopupElement.classList.add(classes.CLS_HIDE);\n        }\n        var imgElement = this.parent.inputElement.ownerDocument.querySelector('.' + classes.CLS_RTE_DRAG_IMAGE);\n        if (e.dataTransfer.files.length > 0 && imgElement === null) { //For external image drag and drop\n            if (e.dataTransfer.files.length > 1) {\n                return;\n            }\n            var imgFiles = e.dataTransfer.files;\n            var fileName = imgFiles[0].name;\n            var imgType = fileName.substring(fileName.lastIndexOf('.'));\n            var allowedTypes = this.parent.insertImageSettings.allowedTypes;\n            for (var i = 0; i < allowedTypes.length; i++) {\n                if (imgType.toLocaleLowerCase() === allowedTypes[i].toLowerCase()) {\n                    if (this.parent.insertImageSettings.saveUrl) {\n                        this.onSelect(e);\n                    }\n                    else {\n                        var args = { args: e, text: '', file: imgFiles[0] };\n                        e.preventDefault();\n                        this.imagePaste(args);\n                    }\n                }\n            }\n        }\n        else { //For internal image drag and drop\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            if (imgElement && imgElement.tagName === 'IMG') {\n                if (imgElement.nextElementSibling) {\n                    if (imgElement.nextElementSibling.classList.contains(classes.CLS_IMG_INNER)) {\n                        range.insertNode(imgElement.parentElement.parentElement);\n                    }\n                    else {\n                        range.insertNode(imgElement);\n                    }\n                }\n                else {\n                    range.insertNode(imgElement);\n                }\n                imgElement.classList.remove(classes.CLS_RTE_DRAG_IMAGE);\n                var imgArgs_1 = { elements: [imgElement] };\n                imgElement.addEventListener('load', function () {\n                    _this.parent.trigger(events.actionComplete, imgArgs_1);\n                });\n                this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n                var args = e;\n                this.resizeStart(args, imgElement);\n                this.hideImageQuickToolbar();\n            }\n        }\n    };\n    Image.prototype.onSelect = function (args) {\n        var _this = this;\n        // eslint-disable-next-line\n        var proxy = this;\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n        var parentElement = this.parent.createElement('ul', { className: classes.CLS_UPLOAD_FILES });\n        this.parent.element.appendChild(parentElement);\n        var validFiles = {\n            name: '',\n            size: 0,\n            status: '',\n            statusCode: '',\n            type: '',\n            rawFile: args.dataTransfer.files[0],\n            validationMessages: {}\n        };\n        var imageTag = this.parent.createElement('IMG');\n        imageTag.style.opacity = '0.5';\n        imageTag.classList.add(classes.CLS_RTE_IMAGE);\n        imageTag.classList.add(classes.CLS_IMGINLINE);\n        imageTag.classList.add(classes.CLS_RESIZE);\n        var file = validFiles.rawFile;\n        var reader = new FileReader();\n        reader.addEventListener('load', function () {\n            var url = URL.createObjectURL(convertToBlob(reader.result));\n            imageTag.src = proxy.parent.insertImageSettings.saveFormat === 'Blob' ? url : reader.result;\n        });\n        if (file) {\n            reader.readAsDataURL(file);\n        }\n        range.insertNode(imageTag);\n        this.uploadMethod(args, imageTag);\n        var e = { elements: [imageTag] };\n        imageTag.addEventListener('load', function () {\n            _this.parent.trigger(events.actionComplete, e);\n        });\n        detach(parentElement);\n    };\n    /**\n     * Rendering uploader and popup for drag and drop\n     *\n     * @param {DragEvent} dragEvent - specifies the event.\n     * @param {HTMLImageElement} imageElement - specifies the element.\n     * @returns {void}\n     */\n    Image.prototype.uploadMethod = function (dragEvent, imageElement) {\n        var _this = this;\n        var isUploading = false;\n        // eslint-disable-next-line\n        var proxy = this;\n        var popupEle = this.parent.createElement('div');\n        this.parent.element.appendChild(popupEle);\n        var uploadEle = this.parent.createElement('input', {\n            id: this.rteID + '_upload', attrs: { type: 'File', name: 'UploadFiles' }\n        });\n        var offsetY = this.parent.iframeSettings.enable ? -50 : -90;\n        this.popupObj = new Popup(popupEle, {\n            relateTo: imageElement,\n            height: '85px',\n            width: '300px',\n            offsetY: offsetY,\n            content: uploadEle,\n            viewPortElement: this.parent.element,\n            position: { X: 'center', Y: 'top' },\n            enableRtl: this.parent.enableRtl,\n            zIndex: 10001,\n            // eslint-disable-next-line\n            close: function (event) {\n                _this.parent.isBlur = false;\n                _this.popupObj.destroy();\n                detach(_this.popupObj.element);\n                _this.popupObj = null;\n                if (!_this.parent.inlineMode.enable) {\n                    _this.parent.toolbarModule.baseToolbar.toolbarObj.disable(false);\n                }\n            }\n        });\n        this.popupObj.element.style.display = 'none';\n        addClass([this.popupObj.element], classes.CLS_POPUP_OPEN);\n        addClass([this.popupObj.element], classes.CLS_RTE_UPLOAD_POPUP);\n        if (!isNOU(this.parent.cssClass)) {\n            addClass([this.popupObj.element], this.parent.cssClass);\n        }\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n        var timeOut = dragEvent.dataTransfer.files[0].size > 1000000 ? 300 : 100;\n        setTimeout(function () {\n            proxy.refreshPopup(imageElement);\n        }, timeOut);\n        this.uploadObj = new Uploader({\n            asyncSettings: {\n                saveUrl: this.parent.insertImageSettings.saveUrl,\n                removeUrl: this.parent.insertImageSettings.removeUrl\n            },\n            cssClass: classes.CLS_RTE_DIALOG_UPLOAD + ' ' + this.parent.cssClass,\n            dropArea: this.parent.element,\n            allowedExtensions: this.parent.insertImageSettings.allowedTypes.toString(),\n            removing: function () {\n                _this.parent.inputElement.contentEditable = 'true';\n                isUploading = false;\n                detach(imageElement);\n                _this.popupObj.close();\n            },\n            canceling: function () {\n                _this.parent.inputElement.contentEditable = 'true';\n                isUploading = false;\n                detach(imageElement);\n                _this.popupObj.close();\n                _this.quickToolObj.imageQTBar.hidePopup();\n                setTimeout(function () {\n                    _this.uploadObj.destroy();\n                }, 900);\n            },\n            beforeUpload: function (args) {\n                _this.parent.trigger(events.beforeImageUpload, args);\n                if (!_this.parent.inlineMode.enable) {\n                    _this.parent.toolbarModule.baseToolbar.toolbarObj.disable(true);\n                }\n            },\n            uploading: function (e) {\n                if (!_this.parent.isServerRendered) {\n                    isUploading = true;\n                    _this.parent.trigger(events.imageUploading, e, function (imageUploadingArgs) {\n                        if (imageUploadingArgs.cancel) {\n                            if (!isNullOrUndefined(imageElement)) {\n                                detach(imageElement);\n                            }\n                            if (!isNullOrUndefined(_this.popupObj.element)) {\n                                detach(_this.popupObj.element);\n                            }\n                        }\n                        else {\n                            _this.parent.inputElement.contentEditable = 'false';\n                        }\n                    });\n                }\n            },\n            selected: function (e) {\n                if (isUploading) {\n                    e.cancel = true;\n                }\n            },\n            failure: function (e) {\n                isUploading = false;\n                _this.parent.inputElement.contentEditable = 'true';\n                var args = {\n                    args: dragEvent,\n                    type: 'Images',\n                    isNotify: undefined,\n                    elements: imageElement\n                };\n                setTimeout(function () {\n                    _this.uploadFailure(imageElement, args, e);\n                }, 900);\n            },\n            success: function (e) {\n                if (e.operation === 'cancel') {\n                    return;\n                }\n                isUploading = false;\n                _this.parent.inputElement.contentEditable = 'true';\n                var args = {\n                    args: dragEvent,\n                    type: 'Images',\n                    isNotify: undefined,\n                    elements: imageElement\n                };\n                setTimeout(function () {\n                    _this.uploadSuccess(imageElement, dragEvent, args, e);\n                }, 900);\n            }\n        });\n        this.uploadObj.appendTo(this.popupObj.element.childNodes[0]);\n        this.popupObj.element.querySelector('.e-rte-dialog-upload .e-file-select-wrap').style.display = 'none';\n        range.selectNodeContents(imageElement);\n        this.parent.formatter.editorManager.nodeSelection.setRange(this.contentModule.getDocument(), range);\n    };\n    Image.prototype.refreshPopup = function (imageElement) {\n        var imgPosition = this.parent.iframeSettings.enable ? this.parent.element.offsetTop +\n            imageElement.offsetTop : imageElement.offsetTop;\n        var rtePosition = this.parent.element.offsetTop + this.parent.element.offsetHeight;\n        if (imgPosition > rtePosition) {\n            this.popupObj.relateTo = this.parent.inputElement;\n            this.popupObj.offsetY = this.parent.iframeSettings.enable ? -30 : -65;\n            this.popupObj.element.style.display = 'block';\n        }\n        else {\n            if (this.popupObj) {\n                this.popupObj.refreshPosition(imageElement);\n                this.popupObj.element.style.display = 'block';\n            }\n        }\n    };\n    /**\n     * Called when drop image upload was failed\n     *\n     * @param {HTMLElement} imgEle - specifies the image element.\n     * @param {IShowPopupArgs} args - specifies the arguments.\n     * @param {Object} e - specfies the object.\n     * @returns {void}\n     */\n    Image.prototype.uploadFailure = function (imgEle, args, e) {\n        detach(imgEle);\n        if (this.popupObj) {\n            this.popupObj.close();\n        }\n        this.parent.trigger(events.imageUploadFailed, e);\n        this.uploadObj.destroy();\n    };\n    /**\n     * Called when drop image upload was successful\n     *\n     * @param {HTMLElement} imageElement - specifies the image element.\n     * @param {DragEvent} dragEvent - specifies the drag event.\n     * @param {IShowPopupArgs} args - specifies the arguments.\n     * @param {ImageSuccessEventArgs} e - specifies the success event.\n     * @returns {void}\n     */\n    Image.prototype.uploadSuccess = function (imageElement, dragEvent, args, e) {\n        var _this = this;\n        imageElement.style.opacity = '1';\n        imageElement.classList.add(classes.CLS_IMG_FOCUS);\n        e.element = imageElement;\n        this.parent.trigger(events.imageUploadSuccess, e, function (e) {\n            if (!isNullOrUndefined(_this.parent.insertImageSettings.path)) {\n                var url = _this.parent.insertImageSettings.path + e.file.name;\n                imageElement.src = url;\n                imageElement.setAttribute('alt', e.file.name);\n            }\n        });\n        if (this.popupObj) {\n            this.popupObj.close();\n            this.uploadObj.destroy();\n        }\n        this.showImageQuickToolbar(args);\n        this.resizeStart(dragEvent, imageElement);\n    };\n    Image.prototype.imagePaste = function (args) {\n        var _this = this;\n        if (args.text.length === 0 && !isNullOrUndefined(args.file)) {\n            // eslint-disable-next-line\n            var proxy_1 = this;\n            var reader_2 = new FileReader();\n            args.args.preventDefault();\n            // eslint-disable-next-line\n            reader_2.addEventListener('load', function (e) {\n                var url = {\n                    cssClass: (proxy_1.parent.insertImageSettings.display === 'inline' ? classes.CLS_IMGINLINE : classes.CLS_IMGBREAK),\n                    url: _this.parent.insertImageSettings.saveFormat === 'Base64' || !isNullOrUndefined(args.callBack) ?\n                        reader_2.result : URL.createObjectURL(convertToBlob(reader_2.result)),\n                    width: {\n                        width: proxy_1.parent.insertImageSettings.width, minWidth: proxy_1.parent.insertImageSettings.minWidth,\n                        maxWidth: proxy_1.parent.getInsertImgMaxWidth()\n                    },\n                    height: {\n                        height: proxy_1.parent.insertImageSettings.height, minHeight: proxy_1.parent.insertImageSettings.minHeight,\n                        maxHeight: proxy_1.parent.insertImageSettings.maxHeight\n                    }\n                };\n                if (!isNullOrUndefined(args.callBack)) {\n                    args.callBack(url);\n                    return;\n                }\n                else {\n                    proxy_1.parent.formatter.process(proxy_1.parent, { item: { command: 'Images', subCommand: 'Image' } }, args.args, url);\n                    _this.showPopupToolBar(args, url);\n                }\n            });\n            reader_2.readAsDataURL(args.file);\n        }\n    };\n    Image.prototype.showPopupToolBar = function (e, url) {\n        var _this = this;\n        var imageSrc = 'img[src=\"' + url.url + '\"]';\n        var imageElement = this.parent.inputElement.querySelector(imageSrc);\n        this.parent.quickToolbarModule.createQTBar('Image', 'MultiRow', this.parent.quickToolbarSettings.image, RenderType.ImageToolbar);\n        var args = {\n            args: e.args,\n            type: 'Images',\n            isNotify: undefined,\n            elements: imageElement\n        };\n        if (imageElement) {\n            setTimeout(function () {\n                _this.showImageQuickToolbar(args);\n                _this.resizeStart(e.args, imageElement);\n            }, 0);\n        }\n    };\n    /* eslint-disable */\n    /**\n     * Destroys the ToolBar.\n     *\n     * @method destroy\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    /* eslint-enable */\n    Image.prototype.destroy = function () {\n        this.prevSelectedImgEle = undefined;\n        if (isNOU(this.parent)) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    Image.prototype.moduleDestroy = function () {\n        this.parent = null;\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {void}\n     */\n    Image.prototype.getModuleName = function () {\n        return 'image';\n    };\n    return Image;\n}());\nexport { Image };\n","import { addClass, detach, EventHandler, isNullOrUndefined, Ajax } from '@syncfusion/ej2-base';\nimport { Browser, closest, removeClass, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { Uploader } from '@syncfusion/ej2-inputs';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { RenderType } from '../base/enum';\nimport { dispatchEvent, hasClass, convertToBlob } from '../base/util';\nimport { isIDevice } from '../../common/util';\n/**\n * `Audio` module is used to handle audio actions.\n */\nvar Audio = /** @class */ (function () {\n    function Audio(parent, serviceLocator) {\n        this.isAudioUploaded = false;\n        this.isAllowedTypes = true;\n        this.deletedAudio = [];\n        this.parent = parent;\n        this.rteID = parent.element.id;\n        this.i10n = serviceLocator.getService('rteLocale');\n        this.rendererFactory = serviceLocator.getService('rendererFactory');\n        this.dialogRenderObj = serviceLocator.getService('dialogRenderObject');\n        this.addEventListener();\n    }\n    Audio.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.keyUp, this.onKeyUp, this);\n        this.parent.on(events.insertAudio, this.insertingAudio, this);\n        this.parent.on(events.initialEnd, this.afterRender, this);\n        this.parent.on(events.dynamicModule, this.afterRender, this);\n        this.parent.on(events.showAudioDialog, this.showDialog, this);\n        this.parent.on(events.closeAudioDialog, this.closeDialog, this);\n        this.parent.on(events.audioToolbarAction, this.onToolbarAction, this);\n        this.parent.on(events.dropDownSelect, this.alignmentSelect, this);\n        this.parent.on(events.audioDelete, this.deleteAudio, this);\n        this.parent.on(events.editAreaClick, this.editAreaClickHandler, this);\n        this.parent.on(events.insertCompleted, this.showAudioQuickToolbar, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    Audio.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.keyDown, this.onKeyDown);\n        this.parent.off(events.keyUp, this.onKeyUp);\n        this.parent.off(events.insertAudio, this.insertingAudio);\n        this.parent.off(events.initialEnd, this.afterRender);\n        this.parent.off(events.dynamicModule, this.afterRender);\n        this.parent.off(events.showAudioDialog, this.showDialog);\n        this.parent.off(events.closeAudioDialog, this.closeDialog);\n        this.parent.off(events.audioToolbarAction, this.onToolbarAction);\n        this.parent.off(events.dropDownSelect, this.alignmentSelect);\n        this.parent.off(events.audioDelete, this.deleteAudio);\n        this.parent.off(events.editAreaClick, this.editAreaClickHandler);\n        this.parent.off(events.insertCompleted, this.showAudioQuickToolbar);\n        this.parent.off(events.destroy, this.removeEventListener);\n        if (!isNullOrUndefined(this.contentModule)) {\n            EventHandler.remove(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.touchStart);\n            EventHandler.remove(this.contentModule.getEditPanel(), Browser.touchEndEvent, this.audioClick);\n            EventHandler.remove(this.parent.element.ownerDocument, 'mousedown', this.onDocumentClick);\n        }\n    };\n    Audio.prototype.afterRender = function () {\n        this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n        EventHandler.add(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.touchStart, this);\n        EventHandler.add(this.contentModule.getEditPanel(), Browser.touchEndEvent, this.audioClick, this);\n        EventHandler.add(this.parent.element.ownerDocument, 'mousedown', this.onDocumentClick, this);\n    };\n    Audio.prototype.checkAudioBack = function (range) {\n        if (range.startContainer.nodeName === '#text' && range.startOffset === 0 &&\n            !isNOU(range.startContainer.previousSibling) && this.isAudioElem(range.startContainer.previousSibling)) {\n            this.deletedAudio.push(range.startContainer.previousSibling);\n        }\n        else if (range.startContainer.nodeName !== '#text' && !isNOU(range.startContainer.childNodes[range.startOffset - 1]) &&\n            this.isAudioElem(range.startContainer.childNodes[range.startOffset - 1])) {\n            this.deletedAudio.push(range.startContainer.childNodes[range.startOffset - 1]);\n        }\n    };\n    Audio.prototype.checkAudioDel = function (range) {\n        if (range.startContainer.nodeName === '#text' && range.startOffset === range.startContainer.textContent.length &&\n            !isNOU(range.startContainer.nextSibling) && range.startContainer.nextSibling.nodeName === 'IMG') {\n            this.deletedAudio.push(range.startContainer.nextSibling);\n        }\n        else if (range.startContainer.nodeName !== '#text' && !isNOU(range.startContainer.childNodes[range.startOffset]) &&\n            this.isAudioElem(range.startContainer.childNodes[range.startOffset])) {\n            this.deletedAudio.push(range.startContainer.childNodes[range.startOffset]);\n        }\n    };\n    Audio.prototype.undoStack = function (args) {\n        if (args.subCommand.toLowerCase() === 'undo' || args.subCommand.toLowerCase() === 'redo') {\n            for (var i = 0; i < this.parent.formatter.getUndoRedoStack().length; i++) {\n                var temp = this.parent.createElement('div');\n                var contentElem = this.parent.formatter.getUndoRedoStack()[i].text;\n                temp.appendChild(contentElem.cloneNode(true));\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Audio.prototype.touchStart = function (e, ele) {\n        if (this.parent.readonly) {\n            return;\n        }\n        this.prevSelectedAudEle = this.audEle;\n    };\n    Audio.prototype.onToolbarAction = function (args) {\n        if (isIDevice()) {\n            this.parent.notify(events.selectionRestore, {});\n        }\n        var item = args.args.item;\n        switch (item.subCommand) {\n            case 'AudioReplace':\n                this.parent.notify(events.insertAudio, args);\n                break;\n            case 'AudioRemove':\n                this.parent.notify(events.audioDelete, args);\n                break;\n        }\n    };\n    // eslint-disable-next-line\n    Audio.prototype.onKeyUp = function (event) {\n        if (!isNOU(this.deletedAudio) && this.deletedAudio.length > 0) {\n            for (var i = 0; i < this.deletedAudio.length - 1; i++) {\n                var args = {\n                    element: this.deletedAudio[i].querySelector('audio'),\n                    src: this.deletedAudio[i].querySelector('source').getAttribute('src')\n                };\n                this.parent.trigger(events.afterMediaDelete, args);\n            }\n        }\n    };\n    Audio.prototype.onKeyDown = function (event) {\n        var originalEvent = event.args;\n        var range;\n        var save;\n        var selectNodeEle;\n        var selectParentEle;\n        this.deletedAudio = [];\n        var isCursor;\n        var keyCodeValues = [27, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123,\n            44, 45, 9, 16, 17, 18, 19, 20, 33, 34, 35, 36, 37, 38, 39, 40, 91, 92, 93, 144, 145, 182, 183];\n        if (this.parent.editorMode === 'HTML') {\n            range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            isCursor = range.startContainer === range.endContainer && range.startOffset === range.endOffset;\n        }\n        if (!isCursor && this.parent.editorMode === 'HTML' && keyCodeValues.indexOf(originalEvent.which) < 0) {\n            var nodes = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n            for (var i = 0; i < nodes.length; i++) {\n                if (this.isAudioElem(nodes[i])) {\n                    this.deletedAudio.push(nodes[i]);\n                }\n            }\n        }\n        if (this.parent.editorMode === 'HTML' && ((originalEvent.which === 8 && originalEvent.code === 'Backspace') ||\n            (originalEvent.which === 46 && originalEvent.code === 'Delete'))) {\n            var isCursor_1 = range.startContainer === range.endContainer && range.startOffset === range.endOffset;\n            if ((originalEvent.which === 8 && originalEvent.code === 'Backspace' && isCursor_1)) {\n                this.checkAudioBack(range);\n            }\n            else if ((originalEvent.which === 46 && originalEvent.code === 'Delete' && isCursor_1)) {\n                this.checkAudioDel(range);\n            }\n        }\n        if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) &&\n            originalEvent.code !== 'KeyK') {\n            range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n            selectParentEle = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n            if (!originalEvent.ctrlKey && originalEvent.key && (originalEvent.key.length === 1 || originalEvent.action === 'enter') &&\n                (this.isAudioElem(selectParentEle[0])) && selectParentEle[0].parentElement) {\n                var prev = selectParentEle[0].parentElement.childNodes[0];\n                this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(), prev, prev, prev.textContent.length, prev.textContent.length);\n                removeClass([selectParentEle[0]], classes.CLS_AUD_FOCUS);\n                this.quickToolObj.audioQTBar.hidePopup();\n            }\n        }\n        if (originalEvent.ctrlKey && (originalEvent.keyCode === 89 || originalEvent.keyCode === 90)) {\n            this.undoStack({ subCommand: (originalEvent.keyCode === 90 ? 'undo' : 'redo') });\n        }\n        if (originalEvent.keyCode === 8 || originalEvent.keyCode === 46) {\n            if (selectNodeEle && this.isAudioElem(selectNodeEle[0]) && selectNodeEle.length < 1) {\n                if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)) {\n                    save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n                }\n                originalEvent.preventDefault();\n                var event_1 = {\n                    selectNode: selectNodeEle, selection: save, selectParent: selectParentEle,\n                    args: {\n                        item: { command: 'Audios', subCommand: 'AudioRemove' },\n                        originalEvent: originalEvent\n                    }\n                };\n                this.deleteAudio(event_1, originalEvent.keyCode);\n            }\n        }\n        switch (originalEvent.action) {\n            case 'escape':\n                if (!isNullOrUndefined(this.dialogObj)) {\n                    this.dialogObj.close();\n                }\n                break;\n            case 'backspace':\n            case 'delete':\n                for (var i = 0; i < this.deletedAudio.length; i++) {\n                    var src = this.deletedAudio[i].src;\n                    this.audioRemovePost(src);\n                }\n                if (this.parent.editorMode !== 'Markdown') {\n                    if (range.startContainer.nodeType === 3) {\n                        if (originalEvent.code === 'Backspace') {\n                            if (range.startContainer.previousElementSibling && range.startOffset === 0 &&\n                                range.startContainer.previousElementSibling.classList.contains(classes.CLS_AUDIOWRAP)) {\n                                detach(range.startContainer.previousElementSibling);\n                            }\n                        }\n                        else {\n                            if (range.startContainer.nextElementSibling &&\n                                range.endContainer.textContent.length === range.endOffset &&\n                                range.startContainer.nextElementSibling.classList.contains(classes.CLS_AUDIOWRAP)) {\n                                detach(range.startContainer.nextElementSibling);\n                            }\n                        }\n                    }\n                    else if (range.startContainer.nodeType === 1 && (range.startContainer.classList &&\n                        (range.startContainer.classList.contains(classes.CLS_AUDIOWRAP) ||\n                            range.startContainer.classList.contains(classes.CLS_CLICKELEM) ||\n                            range.startContainer.classList.contains(classes.CLS_VID_CLICK_ELEM)))) {\n                        detach(range.startContainer);\n                    }\n                }\n                break;\n            case 'insert-audio':\n                if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)) {\n                    save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n                }\n                this.openDialog(true, originalEvent, save, selectNodeEle, selectParentEle);\n                originalEvent.preventDefault();\n                break;\n        }\n    };\n    Audio.prototype.openDialog = function (isInternal, event, selection, ele, parentEle) {\n        var range;\n        var save;\n        var selectNodeEle;\n        var selectParentEle;\n        if (!isInternal && !isNOU(this.parent.formatter.editorManager.nodeSelection)) {\n            range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n            selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n            selectParentEle = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n        }\n        else {\n            save = selection;\n            selectNodeEle = ele;\n            selectParentEle = parentEle;\n        }\n        if (this.parent.editorMode === 'HTML') {\n            this.insertAudio({\n                args: {\n                    item: { command: 'Audios', subCommand: 'Audio' },\n                    originalEvent: event,\n                    name: !isInternal ? 'showDialog' : null\n                },\n                selectNode: selectNodeEle,\n                selection: save,\n                selectParent: selectParentEle\n            });\n        }\n    };\n    Audio.prototype.showDialog = function () {\n        this.openDialog(false);\n    };\n    Audio.prototype.closeDialog = function () {\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n        }\n    };\n    Audio.prototype.deleteAudio = function (e, keyCode) {\n        if (!this.isAudioElem(e.selectNode[0])) {\n            return;\n        }\n        if (this.audEle) {\n            if (e.selectNode[0].nodeType === 3) {\n                e.selectNode[0] = this.audEle;\n            }\n            else if (this.isAudioElem(e.selectNode[0])) {\n                e.selectNode[0] = e.selectNode[0].classList.contains(classes.CLS_AUDIOWRAP) ? e.selectNode[0] :\n                    e.selectNode[0].parentElement;\n            }\n        }\n        var args = {\n            element: e.selectNode[0].querySelector('audio'),\n            src: e.selectNode[0].querySelector('source').getAttribute('src')\n        };\n        if (this.parent.formatter.getUndoRedoStack().length === 0) {\n            this.parent.formatter.saveData();\n        }\n        e.selection.restore();\n        this.parent.formatter.process(this.parent, e.args, e.args, {\n            selectNode: e.selectNode,\n            subCommand: e.args.item.subCommand\n        });\n        this.audioRemovePost(args.src);\n        if (this.quickToolObj && document.body.contains(this.quickToolObj.audioQTBar.element)) {\n            this.quickToolObj.audioQTBar.hidePopup();\n        }\n        if (isNullOrUndefined(keyCode)) {\n            this.parent.trigger(events.afterMediaDelete, args);\n        }\n    };\n    Audio.prototype.audioRemovePost = function (src) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        var absoluteUrl = '';\n        if (isNOU(this.parent.insertAudioSettings.removeUrl) || this.parent.insertAudioSettings.removeUrl === '') {\n            return;\n        }\n        if (src.indexOf('http://') > -1 || src.indexOf('https://') > -1) {\n            absoluteUrl = src;\n        }\n        else {\n            absoluteUrl = new URL(src, document.baseURI).href;\n        }\n        this.removingAudioName = absoluteUrl.replace(/^.*[\\\\/]/, '');\n        var xhr = new XMLHttpRequest();\n        // eslint-disable-next-line @typescript-eslint/tslint/config\n        xhr.addEventListener('readystatechange', function () {\n            if (this.readyState === 4 && this.status === 200) {\n                proxy.triggerPost(this.response);\n            }\n        });\n        xhr.open('GET', absoluteUrl);\n        xhr.responseType = 'blob';\n        xhr.send();\n    };\n    Audio.prototype.triggerPost = function (response) {\n        var removeUrl = this.parent.insertAudioSettings.removeUrl;\n        if (isNOU(removeUrl) || removeUrl === '') {\n            return;\n        }\n        var file = new File([response], this.removingAudioName);\n        var ajax = new Ajax(removeUrl, 'POST', true, null);\n        var formData = new FormData();\n        formData.append('UploadFiles', file);\n        ajax.send(formData);\n    };\n    Audio.prototype.audioClick = function (e) {\n        if (Browser.isDevice) {\n            if (this.isAudioElem(e.target)) {\n                this.contentModule.getEditPanel().setAttribute('contenteditable', 'false');\n                e.target.focus();\n            }\n            else {\n                if (!this.parent.readonly) {\n                    this.contentModule.getEditPanel().setAttribute('contenteditable', 'true');\n                }\n            }\n        }\n        if (this.isAudioElem(e.target)) {\n            this.audEle = e.target.querySelector('audio');\n            e.preventDefault();\n        }\n    };\n    Audio.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        if (this.isAudioElem(target)) {\n            this.audEle = target.querySelector('audio');\n        }\n        if (!isNullOrUndefined(this.dialogObj) && ((\n        // eslint-disable-next-line\n        !closest(target, '[id=' + \"'\" + this.dialogObj.element.id + \"'\" + ']') && this.parent.toolbarSettings.enable && this.parent.getToolbarElement() &&\n            !this.parent.getToolbarElement().contains(e.target)) ||\n            (this.parent.getToolbarElement() && this.parent.getToolbarElement().contains(e.target) &&\n                !closest(target, '#' + this.parent.getID() + '_toolbar_Audio') &&\n                !target.querySelector('#' + this.parent.getID() + '_toolbar_Audio')))) {\n            /* eslint-disable */\n            if (e.offsetX > e.target.clientWidth || e.offsetY > e.target.clientHeight) {\n            }\n            else {\n                this.dialogObj.hide({ returnValue: true });\n                this.parent.isBlur = true;\n                dispatchEvent(this.parent.element, 'focusout');\n            }\n            /* eslint-enable */\n        }\n        if (this.contentModule.getEditPanel().querySelector('.' + classes.CLS_AUD_FOCUS)) {\n            if (!this.isAudioElem(e.target) && !isNOU(this.audEle)) {\n                this.audEle.style.outline = '';\n            }\n            else if (!isNOU(this.prevSelectedAudEle) && this.prevSelectedAudEle !== target) {\n                this.prevSelectedAudEle.style.outline = '';\n            }\n        }\n    };\n    Audio.prototype.alignmentSelect = function (e) {\n        var item = e.item;\n        if (!document.body.contains(document.body.querySelector('.e-rte-quick-toolbar')) || item.command !== 'Audios') {\n            return;\n        }\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n        var selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n        selectNodeEle = [this.audEle];\n        var args = { args: e, selectNode: selectNodeEle };\n        if (this.parent.formatter.getUndoRedoStack().length === 0) {\n            this.parent.formatter.saveData();\n        }\n        switch (item.subCommand) {\n            case 'Inline':\n                this.inline(args);\n                break;\n            case 'Break':\n                this.break(args);\n                break;\n        }\n        if (this.quickToolObj && document.body.contains(this.quickToolObj.audioQTBar.element)) {\n            this.quickToolObj.audioQTBar.hidePopup();\n            removeClass([selectNodeEle[0]], classes.CLS_AUD_FOCUS);\n        }\n    };\n    Audio.prototype.break = function (e) {\n        if (e.selectNode[0].nodeName !== 'AUDIO') {\n            return;\n        }\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'Break';\n        this.parent.formatter.process(this.parent, e.args, e.args, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Audio.prototype.inline = function (e) {\n        if (e.selectNode[0].nodeName !== 'AUDIO') {\n            return;\n        }\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'Inline';\n        this.parent.formatter.process(this.parent, e.args, e.args, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Audio.prototype.editAreaClickHandler = function (e) {\n        if (this.parent.readonly) {\n            this.hideAudioQuickToolbar();\n            return;\n        }\n        var args = e.args;\n        var showOnRightClick = this.parent.quickToolbarSettings.showOnRightClick;\n        if (args.which === 2 || (showOnRightClick && args.which === 1) || (!showOnRightClick && args.which === 3)) {\n            if ((showOnRightClick && args.which === 1) && !isNullOrUndefined(args.target) &&\n                this.isAudioElem(args.target)) {\n                this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(), args.target);\n            }\n            return;\n        }\n        if (this.parent.editorMode === 'HTML' && this.parent.quickToolbarModule && this.parent.quickToolbarModule.audioQTBar) {\n            this.quickToolObj = this.parent.quickToolbarModule;\n            var target = args.target;\n            this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n            var isPopupOpen = this.quickToolObj.audioQTBar.element.classList.contains('e-rte-pop');\n            if (this.isAudioElem(target) && this.parent.quickToolbarModule) {\n                if (isPopupOpen) {\n                    return;\n                }\n                this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(), target);\n                if (isIDevice()) {\n                    this.parent.notify(events.selectionSave, e);\n                }\n                target.querySelector('audio').style.outline = '2px solid #4a90e2';\n                this.showAudioQuickToolbar({ args: args, type: 'Audios', elements: [args.target] });\n            }\n            else {\n                this.hideAudioQuickToolbar();\n            }\n        }\n    };\n    Audio.prototype.isAudioElem = function (target) {\n        if (target && target.nodeType !== 3 && target.nodeName !== 'BR' && (target.classList &&\n            (target.classList.contains(classes.CLS_AUDIOWRAP) || target.classList.contains(classes.CLS_CLICKELEM)))) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Audio.prototype.showAudioQuickToolbar = function (e) {\n        var _this = this;\n        if (e.type !== 'Audios' || isNullOrUndefined(this.parent.quickToolbarModule)\n            || isNullOrUndefined(this.parent.quickToolbarModule.audioQTBar) || isNullOrUndefined(e.args)) {\n            return;\n        }\n        this.quickToolObj = this.parent.quickToolbarModule;\n        var args = e.args;\n        var target = e.elements;\n        [].forEach.call(e.elements, function (element, index) {\n            if (index === 0) {\n                target = element;\n            }\n        });\n        if (this.isAudioElem(target)) {\n            addClass([target.querySelector('audio')], [classes.CLS_AUD_FOCUS]);\n            target.querySelector('audio').style.outline = '2px solid #4a90e2';\n        }\n        if (this.parent.quickToolbarModule.audioQTBar) {\n            if (e.isNotify) {\n                setTimeout(function () {\n                    _this.parent.formatter.editorManager.nodeSelection.Clear(_this.contentModule.getDocument());\n                    _this.parent.formatter.editorManager.nodeSelection.setSelectionContents(_this.contentModule.getDocument(), target);\n                    _this.quickToolObj.audioQTBar.showPopup(args.pageX - 50, target.getBoundingClientRect().top + 34, target);\n                }, 400);\n            }\n            else {\n                this.quickToolObj.audioQTBar.showPopup(args.pageX - 50, target.getBoundingClientRect().top + 34, target);\n            }\n        }\n    };\n    Audio.prototype.hideAudioQuickToolbar = function () {\n        if (!isNullOrUndefined(this.contentModule.getEditPanel().querySelector('.' + classes.CLS_AUD_FOCUS))) {\n            removeClass([this.contentModule.getEditPanel().querySelector('.' + classes.CLS_AUD_FOCUS)], classes.CLS_AUD_FOCUS);\n            if (!isNOU(this.audEle)) {\n                this.audEle.style.outline = '';\n            }\n            if (this.quickToolObj && this.quickToolObj.audioQTBar && document.body.contains(this.quickToolObj.audioQTBar.element)) {\n                this.quickToolObj.audioQTBar.hidePopup();\n            }\n        }\n    };\n    Audio.prototype.insertingAudio = function (e) {\n        this.insertAudio(e);\n        if (!isNullOrUndefined(this.dialogObj)) {\n            this.dialogObj.element.style.maxHeight = 'inherit';\n            var dialogContent = this.dialogObj.element.querySelector('.e-audio-content');\n            if (!isNullOrUndefined(this.parent.insertAudioSettings.path) || this.parent.editorMode === 'HTML') {\n                document.getElementById(this.rteID + '_insertAudio').focus();\n            }\n            else {\n                dialogContent.querySelector('.e-audio-url').focus();\n            }\n        }\n    };\n    Audio.prototype.insertAudio = function (e) {\n        var _this = this;\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n            return;\n        }\n        var audioDialog = this.parent.createElement('div', { className: 'e-rte-audio-dialog', id: this.rteID + '_audio' });\n        this.parent.element.appendChild(audioDialog);\n        var audioInsert = this.i10n.getConstant('dialogInsert');\n        var audiolinkCancel = this.i10n.getConstant('dialogCancel');\n        var audioHeader = this.i10n.getConstant('audioHeader');\n        var selection = e.selection;\n        var selectObj = { selfAudio: this, selection: e.selection, args: e.args, selectParent: e.selectParent };\n        var dialogModel = {\n            header: audioHeader,\n            cssClass: classes.CLS_RTE_ELEMENTS,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            showCloseIcon: true, closeOnEscape: true, width: (Browser.isDevice) ? '290px' : '340px',\n            isModal: Browser.isDevice,\n            buttons: [{\n                    click: this.insertAudioUrl.bind(selectObj),\n                    buttonModel: { content: audioInsert, cssClass: 'e-flat e-insertAudio', isPrimary: true, disabled: true }\n                },\n                {\n                    click: function (e) {\n                        _this.cancelDialog(e);\n                    },\n                    buttonModel: { cssClass: 'e-flat e-cancel', content: audiolinkCancel }\n                }],\n            target: (Browser.isDevice) ? document.body : this.parent.element,\n            animationSettings: { effect: 'None' },\n            close: function (event) {\n                if (_this.isAudioUploaded) {\n                    _this.uploadObj.removing();\n                }\n                _this.parent.isBlur = false;\n                if (event && event.event.returnValue) {\n                    if (_this.parent.editorMode === 'HTML') {\n                        selection.restore();\n                    }\n                }\n                _this.dialogObj.destroy();\n                detach(_this.dialogObj.element);\n                _this.dialogRenderObj.close(event);\n                _this.dialogObj = null;\n            }\n        };\n        var dialogContent = this.parent.createElement('div', { className: 'e-audio-content' });\n        if (!isNullOrUndefined(this.parent.insertAudioSettings.path) || this.parent.editorMode === 'HTML') {\n            dialogContent.appendChild(this.audioUpload(e));\n        }\n        var linkHeader = this.parent.createElement('div', { className: 'e-audioheader' });\n        var linkHeaderText = this.i10n.getConstant('audioLinkHeader');\n        if (this.parent.editorMode === 'HTML') {\n            linkHeader.innerHTML = linkHeaderText;\n        }\n        dialogContent.appendChild(linkHeader);\n        dialogContent.appendChild(this.audioUrlPopup(e));\n        if (e.selectNode && e.selectNode[0].nodeType === 1 && this.isAudioElem(e.selectNode[0])) {\n            dialogModel.header = this.parent.localeObj.getConstant('editAudioHeader');\n            dialogModel.content = dialogContent;\n        }\n        else {\n            dialogModel.content = dialogContent;\n        }\n        this.dialogObj = this.dialogRenderObj.render(dialogModel);\n        this.dialogObj.createElement = this.parent.createElement;\n        this.dialogObj.appendTo(audioDialog);\n        if (e.selectNode && e.selectNode[0].nodeType === 1 && this.isAudioElem(e.selectNode[0]) && (e.name === 'insertAudio')) {\n            this.dialogObj.element.querySelector('.e-insertAudio').textContent = this.parent.localeObj.getConstant('dialogUpdate');\n        }\n        audioDialog.style.maxHeight = 'inherit';\n        if (this.quickToolObj) {\n            if (this.quickToolObj.audioQTBar && document.body.contains(this.quickToolObj.audioQTBar.element)) {\n                this.quickToolObj.audioQTBar.hidePopup();\n            }\n            if (this.quickToolObj.inlineQTBar && document.body.contains(this.quickToolObj.inlineQTBar.element)) {\n                this.quickToolObj.inlineQTBar.hidePopup();\n            }\n            if (this.quickToolObj.textQTBar && this.parent.element.ownerDocument.body.contains(this.quickToolObj.textQTBar.element)) {\n                this.quickToolObj.textQTBar.hidePopup();\n            }\n        }\n    };\n    // eslint-disable-next-line\n    Audio.prototype.audioUrlPopup = function (e) {\n        var _this = this;\n        var audioUrl = this.parent.createElement('div', { className: 'audioUrl' });\n        var placeUrl = this.i10n.getConstant('audioUrl');\n        this.inputUrl = this.parent.createElement('input', {\n            className: 'e-input e-audio-url',\n            attrs: { placeholder: placeUrl, spellcheck: 'false', 'aria-label': this.i10n.getConstant('audioLinkHeader') }\n        });\n        this.inputUrl.addEventListener('input', function () {\n            if (!isNOU(_this.inputUrl)) {\n                if (_this.inputUrl.value.length === 0) {\n                    _this.dialogObj.getButtons(0).element.disabled = true;\n                }\n                else {\n                    _this.dialogObj.getButtons(0).element.removeAttribute('disabled');\n                }\n            }\n        });\n        audioUrl.appendChild(this.inputUrl);\n        return audioUrl;\n    };\n    Audio.prototype.audioUpload = function (e) {\n        var _this = this;\n        var save;\n        var selectParent;\n        // eslint-disable-next-line\n        var proxy = this;\n        var iframe = proxy.parent.iframeSettings.enable;\n        if (proxy.parent.editorMode === 'HTML' && (!iframe && isNullOrUndefined(closest(e.selection.range.startContainer.parentNode, '[id='\n            // eslint-disable-next-line\n            + \"'\" + this.parent.contentModule.getPanel().id + \"'\" + ']'))\n            || (iframe && !hasClass(e.selection.range.startContainer.parentNode.ownerDocument.querySelector('body'), 'e-lib')))) {\n            this.contentModule.getEditPanel().focus();\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n            selectParent = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n        }\n        else {\n            save = e.selection;\n            selectParent = e.selectParent;\n        }\n        var uploadParentEle = this.parent.createElement('div', { className: 'e-aud-uploadwrap e-droparea' });\n        var deviceAudioUpMsg = this.i10n.getConstant('audioDeviceUploadMessage');\n        var audioUpMsg = this.i10n.getConstant('audioUploadMessage');\n        var span = this.parent.createElement('span', { className: 'e-droptext' });\n        var spanMsg = this.parent.createElement('span', {\n            className: 'e-rte-upload-text', innerHTML: ((Browser.isDevice) ? deviceAudioUpMsg : audioUpMsg)\n        });\n        span.appendChild(spanMsg);\n        var btnEle = this.parent.createElement('button', {\n            className: 'e-browsebtn', id: this.rteID + '_insertAudio', attrs: { autofocus: 'true', type: 'button' }\n        });\n        span.appendChild(btnEle);\n        uploadParentEle.appendChild(span);\n        var browserMsg = this.i10n.getConstant('browse');\n        var button = new Button({ content: browserMsg, enableRtl: this.parent.enableRtl });\n        button.isStringTemplate = true;\n        button.createElement = this.parent.createElement;\n        button.appendTo(btnEle);\n        var btnClick = (Browser.isDevice) ? span : btnEle;\n        EventHandler.add(btnClick, 'click', this.fileSelect, this);\n        var uploadEle = this.parent.createElement('input', {\n            id: this.rteID + '_upload', attrs: { type: 'File', name: 'UploadFiles' }\n        });\n        uploadParentEle.appendChild(uploadEle);\n        var fileName;\n        var selectArgs;\n        var filesData;\n        this.uploadObj = new Uploader({\n            asyncSettings: { saveUrl: this.parent.insertAudioSettings.saveUrl, removeUrl: this.parent.insertAudioSettings.removeUrl },\n            dropArea: span, multiple: false, enableRtl: this.parent.enableRtl,\n            allowedExtensions: this.parent.insertAudioSettings.allowedTypes.toString(),\n            selected: function (e) {\n                proxy.isAudioUploaded = true;\n                selectArgs = e;\n                // eslint-disable-next-line\n                filesData = e.filesData;\n                _this.parent.trigger(events.fileSelected, selectArgs, function (selectArgs) {\n                    if (!selectArgs.cancel) {\n                        _this.checkExtension(selectArgs.filesData[0]);\n                        fileName = selectArgs.filesData[0].name;\n                        if (_this.parent.editorMode === 'HTML' && isNullOrUndefined(_this.parent.insertAudioSettings.path)) {\n                            var reader_1 = new FileReader();\n                            // eslint-disable-next-line\n                            reader_1.addEventListener('load', function (e) {\n                                var url = _this.parent.insertAudioSettings.saveFormat === 'Base64' ? reader_1.result :\n                                    URL.createObjectURL(convertToBlob(reader_1.result));\n                                proxy.uploadUrl = {\n                                    url: url, selection: save, fileName: fileName,\n                                    selectParent: selectParent\n                                };\n                                proxy.inputUrl.setAttribute('disabled', 'true');\n                                if (isNullOrUndefined(proxy.parent.insertAudioSettings.saveUrl) && _this.isAllowedTypes\n                                    && !isNullOrUndefined(_this.dialogObj)) {\n                                    _this.dialogObj.getButtons(0).element.removeAttribute('disabled');\n                                }\n                            });\n                            reader_1.readAsDataURL(selectArgs.filesData[0].rawFile);\n                        }\n                    }\n                });\n            },\n            beforeUpload: function (args) {\n                _this.parent.trigger(events.beforeFileUpload, args);\n            },\n            uploading: function (e) {\n                if (!_this.parent.isServerRendered) {\n                    _this.parent.trigger(events.fileUploading, e);\n                }\n            },\n            success: function (e) {\n                _this.parent.trigger(events.fileUploadSuccess, e, function (e) {\n                    if (!isNullOrUndefined(_this.parent.insertAudioSettings.path)) {\n                        var url = _this.parent.insertAudioSettings.path + e.file.name;\n                        // eslint-disable-next-line\n                        var value = { url: url, selection: save };\n                        proxy.uploadUrl = {\n                            url: url, selection: save, fileName: fileName, selectParent: selectParent\n                        };\n                        proxy.inputUrl.setAttribute('disabled', 'true');\n                    }\n                    if (e.operation === 'upload' && !isNullOrUndefined(_this.dialogObj)) {\n                        _this.dialogObj.getButtons(0).element.removeAttribute('disabled');\n                    }\n                });\n            },\n            failure: function (e) {\n                _this.parent.trigger(events.fileUploadFailed, e);\n            },\n            removing: function () {\n                // eslint-disable-next-line\n                _this.parent.trigger(events.fileRemoving, e, function (e) {\n                    proxy.isAudioUploaded = false;\n                    _this.dialogObj.getButtons(0).element.disabled = true;\n                    proxy.inputUrl.removeAttribute('disabled');\n                    if (proxy.uploadUrl) {\n                        proxy.uploadUrl.url = '';\n                    }\n                });\n            }\n        });\n        this.uploadObj.isStringTemplate = true;\n        this.uploadObj.createElement = this.parent.createElement;\n        this.uploadObj.appendTo(uploadEle);\n        return uploadParentEle;\n    };\n    Audio.prototype.checkExtension = function (e) {\n        if (this.uploadObj.allowedExtensions) {\n            if (this.uploadObj.allowedExtensions.toLocaleLowerCase().indexOf(('.' + e.type).toLocaleLowerCase()) === -1) {\n                this.dialogObj.getButtons(0).element.setAttribute('disabled', 'disabled');\n                this.isAllowedTypes = false;\n            }\n            else {\n                this.isAllowedTypes = true;\n            }\n        }\n    };\n    Audio.prototype.fileSelect = function () {\n        this.dialogObj.element.getElementsByClassName('e-file-select-wrap')[0].querySelector('button').click();\n        return false;\n    };\n    // eslint-disable-next-line\n    Audio.prototype.cancelDialog = function (e) {\n        this.parent.isBlur = false;\n        this.dialogObj.hide({ returnValue: true });\n        if (this.isAudioUploaded) {\n            this.uploadObj.removing();\n        }\n    };\n    // eslint-disable-next-line\n    Audio.prototype.insertAudioUrl = function (e) {\n        var proxy = this.selfAudio;\n        //let audioSelectParent: Node = proxy.uploadUrl.selectParent[0];\n        proxy.isAudioUploaded = false;\n        var url = proxy.inputUrl.value;\n        if (proxy.parent.formatter.getUndoRedoStack().length === 0) {\n            proxy.parent.formatter.saveData();\n        }\n        if (!isNullOrUndefined(proxy.uploadUrl) && proxy.uploadUrl.url !== '') {\n            proxy.uploadUrl.cssClass = (proxy.parent.insertAudioSettings.layoutOption === 'Inline' ?\n                classes.CLS_AUDIOINLINE : classes.CLS_AUDIOBREAK);\n            proxy.dialogObj.hide({ returnValue: false });\n            proxy.parent.formatter.process(proxy.parent, this.args, this.args.originalEvent, proxy.uploadUrl);\n            proxy.uploadUrl.url = '';\n        }\n        else if (url !== '') {\n            if (proxy.parent.editorMode === 'HTML' && isNullOrUndefined(closest(\n            // eslint-disable-next-line\n            this.selection.range.startContainer.parentNode, '[id=' + \"'\" + proxy.contentModule.getPanel().id + \"'\" + ']'))) {\n                proxy.contentModule.getEditPanel().focus();\n                var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.contentModule.getDocument());\n                this.selection = proxy.parent.formatter.editorManager.nodeSelection.save(range, proxy.contentModule.getDocument());\n                this.selectParent = proxy.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n            }\n            var name_1 = proxy.parent.editorMode === 'HTML' ? url.split('/')[url.split('/').length - 1] : '';\n            var value = {\n                cssClass: (proxy.parent.insertAudioSettings.layoutOption === 'Inline' ? classes.CLS_AUDIOINLINE : classes.CLS_AUDIOBREAK),\n                url: url, selection: this.selection, fileName: name_1,\n                selectParent: this.selectParent\n            };\n            proxy.parent.formatter.process(proxy.parent, this.args, this.args.originalEvent, value);\n            proxy.dialogObj.hide({ returnValue: false });\n        }\n    };\n    /* eslint-disable */\n    /**\n     * Destroys the ToolBar.\n     *\n     * @method destroy\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    /* eslint-enable */\n    Audio.prototype.destroy = function () {\n        this.prevSelectedAudEle = undefined;\n        this.removeEventListener();\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Audio.prototype.getModuleName = function () {\n        return 'audio';\n    };\n    return Audio;\n}());\nexport { Audio };\n","import { addClass, detach, EventHandler, isNullOrUndefined, Ajax, formatUnit } from '@syncfusion/ej2-base';\nimport { Browser, closest, removeClass, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { Uploader, TextBox } from '@syncfusion/ej2-inputs';\nimport { Button, RadioButton } from '@syncfusion/ej2-buttons';\nimport { RenderType } from '../base/enum';\nimport { dispatchEvent, parseHtml, hasClass, convertToBlob } from '../base/util';\nimport { isIDevice } from '../../common/util';\nvar Video = /** @class */ (function () {\n    function Video(parent, serviceLocator) {\n        this.isVideoUploaded = false;\n        this.isAllowedTypes = true;\n        this.pageX = null;\n        this.pageY = null;\n        this.deletedVid = [];\n        this.parent = parent;\n        this.rteID = parent.element.id;\n        this.i10n = serviceLocator.getService('rteLocale');\n        this.rendererFactory = serviceLocator.getService('rendererFactory');\n        this.dialogRenderObj = serviceLocator.getService('dialogRenderObject');\n        this.addEventListener();\n    }\n    Video.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.keyUp, this.onKeyUp, this);\n        this.parent.on(events.insertVideo, this.insertingVideo, this);\n        this.parent.on(events.initialEnd, this.afterRender, this);\n        this.parent.on(events.dynamicModule, this.afterRender, this);\n        this.parent.on(events.windowResize, this.onWindowResize, this);\n        this.parent.on(events.showVideoDialog, this.showDialog, this);\n        this.parent.on(events.closeVideoDialog, this.closeDialog, this);\n        this.parent.on(events.dropDownSelect, this.alignmentSelect, this);\n        this.parent.on(events.videoDelete, this.deleteVideo, this);\n        this.parent.on(events.videoToolbarAction, this.onToolbarAction, this);\n        this.parent.on(events.editAreaClick, this.editAreaClickHandler, this);\n        this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n        this.parent.on(events.videoSize, this.videoSize, this);\n        this.parent.on(events.insertCompleted, this.showVideoQuickToolbar, this);\n        this.parent.on(events.clearDialogObj, this.clearDialogObj, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    Video.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.keyDown, this.onKeyDown);\n        this.parent.off(events.keyUp, this.onKeyUp);\n        this.parent.off(events.insertVideo, this.insertingVideo);\n        this.parent.off(events.windowResize, this.onWindowResize);\n        this.parent.off(events.initialEnd, this.afterRender);\n        this.parent.off(events.dynamicModule, this.afterRender);\n        this.parent.off(events.showVideoDialog, this.showDialog);\n        this.parent.off(events.closeVideoDialog, this.closeDialog);\n        this.parent.off(events.dropDownSelect, this.alignmentSelect);\n        this.parent.off(events.videoDelete, this.deleteVideo);\n        this.parent.off(events.videoToolbarAction, this.onToolbarAction);\n        this.parent.off(events.editAreaClick, this.editAreaClickHandler);\n        this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n        this.parent.off(events.videoSize, this.videoSize);\n        this.parent.off(events.insertCompleted, this.showVideoQuickToolbar);\n        this.parent.off(events.clearDialogObj, this.clearDialogObj);\n        this.parent.off(events.destroy, this.removeEventListener);\n        if (!isNullOrUndefined(this.contentModule)) {\n            EventHandler.remove(this.contentModule.getEditPanel(), Browser.touchEndEvent, this.videoClick);\n            this.parent.formatter.editorManager.observer.off(events.checkUndo, this.undoStack);\n            if (this.parent.insertVideoSettings.resize) {\n                EventHandler.remove(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart);\n                EventHandler.remove(this.parent.element.ownerDocument, 'mousedown', this.onDocumentClick);\n                EventHandler.remove(this.contentModule.getEditPanel(), 'cut', this.onCutHandler);\n                EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n            }\n        }\n    };\n    Video.prototype.afterRender = function () {\n        this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n        EventHandler.add(this.contentModule.getEditPanel(), Browser.touchEndEvent, this.videoClick, this);\n        if (this.parent.insertVideoSettings.resize) {\n            EventHandler.add(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart, this);\n            EventHandler.add(this.parent.element.ownerDocument, 'mousedown', this.onDocumentClick, this);\n            EventHandler.add(this.contentModule.getEditPanel(), 'cut', this.onCutHandler, this);\n        }\n    };\n    Video.prototype.clearDialogObj = function () {\n        if (this.dialogObj) {\n            this.dialogObj.destroy();\n            detach(this.dialogObj.element);\n            this.dialogObj = null;\n        }\n    };\n    // eslint-disable-next-line\n    Video.prototype.onKeyUp = function (event) {\n        if (!isNOU(this.deletedVid) && this.deletedVid.length > 0) {\n            for (var i = 0; i < this.deletedVid.length; i++) {\n                var args = {\n                    element: this.deletedVid[i],\n                    src: this.deletedVid[i].tagName !== 'IFRAME' ? this.deletedVid[i].querySelector('source').getAttribute('src') :\n                        this.deletedVid[i].src\n                };\n                this.parent.trigger(events.afterMediaDelete, args);\n            }\n        }\n    };\n    Video.prototype.undoStack = function (args) {\n        if (args.subCommand.toLowerCase() === 'undo' || args.subCommand.toLowerCase() === 'redo') {\n            for (var i = 0; i < this.parent.formatter.getUndoRedoStack().length; i++) {\n                var temp = this.parent.createElement('div');\n                var contentElem = this.parent.formatter.getUndoRedoStack()[i].text;\n                temp.appendChild(contentElem.cloneNode(true));\n                var vid = temp.querySelectorAll('video');\n                if (temp.querySelector('.e-vid-resize') && vid.length > 0) {\n                    for (var j = 0; j < vid.length; j++) {\n                        vid[j].style.outline = '';\n                    }\n                    detach(temp.querySelector('.e-vid-resize'));\n                    var clonedElement = temp.cloneNode(true);\n                    var fragment = document.createDocumentFragment();\n                    while (clonedElement.firstChild) {\n                        fragment.appendChild(clonedElement.firstChild);\n                    }\n                    this.parent.formatter.getUndoRedoStack()[i].text = fragment;\n                }\n            }\n        }\n    };\n    Video.prototype.onIframeMouseDown = function () {\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n        }\n    };\n    Video.prototype.videoSize = function (e) {\n        var _this = this;\n        if (e.selectNode[0].nodeName !== 'VIDEO' && !this.isEmbedVidElem(e.selectNode[0])) {\n            return;\n        }\n        this.insertVideo(e);\n        if (!isNullOrUndefined(this.dialogObj)) {\n            var vidSizeHeader = this.i10n.getConstant('videoSizeHeader');\n            var linkUpdate = this.i10n.getConstant('dialogUpdate');\n            var dialogContent = this.vidsizeInput(e);\n            var selectObj_1 = { args: e.args, selfVideo: this, selection: e.selection, selectNode: e.selectNode };\n            this.dialogObj.setProperties({\n                height: 'inherit', width: '290px', header: vidSizeHeader, content: dialogContent,\n                buttons: [{\n                        // eslint-disable-next-line\n                        click: function (e) {\n                            _this.insertSize(selectObj_1);\n                        },\n                        buttonModel: {\n                            content: linkUpdate, cssClass: 'e-flat e-update-size', isPrimary: true\n                        }\n                    }]\n            });\n            this.dialogObj.element.style.maxHeight = 'inherit';\n            this.dialogObj.content.querySelector('input').focus();\n        }\n    };\n    Video.prototype.vidsizeInput = function (e) {\n        var _this = this;\n        var selectNode = e.selectNode[0];\n        var vidHeight = this.i10n.getConstant('videoHeight');\n        var vidWidth = this.i10n.getConstant('videoWidth');\n        var vidSizeWrap = this.parent.createElement('div', { className: 'e-video-sizewrap' });\n        var widthVal = isNullOrUndefined(this.changedWidthValue) && (selectNode.style.width.toString() === 'auto' ||\n            selectNode.style.width !== '') ? selectNode.style.width : !isNullOrUndefined(this.changedWidthValue) ?\n            this.changedWidthValue : (parseInt(selectNode.getClientRects()[0].width.toString(), 10)).toString();\n        var heightVal = isNullOrUndefined(this.changedHeightValue) && (selectNode.style.height.toString() === 'auto' ||\n            selectNode.style.height !== '') ? selectNode.style.height : !isNullOrUndefined(this.changedHeightValue) ?\n            this.changedHeightValue : (parseInt(selectNode.getClientRects()[0].height.toString(), 10)).toString();\n        this.changedWidthValue = null;\n        this.changedHeightValue = null;\n        var content = '<div class=\"e-rte-label\"><label>' + vidWidth +\n            '</label></div><div class=\"e-rte-field\"><input type=\"text\" id=\"vidwidth\" class=\"e-vid-width\" value=' +\n            widthVal\n            + ' /></div>' +\n            '<div class=\"e-rte-label\">' + '<label>' + vidHeight + '</label></div><div class=\"e-rte-field\"> ' +\n            '<input type=\"text\" id=\"vidheight\" class=\"e-vid-height\" value=' +\n            heightVal\n            + ' /></div>';\n        var contentElem = parseHtml(content);\n        vidSizeWrap.appendChild(contentElem);\n        var widthNum = new TextBox({\n            value: formatUnit(widthVal),\n            enableRtl: this.parent.enableRtl,\n            input: function (e) {\n                _this.inputWidthValue = formatUnit((e.value));\n            }\n        });\n        widthNum.createElement = this.parent.createElement;\n        widthNum.appendTo(vidSizeWrap.querySelector('#vidwidth'));\n        var heightNum = new TextBox({\n            value: formatUnit(heightVal),\n            enableRtl: this.parent.enableRtl,\n            input: function (e) {\n                _this.inputHeightValue = formatUnit((e.value));\n            }\n        });\n        heightNum.createElement = this.parent.createElement;\n        heightNum.appendTo(vidSizeWrap.querySelector('#vidheight'));\n        return vidSizeWrap;\n    };\n    Video.prototype.insertSize = function (e) {\n        e.selection.restore();\n        var proxy = e.selfVideo;\n        if (proxy.parent.formatter.getUndoRedoStack().length === 0) {\n            proxy.parent.formatter.saveData();\n        }\n        var dialogEle = proxy.dialogObj.element;\n        this.changedWidthValue = this.inputWidthValue;\n        this.changedHeightValue = this.inputHeightValue;\n        var width = dialogEle.querySelector('.e-vid-width').value;\n        var height = dialogEle.parentElement.querySelector('.e-vid-height').value;\n        proxy.parent.formatter.process(this.parent, e.args, e.args, {\n            width: width, height: height, selectNode: e.selectNode,\n            subCommand: e.args.item.subCommand\n        });\n        if (this.vidResizeDiv) {\n            e.selectNode[0] = (e.selectNode[0].tagName === 'VIDEO' || e.selectNode[0].tagName === 'IFRAME') ?\n                e.selectNode[0] : e.selectNode[0].querySelector('iframe');\n            proxy.vidResizePos(e.selectNode[0], this.vidResizeDiv);\n        }\n        proxy.dialogObj.hide({ returnValue: true });\n    };\n    Video.prototype.resizeEnd = function (e) {\n        this.resizeBtnInit();\n        this.videoEle.parentElement.style.cursor = 'auto';\n        if (Browser.isDevice) {\n            removeClass([e.target.parentElement], 'e-mob-span');\n        }\n        var args = { event: e, requestType: 'videos' };\n        this.parent.trigger(events.resizeStop, args);\n        /* eslint-disable */\n        var pageX = this.getPointX(e);\n        var pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset +\n            this.parent.element.getBoundingClientRect().top + e.clientY : e.pageY;\n        /* eslint-enable */\n        this.parent.formatter.editorManager.observer.on(events.checkUndo, this.undoStack, this);\n        this.parent.formatter.saveData();\n    };\n    Video.prototype.resizeStart = function (e, ele) {\n        var _this = this;\n        if (this.parent.readonly) {\n            return;\n        }\n        var target = ele ? ele : !this.isEmbedVidElem(e.target) ? e.target : e.target.querySelector('iframe');\n        this.prevSelectedVidEle = this.videoEle;\n        if (target.tagName === 'VIDEO' || target.tagName === 'IFRAME') {\n            this.parent.preventDefaultResize(e);\n            var videoElem = target;\n            if (this.vidResizeDiv && this.contentModule.getEditPanel().contains(this.vidResizeDiv)) {\n                detach(this.vidResizeDiv);\n            }\n            this.videoResize(videoElem);\n        }\n        if (target.classList.contains('e-rte-videoboxmark')) {\n            if (this.parent.formatter.getUndoRedoStack().length === 0) {\n                this.parent.formatter.saveData();\n            }\n            this.pageX = this.getPointX(e);\n            this.pageY = this.getPointY(e);\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            this.resizeBtnInit();\n            if (this.quickToolObj) {\n                this.quickToolObj.videoQTBar.hidePopup();\n            }\n            if (target.classList.contains('e-rte-topLeft')) {\n                this.resizeBtnStat.topLeft = true;\n            }\n            if (target.classList.contains('e-rte-topRight')) {\n                this.resizeBtnStat.topRight = true;\n            }\n            if (target.classList.contains('e-rte-botLeft')) {\n                this.resizeBtnStat.botLeft = true;\n            }\n            if (target.classList.contains('e-rte-botRight')) {\n                this.resizeBtnStat.botRight = true;\n            }\n            if (Browser.isDevice && this.contentModule.getEditPanel().contains(this.vidResizeDiv) &&\n                !this.vidResizeDiv.classList.contains('e-mob-span')) {\n                addClass([this.vidResizeDiv], 'e-mob-span');\n            }\n            else {\n                var args = { event: e, requestType: 'videos' };\n                this.parent.trigger(events.resizeStart, args, function (resizeStartArgs) {\n                    if (resizeStartArgs.cancel) {\n                        _this.cancelResizeAction();\n                    }\n                });\n            }\n            EventHandler.add(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd, this);\n        }\n    };\n    Video.prototype.videoClick = function (e) {\n        if (Browser.isDevice) {\n            if ((e.target.tagName === 'VIDEO' || this.isEmbedVidElem(e.target))) {\n                this.contentModule.getEditPanel().setAttribute('contenteditable', 'false');\n                e.target.focus();\n            }\n            else {\n                if (!this.parent.readonly) {\n                    this.contentModule.getEditPanel().setAttribute('contenteditable', 'true');\n                }\n            }\n        }\n        if (e.target.tagName === 'VIDEO' || this.isEmbedVidElem(e.target)) {\n            e.preventDefault();\n        }\n    };\n    Video.prototype.onCutHandler = function () {\n        if (this.vidResizeDiv && this.contentModule.getEditPanel().contains(this.vidResizeDiv)) {\n            this.cancelResizeAction();\n        }\n    };\n    Video.prototype.videoResize = function (e) {\n        this.resizeBtnInit();\n        this.videoEle = e;\n        addClass([this.videoEle], 'e-resize');\n        this.vidResizeDiv = this.parent.createElement('span', { className: 'e-vid-resize', id: this.rteID + '_vidResize' });\n        this.vidResizeDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-rte-videoboxmark e-rte-topLeft', styles: 'cursor: nwse-resize'\n        }));\n        this.vidResizeDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-rte-videoboxmark e-rte-topRight', styles: 'cursor: nesw-resize'\n        }));\n        this.vidResizeDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-rte-videoboxmark e-rte-botLeft', styles: 'cursor: nesw-resize'\n        }));\n        this.vidResizeDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-rte-videoboxmark e-rte-botRight', styles: 'cursor: nwse-resize'\n        }));\n        if (Browser.isDevice) {\n            addClass([this.vidResizeDiv], 'e-mob-rte');\n        }\n        e.style.outline = '2px solid #4a90e2';\n        this.vidResizePos(e, this.vidResizeDiv);\n        this.resizeVidDupPos(e);\n        this.contentModule.getEditPanel().appendChild(this.vidResizeDiv);\n        EventHandler.add(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing, this);\n    };\n    Video.prototype.getPointX = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageX;\n        }\n        else {\n            return e.pageX;\n        }\n    };\n    Video.prototype.getPointY = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageY;\n        }\n        else {\n            return e.pageY;\n        }\n    };\n    Video.prototype.vidResizePos = function (e, vidResizeDiv) {\n        if (isNullOrUndefined(vidResizeDiv)) {\n            return;\n        }\n        var pos = this.calcPos(e);\n        var top = pos.top;\n        var left = pos.left;\n        var vidWid = e.width !== 0 && e.width !== 'auto' && e.width !== 'NaN' ? e.width : e.getBoundingClientRect().width;\n        var vidHgt = e.height !== 0 && e.height !== 'auto' && e.height !== 'NaN' ? e.height : e.getBoundingClientRect().height;\n        var borWid = (Browser.isDevice) ? (4 * parseInt((e.style.outline.slice(-3)), 10)) + 2 :\n            (2 * parseInt((e.style.outline.slice(-3)), 10)) + 2; //span border width + video outline width\n        var devWid = ((Browser.isDevice) ? 0 : 2); // span border width\n        vidResizeDiv.querySelector('.e-rte-botLeft').style.left = (left - borWid) + 'px';\n        vidResizeDiv.querySelector('.e-rte-botLeft').style.top = ((parseInt(vidHgt.toString(), 10) - borWid) + top) + 'px';\n        vidResizeDiv.querySelector('.e-rte-botRight').style.left = ((parseInt(vidWid.toString(), 10) - (borWid - devWid)) + left) + 'px';\n        vidResizeDiv.querySelector('.e-rte-botRight').style.top = ((parseInt(vidHgt.toString(), 10) - borWid) + top) + 'px';\n        vidResizeDiv.querySelector('.e-rte-topRight').style.left = ((parseInt(vidWid.toString(), 10) - (borWid - devWid)) + left) + 'px';\n        vidResizeDiv.querySelector('.e-rte-topRight').style.top = (top - (borWid)) + 'px';\n        vidResizeDiv.querySelector('.e-rte-topLeft').style.left = (left - borWid) + 'px';\n        vidResizeDiv.querySelector('.e-rte-topLeft').style.top = (top - borWid) + 'px';\n    };\n    Video.prototype.calcPos = function (elem) {\n        var ignoreOffset = ['TD', 'TH', 'TABLE', 'A'];\n        var parentOffset = { top: 0, left: 0 };\n        var elementOffset;\n        var doc = elem.ownerDocument;\n        var offsetParent = ((elem.offsetParent && (elem.offsetParent.classList.contains('e-video-clickelem') ||\n            ignoreOffset.indexOf(elem.offsetParent.tagName) > -1)) ? closest(elem, '#' + this.parent.getID() + '_rte-edit-view') : elem.offsetParent) || doc.documentElement;\n        while (offsetParent &&\n            (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            offsetParent.style.position === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n            parentOffset = offsetParent.getBoundingClientRect();\n        }\n        if (elem && elem.nodeType === 1 && elem.tagName === 'IFRAME') {\n            elementOffset = elem.getBoundingClientRect();\n            return {\n                top: elementOffset.top - parentOffset.top,\n                left: elementOffset.left - parentOffset.left\n            };\n        }\n        else {\n            return {\n                top: elem.offsetTop,\n                left: elem.offsetLeft\n            };\n        }\n    };\n    Video.prototype.setAspectRatio = function (vid, expectedX, expectedY, e) {\n        var vidEleStyle = getComputedStyle(vid);\n        if (isNullOrUndefined(vidEleStyle)) {\n            return;\n        }\n        // eslint-disable-next-line\n        var width = vidEleStyle.width !== '' ? vidEleStyle.width.match(/^\\d+(\\.\\d*)?%$/g) ? parseFloat(vidEleStyle.width) :\n            parseInt(vidEleStyle.width, 10) : vid.style.width !== '' ? vid.style.width : vid.width;\n        var height = vidEleStyle.height !== '' ? parseInt(vidEleStyle.height, 10) : vid.style.height !== '' ? vid.style.height : vid.height;\n        if (width > height) {\n            vid.style.minWidth = this.parent.insertVideoSettings.minWidth === 0 ? '200px' : formatUnit(this.parent.insertVideoSettings.minWidth);\n            vid.style.minHeight = this.parent.insertVideoSettings.minHeight === 0 ? '90px' : formatUnit(this.parent.insertVideoSettings.minHeight);\n            if (this.parent.insertVideoSettings.resizeByPercent) {\n                if (parseInt('' + vid.getBoundingClientRect().width + '', 10) !== 0 && parseInt('' + width + '', 10) !== 0) {\n                    var percentageValue = this.pixToPerc((parseInt(width.toString(), 10) / parseInt(height.toString(), 10) * expectedY), (vid.previousElementSibling || vid.parentElement));\n                    vid.style.width = Math.min(Math.round((percentageValue / vid.getBoundingClientRect().width) * expectedX * 100) / 100, 100) + '%';\n                }\n                else {\n                    vid.style.width = this.pixToPerc(parseInt(width.toString(), 10) / parseInt(height.toString(), 10) * expectedY, (vid.previousElementSibling || vid.parentElement)) + '%';\n                }\n                vid.style.height = null;\n                vid.removeAttribute('height');\n            }\n            else if ((vid.style.width === '' && vid.style.height !== '') || (vidEleStyle.width === '' && vidEleStyle.height !== '')) {\n                vid.style.height = expectedY + 'px';\n            }\n            else if ((vid.style.width !== '' && vid.style.height === '') || (vidEleStyle.width !== '' && vidEleStyle.height === '')) {\n                var currentWidth = ((parseInt(width.toString(), 10) / parseInt(height.toString(), 10) * expectedY) +\n                    parseInt(width.toString(), 10) / parseInt(height.toString(), 10)) <\n                    (this.parent.inputElement.getBoundingClientRect().right - 32) ?\n                    ((parseInt(width.toString(), 10) / parseInt(height.toString(), 10) * expectedY) +\n                        parseInt(width.toString(), 10) / parseInt(height.toString(), 10)) :\n                    (this.parent.inputElement.getBoundingClientRect().right - 32);\n                vid.style.width = currentWidth.toString() + 'px';\n            }\n            else if (vid.style.width !== '' || vidEleStyle.width !== '') {\n                var currentWidth = (parseInt(width.toString(), 10) / parseInt(height.toString(), 10) * expectedY) <\n                    (this.parent.inputElement.getBoundingClientRect().right - 32) ?\n                    (parseInt(width.toString(), 10) / parseInt(height.toString(), 10) * expectedY) :\n                    (this.parent.inputElement.getBoundingClientRect().right - 32);\n                vid.style.width = currentWidth + 'px';\n                vid.style.height = expectedY + 'px';\n            }\n            else {\n                vid.setAttribute('width', (parseInt(((parseInt(width.toString(), 10) / parseInt(height.toString(), 10) * expectedY) + parseInt(width.toString(), 10) / parseInt(height.toString(), 10)).toString(), 10)).toString());\n            }\n        }\n        else if (height > width) {\n            if (this.parent.insertVideoSettings.resizeByPercent) {\n                if (parseInt('' + vid.getBoundingClientRect().width + '', 10) !== 0 && parseInt('' + width + '', 10) !== 0) {\n                    vid.style.width = Math.min(Math.round((parseInt(width.toString(), 10) / vid.getBoundingClientRect().width) * expectedX * 100) / 100, 100) + '%';\n                }\n                else {\n                    vid.style.width = this.pixToPerc((expectedX / parseInt(height.toString(), 10) * expectedY), (vid.previousElementSibling || vid.parentElement)) + '%';\n                }\n                vid.style.height = null;\n                vid.removeAttribute('height');\n            }\n            else if (vid.style.width !== '' || vidEleStyle.width !== '') {\n                vid.style.width = expectedX + 'px';\n                vid.style.height = (parseInt(height.toString(), 10) / parseInt(width.toString(), 10) * expectedX) + 'px';\n            }\n            else {\n                vid.setAttribute('width', this.resizeBtnStat.botRight ? (this.getPointX(e.event) - vid.getBoundingClientRect().left).toString() : expectedX.toString());\n            }\n        }\n        else {\n            if (this.parent.insertVideoSettings.resizeByPercent) {\n                vid.style.width = this.pixToPerc(expectedX, (vid.previousElementSibling || vid.parentElement)) + '%';\n                vid.style.height = null;\n                vid.removeAttribute('height');\n            }\n            else {\n                vid.style.width = expectedX + 'px';\n                vid.style.height = expectedX + 'px';\n            }\n        }\n    };\n    Video.prototype.pixToPerc = function (expected, parentEle) {\n        return expected / parseFloat(getComputedStyle(parentEle).width) * 100;\n    };\n    Video.prototype.vidDupMouseMove = function (width, height, e) {\n        var _this = this;\n        var args = { event: e, requestType: 'videos' };\n        this.parent.trigger(events.onResize, args, function (resizingArgs) {\n            if (resizingArgs.cancel) {\n                _this.cancelResizeAction();\n            }\n            else {\n                if ((parseInt(_this.parent.insertVideoSettings.minWidth, 10) >= parseInt(width, 10) ||\n                    (parseInt(_this.parent.getInsertVidMaxWidth(), 10) <= parseInt(width, 10) &&\n                        isNOU(_this.videoEle.style.width)))) {\n                    return;\n                }\n                if (!_this.parent.insertVideoSettings.resizeByPercent &&\n                    (parseInt(_this.parent.insertVideoSettings.minHeight, 10) >= parseInt(height, 10) ||\n                        parseInt(_this.parent.insertVideoSettings.maxHeight, 10) <= parseInt(height, 10))) {\n                    return;\n                }\n                _this.videoEle.parentElement.style.cursor = 'pointer';\n                _this.setAspectRatio(_this.videoEle, parseInt(width, 10), parseInt(height, 10), args);\n                _this.resizeVidDupPos(_this.videoEle);\n                _this.vidResizePos(_this.videoEle, _this.vidResizeDiv);\n                _this.parent.setContentHeight('', false);\n            }\n        });\n    };\n    Video.prototype.resizing = function (e) {\n        if (this.videoEle.offsetWidth >= this.parent.getInsertVidMaxWidth()) {\n            this.videoEle.style.maxHeight = this.videoEle.offsetHeight + 'px';\n        }\n        var pageX = this.getPointX(e);\n        var pageY = this.getPointY(e);\n        var mouseX = (this.resizeBtnStat.botLeft || this.resizeBtnStat.topLeft) ? -(pageX - this.pageX) : (pageX - this.pageX);\n        var mouseY = (this.resizeBtnStat.topLeft || this.resizeBtnStat.topRight) ? -(pageY - this.pageY) : (pageY - this.pageY);\n        var width = parseInt(this.vidDupPos.width, 10) + mouseX;\n        var height = parseInt(this.vidDupPos.height, 10) + mouseY;\n        this.pageX = pageX;\n        this.pageY = pageY;\n        if (this.resizeBtnStat.botRight) {\n            this.vidDupMouseMove(width + 'px', height + 'px', e);\n        }\n        else if (this.resizeBtnStat.botLeft) {\n            this.vidDupMouseMove(width + 'px', height + 'px', e);\n        }\n        else if (this.resizeBtnStat.topRight) {\n            this.vidDupMouseMove(width + 'px', height + 'px', e);\n        }\n        else if (this.resizeBtnStat.topLeft) {\n            this.vidDupMouseMove(width + 'px', height + 'px', e);\n        }\n    };\n    Video.prototype.cancelResizeAction = function () {\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        if (this.videoEle && this.vidResizeDiv && this.contentModule.getEditPanel().contains(this.vidResizeDiv)) {\n            detach(this.vidResizeDiv);\n            this.videoEle.style.outline = '';\n            this.vidResizeDiv = null;\n            this.pageX = null;\n            this.pageY = null;\n        }\n    };\n    Video.prototype.resizeVidDupPos = function (e) {\n        this.vidDupPos = {\n            width: (e.style.width !== '' && (this.parent.insertVideoSettings &&\n                !this.parent.insertVideoSettings.resizeByPercent)) ? this.videoEle.style.width : e.width !== 'auto' && e.width !== 0 && e.width !== 'NaN' ? e.width + 'px' : parseInt(getComputedStyle(e).width, 10) + 'px',\n            height: (e.style.height !== '') ? this.videoEle.style.height : e.height !== 'auto' && e.height !== 0 && e.height !== 'NaN' ? e.height + 'px' : parseInt(getComputedStyle(e).height, 10) + 'px'\n        };\n    };\n    Video.prototype.resizeBtnInit = function () {\n        return this.resizeBtnStat = { botLeft: false, botRight: false, topRight: false, topLeft: false };\n    };\n    Video.prototype.onToolbarAction = function (args) {\n        if (isIDevice()) {\n            this.parent.notify(events.selectionRestore, {});\n        }\n        var item = args.args.item;\n        switch (item.subCommand) {\n            case 'VideoReplace':\n                this.parent.notify(events.insertVideo, args);\n                break;\n            case 'VideoRemove':\n                this.parent.notify(events.videoDelete, args);\n                break;\n            case 'VideoDimension':\n                this.parent.notify(events.videoSize, args);\n        }\n    };\n    Video.prototype.onKeyDown = function (event) {\n        var originalEvent = event.args;\n        var range;\n        var save;\n        var selectNodeEle;\n        var selectParentEle;\n        this.deletedVid = [];\n        var isCursor;\n        var keyCodeValues = [27, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123,\n            44, 45, 9, 16, 17, 18, 19, 20, 33, 34, 35, 36, 37, 38, 39, 40, 91, 92, 93, 144, 145, 182, 183];\n        if (this.parent.editorMode === 'HTML') {\n            range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            isCursor = range.startContainer === range.endContainer && range.startOffset === range.endOffset;\n        }\n        if (!isCursor && this.parent.editorMode === 'HTML' && keyCodeValues.indexOf(originalEvent.which) < 0) {\n            var nodes = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n            for (var i = 0; i < nodes.length; i++) {\n                if (nodes[i].nodeName === 'VIDEO' || nodes[i].nodeName === 'IFRAME') {\n                    this.deletedVid.push(nodes[i]);\n                }\n            }\n        }\n        if (this.parent.editorMode === 'HTML' && ((originalEvent.which === 8 && originalEvent.code === 'Backspace') ||\n            (originalEvent.which === 46 && originalEvent.code === 'Delete'))) {\n            var isCursor_1 = range.startContainer === range.endContainer && range.startOffset === range.endOffset;\n            if ((originalEvent.which === 8 && originalEvent.code === 'Backspace' && isCursor_1)) {\n                this.checkVideoBack(range);\n            }\n            else if ((originalEvent.which === 46 && originalEvent.code === 'Delete' && isCursor_1)) {\n                this.checkVideoDel(range);\n            }\n        }\n        if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) &&\n            originalEvent.code !== 'KeyK') {\n            range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n            selectParentEle = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n            if (!originalEvent.ctrlKey && originalEvent.key && (originalEvent.key.length === 1 || originalEvent.action === 'enter') &&\n                ((!isNOU(selectParentEle[0]) && selectParentEle[0].tagName === 'VIDEO' || this.isEmbedVidElem(selectParentEle[0]))) &&\n                selectParentEle[0].parentElement) {\n                var prev = selectParentEle[0].parentElement.childNodes[0];\n                if (this.contentModule.getEditPanel().querySelector('.e-vid-resize')) {\n                    this.removeResizeEle();\n                }\n                this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(), prev, prev, prev.textContent.length, prev.textContent.length);\n                removeClass([selectParentEle[0]], classes.CLS_VID_FOCUS);\n                this.quickToolObj.videoQTBar.hidePopup();\n            }\n        }\n        if (originalEvent.ctrlKey && (originalEvent.keyCode === 89 || originalEvent.keyCode === 90)) {\n            this.undoStack({ subCommand: (originalEvent.keyCode === 90 ? 'undo' : 'redo') });\n        }\n        if (originalEvent.keyCode === 8 || originalEvent.keyCode === 46) {\n            if (selectNodeEle && (selectNodeEle[0].nodeName === 'VIDEO' || this.isEmbedVidElem(selectNodeEle[0])) && selectNodeEle.length < 1) {\n                if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)) {\n                    save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n                }\n                originalEvent.preventDefault();\n                var event_1 = {\n                    selectNode: selectNodeEle, selection: save, selectParent: selectParentEle,\n                    args: {\n                        item: { command: 'Videos', subCommand: 'VideoRemove' },\n                        originalEvent: originalEvent\n                    }\n                };\n                this.deleteVideo(event_1, originalEvent.keyCode);\n            }\n            if (this.parent.contentModule.getEditPanel().querySelector('.e-vid-resize')) {\n                this.removeResizeEle();\n            }\n        }\n        if (originalEvent.code === 'Backspace') {\n            originalEvent.action = 'backspace';\n        }\n        switch (originalEvent.action) {\n            case 'escape':\n                if (!isNullOrUndefined(this.dialogObj)) {\n                    this.dialogObj.close();\n                }\n                break;\n            case 'backspace':\n            case 'delete':\n                for (var i = 0; i < this.deletedVid.length; i++) {\n                    var src = this.deletedVid[i].src;\n                    this.videoRemovePost(src);\n                }\n                if (this.parent.editorMode !== 'Markdown') {\n                    if (range.startContainer.nodeType === 3) {\n                        if (originalEvent.code === 'Backspace') {\n                            if (range.startContainer.previousElementSibling && range.startOffset === 0 &&\n                                range.startContainer.previousElementSibling.classList.contains(classes.CLS_VIDEOWRAP)) {\n                                detach(range.startContainer.previousElementSibling);\n                            }\n                        }\n                        else {\n                            if (range.startContainer.nextElementSibling &&\n                                range.endContainer.textContent.length === range.endOffset &&\n                                range.startContainer.nextElementSibling.classList.contains(classes.CLS_VIDEOWRAP)) {\n                                detach(range.startContainer.nextElementSibling);\n                            }\n                        }\n                    }\n                    else if (range.startContainer.nodeType === 1 && (range.startContainer.classList &&\n                        range.startContainer.classList.contains(classes.CLS_VIDEOWRAP))) {\n                        detach(range.startContainer);\n                    }\n                }\n                break;\n            case 'insert-video':\n                if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)) {\n                    save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n                }\n                this.openDialog(true, originalEvent, save, selectNodeEle, selectParentEle);\n                originalEvent.preventDefault();\n                break;\n        }\n    };\n    Video.prototype.openDialog = function (isInternal, event, selection, ele, parentEle) {\n        var range;\n        var save;\n        var selectNodeEle;\n        var selectParentEle;\n        if (!isInternal && !isNOU(this.parent.formatter.editorManager.nodeSelection)) {\n            range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n            selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n            selectParentEle = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n        }\n        else {\n            save = selection;\n            selectNodeEle = ele;\n            selectParentEle = parentEle;\n        }\n        if (this.parent.editorMode === 'HTML') {\n            this.insertVideo({\n                args: {\n                    item: { command: 'Videos', subCommand: 'Video' },\n                    originalEvent: event,\n                    name: !isInternal ? 'showDialog' : null\n                },\n                selectNode: selectNodeEle,\n                selection: save,\n                selectParent: selectParentEle\n            });\n        }\n    };\n    Video.prototype.showDialog = function () {\n        this.openDialog(false);\n    };\n    Video.prototype.closeDialog = function () {\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n        }\n    };\n    Video.prototype.checkVideoBack = function (range) {\n        if (range.startContainer.nodeName === '#text' && range.startOffset === 0 &&\n            !isNOU(range.startContainer.previousSibling) && (range.startContainer.previousSibling.nodeName === 'VIDEO' ||\n            this.isEmbedVidElem(range.startContainer.previousSibling))) {\n            this.deletedVid.push(range.startContainer.previousSibling);\n        }\n        else if (range.startContainer.nodeName !== '#text' && !isNOU(range.startContainer.childNodes[range.startOffset - 1]) &&\n            (range.startContainer.childNodes[range.startOffset - 1].nodeName === 'VIDEO' ||\n                this.isEmbedVidElem(range.startContainer.childNodes[range.startOffset - 1]))) {\n            this.deletedVid.push(range.startContainer.childNodes[range.startOffset - 1]);\n        }\n    };\n    Video.prototype.checkVideoDel = function (range) {\n        if (range.startContainer.nodeName === '#text' && range.startOffset === range.startContainer.textContent.length &&\n            !isNOU(range.startContainer.nextSibling) && (range.startContainer.nextSibling.nodeName === 'VIDEO' ||\n            this.isEmbedVidElem(range.startContainer.nextSibling))) {\n            this.deletedVid.push(range.startContainer.nextSibling);\n        }\n        else if (range.startContainer.nodeName !== '#text' && !isNOU(range.startContainer.childNodes[range.startOffset]) &&\n            (range.startContainer.childNodes[range.startOffset].nodeName === 'VIDEO' ||\n                this.isEmbedVidElem(range.startContainer.childNodes[range.startOffset]))) {\n            this.deletedVid.push(range.startContainer.childNodes[range.startOffset]);\n        }\n    };\n    Video.prototype.alignmentSelect = function (e) {\n        var item = e.item;\n        if (!document.body.contains(document.body.querySelector('.e-rte-quick-toolbar')) || item.command !== 'Videos') {\n            return;\n        }\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n        var selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n        selectNodeEle = (selectNodeEle[0].nodeName === 'VIDEO') ? selectNodeEle : [this.videoEle];\n        var args = { args: e, selectNode: selectNodeEle };\n        if (this.parent.formatter.getUndoRedoStack().length === 0) {\n            this.parent.formatter.saveData();\n        }\n        switch (item.subCommand) {\n            case 'JustifyLeft':\n            case 'JustifyCenter':\n            case 'JustifyRight':\n                this.alignVideo(args, item.subCommand);\n                break;\n            case 'Inline':\n                this.inline(args);\n                break;\n            case 'Break':\n                this.break(args);\n                break;\n        }\n        if (this.quickToolObj && document.body.contains(this.quickToolObj.videoQTBar.element)) {\n            this.quickToolObj.videoQTBar.hidePopup();\n            removeClass([selectNodeEle[0]], classes.CLS_VID_FOCUS);\n        }\n        this.cancelResizeAction();\n    };\n    Video.prototype.deleteVideo = function (e, keyCode) {\n        if (e.selectNode[0].nodeName !== 'VIDEO' && !this.isEmbedVidElem(e.selectNode[0])) {\n            return;\n        }\n        if (this.isEmbedVidElem(e.selectNode[0])) {\n            e.selectNode[0] = e.selectNode[0].classList.contains(classes.CLS_VID_CLICK_ELEM) ? e.selectNode[0] :\n                e.selectNode[0].parentElement;\n        }\n        var args = {\n            element: !this.isEmbedVidElem(e.selectNode[0]) ? e.selectNode[0].querySelector('iframe') :\n                e.selectNode[0],\n            src: !this.isEmbedVidElem(e.selectNode[0]) ? e.selectNode[0].querySelector('source').getAttribute('src') :\n                e.selectNode[0].querySelector('iframe').getAttribute('src')\n        };\n        if (this.parent.formatter.getUndoRedoStack().length === 0) {\n            this.parent.formatter.saveData();\n        }\n        e.selection.restore();\n        this.parent.formatter.process(this.parent, e.args, e.args, {\n            selectNode: e.selectNode,\n            subCommand: e.args.item.subCommand\n        });\n        this.videoRemovePost(args.src);\n        if (this.quickToolObj && document.body.contains(this.quickToolObj.videoQTBar.element)) {\n            this.quickToolObj.videoQTBar.hidePopup();\n        }\n        this.cancelResizeAction();\n        if (isNullOrUndefined(keyCode)) {\n            this.parent.trigger(events.afterMediaDelete, args);\n        }\n    };\n    Video.prototype.videoRemovePost = function (src) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        var absoluteUrl = '';\n        if (isNOU(this.parent.insertVideoSettings.removeUrl) || this.parent.insertVideoSettings.removeUrl === '') {\n            return;\n        }\n        if (src.indexOf('http://') > -1 || src.indexOf('https://') > -1) {\n            absoluteUrl = src;\n        }\n        else {\n            absoluteUrl = new URL(src, document.baseURI).href;\n        }\n        // eslint-disable-next-line no-useless-escape\n        this.removingVideoName = absoluteUrl.replace(/^.*[\\\\\\/]/, '');\n        var xhr = new XMLHttpRequest();\n        // eslint-disable-next-line @typescript-eslint/tslint/config\n        xhr.addEventListener('readystatechange', function () {\n            if (this.readyState === 4 && this.status === 200) {\n                proxy.triggerPost(this.response);\n            }\n        });\n        xhr.open('GET', absoluteUrl);\n        xhr.responseType = 'blob';\n        xhr.send();\n    };\n    Video.prototype.triggerPost = function (response) {\n        var removeUrl = this.parent.insertVideoSettings.removeUrl;\n        if (isNOU(removeUrl) || removeUrl === '') {\n            return;\n        }\n        var file = new File([response], this.removingVideoName);\n        var ajax = new Ajax(removeUrl, 'POST', true, null);\n        var formData = new FormData();\n        formData.append('UploadFiles', file);\n        ajax.send(formData);\n    };\n    Video.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        if (target.nodeName === 'VIDEO' || this.isEmbedVidElem(target)) {\n            this.videoEle = !this.isEmbedVidElem(target) ? target : target.querySelector('iframe');\n        }\n        if (!isNullOrUndefined(this.dialogObj) && ((\n        // eslint-disable-next-line\n        !closest(target, '[id=' + \"'\" + this.dialogObj.element.id + \"'\" + ']') && this.parent.toolbarSettings.enable && this.parent.getToolbarElement() &&\n            !this.parent.getToolbarElement().contains(e.target)) ||\n            (this.parent.getToolbarElement() && this.parent.getToolbarElement().contains(e.target) &&\n                !closest(target, '#' + this.parent.getID() + '_toolbar_Video') &&\n                !target.querySelector('#' + this.parent.getID() + '_toolbar_Video')))) {\n            /* eslint-disable */\n            if (e.offsetX > e.target.clientWidth || e.offsetY > e.target.clientHeight) {\n            }\n            else {\n                this.dialogObj.hide({ returnValue: true });\n                this.parent.isBlur = true;\n                dispatchEvent(this.parent.element, 'focusout');\n            }\n            /* eslint-enable */\n        }\n        // if (((e.target as HTMLElement).tagName !== 'VIDEO' || !this.isEmbedVidElem(e.target as HTMLElement)) && this.vidResizeDiv && !(this.quickToolObj &&\n        //     this.quickToolObj.videoQTBar && this.quickToolObj.videoQTBar.element.contains(e.target as HTMLElement)) &&\n        //     this.contentModule.getEditPanel().contains(this.vidResizeDiv)) {\n        //     this.cancelResizeAction();\n        // }\n        if (this.contentModule.getEditPanel().querySelector('.e-vid-resize')) {\n            if (target.tagName !== 'VIDEO' && !this.isEmbedVidElem(target)) {\n                this.removeResizeEle();\n            }\n            if ((target.tagName !== 'VIDEO' && !this.isEmbedVidElem(target)) && !isNOU(this.videoEle)) {\n                this.videoEle.style.outline = '';\n            }\n            else if (!isNOU(this.prevSelectedVidEle) &&\n                this.prevSelectedVidEle !== ((target.tagName === 'IFRAME' || target.tagName === 'VIDEO') ? target : target.querySelector('iframe'))) {\n                this.prevSelectedVidEle.style.outline = '';\n            }\n        }\n    };\n    Video.prototype.removeResizeEle = function () {\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        detach(this.contentModule.getEditPanel().querySelector('.e-vid-resize'));\n    };\n    Video.prototype.onWindowResize = function () {\n        if (!isNOU(this.contentModule) && !isNOU(this.contentModule.getEditPanel().querySelector('.e-vid-resize'))) {\n            this.cancelResizeAction();\n        }\n    };\n    Video.prototype.break = function (e) {\n        if (e.selectNode[0].nodeName !== 'VIDEO' && !this.isEmbedVidElem(e.selectNode[0])) {\n            return;\n        }\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'Break';\n        this.parent.formatter.process(this.parent, e.args, e.args, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Video.prototype.inline = function (e) {\n        if (e.selectNode[0].nodeName !== 'VIDEO' && !this.isEmbedVidElem(e.selectNode[0])) {\n            return;\n        }\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'Inline';\n        this.parent.formatter.process(this.parent, e.args, e.args, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Video.prototype.alignVideo = function (e, type) {\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : type;\n        this.parent.formatter.process(this.parent, e.args, e.args, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Video.prototype.editAreaClickHandler = function (e) {\n        if (this.parent.readonly) {\n            this.hideVideoQuickToolbar();\n            return;\n        }\n        var args = e.args;\n        var showOnRightClick = this.parent.quickToolbarSettings.showOnRightClick;\n        if (args.which === 2 || (showOnRightClick && args.which === 1) || (!showOnRightClick && args.which === 3)) {\n            if ((showOnRightClick && args.which === 1) && !isNullOrUndefined(args.target) &&\n                (args.target.tagName === 'VIDEO' || this.isEmbedVidElem(args.target))) {\n                this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(), args.target);\n            }\n            return;\n        }\n        if (this.parent.editorMode === 'HTML' && this.parent.quickToolbarModule && this.parent.quickToolbarModule.videoQTBar) {\n            this.quickToolObj = this.parent.quickToolbarModule;\n            var target = args.target;\n            this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n            var isPopupOpen = this.quickToolObj.videoQTBar.element.classList.contains('e-rte-pop');\n            if ((target.nodeName === 'VIDEO' || this.isEmbedVidElem(target)) && this.parent.quickToolbarModule) {\n                if (isPopupOpen) {\n                    return;\n                }\n                this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(), target);\n                if (isIDevice()) {\n                    this.parent.notify(events.selectionSave, e);\n                }\n                addClass([!this.isEmbedVidElem(target) ? target : target.querySelector('iframe')], classes.CLS_VID_FOCUS);\n                this.showVideoQuickToolbar({ args: args, type: 'Videos', elements: [args.target] });\n            }\n            else {\n                this.hideVideoQuickToolbar();\n            }\n        }\n    };\n    Video.prototype.showVideoQuickToolbar = function (e) {\n        var _this = this;\n        if (e.type !== 'Videos' || (!isNullOrUndefined(e.args) && e.args.detail === 2) || isNullOrUndefined(this.parent.quickToolbarModule)\n            || isNullOrUndefined(this.parent.quickToolbarModule.videoQTBar) || isNullOrUndefined(e.args)) {\n            return;\n        }\n        this.quickToolObj = this.parent.quickToolbarModule;\n        var args = e.args;\n        var target = e.elements;\n        [].forEach.call(e.elements, function (element, index) {\n            if (index === 0) {\n                target = element;\n            }\n        });\n        if (target.tagName === 'VIDEO' || this.isEmbedVidElem(target)) {\n            addClass([(!this.isEmbedVidElem(target) || target.tagName === 'IFRAME') ? target : target.querySelector('iframe')], [classes.CLS_VID_FOCUS]);\n        }\n        var pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset +\n            this.parent.element.getBoundingClientRect().top + args.clientY : args.pageY;\n        if (this.parent.quickToolbarModule.videoQTBar) {\n            if (e.isNotify) {\n                setTimeout(function () {\n                    _this.parent.formatter.editorManager.nodeSelection.Clear(_this.contentModule.getDocument());\n                    _this.parent.formatter.editorManager.nodeSelection.setSelectionContents(_this.contentModule.getDocument(), target);\n                    _this.quickToolObj.videoQTBar.showPopup(args.pageX - 50, pageY + (target.getBoundingClientRect().height / 2) - target.offsetTop, target);\n                }, 400);\n            }\n            else {\n                this.quickToolObj.videoQTBar.showPopup(args.pageX - 50, pageY + (target.getBoundingClientRect().height / 2) - target.offsetTop, target);\n            }\n        }\n    };\n    Video.prototype.hideVideoQuickToolbar = function () {\n        if (!isNullOrUndefined(this.contentModule.getEditPanel().querySelector('.' + classes.CLS_VID_FOCUS))) {\n            removeClass([this.contentModule.getEditPanel().querySelector('.' + classes.CLS_VID_FOCUS)], classes.CLS_VID_FOCUS);\n            if (!isNOU(this.videoEle)) {\n                this.videoEle.style.outline = '';\n            }\n            if (!isNOU(this.contentModule.getEditPanel().querySelector('.e-vid-resize'))) {\n                detach(this.contentModule.getEditPanel().querySelector('.e-vid-resize'));\n            }\n            if (this.quickToolObj && this.quickToolObj.videoQTBar && document.body.contains(this.quickToolObj.videoQTBar.element)) {\n                this.quickToolObj.videoQTBar.hidePopup();\n            }\n        }\n    };\n    Video.prototype.isEmbedVidElem = function (target) {\n        if ((target && target.nodeType !== 3 && target.nodeName !== 'BR' && (target.classList && target.classList.contains(classes.CLS_VID_CLICK_ELEM))) ||\n            (target && target.nodeName === 'IFRAME')) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Video.prototype.insertingVideo = function (e) {\n        this.insertVideo(e);\n        if (!isNullOrUndefined(this.dialogObj)) {\n            this.dialogObj.element.style.maxHeight = 'inherit';\n            var dialogContent = this.dialogObj.element.querySelector('.e-video-content');\n            if (!isNullOrUndefined(this.parent.insertVideoSettings.path) || this.parent.editorMode === 'HTML') {\n                document.getElementById(this.rteID + '_insertVideo').focus();\n            }\n            else {\n                dialogContent.querySelector('.e-video-url').focus();\n            }\n        }\n    };\n    Video.prototype.insertVideo = function (e) {\n        var _this = this;\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n            return;\n        }\n        var videoDialog = this.parent.createElement('div', { className: 'e-rte-video-dialog', id: this.rteID + '_video' });\n        this.parent.element.appendChild(videoDialog);\n        var videoInsert = this.i10n.getConstant('dialogInsert');\n        var videolinkCancel = this.i10n.getConstant('dialogCancel');\n        var videoHeader = this.i10n.getConstant('videoHeader');\n        var selection = e.selection;\n        var selectObj = { selfVideo: this, selection: e.selection, args: e.args, selectParent: e.selectParent };\n        var dialogModel = {\n            header: videoHeader,\n            cssClass: classes.CLS_RTE_ELEMENTS,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            showCloseIcon: true, closeOnEscape: true, width: (Browser.isDevice) ? '290px' : '340px',\n            isModal: Browser.isDevice,\n            buttons: [{\n                    click: this.insertVideoUrl.bind(selectObj),\n                    buttonModel: { content: videoInsert, cssClass: 'e-flat e-insertVideo', isPrimary: true, disabled: true }\n                },\n                {\n                    click: function (e) {\n                        _this.cancelDialog(e);\n                    },\n                    buttonModel: { cssClass: 'e-flat e-cancel', content: videolinkCancel }\n                }],\n            target: (Browser.isDevice) ? document.body : this.parent.element,\n            animationSettings: { effect: 'None' },\n            close: function (event) {\n                if (_this.isVideoUploaded) {\n                    _this.uploadObj.removing();\n                }\n                _this.parent.isBlur = false;\n                if (event && event.event.returnValue) {\n                    if (_this.parent.editorMode === 'HTML') {\n                        selection.restore();\n                    }\n                }\n                _this.dialogObj.destroy();\n                detach(_this.dialogObj.element);\n                _this.dialogRenderObj.close(event);\n                _this.dialogObj = null;\n            }\n        };\n        var dialogContent = this.parent.createElement('div', { className: 'e-video-content' });\n        if (!isNullOrUndefined(this.parent.insertVideoSettings.path) || this.parent.editorMode === 'HTML') {\n            dialogContent.appendChild(this.videoUpload(e));\n        }\n        var linkHeader = this.parent.createElement('div', { className: 'e-videoheader' });\n        var embedLinkHeader = this.parent.createElement('div', { className: 'e-embed-videoheader' });\n        var linkHeaderText = this.i10n.getConstant('videoLinkHeader');\n        var embedLinkHeaderText = this.i10n.getConstant('embedVideoLinkHeader');\n        if (this.parent.editorMode === 'HTML') {\n            linkHeader.innerHTML = linkHeaderText;\n            embedLinkHeader.innerHTML = embedLinkHeaderText;\n        }\n        dialogContent.appendChild(this.urlPopup(e));\n        if (e.selectNode && e.selectNode[0].nodeType === 1 && (e.selectNode[0].tagName === 'VIDEO' || this.isEmbedVidElem(e.selectNode[0]))) {\n            dialogModel.header = this.parent.localeObj.getConstant('editVideoHeader');\n            dialogModel.content = dialogContent;\n        }\n        else {\n            dialogModel.content = dialogContent;\n        }\n        this.dialogObj = this.dialogRenderObj.render(dialogModel);\n        this.dialogObj.createElement = this.parent.createElement;\n        this.dialogObj.appendTo(videoDialog);\n        if (e.selectNode && e.selectNode[0].nodeType === 1 && (e.selectNode[0].tagName === 'VIDEO' || this.isEmbedVidElem(e.selectNode[0]))\n            && (e.name === 'insertVideo')) {\n            this.dialogObj.element.querySelector('.e-insertVideo').textContent = this.parent.localeObj.getConstant('dialogUpdate');\n        }\n        videoDialog.style.maxHeight = 'inherit';\n        if (this.quickToolObj) {\n            if (this.quickToolObj.videoQTBar && document.body.contains(this.quickToolObj.videoQTBar.element)) {\n                this.quickToolObj.videoQTBar.hidePopup();\n                if (!isNullOrUndefined(e.selectParent)) {\n                    removeClass([e.selectParent[0]], classes.CLS_VID_FOCUS);\n                }\n            }\n            if (this.quickToolObj.inlineQTBar && document.body.contains(this.quickToolObj.inlineQTBar.element)) {\n                this.quickToolObj.inlineQTBar.hidePopup();\n            }\n            if (this.quickToolObj.textQTBar && this.parent.element.ownerDocument.body.contains(this.quickToolObj.textQTBar.element)) {\n                this.quickToolObj.textQTBar.hidePopup();\n            }\n        }\n    };\n    // eslint-disable-next-line\n    Video.prototype.urlPopup = function (e) {\n        var _this = this;\n        var videoUrl = this.parent.createElement('div', { className: 'e-video-url-wrap' });\n        var urlContent = this.parent.createElement('div', { id: 'urlcontent' });\n        var placeUrl = this.i10n.getConstant('videoUrl');\n        var content = '<input id=\"embedURL\" type=\"radio\">' + '<input id=\"webURL\" type=\"radio\" >';\n        var contentElem = parseHtml(content);\n        videoUrl.appendChild(contentElem);\n        videoUrl.appendChild(urlContent);\n        this.embedInputUrl = this.parent.createElement('textarea', {\n            className: 'e-input e-embed-video-url',\n            attrs: { placeholder: this.i10n.getConstant('pasteEmbeddedCodeHere'), type: 'text', tabindex: '-1', 'aria-label': this.i10n.getConstant('embedVideoLinkHeader') }\n        });\n        this.embedInputUrl.addEventListener('keyup', function () {\n            if (!isNOU(_this.embedInputUrl)) {\n                if (_this.embedInputUrl.value.length === 0) {\n                    _this.dialogObj.getButtons(0).element.disabled = true;\n                }\n                else {\n                    _this.dialogObj.getButtons(0).element.removeAttribute('disabled');\n                }\n            }\n        });\n        this.inputUrl = this.parent.createElement('input', {\n            className: 'e-input e-video-url',\n            attrs: { placeholder: placeUrl, spellcheck: 'false' }\n        });\n        this.inputUrl.addEventListener('input', function () {\n            if (!isNOU(_this.inputUrl)) {\n                if (_this.inputUrl.value.length === 0) {\n                    _this.dialogObj.getButtons(0).element.disabled = true;\n                }\n                else {\n                    _this.dialogObj.getButtons(0).element.removeAttribute('disabled');\n                }\n            }\n        });\n        var embedUrlBtn = new RadioButton({\n            label: this.i10n.getConstant('embeddedCode'),\n            checked: true,\n            name: 'URL',\n            created: function () {\n                urlContent.appendChild(_this.embedInputUrl);\n            },\n            change: function () {\n                urlContent.innerHTML = '';\n                _this.inputUrl.value = '';\n                urlContent.appendChild(_this.embedInputUrl);\n            }\n        });\n        embedUrlBtn.appendTo(videoUrl.querySelector('#embedURL'));\n        var webUrlBtn = new RadioButton({\n            label: this.i10n.getConstant('webUrl'),\n            name: 'URL',\n            change: function () {\n                urlContent.innerHTML = '';\n                _this.embedInputUrl.value = '';\n                urlContent.appendChild(_this.inputUrl);\n            }\n        });\n        webUrlBtn.appendTo(videoUrl.querySelector('#webURL'));\n        return videoUrl;\n    };\n    Video.prototype.videoUpload = function (e) {\n        var _this = this;\n        var save;\n        var selectParent;\n        // eslint-disable-next-line\n        var proxy = this;\n        var iframe = proxy.parent.iframeSettings.enable;\n        if (proxy.parent.editorMode === 'HTML' && (!iframe && isNullOrUndefined(closest(e.selection.range.startContainer.parentNode, '[id='\n            // eslint-disable-next-line\n            + \"'\" + this.parent.contentModule.getPanel().id + \"'\" + ']'))\n            || (iframe && !hasClass(e.selection.range.startContainer.parentNode.ownerDocument.querySelector('body'), 'e-lib')))) {\n            this.contentModule.getEditPanel().focus();\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n            selectParent = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n        }\n        else {\n            save = e.selection;\n            selectParent = e.selectParent;\n        }\n        var uploadParentEle = this.parent.createElement('div', { className: 'e-vid-uploadwrap e-droparea' });\n        var deviceVideoUpMsg = this.i10n.getConstant('videoDeviceUploadMessage');\n        var videoUpMsg = this.i10n.getConstant('videoUploadMessage');\n        var span = this.parent.createElement('span', { className: 'e-droptext' });\n        var spanMsg = this.parent.createElement('span', {\n            className: 'e-rte-upload-text', innerHTML: ((Browser.isDevice) ? deviceVideoUpMsg : videoUpMsg)\n        });\n        span.appendChild(spanMsg);\n        var btnEle = this.parent.createElement('button', {\n            className: 'e-browsebtn', id: this.rteID + '_insertVideo', attrs: { autofocus: 'true', type: 'button' }\n        });\n        span.appendChild(btnEle);\n        uploadParentEle.appendChild(span);\n        var browserMsg = this.i10n.getConstant('browse');\n        var button = new Button({ content: browserMsg, enableRtl: this.parent.enableRtl });\n        button.isStringTemplate = true;\n        button.createElement = this.parent.createElement;\n        button.appendTo(btnEle);\n        var btnClick = (Browser.isDevice) ? span : btnEle;\n        EventHandler.add(btnClick, 'click', this.fileSelect, this);\n        var uploadEle = this.parent.createElement('input', {\n            id: this.rteID + '_upload', attrs: { type: 'File', name: 'UploadFiles' }\n        });\n        uploadParentEle.appendChild(uploadEle);\n        var fileName;\n        var selectArgs;\n        var filesData;\n        this.uploadObj = new Uploader({\n            asyncSettings: { saveUrl: this.parent.insertVideoSettings.saveUrl, removeUrl: this.parent.insertVideoSettings.removeUrl },\n            dropArea: span, multiple: false, enableRtl: this.parent.enableRtl,\n            allowedExtensions: this.parent.insertVideoSettings.allowedTypes.toString(),\n            selected: function (e) {\n                proxy.isVideoUploaded = true;\n                selectArgs = e;\n                // eslint-disable-next-line\n                filesData = e.filesData;\n                _this.parent.trigger(events.fileSelected, selectArgs, function (selectArgs) {\n                    if (!selectArgs.cancel) {\n                        _this.checkExtension(selectArgs.filesData[0]);\n                        fileName = selectArgs.filesData[0].name;\n                        if (_this.parent.editorMode === 'HTML' && isNullOrUndefined(_this.parent.insertVideoSettings.path)) {\n                            var reader_1 = new FileReader();\n                            // eslint-disable-next-line\n                            reader_1.addEventListener('load', function (e) {\n                                var url = _this.parent.insertVideoSettings.saveFormat === 'Base64' ? reader_1.result :\n                                    URL.createObjectURL(convertToBlob(reader_1.result));\n                                proxy.uploadUrl = {\n                                    url: url, selection: save, fileName: fileName,\n                                    selectParent: selectParent\n                                };\n                                proxy.inputUrl.setAttribute('disabled', 'true');\n                                proxy.embedInputUrl.setAttribute('disabled', 'true');\n                                if (isNullOrUndefined(proxy.parent.insertVideoSettings.saveUrl) && _this.isAllowedTypes\n                                    && !isNullOrUndefined(_this.dialogObj)) {\n                                    _this.dialogObj.getButtons(0).element.removeAttribute('disabled');\n                                }\n                            });\n                            reader_1.readAsDataURL(selectArgs.filesData[0].rawFile);\n                        }\n                    }\n                });\n            },\n            beforeUpload: function (args) {\n                _this.parent.trigger(events.beforeFileUpload, args);\n            },\n            uploading: function (e) {\n                if (!_this.parent.isServerRendered) {\n                    _this.parent.trigger(events.fileUploading, e);\n                }\n            },\n            success: function (e) {\n                _this.parent.trigger(events.fileUploadSuccess, e, function (e) {\n                    if (!isNullOrUndefined(_this.parent.insertVideoSettings.path)) {\n                        var url = _this.parent.insertVideoSettings.path + e.file.name;\n                        // eslint-disable-next-line\n                        var value = { url: url, selection: save };\n                        proxy.uploadUrl = {\n                            url: url, selection: save, fileName: fileName, selectParent: selectParent,\n                            width: {\n                                width: proxy.parent.insertVideoSettings.width, minWidth: proxy.parent.insertVideoSettings.minWidth,\n                                maxWidth: proxy.parent.getInsertImgMaxWidth()\n                            },\n                            height: {\n                                height: proxy.parent.insertVideoSettings.height, minHeight: proxy.parent.insertVideoSettings.minHeight,\n                                maxHeight: proxy.parent.insertVideoSettings.maxHeight\n                            }\n                        };\n                        //proxy.inputUrl.setAttribute('disabled', 'true');\n                        proxy.embedInputUrl.setAttribute('disabled', 'true');\n                    }\n                    if (e.operation === 'upload' && !isNullOrUndefined(_this.dialogObj)) {\n                        _this.dialogObj.getButtons(0).element.removeAttribute('disabled');\n                    }\n                });\n            },\n            failure: function (e) {\n                _this.parent.trigger(events.fileUploadFailed, e);\n            },\n            removing: function () {\n                // eslint-disable-next-line\n                _this.parent.trigger(events.fileRemoving, e, function (e) {\n                    proxy.isVideoUploaded = false;\n                    _this.dialogObj.getButtons(0).element.disabled = true;\n                    //proxy.inputUrl.removeAttribute('disabled');\n                    proxy.embedInputUrl.removeAttribute('disabled');\n                    if (proxy.uploadUrl) {\n                        proxy.uploadUrl.url = '';\n                    }\n                });\n            }\n        });\n        this.uploadObj.isStringTemplate = true;\n        this.uploadObj.createElement = this.parent.createElement;\n        this.uploadObj.appendTo(uploadEle);\n        return uploadParentEle;\n    };\n    Video.prototype.checkExtension = function (e) {\n        if (this.uploadObj.allowedExtensions) {\n            if (this.uploadObj.allowedExtensions.toLocaleLowerCase().indexOf(('.' + e.type).toLocaleLowerCase()) === -1) {\n                this.dialogObj.getButtons(0).element.setAttribute('disabled', 'disabled');\n                this.isAllowedTypes = false;\n            }\n            else {\n                this.isAllowedTypes = true;\n            }\n        }\n    };\n    Video.prototype.fileSelect = function () {\n        this.dialogObj.element.getElementsByClassName('e-file-select-wrap')[0].querySelector('button').click();\n        return false;\n    };\n    // eslint-disable-next-line\n    Video.prototype.cancelDialog = function (e) {\n        this.parent.isBlur = false;\n        this.dialogObj.hide({ returnValue: true });\n        if (this.isVideoUploaded) {\n            this.uploadObj.removing();\n        }\n    };\n    // eslint-disable-next-line\n    Video.prototype.insertVideoUrl = function (e) {\n        var proxy = this.selfVideo;\n        //let audioSelectParent: Node = proxy.uploadUrl.selectParent[0];\n        proxy.isVideoUploaded = false;\n        var url = proxy.inputUrl.value;\n        var embedUrl = proxy.embedInputUrl.value;\n        if (proxy.parent.formatter.getUndoRedoStack().length === 0) {\n            proxy.parent.formatter.saveData();\n        }\n        if (!isNullOrUndefined(proxy.uploadUrl) && proxy.uploadUrl.url !== '') {\n            proxy.uploadUrl.cssClass = (proxy.parent.insertVideoSettings.layoutOption === 'Inline' ?\n                classes.CLS_VIDEOINLINE : classes.CLS_VIDEOBREAK);\n            proxy.dialogObj.hide({ returnValue: false });\n            proxy.parent.formatter.process(proxy.parent, this.args, this.args.originalEvent, proxy.uploadUrl);\n            proxy.uploadUrl.url = '';\n        }\n        else if (proxy.parent.editorMode === 'HTML' && (url !== '' || embedUrl !== '')) {\n            if (proxy.parent.editorMode === 'HTML' && isNullOrUndefined(closest(\n            // eslint-disable-next-line\n            this.selection.range.startContainer.parentNode, '[id=' + \"'\" + proxy.contentModule.getPanel().id + \"'\" + ']'))) {\n                proxy.contentModule.getEditPanel().focus();\n                var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.contentModule.getDocument());\n                this.selection = proxy.parent.formatter.editorManager.nodeSelection.save(range, proxy.contentModule.getDocument());\n                this.selectParent = proxy.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n            }\n            var name_1 = url !== '' ? url.split('/')[url.split('/').length - 1] : embedUrl;\n            var value = {\n                cssClass: (proxy.parent.insertVideoSettings.layoutOption === 'Inline' ? classes.CLS_VIDEOINLINE : classes.CLS_VIDEOBREAK),\n                url: url, selection: this.selection, fileName: name_1, isEmbedUrl: embedUrl !== '' ? true : false,\n                selectParent: this.selectParent, width: {\n                    width: proxy.parent.insertVideoSettings.width, minWidth: proxy.parent.insertVideoSettings.minWidth,\n                    maxWidth: proxy.parent.getInsertImgMaxWidth()\n                },\n                height: {\n                    height: proxy.parent.insertVideoSettings.height, minHeight: proxy.parent.insertVideoSettings.minHeight,\n                    maxHeight: proxy.parent.insertVideoSettings.maxHeight\n                }\n            };\n            proxy.parent.formatter.process(proxy.parent, this.args, this.args.originalEvent, value);\n            proxy.dialogObj.hide({ returnValue: false });\n        }\n    };\n    /* eslint-disable */\n    /**\n     * Destroys the ToolBar.\n     *\n     * @method destroy\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    /* eslint-enable */\n    Video.prototype.destroy = function () {\n        this.prevSelectedVidEle = undefined;\n        this.removeEventListener();\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Video.prototype.getModuleName = function () {\n        return 'video';\n    };\n    return Video;\n}());\nexport { Video };\n","import { removeClass, selectAll, isNullOrUndefined, EventHandler } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { CLS_EXPAND_OPEN, CLS_TB_ITEM, CLS_ACTIVE, CLS_RTE_SOURCE_CODE_TXTAREA } from '../base/classes';\nimport * as CONSTANT from '../../common/constant';\nimport { RenderType } from '../base/enum';\nimport { KeyboardEvents } from '../actions/keyboard';\n/**\n * Content module is used to render Rich Text Editor content\n *\n * @hidden\n * @deprecated\n */\nvar ViewSource = /** @class */ (function () {\n    /**\n     * Constructor for view source module\n     *\n     * @param {IRichTextEditor} parent - specifies the parent element.\n     * @param {ServiceLocator} locator - specifies the locator.\n     * @returns {void}\n     */\n    function ViewSource(parent, locator) {\n        this.parent = parent;\n        var serviceLocator = locator;\n        this.rendererFactory = serviceLocator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    ViewSource.prototype.addEventListener = function () {\n        this.parent.on(events.sourceCode, this.sourceCode, this);\n        this.parent.on(events.initialEnd, this.onInitialEnd, this);\n        this.parent.on(events.updateSource, this.updateSourceCode, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.moduleDestroy, this.moduleDestroy, this);\n    };\n    ViewSource.prototype.onInitialEnd = function () {\n        this.parent.formatter.editorManager.observer.on(CONSTANT.KEY_DOWN_HANDLER, this.onKeyDown, this);\n    };\n    ViewSource.prototype.removeEventListener = function () {\n        this.unWireEvent();\n        this.parent.off(events.sourceCode, this.sourceCode);\n        this.parent.off(events.updateSource, this.updateSourceCode);\n        this.parent.off(events.initialEnd, this.onInitialEnd);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.moduleDestroy, this.moduleDestroy);\n        this.parent.formatter.editorManager.observer.off(CONSTANT.KEY_DOWN_HANDLER, this.onKeyDown);\n    };\n    ViewSource.prototype.getSourceCode = function () {\n        return this.parent.createElement('textarea', { className: CLS_RTE_SOURCE_CODE_TXTAREA + ' ' + this.parent.cssClass });\n    };\n    ViewSource.prototype.wireEvent = function (element) {\n        this.keyboardModule = new KeyboardEvents(element, {\n            keyAction: this.previewKeyDown.bind(this), keyConfigs: this.parent.formatter.keyConfig, eventName: 'keydown'\n        });\n        EventHandler.add(this.previewElement, 'mousedown', this.mouseDownHandler, this);\n    };\n    ViewSource.prototype.unWireEvent = function () {\n        if (this.keyboardModule) {\n            this.keyboardModule.destroy();\n        }\n        if (this.previewElement) {\n            EventHandler.remove(this.previewElement, 'mousedown', this.mouseDownHandler);\n        }\n    };\n    ViewSource.prototype.wireBaseKeyDown = function () {\n        this.parent.keyboardModule = new KeyboardEvents(this.contentModule.getEditPanel(), {\n            keyAction: this.parent.keyDown.bind(this.parent), keyConfigs: this.parent.formatter.keyConfig, eventName: 'keydown'\n        });\n    };\n    ViewSource.prototype.unWireBaseKeyDown = function () {\n        this.parent.keyboardModule.destroy();\n    };\n    ViewSource.prototype.mouseDownHandler = function (e) {\n        this.parent.notify(events.sourceCodeMouseDown, { args: e });\n    };\n    ViewSource.prototype.previewKeyDown = function (event) {\n        switch (event.action) {\n            case 'html-source':\n                this.updateSourceCode(event);\n                event.preventDefault();\n                break;\n            case 'toolbar-focus':\n                if (this.parent.toolbarSettings.enable && this.parent.getToolbarElement()) {\n                    var firstActiveItem = this.parent.getToolbarElement().querySelector('.e-toolbar-item:not(.e-overlay)[title]');\n                    firstActiveItem.firstElementChild.removeAttribute('tabindex');\n                    firstActiveItem.firstElementChild.focus();\n                }\n                break;\n        }\n    };\n    ViewSource.prototype.onKeyDown = function (e) {\n        switch (e.event.action) {\n            case 'html-source':\n                e.event.preventDefault();\n                this.sourceCode(e);\n                e.callBack({\n                    requestType: 'SourceCode',\n                    editorMode: 'HTML',\n                    event: e.event\n                });\n                break;\n        }\n    };\n    /**\n     * sourceCode method\n     *\n     * @param {ClickEventArgs} args - specifies the click event.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    ViewSource.prototype.sourceCode = function (args) {\n        this.parent.notify(events.hidePopup, {});\n        this.parent.isBlur = false;\n        this.parent.trigger(events.actionBegin, { requestType: 'SourceCode', targetItem: 'SourceCode', args: args });\n        var tbItems = selectAll('.' + CLS_TB_ITEM, this.parent.element);\n        this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n        this.parent.notify(events.updateToolbarItem, {\n            targetItem: 'SourceCode', updateItem: 'Preview',\n            baseToolbar: this.parent.getBaseToolbarObject()\n        });\n        if (isNullOrUndefined(this.previewElement)) {\n            this.previewElement = this.getSourceCode();\n        }\n        this.parent.updateValueData();\n        if (this.parent.iframeSettings.enable) {\n            var rteContent = void 0;\n            if (isNullOrUndefined(this.parent.element.querySelector('#' + this.parent.getID() + '_source-view'))) {\n                rteContent = this.parent.createElement('div', {\n                    className: 'e-source-content', id: this.parent.getID() + '_source-view'\n                });\n            }\n            else {\n                rteContent = this.parent.element.querySelector('#' + this.parent.getID() + '_source-view');\n            }\n            rteContent.appendChild(this.previewElement);\n            this.parent.element.appendChild(rteContent);\n            rteContent.style.height = this.contentModule.getPanel().style.height;\n            rteContent.style.marginTop = this.contentModule.getPanel().style.marginTop;\n            this.getPanel().value = this.getTextAreaValue();\n            this.contentModule.getPanel().style.display = 'none';\n            rteContent.style.display = 'block';\n            this.getPanel().style.display = 'block';\n        }\n        else {\n            this.contentModule.getPanel().appendChild(this.previewElement);\n            this.getPanel().value = this.getTextAreaValue();\n            this.contentModule.getEditPanel().style.display = 'none';\n            this.previewElement.style.display = 'block';\n        }\n        this.parent.isBlur = false;\n        this.parent.disableToolbarItem(this.parent.toolbarSettings.items);\n        this.parent.enableToolbarItem('SourceCode');\n        if (this.parent.getToolbar()) {\n            removeClass([this.parent.getToolbar()], [CLS_EXPAND_OPEN]);\n        }\n        removeClass(tbItems, [CLS_ACTIVE]);\n        this.parent.setContentHeight('sourceCode', true);\n        this.wireEvent(this.previewElement);\n        this.unWireBaseKeyDown();\n        this.previewElement.focus();\n        this.parent.updateValue();\n        if (!isNullOrUndefined(this.parent.placeholder) && !this.parent.iframeSettings.enable) {\n            var placeHolderWrapper = this.parent.element.querySelector('.rte-placeholder.e-rte-placeholder');\n            placeHolderWrapper.style.display = 'none';\n        }\n        this.parent.trigger(events.actionComplete, { requestType: 'SourceCode', targetItem: 'SourceCode', args: args });\n        this.parent.invokeChangeEvent();\n    };\n    /**\n     * updateSourceCode method\n     *\n     * @param {ClickEventArgs} args - specifies the click event.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    ViewSource.prototype.updateSourceCode = function (args) {\n        this.parent.isBlur = false;\n        this.parent.trigger(events.actionBegin, { requestType: 'Preview', targetItem: 'Preview', args: args });\n        var editHTML = this.getPanel();\n        this.parent.notify(events.updateToolbarItem, {\n            targetItem: 'Preview', updateItem: 'SourceCode',\n            baseToolbar: this.parent.getBaseToolbarObject()\n        });\n        var serializeValue = this.parent.serializeValue(editHTML.value);\n        var value;\n        if (serializeValue === null || serializeValue === '') {\n            if (this.parent.enterKey === 'DIV') {\n                value = '<div><br/></div>';\n            }\n            else if (this.parent.enterKey === 'BR') {\n                value = '<br/>';\n            }\n            else {\n                value = '<p><br/></p>';\n            }\n        }\n        else {\n            value = serializeValue;\n        }\n        if (this.parent.iframeSettings.enable) {\n            editHTML.parentElement.style.display = 'none';\n            editHTML.style.display = 'none';\n            this.contentModule.getPanel().style.display = 'block';\n            this.contentModule.getEditPanel().innerHTML = value;\n        }\n        else {\n            editHTML.style.display = 'none';\n            this.contentModule.getEditPanel().style.display = 'block';\n            this.contentModule.getEditPanel().innerHTML = value;\n        }\n        this.parent.isBlur = false;\n        this.parent.enableToolbarItem(this.parent.toolbarSettings.items);\n        if (this.parent.getToolbar()) {\n            removeClass([this.parent.getToolbar()], [CLS_EXPAND_OPEN]);\n        }\n        this.parent.setContentHeight('preview', true);\n        this.unWireEvent();\n        this.wireBaseKeyDown();\n        this.contentModule.getEditPanel().focus();\n        this.parent.updateValue();\n        if (!isNullOrUndefined(this.parent.placeholder) && this.contentModule.getEditPanel().innerText.length === 0) {\n            var placeHolderWrapper = this.parent.element.querySelector('.rte-placeholder.e-rte-placeholder');\n            placeHolderWrapper.style.display = 'block';\n        }\n        this.parent.trigger(events.actionComplete, { requestType: 'Preview', targetItem: 'Preview', args: args });\n        this.parent.formatter.enableUndo(this.parent);\n        this.parent.addAudioVideoWrapper();\n        this.parent.invokeChangeEvent();\n        this.parent.notify(events.tableclass, {});\n    };\n    ViewSource.prototype.getTextAreaValue = function () {\n        return (this.contentModule.getEditPanel().innerHTML === '<p><br></p>') ||\n            (this.contentModule.getEditPanel().innerHTML === '<div><br></div>') ||\n            (this.contentModule.getEditPanel().innerHTML === '<br>') ||\n            (this.contentModule.getEditPanel().childNodes.length === 1 &&\n                (this.contentModule.getEditPanel().childNodes[0].tagName === 'P' &&\n                    this.contentModule.getEditPanel().innerHTML.length === 7) ||\n                (this.contentModule.getEditPanel().childNodes[0].tagName === 'DIV' &&\n                    this.contentModule.getEditPanel().innerHTML.length === 11)) ? '' : this.parent.value;\n    };\n    /**\n     * getPanel method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    ViewSource.prototype.getPanel = function () {\n        return this.parent.element && this.parent.element.querySelector('.e-rte-srctextarea');\n    };\n    /**\n     * getViewPanel method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    ViewSource.prototype.getViewPanel = function () {\n        return (this.parent.iframeSettings.enable && this.getPanel()) ? this.getPanel().parentElement : this.getPanel();\n    };\n    /**\n     * Destroy the entire RichTextEditor.\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    ViewSource.prototype.destroy = function () {\n        if (isNullOrUndefined(this.parent)) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    ViewSource.prototype.moduleDestroy = function () {\n        this.parent = null;\n    };\n    return ViewSource;\n}());\nexport { ViewSource };\n","import { detach, closest, Browser, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, EventHandler, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport * as classes from '../base/classes';\nimport { dispatchEvent, parseHtml, hasClass } from '../base/util';\n/**\n * `Table` module is used to handle table actions.\n */\nvar Table = /** @class */ (function () {\n    function Table(parent, serviceLocator) {\n        this.ensureInsideTableList = true;\n        this.pageX = null;\n        this.pageY = null;\n        this.moveEle = null;\n        this.currentColumnResize = '';\n        this.currentMarginLeft = 0;\n        this.parent = parent;\n        this.rteID = parent.element.id;\n        this.l10n = serviceLocator.getService('rteLocale');\n        this.rendererFactory = serviceLocator.getService('rendererFactory');\n        this.dialogRenderObj = serviceLocator.getService('dialogRenderObject');\n        this.addEventListener();\n    }\n    Table.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.createTable, this.renderDlgContent, this);\n        this.parent.on(events.initialEnd, this.afterRender, this);\n        this.parent.on(events.dynamicModule, this.afterRender, this);\n        this.parent.on(events.showTableDialog, this.showDialog, this);\n        this.parent.on(events.closeTableDialog, this.closeDialog, this);\n        this.parent.on(events.docClick, this.docClick, this);\n        this.parent.on(events.editAreaClick, this.editAreaClickHandler, this);\n        this.parent.on(events.clearDialogObj, this.clearDialogObj, this);\n        this.parent.on(events.tableToolbarAction, this.onToolbarAction, this);\n        this.parent.on(events.dropDownSelect, this.dropdownSelect, this);\n        this.parent.on(events.keyDown, this.keyDown, this);\n        this.parent.on(events.keyUp, this.keyUp, this);\n        this.parent.on(events.mouseUp, this.selectionTable, this);\n        this.parent.on(events.tableModulekeyUp, this.tableModulekeyUp, this);\n        this.parent.on(events.bindCssClass, this.setCssClass, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.moduleDestroy, this.moduleDestroy, this);\n    };\n    Table.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.createTable, this.renderDlgContent);\n        this.parent.off(events.initialEnd, this.afterRender);\n        this.parent.off(events.dynamicModule, this.afterRender);\n        this.parent.off(events.docClick, this.docClick);\n        this.parent.off(events.showTableDialog, this.showDialog);\n        this.parent.off(events.closeTableDialog, this.closeDialog);\n        this.parent.off(events.editAreaClick, this.editAreaClickHandler);\n        this.parent.off(events.clearDialogObj, this.clearDialogObj);\n        this.parent.off(events.tableToolbarAction, this.onToolbarAction);\n        this.parent.off(events.dropDownSelect, this.dropdownSelect);\n        this.parent.off(events.mouseDown, this.cellSelect);\n        this.parent.off(events.tableColorPickerChanged, this.setBGColor);\n        this.parent.off(events.keyUp, this.keyUp);\n        this.parent.off(events.keyDown, this.keyDown);\n        this.parent.off(events.mouseUp, this.selectionTable);\n        this.parent.off(events.tableModulekeyUp, this.tableModulekeyUp);\n        this.parent.off(events.bindCssClass, this.setCssClass);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.moduleDestroy, this.moduleDestroy);\n        if (!Browser.isDevice && this.parent.tableSettings.resize) {\n            EventHandler.remove(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper);\n        }\n    };\n    Table.prototype.updateCss = function (currentObj, e) {\n        if (currentObj && e.cssClass) {\n            if (isNullOrUndefined(e.oldCssClass)) {\n                currentObj.setProperties({ cssClass: (currentObj.cssClass + ' ' + e.cssClass).trim() });\n            }\n            else {\n                currentObj.setProperties({ cssClass: (currentObj.cssClass.replace(e.oldCssClass, '').trim() + ' ' + e.cssClass).trim() });\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/tslint/config\n    Table.prototype.setCssClass = function (e) {\n        if (this.popupObj && e.cssClass) {\n            if (isNullOrUndefined(e.oldCssClass)) {\n                addClass([this.popupObj.element], e.cssClass);\n            }\n            else {\n                removeClass([this.popupObj.element], e.oldCssClass);\n                addClass([this.popupObj.element], e.cssClass);\n            }\n        }\n        this.updateCss(this.createTableButton, e);\n        this.updateCss(this.editdlgObj, e);\n        var numericTextBoxObj = [\n            this.columnTextBox, this.rowTextBox, this.tableWidthNum, this.tableCellPadding, this.tableCellSpacing\n        ];\n        for (var i = 0; i < numericTextBoxObj.length; i++) {\n            this.updateCss(numericTextBoxObj[i], e);\n        }\n    };\n    Table.prototype.selectionTable = function (e) {\n        var target = e.args.target;\n        if (Browser.info.name === 'mozilla' && !isNOU(closest(target, 'table')) && closest(target, 'table').tagName === 'TABLE') {\n            this.parent.contentModule.getEditPanel().setAttribute('contenteditable', 'true');\n        }\n    };\n    Table.prototype.afterRender = function () {\n        if (isNullOrUndefined(this.contentModule)) {\n            this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n            this.parent.on(events.tableColorPickerChanged, this.setBGColor, this);\n            this.parent.on(events.mouseDown, this.cellSelect, this);\n            if (this.parent.tableSettings.resize) {\n                EventHandler.add(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart, this);\n            }\n            if (!Browser.isDevice && this.parent.tableSettings.resize) {\n                EventHandler.add(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper, this);\n            }\n        }\n    };\n    Table.prototype.dropdownSelect = function (e) {\n        var item = e.item;\n        if (!document.body.contains(document.body.querySelector('.e-rte-quick-toolbar')) || item.command !== 'Table') {\n            return;\n        }\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n        var args = {\n            args: e,\n            selection: this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument()),\n            selectParent: this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)\n        };\n        switch (item.subCommand) {\n            case 'InsertRowBefore':\n            case 'InsertRowAfter':\n                this.addRow(args.selection, e);\n                break;\n            case 'InsertColumnLeft':\n            case 'InsertColumnRight':\n                this.addColumn(args.selection, e);\n                break;\n            case 'DeleteColumn':\n            case 'DeleteRow':\n                this.removeRowColumn(args.selection, e);\n                break;\n            case 'AlignTop':\n            case 'AlignMiddle':\n            case 'AlignBottom':\n                this.verticalAlign(args, e);\n                break;\n            case 'Dashed':\n            case 'Alternate':\n            case 'Custom':\n                this.tableStyles(args, item.subCommand);\n                break;\n            case 'Merge':\n            case 'VerticalSplit':\n            case 'HorizontalSplit':\n                this.UpdateCells(args.selection, e);\n                break;\n        }\n    };\n    Table.prototype.UpdateCells = function (selectCell, e) {\n        this.parent.formatter.process(this.parent, e, e, { selection: selectCell, subCommand: e.item.subCommand });\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.keyUp = function (e) {\n        var target = e.args.target;\n        if (e.args.key.toLocaleLowerCase() === 'escape' && target && target.classList && (this.popupObj && !closest(target, '[id=' + \"'\" + this.popupObj.element.id + \"'\" + ']')) && this.popupObj) {\n            this.popupObj.hide();\n        }\n    };\n    Table.prototype.keyDown = function (e) {\n        var event = e.args;\n        // eslint-disable-next-line\n        var proxy = this;\n        switch (event.action) {\n            case 'escape':\n                break;\n            case 'insert-table':\n                this.openDialog(true, e);\n                event.preventDefault();\n                break;\n        }\n        if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && this.contentModule\n            && event.code !== 'KeyK') {\n            var selection = void 0;\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            var ele = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)[0];\n            ele = (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') ? ele.parentElement : ele;\n            if ((event.keyCode === 8 || event.keyCode === 46) ||\n                (event.ctrlKey && event.keyCode === 88)) {\n                if (ele && ele.tagName === 'TBODY') {\n                    if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && this.contentModule) {\n                        selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n                    }\n                    event.preventDefault();\n                    proxy.removeTable(selection, event, true);\n                }\n                else if (ele && ele.querySelectorAll('table').length > 0) {\n                    this.removeResizeElement();\n                    this.hideTableQuickToolbar();\n                }\n            }\n            if (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') {\n                var closestTd = closest(ele, 'td');\n                ele = !isNullOrUndefined(closestTd) && this.parent.inputElement.contains(closestTd) ? closestTd : ele;\n            }\n            if (ele && (ele.tagName === 'TD' || ele.tagName === 'TH')) {\n                if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && this.contentModule) {\n                    selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n                }\n                switch (event.keyCode) {\n                    case 9:\n                    case 37:\n                    case 39:\n                        proxy.tabSelection(event, selection, ele);\n                        break;\n                    case 40:\n                    case 38:\n                        proxy.tableArrowNavigation(event, selection, ele);\n                        break;\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Table.prototype.tableModulekeyUp = function (e) {\n        if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && this.contentModule) {\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            var ele = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)[0];\n            ele = (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') ? ele.parentElement : ele;\n            if (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') {\n                var closestTd = closest(ele, 'td');\n                ele = !isNullOrUndefined(closestTd) && this.parent.inputElement.contains(closestTd) ? closestTd : ele;\n            }\n            if (this.previousTableElement !== ele && !isNullOrUndefined(this.previousTableElement)) {\n                this.previousTableElement.classList.remove(classes.CLS_TABLE_SEL);\n            }\n        }\n    };\n    Table.prototype.openDialog = function (isInternal, e) {\n        if (!isInternal) {\n            this.parent.contentModule.getEditPanel().focus();\n        }\n        if (this.parent.editorMode === 'HTML') {\n            var docElement = this.parent.contentModule.getDocument();\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(docElement);\n            var selection = this.parent.formatter.editorManager.nodeSelection.save(range, docElement);\n            var args = {\n                originalEvent: e ? e.args : { action: 'insert-table' },\n                item: {\n                    command: 'Table',\n                    subCommand: 'CreateTable'\n                },\n                name: !isInternal ? 'showDialog' : null\n            };\n            this.insertTableDialog({ self: this, args: args, selection: selection });\n        }\n    };\n    Table.prototype.showDialog = function () {\n        this.openDialog(false);\n        this.setCssClass({ cssClass: this.parent.cssClass });\n    };\n    Table.prototype.closeDialog = function () {\n        if (this.editdlgObj) {\n            this.editdlgObj.hide({ returnValue: true });\n        }\n    };\n    Table.prototype.onToolbarAction = function (args) {\n        var item = args.args.item;\n        switch (item.subCommand) {\n            case 'TableHeader':\n                this.tableHeader(args.selection, args.args);\n                break;\n            case 'TableRemove':\n                this.removeTable(args.selection, args.args);\n                break;\n            case 'TableEditProperties':\n                this.editTable(args);\n                break;\n        }\n    };\n    Table.prototype.verticalAlign = function (args, e) {\n        var tdEle = closest(args.selectParent[0], 'td') || closest(args.selectParent[0], 'th');\n        if (tdEle) {\n            this.parent.formatter.process(this.parent, e, e, { tableCell: tdEle, subCommand: e.item.subCommand });\n        }\n    };\n    Table.prototype.tableStyles = function (args, command) {\n        var table = closest(args.selectParent[0], 'table');\n        if (command === 'Dashed') {\n            /* eslint-disable */\n            (this.parent.element.classList.contains(classes.CLS_TB_DASH_BOR)) ?\n                this.parent.element.classList.remove(classes.CLS_TB_DASH_BOR) : this.parent.element.classList.add(classes.CLS_TB_DASH_BOR);\n            (table.classList.contains(classes.CLS_TB_DASH_BOR)) ? table.classList.remove(classes.CLS_TB_DASH_BOR) :\n                table.classList.add(classes.CLS_TB_DASH_BOR);\n        }\n        if (command === 'Alternate') {\n            (this.parent.element.classList.contains(classes.CLS_TB_ALT_BOR)) ?\n                this.parent.element.classList.remove(classes.CLS_TB_ALT_BOR) : this.parent.element.classList.add(classes.CLS_TB_ALT_BOR);\n            (table.classList.contains(classes.CLS_TB_ALT_BOR)) ? table.classList.remove(classes.CLS_TB_ALT_BOR) :\n                table.classList.add(classes.CLS_TB_ALT_BOR);\n            /* eslint-enable */\n        }\n        if (args.args && args.args.item.cssClass) {\n            var classList = args.args.item.cssClass.split(' ');\n            for (var i = 0; i < classList.length; i++) {\n                if (table.classList.contains(classList[i])) {\n                    table.classList.remove(classList[i]);\n                }\n                else {\n                    table.classList.add(classList[i]);\n                }\n            }\n        }\n        this.parent.formatter.saveData();\n        this.parent.formatter.editorManager.nodeSelection.restore();\n    };\n    Table.prototype.insideList = function (range) {\n        var blockNodes = this.parent.formatter.editorManager.domNode.blockNodes();\n        var nodes = [];\n        for (var i = 0; i < blockNodes.length; i++) {\n            if (blockNodes[i].parentNode.tagName === 'LI') {\n                nodes.push(blockNodes[i].parentNode);\n            }\n            else if (blockNodes[i].tagName === 'LI' && blockNodes[i].childNodes[0].tagName !== 'P' &&\n                (blockNodes[i].childNodes[0].tagName !== 'OL' &&\n                    blockNodes[i].childNodes[0].tagName !== 'UL')) {\n                nodes.push(blockNodes[i]);\n            }\n        }\n        if (nodes.length > 1 || nodes.length && ((range.startOffset === 0 && range.endOffset === 0))) {\n            this.ensureInsideTableList = true;\n            return true;\n        }\n        else {\n            this.ensureInsideTableList = false;\n            return false;\n        }\n    };\n    Table.prototype.tabSelection = function (event, selection, ele) {\n        this.previousTableElement = ele;\n        var insideList = this.insideList(selection.range);\n        if ((event.keyCode === 37 || event.keyCode === 39) && selection.range.startContainer.nodeType === 3 ||\n            insideList) {\n            return;\n        }\n        event.preventDefault();\n        ele.classList.remove(classes.CLS_TABLE_SEL);\n        if (!event.shiftKey && event.keyCode !== 37) {\n            var nextElement = (!isNullOrUndefined(ele.nextSibling)) ? ele.nextSibling :\n                (!isNullOrUndefined(closest(ele, 'tr').nextSibling) ? closest(ele, 'tr').nextSibling.childNodes[0] :\n                    (!isNullOrUndefined(closest(ele, 'table').nextSibling)) ?\n                        (closest(ele, 'table').nextSibling.nodeName.toLowerCase() === 'td') ?\n                            closest(ele, 'table').nextSibling : ele : ele);\n            if (ele === nextElement && ele.nodeName === 'TH') {\n                nextElement = closest(ele, 'table').rows[1].cells[0];\n            }\n            if (event.keyCode === 39 && ele === nextElement) {\n                nextElement = closest(ele, 'table').nextSibling;\n            }\n            if (nextElement) {\n                // eslint-disable-next-line\n                (nextElement.textContent.trim() !== '' && closest(nextElement, 'td')) ?\n                    selection.setSelectionNode(this.contentModule.getDocument(), nextElement) :\n                    selection.setSelectionText(this.contentModule.getDocument(), nextElement, nextElement, 0, 0);\n            }\n            if (ele === nextElement && event.keyCode !== 39 && nextElement) {\n                ele.classList.add(classes.CLS_TABLE_SEL);\n                this.addRow(selection, event, true);\n                ele.classList.remove(classes.CLS_TABLE_SEL);\n                nextElement = nextElement.parentElement.nextSibling ? nextElement.parentElement.nextSibling.firstChild :\n                    nextElement.parentElement.firstChild;\n                // eslint-disable-next-line\n                (nextElement.textContent.trim() !== '' && closest(nextElement, 'td')) ?\n                    selection.setSelectionNode(this.contentModule.getDocument(), nextElement) :\n                    selection.setSelectionText(this.contentModule.getDocument(), nextElement, nextElement, 0, 0);\n            }\n        }\n        else {\n            var prevElement = (!isNullOrUndefined(ele.previousSibling)) ? ele.previousSibling :\n                (!isNullOrUndefined(closest(ele, 'tr').previousSibling) ?\n                    closest(ele, 'tr').previousSibling.childNodes[closest(ele, 'tr').previousSibling.childNodes.length - 1] :\n                    (!isNullOrUndefined(closest(ele, 'table').previousSibling)) ?\n                        (closest(ele, 'table').previousSibling.nodeName.toLowerCase() === 'td') ? closest(ele, 'table').previousSibling :\n                            ele : ele);\n            if (ele === prevElement && ele.cellIndex === 0 &&\n                closest(ele, 'table').tHead) {\n                var clsTble = closest(ele, 'table');\n                prevElement = clsTble.rows[0].cells[clsTble.rows[0].cells.length - 1];\n            }\n            if (event.keyCode === 37 && ele === prevElement) {\n                prevElement = closest(ele, 'table').previousSibling;\n            }\n            if (prevElement) {\n                // eslint-disable-next-line\n                (prevElement.textContent.trim() !== '' && closest(prevElement, 'td')) ?\n                    selection.setSelectionNode(this.contentModule.getDocument(), prevElement) :\n                    selection.setSelectionText(this.contentModule.getDocument(), prevElement, prevElement, 0, 0);\n            }\n        }\n    };\n    Table.prototype.tableArrowNavigation = function (event, selection, ele) {\n        var selText = selection.range.startContainer;\n        if ((event.keyCode === 40 && selText.nodeType === 3 && (selText.nextSibling && selText.nextSibling.nodeName === 'BR' ||\n            selText.parentNode && selText.parentNode.nodeName !== 'TD')) ||\n            (event.keyCode === 38 && selText.nodeType === 3 && (selText.previousSibling && selText.previousSibling.nodeName === 'BR' ||\n                selText.parentNode && selText.parentNode.nodeName !== 'TD'))) {\n            return;\n        }\n        event.preventDefault();\n        ele.classList.remove(classes.CLS_TABLE_SEL);\n        if (event.keyCode === 40) {\n            ele = (!isNullOrUndefined(closest(ele, 'tr').nextElementSibling)) ?\n                closest(ele, 'tr').nextElementSibling.children[ele.cellIndex] :\n                (closest(ele, 'table').tHead && ele.nodeName === 'TH') ?\n                    closest(ele, 'table').rows[1].cells[ele.cellIndex] :\n                    (!isNullOrUndefined(closest(ele, 'table').nextSibling)) ? closest(ele, 'table').nextSibling :\n                        ele;\n        }\n        else {\n            ele = (!isNullOrUndefined(closest(ele, 'tr').previousElementSibling)) ?\n                closest(ele, 'tr').previousElementSibling.children[ele.cellIndex] :\n                (closest(ele, 'table').tHead && ele.nodeName !== 'TH') ?\n                    closest(ele, 'table').tHead.rows[0].cells[ele.cellIndex] :\n                    (!isNullOrUndefined(closest(ele, 'table').previousSibling)) ? closest(ele, 'table').previousSibling :\n                        ele;\n        }\n        if (ele) {\n            selection.setSelectionText(this.contentModule.getDocument(), ele, ele, 0, 0);\n        }\n    };\n    Table.prototype.setBGColor = function (args) {\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n        // eslint-disable-next-line\n        var selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n        // eslint-disable-next-line\n        var selectedCells = this.curTable.querySelectorAll('.e-cell-select');\n        for (var i = 0; i < selectedCells.length; i++) {\n            selectedCells[i].style.backgroundColor = args.item.value;\n        }\n        this.parent.formatter.saveData();\n    };\n    Table.prototype.hideTableQuickToolbar = function () {\n        if (this.quickToolObj && this.quickToolObj.tableQTBar && document.body.contains(this.quickToolObj.tableQTBar.element)) {\n            this.quickToolObj.tableQTBar.hidePopup();\n        }\n    };\n    Table.prototype.tableHeader = function (selection, e) {\n        this.parent.formatter.process(this.parent, e, e.originalEvent, { selection: selection, subCommand: e.item.subCommand });\n    };\n    Table.prototype.editAreaClickHandler = function (e) {\n        if (this.parent.readonly || !isNOU(closest(e.args.target, '.e-img-caption'))) {\n            return;\n        }\n        var args = e.args;\n        var showOnRightClick = this.parent.quickToolbarSettings.showOnRightClick;\n        if (args.which === 2 || (showOnRightClick && args.which === 1) || (!showOnRightClick && args.which === 3)) {\n            return;\n        }\n        if (this.parent.editorMode === 'HTML' && this.parent.quickToolbarModule && this.parent.quickToolbarModule.tableQTBar) {\n            this.quickToolObj = this.parent.quickToolbarModule;\n            var target = args.target;\n            this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n            var isPopupOpen = this.quickToolObj.tableQTBar.element.classList.contains('e-rte-pop');\n            if (isPopupOpen) {\n                return;\n            }\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n            var closestTable = closest(target, 'table');\n            var startNode = this.parent.getRange().startContainer.parentElement;\n            var endNode = this.parent.getRange().endContainer.parentElement;\n            if (target && target.nodeName !== 'A' && target.nodeName !== 'IMG' && target.nodeName !== 'VIDEO' && !target.classList.contains(classes.CLS_CLICKELEM) &&\n                target.nodeName !== 'AUDIO' && startNode === endNode && (target.nodeName === 'TD' || target.nodeName === 'TH' ||\n                target.nodeName === 'TABLE' || (closestTable && this.parent.contentModule.getEditPanel().contains(closestTable)))\n                && !(range.startContainer.nodeType === 3 && !range.collapsed)) {\n                var range_1 = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.save(range_1, this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n                var pageX = void 0;\n                var pageY = void 0;\n                if (Browser.isDevice && e.args.touches) {\n                    pageX = (this.parent.iframeSettings.enable) ? window.pageXOffset + this.parent.element.getBoundingClientRect().left +\n                        e.args.changedTouches[0].clientX : e.args.changedTouches[0].pageX;\n                    pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset + this.parent.element.getBoundingClientRect().top +\n                        (!this.parent.inlineMode.enable ? this.parent.toolbarModule.getToolbarHeight() : 0)\n                        + e.args.changedTouches[0].clientY : e.args.changedTouches[0].pageY;\n                }\n                else {\n                    pageX = (this.parent.iframeSettings.enable) ? window.pageXOffset\n                        + this.parent.element.getBoundingClientRect().left + args.clientX : args.pageX;\n                    pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset + this.parent.element.getBoundingClientRect().top +\n                        this.parent.toolbarModule.getToolbarHeight() + args.clientY : args.pageY;\n                }\n                this.quickToolObj.tableQTBar.showPopup(pageX, pageY, target);\n                this.parent.formatter.editorManager.nodeSelection.restore();\n            }\n            else {\n                this.hideTableQuickToolbar();\n            }\n        }\n    };\n    Table.prototype.tableCellSelect = function (e) {\n        var target = e.target;\n        var row = Array.prototype.slice.call(target.parentElement.parentElement.children).indexOf(target.parentElement);\n        var col = Array.prototype.slice.call(target.parentElement.children).indexOf(target);\n        var list = this.dlgDiv.querySelectorAll('.e-rte-tablecell');\n        Array.prototype.forEach.call(list, function (item) {\n            var parentIndex = Array.prototype.slice.call(item.parentElement.parentElement.children).indexOf(item.parentElement);\n            var cellIndex = Array.prototype.slice.call(item.parentElement.children).indexOf(item);\n            removeClass([item], 'e-active');\n            if (parentIndex <= row && cellIndex <= col) {\n                addClass([item], 'e-active');\n            }\n        });\n        this.tblHeader.innerHTML = (col + 1) + 'x' + (row + 1);\n    };\n    // eslint-disable-next-line\n    Table.prototype.tableMouseUp = function (e) {\n        EventHandler.remove(this.curTable, 'mousemove', this.tableMove);\n    };\n    // eslint-disable-next-line\n    Table.prototype.tableCellLeave = function (e) {\n        removeClass(this.dlgDiv.querySelectorAll('.e-rte-tablecell'), 'e-active');\n        addClass([this.dlgDiv.querySelector('.e-rte-tablecell')], 'e-active');\n        this.tblHeader.innerHTML = 1 + 'x' + 1;\n    };\n    Table.prototype.tableCellClick = function (e) {\n        var target = e.target;\n        var row = Array.prototype.slice.call(target.parentElement.parentElement.children).indexOf(target.parentElement) + 1;\n        var col = Array.prototype.slice.call(target.parentElement.children).indexOf(target) + 1;\n        this.self.tableInsert(row, col, e, this);\n    };\n    Table.prototype.tableInsert = function (row, col, e, selectionObj) {\n        var proxy = (selectionObj.self) ? selectionObj.self : this;\n        var startContainer = selectionObj.selection.range.startContainer;\n        if (startContainer.nodeName === 'P' && startContainer.textContent.trim() === '' && !(startContainer.childNodes.length > 0)) {\n            startContainer.innerHTML = '<br />';\n        }\n        var parentNode = startContainer.parentNode;\n        if (proxy.parent.editorMode === 'HTML' &&\n            ((proxy.parent.iframeSettings.enable && !hasClass(parentNode.ownerDocument.querySelector('body'), 'e-lib')) ||\n                // eslint-disable-next-line\n                (!proxy.parent.iframeSettings.enable && isNOU(closest(parentNode, '[id=' + \"'\" + proxy.contentModule.getPanel().id + \"'\" + ']'))))) {\n            proxy.contentModule.getEditPanel().focus();\n            var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.contentModule.getDocument());\n            selectionObj.selection = proxy.parent.formatter.editorManager.nodeSelection.save(range, proxy.contentModule.getDocument());\n        }\n        var value = {\n            rows: row, columns: col, width: {\n                minWidth: proxy.parent.tableSettings.minWidth,\n                maxWidth: proxy.parent.tableSettings.maxWidth,\n                width: proxy.parent.tableSettings.width\n            },\n            selection: selectionObj.selection\n        };\n        if (proxy.popupObj) {\n            proxy.popupObj.hide();\n        }\n        if (proxy.editdlgObj) {\n            proxy.editdlgObj.hide();\n        }\n        proxy.parent.formatter.process(proxy.parent, selectionObj.args, selectionObj.args.originalEvent, value);\n        proxy.contentModule.getEditPanel().focus();\n        proxy.parent.on(events.mouseDown, proxy.cellSelect, proxy);\n    };\n    Table.prototype.cellSelect = function (e) {\n        var target = e.args.target;\n        var tdNode = closest(target, 'td,th');\n        target = (target.nodeName !== 'TD' && tdNode && this.parent.contentModule.getEditPanel().contains(tdNode)) ?\n            tdNode : target;\n        removeClass(this.contentModule.getEditPanel().querySelectorAll('table td, table th'), classes.CLS_TABLE_SEL);\n        if (target && (target.tagName === 'TD' || target.tagName === 'TH')) {\n            addClass([target], classes.CLS_TABLE_SEL);\n            this.activeCell = target;\n            this.curTable = (this.curTable) ? this.curTable : closest(target, 'table');\n            EventHandler.add(this.curTable, 'mousemove', this.tableMove, this);\n            EventHandler.add(this.curTable, 'mouseup', this.tableMouseUp, this);\n            this.removeResizeElement();\n            if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n                detach(this.helper);\n            }\n        }\n        if (Browser.info.name === 'mozilla' && !isNOU(closest(target, 'table')) &&\n            closest(target, 'table').tagName === 'TABLE') {\n            this.parent.contentModule.getEditPanel().setAttribute('contenteditable', 'false');\n        }\n    };\n    Table.prototype.tableMove = function (event) {\n        this.parent.formatter.editorManager.observer.notify('TABLE_MOVE', { event: event, selectNode: [this.activeCell] });\n    };\n    Table.prototype.resizeHelper = function (e) {\n        if (this.parent.readonly) {\n            return;\n        }\n        var target = e.target || e.targetTouches[0].target;\n        var closestTable = closest(target, 'table.e-rte-table');\n        if (!isNOU(this.curTable) && !isNOU(closestTable) && closestTable !== this.curTable &&\n            this.parent.contentModule.getEditPanel().contains(closestTable)) {\n            this.removeResizeElement();\n            this.removeHelper(e);\n            this.cancelResizeAction();\n        }\n        if (target.nodeName === 'TABLE' || target.nodeName === 'TD' || target.nodeName === 'TH') {\n            this.curTable = (closestTable && this.parent.contentModule.getEditPanel().contains(closestTable))\n                && (target.nodeName === 'TD' || target.nodeName === 'TH') ?\n                closestTable : target;\n            this.removeResizeElement();\n            this.tableResizeEleCreation(this.curTable, e);\n        }\n    };\n    Table.prototype.tableResizeEleCreation = function (table, e) {\n        this.parent.preventDefaultResize(e);\n        var columns = table.rows[this.calMaxCol(table)].cells;\n        var rows = [];\n        for (var i = 0; i < table.rows.length; i++) {\n            for (var j = 0; j < table.rows[i].cells.length; j++) {\n                if (!table.rows[i].cells[j].hasAttribute('rowspan')) {\n                    rows.push(Array.prototype.slice.call(table.rows[i].cells, 0, table.rows[i].cells.length)[j]);\n                    break;\n                }\n            }\n        }\n        var height = parseInt(getComputedStyle(table).height, 10);\n        var width = parseInt(getComputedStyle(table).width, 10);\n        var pos = this.calcPos(table);\n        for (var i = 0; columns.length >= i; i++) {\n            var colReEle = this.parent.createElement('span', {\n                attrs: {\n                    'data-col': (i).toString(), 'unselectable': 'on', 'contenteditable': 'false'\n                }\n            });\n            colReEle.classList.add(classes.CLS_RTE_TABLE_RESIZE, classes.CLS_TB_COL_RES);\n            if (columns.length === i) {\n                colReEle.style.cssText = 'height: ' + height + 'px; width: 4px; top: ' + pos.top +\n                    'px; left:' + (pos.left + this.calcPos(columns[i - 1]).left + columns[i - 1].offsetWidth) + 'px;';\n            }\n            else {\n                colReEle.style.cssText = 'height: ' + height + 'px; width: 4px; top: ' + pos.top +\n                    'px; left:' + (pos.left + this.calcPos(columns[i]).left) + 'px;';\n            }\n            this.contentModule.getEditPanel().appendChild(colReEle);\n        }\n        for (var i = 0; rows.length > i; i++) {\n            var rowReEle = this.parent.createElement('span', {\n                attrs: {\n                    'data-row': (i).toString(), 'unselectable': 'on', 'contenteditable': 'false'\n                }\n            });\n            rowReEle.classList.add(classes.CLS_RTE_TABLE_RESIZE, classes.CLS_TB_ROW_RES);\n            var rowPosLeft = !isNOU(table.getAttribute('cellspacing')) || table.getAttribute('cellspacing') !== '' ?\n                0 : this.calcPos(rows[i]).left;\n            rowReEle.style.cssText = 'width: ' + width + 'px; height: 4px; top: ' +\n                (this.calcPos(rows[i]).top + pos.top + rows[i].offsetHeight - 2) +\n                'px; left:' + (rowPosLeft + pos.left) + 'px;';\n            this.contentModule.getEditPanel().appendChild(rowReEle);\n        }\n        var tableReBox = this.parent.createElement('span', {\n            className: classes.CLS_TB_BOX_RES + ' ' + this.parent.cssClass, attrs: {\n                'data-col': columns.length.toString(), 'unselectable': 'on', 'contenteditable': 'false'\n            }\n        });\n        tableReBox.style.cssText = 'top: ' + (pos.top + height - 4) +\n            'px; left:' + (pos.left + width - 4) + 'px;';\n        if (Browser.isDevice) {\n            tableReBox.classList.add('e-rmob');\n        }\n        this.contentModule.getEditPanel().appendChild(tableReBox);\n    };\n    Table.prototype.removeResizeElement = function () {\n        var item = this.parent.contentModule.getEditPanel().\n            querySelectorAll('.e-column-resize, .e-row-resize, .e-table-box, .e-table-rhelper');\n        if (item.length > 0) {\n            for (var i = 0; i < item.length; i++) {\n                detach(item[i]);\n            }\n        }\n    };\n    Table.prototype.calcPos = function (elem) {\n        var parentOffset = {\n            top: 0,\n            left: 0\n        };\n        var offset = elem.getBoundingClientRect();\n        var doc = elem.ownerDocument;\n        var offsetParent = elem.offsetParent || doc.documentElement;\n        var isNestedTable = false;\n        while (offsetParent &&\n            (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            offsetParent.style.position === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent.nodeName === 'TD' && elem.nodeName === 'TABLE') {\n            offsetParent = closest(offsetParent, '.e-rte-content');\n            isNestedTable = true;\n        }\n        if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n            parentOffset = offsetParent.getBoundingClientRect();\n        }\n        if (isNestedTable) {\n            isNestedTable = false;\n            var topValue = this.parent.inputElement && this.parent.inputElement.scrollTop > 0 ?\n                (this.parent.inputElement.scrollTop + offset.top) - parentOffset.top : offset.top - parentOffset.top;\n            var leftValue = this.parent.inputElement && this.parent.inputElement.scrollLeft > 0 ?\n                (this.parent.inputElement.scrollLeft + offset.left) - parentOffset.left : offset.left - parentOffset.left;\n            return {\n                top: topValue,\n                left: leftValue\n            };\n        }\n        else {\n            return {\n                top: elem.offsetTop,\n                left: elem.offsetLeft\n            };\n        }\n    };\n    Table.prototype.getPointX = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageX;\n        }\n        else {\n            return e.pageX;\n        }\n    };\n    Table.prototype.getPointY = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageY;\n        }\n        else {\n            return e.pageY;\n        }\n    };\n    Table.prototype.resizeStart = function (e) {\n        var _this = this;\n        if (this.parent.readonly) {\n            return;\n        }\n        if (Browser.isDevice) {\n            this.resizeHelper(e);\n        }\n        var target = e.target;\n        if (target.classList.contains(classes.CLS_TB_COL_RES) ||\n            target.classList.contains(classes.CLS_TB_ROW_RES) ||\n            target.classList.contains(classes.CLS_TB_BOX_RES)) {\n            e.preventDefault();\n            this.parent.preventDefaultResize(e);\n            removeClass(this.curTable.querySelectorAll('td,th'), classes.CLS_TABLE_SEL);\n            this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n            this.pageX = this.getPointX(e);\n            this.pageY = this.getPointY(e);\n            this.resizeBtnInit();\n            this.hideTableQuickToolbar();\n            if (target.classList.contains(classes.CLS_TB_COL_RES)) {\n                this.resizeBtnStat.column = true;\n                if (parseInt(target.getAttribute('data-col'), 10) === this.curTable.rows[this.calMaxCol(this.curTable)].cells.length) {\n                    this.currentColumnResize = 'last';\n                    this.columnEle = this.curTable.rows[this.calMaxCol(this.curTable)].cells[parseInt(target.getAttribute('data-col'), 10) - 1];\n                }\n                else {\n                    if (parseInt(target.getAttribute('data-col'), 10) === 0) {\n                        this.currentColumnResize = 'first';\n                    }\n                    else {\n                        this.currentColumnResize = 'middle';\n                    }\n                    this.columnEle = this.curTable.rows[this.calMaxCol(this.curTable)].cells[parseInt(target.getAttribute('data-col'), 10)];\n                }\n                this.colIndex = this.columnEle.cellIndex;\n                this.moveEle = e.target;\n                this.appendHelper();\n            }\n            if (target.classList.contains(classes.CLS_TB_ROW_RES)) {\n                this.rowEle = this.curTable.rows[parseInt(target.getAttribute('data-row'), 10)];\n                this.resizeBtnStat.row = true;\n                this.appendHelper();\n            }\n            if (target.classList.contains(classes.CLS_TB_BOX_RES)) {\n                this.resizeBtnStat.tableBox = true;\n            }\n            if (Browser.isDevice && this.helper && !this.helper.classList.contains('e-reicon')) {\n                this.helper.classList.add('e-reicon');\n                EventHandler.add(document, Browser.touchStartEvent, this.removeHelper, this);\n                EventHandler.add(this.helper, Browser.touchStartEvent, this.resizeStart, this);\n            }\n            else {\n                var args = { event: e, requestType: 'Table' };\n                this.parent.trigger(events.resizeStart, args, function (resizeStartArgs) {\n                    if (resizeStartArgs.cancel) {\n                        _this.cancelResizeAction();\n                    }\n                });\n            }\n            EventHandler.add(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing, this);\n            EventHandler.add(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd, this);\n        }\n    };\n    Table.prototype.removeHelper = function (e) {\n        var cls = e.target.classList;\n        if (!(cls.contains('e-reicon')) && this.helper) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n            if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n                detach(this.helper);\n            }\n            this.pageX = null;\n            this.helper = null;\n        }\n    };\n    Table.prototype.appendHelper = function () {\n        this.helper = this.parent.createElement('div', {\n            className: 'e-table-rhelper' + ' ' + this.parent.cssClass\n        });\n        if (Browser.isDevice) {\n            this.helper.classList.add('e-reicon');\n        }\n        this.contentModule.getEditPanel().appendChild(this.helper);\n        this.setHelperHeight();\n    };\n    Table.prototype.setHelperHeight = function () {\n        var pos = this.calcPos(this.curTable);\n        if (this.resizeBtnStat.column) {\n            this.helper.classList.add('e-column-helper');\n            this.helper.style.cssText = 'height: ' + getComputedStyle(this.curTable).height + '; top: ' +\n                pos.top + 'px; left:' + ((pos.left + this.calcPos(this.columnEle).left) +\n                (this.currentColumnResize === 'last' ? this.columnEle.offsetWidth + 2 : 0) - 1) + 'px;';\n        }\n        else {\n            this.helper.classList.add('e-row-helper');\n            this.helper.style.cssText = 'width: ' + getComputedStyle(this.curTable).width + '; top: ' +\n                (this.calcPos(this.rowEle).top + pos.top + this.rowEle.offsetHeight) +\n                'px; left:' + (this.calcPos(this.rowEle).left + pos.left) + 'px;';\n        }\n    };\n    Table.prototype.updateHelper = function () {\n        var pos = this.calcPos(this.curTable);\n        if (this.resizeBtnStat.column) {\n            var left = (pos.left + this.calcPos(this.columnEle).left) +\n                (this.currentColumnResize === 'last' ? this.columnEle.offsetWidth + 2 : 0) - 1;\n            this.helper.style.left = left + 'px';\n        }\n        else {\n            var top_1 = this.calcPos(this.rowEle).top + pos.top + this.rowEle.offsetHeight;\n            this.helper.style.top = top_1 + 'px';\n        }\n    };\n    Table.prototype.calMaxCol = function (element) {\n        var max = 0;\n        var maxRowIndex;\n        for (var i = 0; i < element.rows.length; i++) {\n            if (max < element.rows[i].cells.length) {\n                maxRowIndex = i;\n                max = element.rows[i].cells.length;\n            }\n        }\n        return maxRowIndex;\n    };\n    Table.prototype.resizing = function (e) {\n        var _this = this;\n        var pageX = this.getPointX(e);\n        var pageY = this.getPointY(e);\n        var mouseX = (this.parent.enableRtl) ? -(pageX - this.pageX) : (pageX - this.pageX);\n        var mouseY = (this.parent.enableRtl) ? -(pageY - this.pageY) : (pageY - this.pageY);\n        this.pageX = pageX;\n        this.pageY = pageY;\n        var maxiumWidth;\n        var currentTdElement = this.curTable.closest('td');\n        var args = { event: e, requestType: 'table' };\n        var isRowCellsMerged = false;\n        var isColCellsMerged = false;\n        var mergedCellIndex;\n        var mergedElement;\n        this.parent.trigger(events.onResize, args, function (resizingArgs) {\n            if (resizingArgs.cancel) {\n                _this.cancelResizeAction();\n            }\n            else {\n                var tableReBox = _this.contentModule.getEditPanel().querySelector('.e-table-box');\n                var tableWidth = parseInt(getComputedStyle(_this.curTable).width, 10);\n                var tableHeight = parseInt(getComputedStyle(_this.curTable).height, 10);\n                var paddingSize = +getComputedStyle(_this.contentModule.getEditPanel()).paddingRight.match(/\\d/g).join('');\n                var rteWidth = _this.contentModule.getEditPanel().offsetWidth -\n                    (_this.contentModule.getEditPanel().offsetWidth -\n                        _this.contentModule.getEditPanel().clientWidth) - paddingSize * 2;\n                var widthCompare = void 0;\n                if (!isNOU(_this.curTable.parentElement.closest('table')) && !isNOU(_this.curTable.closest('td')) &&\n                    _this.contentModule.getEditPanel().contains(_this.curTable.closest('td'))) {\n                    var currentTd = _this.curTable.closest('td');\n                    var currentTDPad = +getComputedStyle(currentTd).paddingRight.match(/\\d/g).join('');\n                    // Padding of the current table with the parent element multiply with 2.\n                    widthCompare = currentTd.offsetWidth - (currentTd.offsetWidth - currentTd.clientWidth) - currentTDPad * 2;\n                }\n                else {\n                    widthCompare = rteWidth;\n                }\n                if (_this.resizeBtnStat.column) {\n                    var width = parseFloat(_this.columnEle.offsetWidth.toString());\n                    var cellRow = _this.curTable.rows[0].cells[0].nodeName === 'TH' ? 1 : 0;\n                    var currentTableWidth = void 0;\n                    if (_this.curTable.style.width !== '' && _this.curTable.style.width.includes('%')) {\n                        currentTableWidth = parseFloat(_this.curTable.style.width.split('%')[0]);\n                    }\n                    else {\n                        currentTableWidth = _this.getCurrentTableWidth(_this.curTable.offsetWidth, _this.parent.inputElement.offsetWidth);\n                    }\n                    var currentColumnCellWidth = parseFloat(_this.curTable.rows[cellRow].cells[_this.colIndex >= _this.curTable.rows[cellRow].cells.length ? _this.curTable.rows[cellRow].cells.length - 1 : _this.colIndex].style.width.split('%')[0]);\n                    if (_this.currentColumnResize === 'first') {\n                        mouseX = mouseX - 0.75; //This was done for to make the gripper and the table first/last column will be close.\n                        _this.removeResizeElement();\n                        if (currentTdElement) {\n                            maxiumWidth = _this.curTable.getBoundingClientRect().right - _this.calcPos(currentTdElement).left;\n                            _this.curTable.style.maxWidth = maxiumWidth + 'px';\n                        }\n                        // Below the value '100' is the 100% width of the parent element.\n                        if (((mouseX !== 0 && 5 < currentColumnCellWidth) || mouseX < 0) && currentTableWidth <= 100 &&\n                            _this.convertPixelToPercentage(tableWidth - mouseX, widthCompare) <= 100) {\n                            var firstColumnsCell = _this.findFirstLastColCells(_this.curTable, true);\n                            _this.curTable.style.width = _this.convertPixelToPercentage(tableWidth - mouseX, widthCompare) > 100 ? (100 + '%') :\n                                (_this.convertPixelToPercentage(tableWidth - mouseX, widthCompare) + '%');\n                            var differenceWidth = currentTableWidth - _this.convertPixelToPercentage(tableWidth - mouseX, widthCompare);\n                            _this.currentMarginLeft = _this.currentMarginLeft + differenceWidth;\n                            _this.curTable.style.marginLeft = 'calc(' + (_this.curTable.style.width === '100%' ? 0 : _this.currentMarginLeft) + '%)';\n                            for (var i = 0; i < firstColumnsCell.length; i++) {\n                                _this.curTable.rows[i].cells[_this.colIndex].style.width = (currentColumnCellWidth - differenceWidth) + '%';\n                            }\n                        }\n                    }\n                    else if (_this.currentColumnResize === 'last') {\n                        mouseX = mouseX + 0.75; //This was done for to make the gripper and the table first/last column will be close.\n                        _this.removeResizeElement();\n                        if (currentTdElement) {\n                            maxiumWidth = currentTdElement.getBoundingClientRect().right - _this.curTable.getBoundingClientRect().left;\n                            _this.curTable.style.maxWidth = maxiumWidth + 'px';\n                        }\n                        // Below the value '100' is the 100% width of the parent element.\n                        if (((mouseX !== 0 && 5 < currentColumnCellWidth) || mouseX > 0) &&\n                            currentTableWidth <= 100 && _this.convertPixelToPercentage(tableWidth + mouseX, widthCompare) <= 100) {\n                            var lastColumnsCell = _this.findFirstLastColCells(_this.curTable, false);\n                            _this.curTable.style.width = _this.convertPixelToPercentage(tableWidth + mouseX, widthCompare) > 100 ? (100 + '%') : (_this.convertPixelToPercentage(tableWidth + mouseX, widthCompare) + '%');\n                            var differenceWidth = currentTableWidth - _this.convertPixelToPercentage(tableWidth + mouseX, widthCompare);\n                            for (var i = 0; i < lastColumnsCell.length; i++) {\n                                if (_this.curTable.rows[i].cells[_this.colIndex]) {\n                                    _this.curTable.rows[i].cells[_this.curTable.rows[i].cells.length === _this.colIndex ?\n                                        _this.colIndex - 1 : _this.colIndex].style.width = (currentColumnCellWidth - differenceWidth) + '%';\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        var cellColl = _this.curTable.rows[_this.calMaxCol(_this.curTable)].cells;\n                        var actualwid = width - mouseX;\n                        var totalwid = parseFloat(_this.columnEle.offsetWidth.toString()) +\n                            parseFloat(cellColl[_this.colIndex - 1].offsetWidth.toString());\n                        for (var i = 0; i < _this.curTable.rows.length; i++) {\n                            var currentRow = _this.curTable.rows[i];\n                            if ((totalwid - actualwid) > 20 && actualwid > 20) {\n                                var leftColumnWidth = totalwid - actualwid;\n                                var rightColWidth = actualwid;\n                                var index = void 0;\n                                var isMergedEleResize = false;\n                                var leftTableCell = void 0;\n                                var rightTableCell = void 0;\n                                isColCellsMerged = false;\n                                isRowCellsMerged = false;\n                                /* eslint-disable */\n                                for (var j = 0; j < currentRow.cells.length; j++) {\n                                    if (currentRow.cells[j].hasAttribute('rowspan') && j <= _this.colIndex) {\n                                        isRowCellsMerged = true;\n                                        mergedCellIndex = i;\n                                        mergedElement = currentRow.cells[j];\n                                    }\n                                    else if (currentRow.cells[j].hasAttribute('colspan') && j <= currentRow.cells.length) {\n                                        isColCellsMerged = true;\n                                        mergedCellIndex = i;\n                                        mergedElement = currentRow.cells[j];\n                                    }\n                                }\n                                if (!isNOU(currentRow.cells[i]) && currentRow.cells[i].hasAttribute('colspan')) {\n                                    index = parseInt(currentRow.cells[i].getAttribute('colspan'), 10) - 1;\n                                }\n                                else {\n                                    index = _this.colIndex;\n                                }\n                                if (isRowCellsMerged || isColCellsMerged) {\n                                    var currentResizeRow = void 0;\n                                    if (currentRow.cells.length < cellColl.length) {\n                                        index = currentRow.cells.length === _this.colIndex || currentRow === _this.curTable.rows[_this.curTable.rows.length - 1] ?\n                                            _this.colIndex - 1 : _this.colIndex;\n                                        currentResizeRow = _this.curTable.rows[!isNullOrUndefined(mergedCellIndex) ?\n                                            mergedCellIndex : _this.colIndex - 1];\n                                        if (currentResizeRow && currentResizeRow !== currentRow && (currentResizeRow.cells[_this.colIndex - 1] === mergedElement ||\n                                            currentResizeRow.cells[currentResizeRow.cells.length - 1] === mergedElement)) {\n                                            isMergedEleResize = true;\n                                        }\n                                        else {\n                                            isMergedEleResize = false;\n                                        }\n                                    }\n                                    else {\n                                        index = _this.colIndex;\n                                    }\n                                    leftTableCell = !isMergedEleResize ? currentRow.cells[index - 1] : (currentResizeRow &&\n                                        currentResizeRow.cells[currentResizeRow.cells.length - 1] !== mergedElement) ?\n                                        currentResizeRow.cells[_this.colIndex - 1] : currentRow.cells[currentRow.cells.length - 1];\n                                    rightTableCell = !isMergedEleResize ? currentRow.cells[index] : rightTableCell && rightTableCell.hasAttribute('rowspan') ?\n                                        currentResizeRow.cells[_this.colIndex] : currentResizeRow && currentResizeRow.cells[currentResizeRow.cells.length - 1] !== mergedElement ?\n                                        currentRow.cells[index - 1] : currentResizeRow.cells[currentResizeRow.cells.length - 1];\n                                }\n                                if (!isNOU(currentRow.cells[index - 1]) && !isRowCellsMerged && !isColCellsMerged) {\n                                    currentRow.cells[index - 1].style.width =\n                                        _this.convertPixelToPercentage(leftColumnWidth, tableWidth) + '%';\n                                }\n                                else {\n                                    if (leftTableCell) {\n                                        leftTableCell.style.width =\n                                            _this.convertPixelToPercentage(leftColumnWidth, tableWidth) + '%';\n                                    }\n                                }\n                                if (!isNOU(currentRow.cells[index]) && !isRowCellsMerged && !isColCellsMerged) {\n                                    currentRow.cells[index].style.width =\n                                        _this.convertPixelToPercentage(rightColWidth, tableWidth) + '%';\n                                }\n                                else {\n                                    if (rightTableCell) {\n                                        rightTableCell.style.width =\n                                            _this.convertPixelToPercentage(rightColWidth, tableWidth) + '%';\n                                    }\n                                }\n                                /* eslint-enable */\n                            }\n                        }\n                    }\n                    _this.updateHelper();\n                }\n                else if (_this.resizeBtnStat.row) {\n                    _this.parent.preventDefaultResize(e);\n                    var height = parseFloat(_this.rowEle.clientHeight.toString()) + mouseY;\n                    if (height > 20) {\n                        _this.rowEle.style.height = height + 'px';\n                    }\n                    _this.curTable.style.height = '';\n                    if (!isNOU(tableReBox)) {\n                        tableReBox.style.cssText = 'top: ' + (_this.calcPos(_this.curTable).top + tableHeight - 4) +\n                            'px; left:' + (_this.calcPos(_this.curTable).left + tableWidth - 4) + 'px;';\n                    }\n                    _this.updateHelper();\n                }\n                else if (_this.resizeBtnStat.tableBox) {\n                    if (currentTdElement) {\n                        var tableBoxPosition = _this.curTable.getBoundingClientRect().left\n                            - currentTdElement.getBoundingClientRect().left;\n                        maxiumWidth = Math.abs(tableBoxPosition - currentTdElement.getBoundingClientRect().width) - 5;\n                        _this.curTable.style.maxWidth = maxiumWidth + 'px';\n                    }\n                    var widthType = _this.curTable.style.width.indexOf('%') > -1;\n                    _this.curTable.style.width = widthType ? _this.convertPixelToPercentage(tableWidth + mouseX, widthCompare) + '%'\n                        : tableWidth + mouseX + 'px';\n                    _this.curTable.style.height = tableHeight + mouseY + 'px';\n                    if (!isNOU(tableReBox)) {\n                        tableReBox.classList.add('e-rbox-select');\n                        tableReBox.style.cssText = 'top: ' + (_this.calcPos(_this.curTable).top + tableHeight - 4) +\n                            'px; left:' + (_this.calcPos(_this.curTable).left + tableWidth - 4) + 'px;';\n                    }\n                }\n            }\n        });\n    };\n    Table.prototype.getCurrentTableWidth = function (tableWidth, parentWidth) {\n        var currentTableWidth = 0;\n        currentTableWidth = tableWidth / parentWidth * 100;\n        return currentTableWidth;\n    };\n    Table.prototype.findFirstLastColCells = function (table, isFirst) {\n        var resultColumns = [];\n        var rows = table.querySelectorAll('tr');\n        for (var i = 0; i < rows.length; i++) {\n            if (rows[i].closest('table') === table) {\n                var columns = rows[i].querySelectorAll('th, td');\n                resultColumns.push(isFirst ? columns[0] : columns[columns.length - 1]);\n            }\n        }\n        return resultColumns;\n    };\n    Table.prototype.convertPixelToPercentage = function (value, offsetValue) {\n        return (value / offsetValue) * 100;\n    };\n    Table.prototype.cancelResizeAction = function () {\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        this.removeResizeElement();\n    };\n    Table.prototype.resizeEnd = function (e) {\n        this.resizeBtnInit();\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        if (this.contentModule.getEditPanel().querySelector('.e-table-box') &&\n            this.contentModule.getEditPanel().contains(this.contentModule.getEditPanel().querySelector('.e-table-box'))) {\n            this.removeResizeElement();\n        }\n        if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n            detach(this.helper);\n            this.helper = null;\n        }\n        this.pageX = null;\n        this.pageY = null;\n        this.moveEle = null;\n        var args = { event: e, requestType: 'table' };\n        this.parent.trigger(events.resizeStop, args);\n        this.parent.formatter.saveData();\n    };\n    Table.prototype.resizeBtnInit = function () {\n        return this.resizeBtnStat = { column: false, row: false, tableBox: false };\n    };\n    Table.prototype.addRow = function (selectCell, e, tabkey) {\n        var cmd;\n        if (tabkey) {\n            cmd = {\n                item: { command: 'Table', subCommand: 'InsertRowAfter' }\n            };\n        }\n        var value = {\n            selection: selectCell,\n            subCommand: (tabkey) ? cmd.item.subCommand : e.item.subCommand\n        };\n        this.parent.formatter.process(this.parent, (tabkey) ? cmd : e, e, value);\n    };\n    Table.prototype.addColumn = function (selectCell, e) {\n        this.parent.formatter.process(this.parent, e, e, { selection: selectCell, width: this.parent.tableSettings.width, subCommand: e.item.subCommand });\n    };\n    Table.prototype.removeRowColumn = function (selectCell, e) {\n        this.parent.formatter.process(this.parent, e, e, { selection: selectCell, subCommand: e.item.subCommand });\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.removeTable = function (selection, args, delKey) {\n        var cmd;\n        if (delKey) {\n            cmd = { item: { command: 'Table', subCommand: 'TableRemove' } };\n        }\n        var value = {\n            selection: selection,\n            subCommand: (delKey) ? cmd.item.subCommand : args.item.subCommand\n        };\n        this.parent.formatter.process(this.parent, (delKey) ? cmd : args, args.originalEvent, value);\n        this.contentModule.getEditPanel().focus();\n        if (this.parent.inputElement.innerHTML === null || this.parent.inputElement.innerHTML === '') {\n            if (this.parent.enterKey === 'DIV') {\n                this.contentModule.getEditPanel().innerHTML = '<div><br/></div>';\n            }\n            else if (this.parent.enterKey === 'BR') {\n                this.contentModule.getEditPanel().innerHTML = '<br/>';\n            }\n            else {\n                this.contentModule.getEditPanel().innerHTML = '<p><br/></p>';\n            }\n        }\n        this.removeResizeElement();\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.renderDlgContent = function (args) {\n        var _this = this;\n        var argsTarget = args.args.originalEvent.target;\n        if (Browser.isDevice || this.parent.inlineMode.enable || !isNullOrUndefined(closest(argsTarget, '.e-rte-text-popup'))) {\n            this.insertTableDialog(args);\n            return;\n        }\n        if (this.popupObj) {\n            this.popupObj.hide();\n            return;\n        }\n        this.hideTableQuickToolbar();\n        var header = '1X1';\n        var insertbtn = this.l10n.getConstant('inserttablebtn');\n        this.dlgDiv = this.parent.createElement('div', { className: 'e-rte-table-popup' + ' ' + this.parent.cssClass, id: this.rteID + '_table' });\n        this.tblHeader = this.parent.createElement('div', { className: 'e-rte-popup-header' + ' ' + this.parent.cssClass });\n        this.tblHeader.innerHTML = header;\n        this.dlgDiv.appendChild(this.tblHeader);\n        var tableDiv = this.parent.createElement('div', { className: 'e-rte-table-span' + ' ' + this.parent.cssClass });\n        this.drawTable(tableDiv, args);\n        this.dlgDiv.appendChild(tableDiv);\n        this.dlgDiv.appendChild(this.parent.createElement('span', { className: 'e-span-border' + ' ' + this.parent.cssClass }));\n        var btnEle = this.parent.createElement('button', {\n            className: 'e-insert-table-btn' + ' ' + this.parent.cssClass, id: this.rteID + '_insertTable',\n            attrs: { type: 'button', tabindex: '0' }\n        });\n        if (!isNOU(this.parent.getToolbarElement().querySelector('.e-expended-nav'))) {\n            this.parent.getToolbarElement().querySelector('.e-expended-nav').setAttribute('tabindex', '1');\n        }\n        this.dlgDiv.appendChild(btnEle);\n        this.createTableButton = new Button({\n            iconCss: 'e-icons e-create-table', content: insertbtn, cssClass: 'e-flat' + ' ' + this.parent.cssClass,\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        this.createTableButton.isStringTemplate = true;\n        this.createTableButton.appendTo(btnEle);\n        EventHandler.add(btnEle, 'click', this.insertTableDialog, { self: this, args: args.args, selection: args.selection });\n        this.parent.getToolbar().appendChild(this.dlgDiv);\n        var target = args.args.originalEvent.target;\n        target = target.classList.contains('e-toolbar-item') ? target.firstChild : target.parentElement;\n        this.popupObj = new Popup(this.dlgDiv, {\n            targetType: 'relative',\n            relateTo: target,\n            collision: { X: 'fit', Y: 'none' },\n            offsetY: 8,\n            viewPortElement: this.parent.element,\n            position: { X: 'left', Y: 'bottom' },\n            enableRtl: this.parent.enableRtl,\n            zIndex: 10001,\n            // eslint-disable-next-line\n            close: function (event) {\n                _this.parent.isBlur = false;\n                _this.popupObj.destroy();\n                detach(_this.popupObj.element);\n                _this.popupObj = null;\n            }\n        });\n        addClass([this.popupObj.element], 'e-popup-open');\n        if (!isNOU(this.parent.cssClass)) {\n            addClass([this.popupObj.element], this.parent.cssClass);\n        }\n        this.popupObj.refreshPosition(target);\n    };\n    Table.prototype.docClick = function (e) {\n        var target = e.args.target;\n        // eslint-disable-next-line\n        if (target && target.classList && ((this.popupObj && !closest(target, '[id=' + \"'\" + this.popupObj.element.id + \"'\" + ']') ||\n            (this.editdlgObj && !closest(target, '#' + this.editdlgObj.element.id)))) && !target.classList.contains('e-create-table') &&\n            target.offsetParent && !target.offsetParent.classList.contains('e-rte-backgroundcolor-dropdown')) {\n            if (this.popupObj) {\n                this.popupObj.hide();\n            }\n            if (this.editdlgObj) {\n                this.editdlgObj.hide();\n            }\n            this.parent.isBlur = true;\n            dispatchEvent(this.parent.element, 'focusout');\n        }\n        var closestEle = closest(target, 'td');\n        var isExist = closestEle && this.parent.contentModule.getEditPanel().contains(closestEle) ? true : false;\n        if (target && target.tagName !== 'TD' && target.tagName !== 'TH' && !isExist &&\n            closest(target, '.e-rte-quick-popup') === null && target.offsetParent &&\n            !target.offsetParent.classList.contains('e-quick-dropdown') &&\n            !target.offsetParent.classList.contains('e-rte-backgroundcolor-dropdown') && !closest(target, '.e-rte-dropdown-popup')\n            && !closest(target, '.e-rte-elements')) {\n            removeClass(this.parent.inputElement.querySelectorAll('table td'), classes.CLS_TABLE_SEL);\n            if (!Browser.isIE) {\n                this.hideTableQuickToolbar();\n            }\n        }\n        if (target && target.classList && !target.classList.contains(classes.CLS_TB_COL_RES) &&\n            !target.classList.contains(classes.CLS_TB_ROW_RES) && !target.classList.contains(classes.CLS_TB_BOX_RES)) {\n            this.removeResizeElement();\n        }\n    };\n    Table.prototype.drawTable = function (tableDiv, args) {\n        var rowDiv;\n        var tableCell;\n        for (var row = 0; row < 3; row++) {\n            rowDiv = this.parent.createElement('div', { className: 'e-rte-table-row' + ' ' + this.parent.cssClass, attrs: { 'data-column': '' + row } });\n            for (var col = 0; col < 10; col++) {\n                var display = (row > 2) ? 'none' : 'inline-block';\n                tableCell = this.parent.createElement('div', { className: 'e-rte-tablecell e-default' + ' ' + this.parent.cssClass, attrs: { 'data-cell': '' + col } });\n                rowDiv.appendChild(tableCell);\n                tableCell.style.display = display;\n                if (col === 0 && row === 0) {\n                    addClass([tableCell], 'e-active');\n                }\n                EventHandler.add(tableCell, 'mousemove', this.tableCellSelect, this);\n                EventHandler.add(rowDiv, 'mouseleave', this.tableCellLeave, this);\n                EventHandler.add(tableCell, 'mouseup', this.tableCellClick, { self: this, args: args.args, selection: args.selection });\n            }\n            tableDiv.appendChild(rowDiv);\n        }\n    };\n    Table.prototype.editTable = function (args) {\n        var _this = this;\n        this.createDialog(args);\n        var editContent = this.tableDlgContent(args);\n        var update = this.l10n.getConstant('dialogUpdate');\n        var cancel = this.l10n.getConstant('dialogCancel');\n        var editHeader = this.l10n.getConstant('tableEditHeader');\n        this.editdlgObj.setProperties({\n            height: 'initial', width: '290px', content: editContent, header: editHeader,\n            buttons: [{\n                    click: this.applyProperties.bind(this, args),\n                    buttonModel: { content: update, cssClass: 'e-flat e-size-update' + ' ' + this.parent.cssClass, isPrimary: true }\n                },\n                {\n                    click: function (e) {\n                        _this.cancelDialog(e);\n                    },\n                    buttonModel: { cssClass: 'e-flat e-cancel' + ' ' + this.parent.cssClass, content: cancel }\n                }],\n            cssClass: this.editdlgObj.cssClass + ' e-rte-edit-table-prop-dialog'\n        });\n        this.editdlgObj.element.style.maxHeight = 'none';\n        this.editdlgObj.content.querySelector('input').focus();\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.insertTableDialog = function (args) {\n        var proxy = (this.self) ? this.self : this;\n        if (proxy.popupObj) {\n            proxy.popupObj.hide();\n        }\n        proxy.createDialog(args);\n        var dlgContent = proxy.tableCellDlgContent();\n        var insert = proxy.l10n.getConstant('dialogInsert');\n        var cancel = proxy.l10n.getConstant('dialogCancel');\n        if (isNullOrUndefined(proxy.editdlgObj)) {\n            return;\n        }\n        proxy.editdlgObj.setProperties({\n            height: 'initial', width: '290px', content: dlgContent,\n            buttons: [{\n                    click: proxy.customTable.bind(this, args),\n                    buttonModel: { content: insert, cssClass: 'e-flat e-insert-table' + ' ' + proxy.parent.cssClass, isPrimary: true }\n                },\n                {\n                    click: function (e) {\n                        proxy.cancelDialog(e);\n                    },\n                    buttonModel: { cssClass: 'e-flat e-cancel' + ' ' + proxy.parent.cssClass, content: cancel }\n                }]\n        });\n        if (!isNOU(proxy.parent.cssClass)) {\n            proxy.editdlgObj.setProperties({ cssClass: proxy.parent.cssClass });\n        }\n        proxy.editdlgObj.element.style.maxHeight = 'none';\n        proxy.editdlgObj.content.querySelector('input').focus();\n    };\n    Table.prototype.tableCellDlgContent = function () {\n        var tableColumn = this.l10n.getConstant('columns');\n        var tableRow = this.l10n.getConstant('rows');\n        var tableWrap = this.parent.createElement('div', { className: 'e-cell-wrap' + ' ' + this.parent.cssClass });\n        var content = '<div class=\"e-rte-field' + ' ' + this.parent.cssClass + '\"><input type=\"text\" '\n            + ' data-role =\"none\" id=\"tableColumn\" class=\"e-table-column' + ' ' + this.parent.cssClass + '\"/></div>'\n            + '<div class=\"e-rte-field' + ' ' + this.parent.cssClass + '\"><input type=\"text\" data-role =\"none\" id=\"tableRow\" class=\"e-table-row' + ' ' + this.parent.cssClass + '\" /></div>';\n        var contentElem = parseHtml(content);\n        tableWrap.appendChild(contentElem);\n        this.columnTextBox = new NumericTextBox({\n            format: 'n0',\n            min: 1,\n            value: 3,\n            placeholder: tableColumn,\n            floatLabelType: 'Auto',\n            max: 50,\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale,\n            cssClass: this.parent.cssClass\n        });\n        this.columnTextBox.isStringTemplate = true;\n        this.columnTextBox.appendTo(tableWrap.querySelector('#tableColumn'));\n        this.rowTextBox = new NumericTextBox({\n            format: 'n0',\n            min: 1,\n            value: 3,\n            placeholder: tableRow,\n            floatLabelType: 'Auto',\n            max: 1000,\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale,\n            cssClass: this.parent.cssClass\n        });\n        this.rowTextBox.isStringTemplate = true;\n        this.rowTextBox.appendTo(tableWrap.querySelector('#tableRow'));\n        return tableWrap;\n    };\n    Table.prototype.clearDialogObj = function () {\n        if (this.editdlgObj) {\n            this.editdlgObj.destroy();\n            detach(this.editdlgObj.element);\n            this.editdlgObj = null;\n        }\n    };\n    // eslint-disable-next-line\n    Table.prototype.createDialog = function (args) {\n        var _this = this;\n        if (this.editdlgObj) {\n            this.editdlgObj.hide({ returnValue: true });\n            return;\n        }\n        var tableDialog = this.parent.createElement('div', {\n            className: 'e-rte-edit-table' + ' ' + this.parent.cssClass, id: this.rteID + '_tabledialog'\n        });\n        this.parent.element.appendChild(tableDialog);\n        var insert = this.l10n.getConstant('dialogInsert');\n        var cancel = this.l10n.getConstant('dialogCancel');\n        var header = this.l10n.getConstant('tabledialogHeader');\n        var dialogModel = {\n            header: header,\n            cssClass: classes.CLS_RTE_ELEMENTS + ' ' + this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            showCloseIcon: true, closeOnEscape: true, width: (Browser.isDevice) ? '290px' : '340px', height: 'initial',\n            position: { X: 'center', Y: (Browser.isDevice) ? 'center' : 'top' },\n            isModal: Browser.isDevice,\n            buttons: [{\n                    buttonModel: { content: insert, cssClass: 'e-flat e-insert-table' + ' ' + this.parent.cssClass, isPrimary: true }\n                },\n                {\n                    click: function (e) {\n                        _this.cancelDialog(e);\n                    },\n                    buttonModel: { cssClass: 'e-flat e-cancel' + ' ' + this.parent.cssClass, content: cancel }\n                }],\n            target: (Browser.isDevice) ? document.body : this.parent.element,\n            animationSettings: { effect: 'None' },\n            close: function (event) {\n                _this.parent.isBlur = false;\n                _this.editdlgObj.destroy();\n                detach(_this.editdlgObj.element);\n                _this.dialogRenderObj.close(event);\n                _this.editdlgObj = null;\n            }\n        };\n        this.editdlgObj = this.dialogRenderObj.render(dialogModel);\n        this.editdlgObj.appendTo(tableDialog);\n        if (this.quickToolObj && this.quickToolObj.inlineQTBar && document.body.contains(this.quickToolObj.inlineQTBar.element)) {\n            this.quickToolObj.inlineQTBar.hidePopup();\n        }\n        if (this.quickToolObj && this.quickToolObj.textQTBar &&\n            this.parent.element.ownerDocument.body.contains(this.quickToolObj.textQTBar.element)) {\n            this.quickToolObj.textQTBar.hidePopup();\n        }\n    };\n    Table.prototype.customTable = function (args, e) {\n        var proxy = (this.self) ? this.self : this;\n        if (proxy.rowTextBox.value && proxy.columnTextBox.value) {\n            var argument = ((Browser.isDevice || (!isNullOrUndefined(args.args)\n                && !isNullOrUndefined(args.args.originalEvent) &&\n                args.args.originalEvent.action === 'insert-table')\n                || proxy.parent.inlineMode.enable || !isNullOrUndefined(proxy.parent.quickToolbarSettings.text)) ? args :\n                this);\n            proxy.tableInsert(proxy.rowTextBox.value, proxy.columnTextBox.value, e, argument);\n        }\n    };\n    // eslint-disable-next-line\n    Table.prototype.cancelDialog = function (e) {\n        this.parent.isBlur = false;\n        this.editdlgObj.hide({ returnValue: true });\n    };\n    // eslint-disable-next-line\n    Table.prototype.applyProperties = function (args, e) {\n        var dialogEle = this.editdlgObj.element;\n        var table = closest(args.selectNode[0], 'table');\n        table.style.width = dialogEle.querySelector('.e-table-width').value + 'px';\n        if (dialogEle.querySelector('.e-cell-padding').value !== '') {\n            var tdElm = table.querySelectorAll('td');\n            for (var i = 0; i < tdElm.length; i++) {\n                var padVal = '';\n                if (tdElm[i].style.padding === '') {\n                    padVal = tdElm[i].getAttribute('style') + ' padding:' +\n                        dialogEle.querySelector('.e-cell-padding').value + 'px;';\n                }\n                else {\n                    tdElm[i].style.padding = dialogEle.querySelector('.e-cell-padding').value + 'px';\n                    padVal = tdElm[i].getAttribute('style');\n                }\n                tdElm[i].setAttribute('style', padVal);\n            }\n        }\n        table.cellSpacing = dialogEle.querySelector('.e-cell-spacing').value;\n        if (!isNOU(table.cellSpacing) || table.cellSpacing !== '0') {\n            addClass([table], classes.CLS_TABLE_BORDER);\n        }\n        else {\n            removeClass([table], classes.CLS_TABLE_BORDER);\n        }\n        this.parent.formatter.saveData();\n        this.editdlgObj.hide({ returnValue: true });\n    };\n    Table.prototype.tableDlgContent = function (e) {\n        var selectNode = e.selectParent[0];\n        var tableWidth = this.l10n.getConstant('tableWidth');\n        var cellPadding = this.l10n.getConstant('cellpadding');\n        var cellSpacing = this.l10n.getConstant('cellspacing');\n        var tableWrap = this.parent.createElement('div', { className: 'e-table-sizewrap' + ' ' + this.parent.cssClass });\n        var widthVal = closest(selectNode, 'table').getClientRects()[0].width;\n        var padVal = closest(selectNode, 'td').style.padding;\n        var brdSpcVal = closest(selectNode, 'table').getAttribute('cellspacing');\n        var content = '<div class=\"e-rte-field' + ' ' + this.parent.cssClass + '\"><input type=\"text\" data-role =\"none\" id=\"tableWidth\" class=\"e-table-width' + ' ' + this.parent.cssClass + '\" '\n            + ' /></div>' + '<div class=\"e-rte-field' + ' ' + this.parent.cssClass + '\"><input type=\"text\" data-role =\"none\" id=\"cellPadding\" class=\"e-cell-padding' + ' ' + this.parent.cssClass + '\" />'\n            + ' </div><div class=\"e-rte-field' + ' ' + this.parent.cssClass + '\"><input type=\"text\" data-role =\"none\" id=\"cellSpacing\" class=\"e-cell-spacing' + ' ' + this.parent.cssClass + '\" /></div>';\n        var contentElem = parseHtml(content);\n        tableWrap.appendChild(contentElem);\n        this.tableWidthNum = new NumericTextBox({\n            format: 'n0',\n            min: 0,\n            value: widthVal,\n            placeholder: tableWidth,\n            floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        this.tableWidthNum.isStringTemplate = true;\n        this.tableWidthNum.appendTo(tableWrap.querySelector('#tableWidth'));\n        this.tableCellPadding = new NumericTextBox({\n            format: 'n0',\n            min: 0,\n            // eslint-disable-next-line\n            value: padVal !== '' ? parseInt(padVal, null) : 0,\n            placeholder: cellPadding,\n            floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        this.tableCellPadding.isStringTemplate = true;\n        this.tableCellPadding.appendTo(tableWrap.querySelector('#cellPadding'));\n        this.tableCellSpacing = new NumericTextBox({\n            format: 'n0',\n            min: 0,\n            // eslint-disable-next-line\n            value: brdSpcVal !== '' && !isNOU(brdSpcVal) ? parseInt(brdSpcVal, null) : 0,\n            placeholder: cellSpacing,\n            floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        this.tableCellSpacing.isStringTemplate = true;\n        this.tableCellSpacing.appendTo(tableWrap.querySelector('#cellSpacing'));\n        return tableWrap;\n    };\n    /**\n     * Destroys the ToolBar.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    Table.prototype.destroy = function () {\n        if (isNOU(this.parent)) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    Table.prototype.moduleDestroy = function () {\n        this.parent = null;\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {void}\n     */\n    Table.prototype.getModuleName = function () {\n        return 'table';\n    };\n    return Table;\n}());\nexport { Table };\n","import { Dialog } from '@syncfusion/ej2-popups';\nimport { closest, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\n/**\n * Dialog Renderer\n */\nvar DialogRenderer = /** @class */ (function () {\n    function DialogRenderer(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    DialogRenderer.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.moduleDestroy, this.moduleDestroy, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    DialogRenderer.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.destroy, this.removeEventListener);\n        this.parent.off(events.moduleDestroy, this.moduleDestroy);\n    };\n    /**\n     * dialog render method\n     *\n     * @param {DialogModel} e - specifies the dialog model.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    DialogRenderer.prototype.render = function (e) {\n        var dlgObj;\n        e.beforeOpen = this.beforeOpen.bind(this);\n        e.open = this.open.bind(this);\n        e.position = { X: 'center', Y: this.getDialogPosition() };\n        if (isNOU(e.close)) {\n            e.close = this.close.bind(this);\n        }\n        e.beforeClose = this.beforeClose.bind(this);\n        // eslint-disable-next-line\n        dlgObj = new Dialog(e);\n        dlgObj.isStringTemplate = true;\n        return dlgObj;\n    };\n    DialogRenderer.prototype.beforeOpen = function (args) {\n        if (args.element.classList.contains('e-dialog')) {\n            var formEle = closest(args.target, 'form');\n            if (!isNOU(formEle)) {\n                this.dialogEle = args.element;\n                this.dialogEle.addEventListener('keydown', this.handleEnterKeyDown);\n            }\n        }\n        this.parent.trigger(events.beforeDialogOpen, args, this.beforeOpenCallback.bind(this, args));\n    };\n    DialogRenderer.prototype.handleEnterKeyDown = function (args) {\n        if (args.code === 'Enter') {\n            args.preventDefault();\n        }\n    };\n    DialogRenderer.prototype.beforeOpenCallback = function (args) {\n        if (args.cancel) {\n            this.parent.notify(events.clearDialogObj, null);\n        }\n    };\n    DialogRenderer.prototype.open = function (args) {\n        this.parent.trigger(events.dialogOpen, args);\n    };\n    DialogRenderer.prototype.beforeClose = function (args) {\n        if (this.dialogEle) {\n            this.dialogEle.removeEventListener('keydown', this.handleEnterKeyDown);\n        }\n        this.parent.trigger(events.beforeDialogClose, args, function (closeArgs) {\n            if (!closeArgs.cancel) {\n                if (closeArgs.container.classList.contains('e-popup-close')) {\n                    closeArgs.cancel = true;\n                }\n            }\n        });\n    };\n    DialogRenderer.prototype.getDialogPosition = function () {\n        var distanceFromVisibleTop = this.parent.element.getBoundingClientRect().top;\n        if (distanceFromVisibleTop < 0) {\n            distanceFromVisibleTop = Math.abs(distanceFromVisibleTop);\n            return distanceFromVisibleTop.toString();\n        }\n        else {\n            return 'top';\n        }\n    };\n    /**\n     * dialog close method\n     *\n     * @param {Object} args - specifies the arguments.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    DialogRenderer.prototype.close = function (args) {\n        this.parent.trigger(events.dialogClose, args);\n    };\n    DialogRenderer.prototype.moduleDestroy = function () {\n        this.parent = null;\n    };\n    return DialogRenderer;\n}());\nexport { DialogRenderer };\n","/**\n * @hidden\n * @deprecated\n */\nexport var executeGroup = {\n    'bold': {\n        command: 'Style',\n        subCommand: 'Bold',\n        value: 'strong'\n    },\n    'italic': {\n        command: 'Style',\n        subCommand: 'Italic',\n        value: 'em'\n    },\n    'underline': {\n        command: 'Style',\n        subCommand: 'Underline',\n        value: 'span'\n    },\n    'strikeThrough': {\n        command: 'Style',\n        subCommand: 'StrikeThrough',\n        value: 'span'\n    },\n    'insertCode': {\n        command: 'Formats',\n        subCommand: 'Pre',\n        value: 'pre'\n    },\n    'superscript': {\n        command: 'Effects',\n        subCommand: 'SuperScript',\n        value: 'sup'\n    },\n    'subscript': {\n        command: 'Effects',\n        subCommand: 'SubScript',\n        value: 'sub'\n    },\n    'uppercase': {\n        command: 'Casing',\n        subCommand: 'UpperCase'\n    },\n    'lowercase': {\n        command: 'Casing',\n        subCommand: 'LowerCase'\n    },\n    'fontColor': {\n        command: 'font',\n        subCommand: 'fontcolor',\n        value: '#ff0000'\n    },\n    'fontName': {\n        command: 'font',\n        subCommand: 'fontname',\n        value: 'Segoe UI'\n    },\n    'fontSize': {\n        command: 'font',\n        subCommand: 'fontsize',\n        value: '10pt'\n    },\n    'backColor': {\n        command: 'font',\n        subCommand: 'backgroundcolor',\n        value: '#ffff00'\n    },\n    'justifyCenter': {\n        command: 'Alignments',\n        subCommand: 'JustifyCenter'\n    },\n    'justifyFull': {\n        command: 'Alignments',\n        subCommand: 'JustifyFull'\n    },\n    'justifyLeft': {\n        command: 'Alignments',\n        subCommand: 'JustifyLeft'\n    },\n    'justifyRight': {\n        command: 'Alignments',\n        subCommand: 'JustifyRight'\n    },\n    'undo': {\n        command: 'Actions',\n        subCommand: 'Undo'\n    },\n    'redo': {\n        command: 'Actions',\n        subCommand: 'Redo'\n    },\n    'createLink': {\n        command: 'Links',\n        subCommand: 'createLink'\n    },\n    'editLink': {\n        command: 'Links',\n        subCommand: 'createLink'\n    },\n    'createImage': {\n        command: 'Images',\n        subCommand: 'Images'\n    },\n    'formatBlock': {\n        command: 'Formats',\n        value: 'P'\n    },\n    'heading': {\n        command: 'Formats',\n        value: 'H1'\n    },\n    'indent': {\n        command: 'Indents',\n        subCommand: 'Indent'\n    },\n    'outdent': {\n        command: 'Indents',\n        subCommand: 'Outdent'\n    },\n    'insertHTML': {\n        command: 'InsertHTML',\n        subCommand: 'InsertHTML',\n        value: ''\n    },\n    'insertText': {\n        command: 'InsertText',\n        subCommand: 'InsertText',\n        value: ''\n    },\n    'insertHorizontalRule': {\n        command: 'InsertHTML',\n        subCommand: 'InsertHTML',\n        value: '<hr/>'\n    },\n    'insertImage': {\n        command: 'Images',\n        subCommand: 'Image'\n    },\n    'insertAudio': {\n        command: 'Audios',\n        subCommand: 'Audio'\n    },\n    'insertVideo': {\n        command: 'Videos',\n        subCommand: 'Video'\n    },\n    'editImage': {\n        command: 'Images',\n        subCommand: 'Image'\n    },\n    'insertTable': {\n        command: 'Table',\n        subCommand: 'CreateTable'\n    },\n    'insertBrOnReturn': {\n        command: 'InsertHTML',\n        subCommand: 'InsertHTML',\n        value: '<br/>'\n    },\n    'insertOrderedList': {\n        command: 'Lists',\n        value: 'OL'\n    },\n    'insertUnorderedList': {\n        command: 'Lists',\n        value: 'UL'\n    },\n    'insertParagraph': {\n        command: 'Formats',\n        value: 'P'\n    },\n    'removeFormat': {\n        command: 'Clear',\n        subCommand: 'ClearFormat'\n    },\n    'copyFormatPainter': {\n        command: 'FormatPainter',\n        value: 'format-copy'\n    },\n    'applyFormatPainter': {\n        command: 'FormatPainter',\n        value: 'format-paste'\n    },\n    'escapeFormatPainter': {\n        command: 'FormatPainter',\n        value: 'escape'\n    }\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty, Complex, Event } from '@syncfusion/ej2-base';\nimport { AjaxSettings, ContextMenuSettings } from '@syncfusion/ej2-filemanager';\nimport { DetailsViewSettings, NavigationPaneSettings } from '@syncfusion/ej2-filemanager';\nimport { SearchSettings } from '@syncfusion/ej2-filemanager';\nimport { ToolbarSettings as FileToolbarSettings } from '@syncfusion/ej2-filemanager';\nimport { UploadSettings } from '@syncfusion/ej2-filemanager';\nimport { ToolbarType } from '../base/enum';\nimport { backgroundColor, fontColor, fontFamily, fontSize, formatItems, predefinedItems, TableStyleItems, numberFormatList, bulletFormatList, defaultEmojiIcons } from './items';\n/**\n * Configures the toolbar settings of the RichTextEditor.\n */\nvar ToolbarSettings = /** @class */ (function (_super) {\n    __extends(ToolbarSettings, _super);\n    function ToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], ToolbarSettings.prototype, \"enable\", void 0);\n    __decorate([\n        Property(true)\n    ], ToolbarSettings.prototype, \"enableFloating\", void 0);\n    __decorate([\n        Property(ToolbarType.Expand)\n    ], ToolbarSettings.prototype, \"type\", void 0);\n    __decorate([\n        Property(predefinedItems)\n    ], ToolbarSettings.prototype, \"items\", void 0);\n    __decorate([\n        Property({})\n    ], ToolbarSettings.prototype, \"itemConfigs\", void 0);\n    return ToolbarSettings;\n}(ChildProperty));\nexport { ToolbarSettings };\n/**\n * Configures the image settings of the RichTextEditor.\n */\nvar ImageSettings = /** @class */ (function (_super) {\n    __extends(ImageSettings, _super);\n    function ImageSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(['.jpeg', '.jpg', '.png'])\n    ], ImageSettings.prototype, \"allowedTypes\", void 0);\n    __decorate([\n        Property('inline')\n    ], ImageSettings.prototype, \"display\", void 0);\n    __decorate([\n        Property('Blob')\n    ], ImageSettings.prototype, \"saveFormat\", void 0);\n    __decorate([\n        Property('auto')\n    ], ImageSettings.prototype, \"width\", void 0);\n    __decorate([\n        Property('auto')\n    ], ImageSettings.prototype, \"height\", void 0);\n    __decorate([\n        Property(null)\n    ], ImageSettings.prototype, \"saveUrl\", void 0);\n    __decorate([\n        Property(null)\n    ], ImageSettings.prototype, \"path\", void 0);\n    __decorate([\n        Property(true)\n    ], ImageSettings.prototype, \"resize\", void 0);\n    __decorate([\n        Property(null)\n    ], ImageSettings.prototype, \"removeUrl\", void 0);\n    __decorate([\n        Property(0)\n    ], ImageSettings.prototype, \"minWidth\", void 0);\n    __decorate([\n        Property(null)\n    ], ImageSettings.prototype, \"maxWidth\", void 0);\n    __decorate([\n        Property(0)\n    ], ImageSettings.prototype, \"minHeight\", void 0);\n    __decorate([\n        Property(null)\n    ], ImageSettings.prototype, \"maxHeight\", void 0);\n    __decorate([\n        Property(false)\n    ], ImageSettings.prototype, \"resizeByPercent\", void 0);\n    return ImageSettings;\n}(ChildProperty));\nexport { ImageSettings };\n/**\n * Configures the audio settings of the RichTextEditor.\n */\nvar AudioSettings = /** @class */ (function (_super) {\n    __extends(AudioSettings, _super);\n    function AudioSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(['.wav', '.mp3', '.m4a', '.wma'])\n    ], AudioSettings.prototype, \"allowedTypes\", void 0);\n    __decorate([\n        Property('Inline')\n    ], AudioSettings.prototype, \"layoutOption\", void 0);\n    __decorate([\n        Property('Blob')\n    ], AudioSettings.prototype, \"saveFormat\", void 0);\n    __decorate([\n        Property(null)\n    ], AudioSettings.prototype, \"saveUrl\", void 0);\n    __decorate([\n        Property(null)\n    ], AudioSettings.prototype, \"removeUrl\", void 0);\n    __decorate([\n        Property(null)\n    ], AudioSettings.prototype, \"path\", void 0);\n    return AudioSettings;\n}(ChildProperty));\nexport { AudioSettings };\n/**\n * Configures the video settings of the RichTextEditor.\n */\nvar VideoSettings = /** @class */ (function (_super) {\n    __extends(VideoSettings, _super);\n    function VideoSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(['.mp4', '.mov', '.wmv', '.avi'])\n    ], VideoSettings.prototype, \"allowedTypes\", void 0);\n    __decorate([\n        Property('Inline')\n    ], VideoSettings.prototype, \"layoutOption\", void 0);\n    __decorate([\n        Property('Blob')\n    ], VideoSettings.prototype, \"saveFormat\", void 0);\n    __decorate([\n        Property('auto')\n    ], VideoSettings.prototype, \"width\", void 0);\n    __decorate([\n        Property('auto')\n    ], VideoSettings.prototype, \"height\", void 0);\n    __decorate([\n        Property(null)\n    ], VideoSettings.prototype, \"saveUrl\", void 0);\n    __decorate([\n        Property(null)\n    ], VideoSettings.prototype, \"path\", void 0);\n    __decorate([\n        Property(true)\n    ], VideoSettings.prototype, \"resize\", void 0);\n    __decorate([\n        Property(null)\n    ], VideoSettings.prototype, \"removeUrl\", void 0);\n    __decorate([\n        Property(0)\n    ], VideoSettings.prototype, \"minWidth\", void 0);\n    __decorate([\n        Property(null)\n    ], VideoSettings.prototype, \"maxWidth\", void 0);\n    __decorate([\n        Property(0)\n    ], VideoSettings.prototype, \"minHeight\", void 0);\n    __decorate([\n        Property(null)\n    ], VideoSettings.prototype, \"maxHeight\", void 0);\n    __decorate([\n        Property(false)\n    ], VideoSettings.prototype, \"resizeByPercent\", void 0);\n    return VideoSettings;\n}(ChildProperty));\nexport { VideoSettings };\n/**\n * Configures the file manager settings of the RichTextEditor.\n */\nvar FileManagerSettings = /** @class */ (function (_super) {\n    __extends(FileManagerSettings, _super);\n    function FileManagerSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Event()\n    ], FileManagerSettings.prototype, \"beforeSend\", void 0);\n    __decorate([\n        Complex({ getImageUrl: null, url: null, uploadUrl: null }, AjaxSettings)\n    ], FileManagerSettings.prototype, \"ajaxSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], FileManagerSettings.prototype, \"allowDragAndDrop\", void 0);\n    __decorate([\n        Complex({ visible: true, file: ['Open', '|', 'Cut', 'Copy', '|', 'Delete', 'Rename', '|', 'Details'], folder: ['Open', '|', 'Cut', 'Copy', 'Paste', '|', 'Delete', 'Rename', '|', 'Details'], layout: ['SortBy', 'View', 'Refresh', '|', 'Paste', '|', 'NewFolder', 'Upload', '|', 'Details', '|', 'SelectAll'] }, ContextMenuSettings)\n    ], FileManagerSettings.prototype, \"contextMenuSettings\", void 0);\n    __decorate([\n        Property('')\n    ], FileManagerSettings.prototype, \"cssClass\", void 0);\n    __decorate([\n        Complex({}, DetailsViewSettings)\n    ], FileManagerSettings.prototype, \"detailsViewSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], FileManagerSettings.prototype, \"enable\", void 0);\n    __decorate([\n        Complex({ maxWidth: '650px', minWidth: '240px', visible: true }, NavigationPaneSettings)\n    ], FileManagerSettings.prototype, \"navigationPaneSettings\", void 0);\n    __decorate([\n        Property('/')\n    ], FileManagerSettings.prototype, \"path\", void 0);\n    __decorate([\n        Property(null)\n    ], FileManagerSettings.prototype, \"rootAliasName\", void 0);\n    __decorate([\n        Complex({}, SearchSettings)\n    ], FileManagerSettings.prototype, \"searchSettings\", void 0);\n    __decorate([\n        Property(true)\n    ], FileManagerSettings.prototype, \"showFileExtension\", void 0);\n    __decorate([\n        Property(false)\n    ], FileManagerSettings.prototype, \"showHiddenItems\", void 0);\n    __decorate([\n        Property(true)\n    ], FileManagerSettings.prototype, \"showThumbnail\", void 0);\n    __decorate([\n        Property('Ascending')\n    ], FileManagerSettings.prototype, \"sortOrder\", void 0);\n    __decorate([\n        Complex({ visible: true, items: ['NewFolder', 'Upload', 'Cut', 'Copy', 'Paste', 'Delete', 'Download', 'Rename', 'SortBy', 'Refresh', 'Selection', 'View', 'Details'] }, FileToolbarSettings)\n    ], FileManagerSettings.prototype, \"toolbarSettings\", void 0);\n    __decorate([\n        Complex({ autoUpload: true, minFileSize: 0, maxFileSize: 30000000, allowedExtensions: '', autoClose: false }, UploadSettings)\n    ], FileManagerSettings.prototype, \"uploadSettings\", void 0);\n    __decorate([\n        Property('LargeIcons')\n    ], FileManagerSettings.prototype, \"view\", void 0);\n    return FileManagerSettings;\n}(ChildProperty));\nexport { FileManagerSettings };\nvar TableSettings = /** @class */ (function (_super) {\n    __extends(TableSettings, _super);\n    function TableSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('100%')\n    ], TableSettings.prototype, \"width\", void 0);\n    __decorate([\n        Property(TableStyleItems)\n    ], TableSettings.prototype, \"styles\", void 0);\n    __decorate([\n        Property(true)\n    ], TableSettings.prototype, \"resize\", void 0);\n    __decorate([\n        Property(0)\n    ], TableSettings.prototype, \"minWidth\", void 0);\n    __decorate([\n        Property(null)\n    ], TableSettings.prototype, \"maxWidth\", void 0);\n    return TableSettings;\n}(ChildProperty));\nexport { TableSettings };\n/**\n * Configures the quick toolbar settings of the RichTextEditor.\n */\nvar QuickToolbarSettings = /** @class */ (function (_super) {\n    __extends(QuickToolbarSettings, _super);\n    function QuickToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], QuickToolbarSettings.prototype, \"enable\", void 0);\n    __decorate([\n        Property(false)\n    ], QuickToolbarSettings.prototype, \"showOnRightClick\", void 0);\n    __decorate([\n        Property('hide')\n    ], QuickToolbarSettings.prototype, \"actionOnScroll\", void 0);\n    __decorate([\n        Property(['Open', 'Edit', 'UnLink'])\n    ], QuickToolbarSettings.prototype, \"link\", void 0);\n    __decorate([\n        Property(['Replace', 'Align', 'Caption', 'Remove', '-', 'InsertLink', 'OpenImageLink', 'EditImageLink', 'RemoveImageLink', 'Display', 'AltText', 'Dimension'])\n    ], QuickToolbarSettings.prototype, \"image\", void 0);\n    __decorate([\n        Property(['AudioReplace', 'AudioRemove', 'AudioLayoutOption'])\n    ], QuickToolbarSettings.prototype, \"audio\", void 0);\n    __decorate([\n        Property(['VideoReplace', 'VideoAlign', 'VideoRemove', 'VideoLayoutOption', 'VideoDimension'])\n    ], QuickToolbarSettings.prototype, \"video\", void 0);\n    __decorate([\n        Property(null)\n    ], QuickToolbarSettings.prototype, \"text\", void 0);\n    __decorate([\n        Property(['TableHeader', 'TableRows', 'TableColumns', 'BackgroundColor', '-', 'TableRemove', 'Alignments', 'TableCellVerticalAlign', 'Styles'])\n    ], QuickToolbarSettings.prototype, \"table\", void 0);\n    return QuickToolbarSettings;\n}(ChildProperty));\nexport { QuickToolbarSettings };\n/**\n * Configure the format painter settings of the Rich Text Editor.\n */\nvar FormatPainterSettings = /** @class */ (function (_super) {\n    __extends(FormatPainterSettings, _super);\n    function FormatPainterSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('b; em; font; sub; sup; kbd; i; s; u; code; strong; span; p; div; h1; h2; h3; h4; h5; h6; blockquote; ol; ul; li; pre;')\n    ], FormatPainterSettings.prototype, \"allowedFormats\", void 0);\n    __decorate([\n        Property(null)\n    ], FormatPainterSettings.prototype, \"deniedFormats\", void 0);\n    return FormatPainterSettings;\n}(ChildProperty));\nexport { FormatPainterSettings };\n/**\n * Specifies the emoji picker options in Rich Text Editor with the following properties.\n */\nvar EmojiSettings = /** @class */ (function (_super) {\n    __extends(EmojiSettings, _super);\n    function EmojiSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(defaultEmojiIcons)\n    ], EmojiSettings.prototype, \"iconsSet\", void 0);\n    __decorate([\n        Property(true)\n    ], EmojiSettings.prototype, \"showSearchBox\", void 0);\n    return EmojiSettings;\n}(ChildProperty));\nexport { EmojiSettings };\n/**\n * Configures the Paste Cleanup settings of the RichTextEditor.\n */\nvar PasteCleanupSettings = /** @class */ (function (_super) {\n    __extends(PasteCleanupSettings, _super);\n    function PasteCleanupSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], PasteCleanupSettings.prototype, \"prompt\", void 0);\n    __decorate([\n        Property(null)\n    ], PasteCleanupSettings.prototype, \"deniedAttrs\", void 0);\n    __decorate([\n        Property(['background', 'background-color', 'border', 'border-bottom', 'border-left', 'border-radius', 'border-right', 'border-style', 'border-top', 'border-width', 'clear', 'color', 'cursor', 'direction', 'display', 'float', 'font', 'font-family', 'font-size', 'font-weight', 'font-style', 'height', 'left', 'line-height', 'list-style-type', 'margin', 'margin-top', 'margin-left', 'margin-right', 'margin-bottom', 'max-height', 'max-width', 'min-height', 'min-width', 'overflow', 'overflow-x', 'overflow-y', 'padding', 'padding-bottom', 'padding-left', 'padding-right', 'padding-top', 'position', 'right', 'table-layout', 'text-align', 'text-decoration', 'text-indent', 'top', 'vertical-align', 'visibility', 'white-space', 'width'])\n    ], PasteCleanupSettings.prototype, \"allowedStyleProps\", void 0);\n    __decorate([\n        Property(null)\n    ], PasteCleanupSettings.prototype, \"deniedTags\", void 0);\n    __decorate([\n        Property(true)\n    ], PasteCleanupSettings.prototype, \"keepFormat\", void 0);\n    __decorate([\n        Property(false)\n    ], PasteCleanupSettings.prototype, \"plainText\", void 0);\n    return PasteCleanupSettings;\n}(ChildProperty));\nexport { PasteCleanupSettings };\n/**\n * Configures the font family settings of the RichTextEditor.\n */\nvar FontFamily = /** @class */ (function (_super) {\n    __extends(FontFamily, _super);\n    function FontFamily() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(null)\n    ], FontFamily.prototype, \"default\", void 0);\n    __decorate([\n        Property('65px')\n    ], FontFamily.prototype, \"width\", void 0);\n    __decorate([\n        Property(fontFamily)\n    ], FontFamily.prototype, \"items\", void 0);\n    return FontFamily;\n}(ChildProperty));\nexport { FontFamily };\n/**\n * Configures the font size settings of the RichTextEditor.\n */\nvar FontSize = /** @class */ (function (_super) {\n    __extends(FontSize, _super);\n    function FontSize() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(null)\n    ], FontSize.prototype, \"default\", void 0);\n    __decorate([\n        Property('35px')\n    ], FontSize.prototype, \"width\", void 0);\n    __decorate([\n        Property(fontSize)\n    ], FontSize.prototype, \"items\", void 0);\n    return FontSize;\n}(ChildProperty));\nexport { FontSize };\n/**\n * Configures the format settings of the RichTextEditor.\n */\nvar Format = /** @class */ (function (_super) {\n    __extends(Format, _super);\n    function Format() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(null)\n    ], Format.prototype, \"default\", void 0);\n    __decorate([\n        Property('65px')\n    ], Format.prototype, \"width\", void 0);\n    __decorate([\n        Property(formatItems)\n    ], Format.prototype, \"types\", void 0);\n    return Format;\n}(ChildProperty));\nexport { Format };\n/**\n * Configures the font Color settings of the RichTextEditor.\n */\nvar FontColor = /** @class */ (function (_super) {\n    __extends(FontColor, _super);\n    function FontColor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('#ff0000')\n    ], FontColor.prototype, \"default\", void 0);\n    __decorate([\n        Property('Palette')\n    ], FontColor.prototype, \"mode\", void 0);\n    __decorate([\n        Property(10)\n    ], FontColor.prototype, \"columns\", void 0);\n    __decorate([\n        Property(fontColor)\n    ], FontColor.prototype, \"colorCode\", void 0);\n    __decorate([\n        Property(false)\n    ], FontColor.prototype, \"modeSwitcher\", void 0);\n    return FontColor;\n}(ChildProperty));\nexport { FontColor };\n/**\n * Configures the background Color settings of the RichTextEditor.\n */\nvar BackgroundColor = /** @class */ (function (_super) {\n    __extends(BackgroundColor, _super);\n    function BackgroundColor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('#ffff00')\n    ], BackgroundColor.prototype, \"default\", void 0);\n    __decorate([\n        Property('Palette')\n    ], BackgroundColor.prototype, \"mode\", void 0);\n    __decorate([\n        Property(10)\n    ], BackgroundColor.prototype, \"columns\", void 0);\n    __decorate([\n        Property(backgroundColor)\n    ], BackgroundColor.prototype, \"colorCode\", void 0);\n    __decorate([\n        Property(false)\n    ], BackgroundColor.prototype, \"modeSwitcher\", void 0);\n    return BackgroundColor;\n}(ChildProperty));\nexport { BackgroundColor };\n/**\n * Configures the numberFormatList settings of the RichTextEditor.\n */\nvar NumberFormatList = /** @class */ (function (_super) {\n    __extends(NumberFormatList, _super);\n    function NumberFormatList() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(numberFormatList)\n    ], NumberFormatList.prototype, \"types\", void 0);\n    return NumberFormatList;\n}(ChildProperty));\nexport { NumberFormatList };\n/**\n * Configures the bulletFormatList settings of the RichTextEditor.\n */\nvar BulletFormatList = /** @class */ (function (_super) {\n    __extends(BulletFormatList, _super);\n    function BulletFormatList() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(bulletFormatList)\n    ], BulletFormatList.prototype, \"types\", void 0);\n    return BulletFormatList;\n}(ChildProperty));\nexport { BulletFormatList };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty, Complex } from '@syncfusion/ej2-base';\n/**\n * Objects used for configuring the iframe resources properties.\n */\nvar Resources = /** @class */ (function (_super) {\n    __extends(Resources, _super);\n    function Resources() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property([])\n    ], Resources.prototype, \"styles\", void 0);\n    __decorate([\n        Property([])\n    ], Resources.prototype, \"scripts\", void 0);\n    return Resources;\n}(ChildProperty));\nexport { Resources };\n/**\n * Configures the iframe settings of the RTE.\n */\nvar IFrameSettings = /** @class */ (function (_super) {\n    __extends(IFrameSettings, _super);\n    function IFrameSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], IFrameSettings.prototype, \"enable\", void 0);\n    __decorate([\n        Property(null)\n    ], IFrameSettings.prototype, \"attributes\", void 0);\n    __decorate([\n        Complex({}, Resources)\n    ], IFrameSettings.prototype, \"resources\", void 0);\n    return IFrameSettings;\n}(ChildProperty));\nexport { IFrameSettings };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Configures the inlineMode property of the RTE.\n */\nvar InlineMode = /** @class */ (function (_super) {\n    __extends(InlineMode, _super);\n    function InlineMode() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], InlineMode.prototype, \"enable\", void 0);\n    __decorate([\n        Property(true)\n    ], InlineMode.prototype, \"onSelection\", void 0);\n    return InlineMode;\n}(ChildProperty));\nexport { InlineMode };\n","import { isNullOrUndefined as isNOU, detach, Browser } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\n/**\n * `EnterKey` module is used to handle enter key press actions.\n */\nvar EnterKeyAction = /** @class */ (function () {\n    function EnterKeyAction(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    EnterKeyAction.prototype.addEventListener = function () {\n        this.parent.on(events.enterHandler, this.enterHandler, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.moduleDestroy, this.moduleDestroy, this);\n    };\n    EnterKeyAction.prototype.destroy = function () {\n        if (isNOU(this.parent)) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    EnterKeyAction.prototype.moduleDestroy = function () {\n        this.parent = null;\n    };\n    EnterKeyAction.prototype.removeEventListener = function () {\n        this.parent.off(events.enterHandler, this.enterHandler);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.moduleDestroy, this.moduleDestroy);\n    };\n    EnterKeyAction.prototype.getRangeNode = function () {\n        this.range = this.parent.getRange();\n        this.startNode = this.range.startContainer.nodeName === '#text' ? this.range.startContainer.parentElement :\n            this.range.startContainer;\n        this.endNode = this.range.endContainer.nodeName === '#text' ? this.range.endContainer.parentElement :\n            this.range.endContainer;\n    };\n    EnterKeyAction.prototype.enterHandler = function (e) {\n        var _this = this;\n        this.getRangeNode();\n        var isTableEnter = true;\n        this.formatTags = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'blockquote'];\n        if (!isNOU(this.startNode.closest('TABLE')) && !isNOU(this.endNode.closest('TABLE'))) {\n            isTableEnter = false;\n            var curElement = this.startNode;\n            var blockElement = curElement;\n            while (!this.parent.formatter.editorManager.domNode.isBlockNode(curElement)) {\n                curElement = curElement.parentElement;\n                blockElement = curElement;\n            }\n            isTableEnter = blockElement.tagName === 'TD' || blockElement.tagName === 'TBODY' ? false : true;\n        }\n        if (e.args.which === 13 && !e.args.ctrlKey && (!Browser.isDevice ? e.args.code === 'Enter' : e.args.key === 'Enter')) {\n            if (isNOU(this.startNode.closest('LI, UL, OL')) && isNOU(this.endNode.closest('LI, UL, OL')) && isTableEnter &&\n                isNOU(this.startNode.closest('PRE')) && isNOU(this.endNode.closest('PRE'))) {\n                var shiftKey_1 = e.args.shiftKey;\n                var actionBeginArgs = {\n                    cancel: false,\n                    name: events.actionBegin,\n                    requestType: shiftKey_1 ? 'ShiftEnterAction' : 'EnterAction',\n                    originalEvent: e.args\n                };\n                this.parent.trigger(events.actionBegin, actionBeginArgs, function (actionBeginArgs) {\n                    if (!actionBeginArgs.cancel) {\n                        if (!(_this.range.startOffset === _this.range.endOffset && _this.range.startContainer === _this.range.endContainer)) {\n                            if (!(_this.range.startContainer.nodeName === 'SPAN' && (_this.range.startContainer.classList.contains('e-video-wrap') ||\n                                _this.range.startContainer.classList.contains('e-audio-wrap')))) {\n                                _this.range.deleteContents();\n                            }\n                            if (_this.range.startContainer.nodeName === '#text' && _this.range.startContainer.textContent.length === 0 &&\n                                _this.range.startContainer.parentElement !== _this.parent.inputElement) {\n                                if (_this.parent.enterKey === 'BR') {\n                                    _this.range.startContainer.parentElement.innerHTML = '&#8203;';\n                                }\n                                else {\n                                    _this.range.startContainer.parentElement.innerHTML = '<br>';\n                                }\n                            }\n                            else if (_this.range.startContainer === _this.parent.inputElement && _this.range.startContainer.innerHTML === '') {\n                                _this.range.startContainer.innerHTML = '<br>';\n                                var focusElem = _this.range.startContainer.childNodes[_this.range.startOffset];\n                                _this.parent.formatter.editorManager.nodeSelection.setCursorPoint(_this.parent.contentModule.getDocument(), focusElem, 0);\n                            }\n                            else if (_this.parent.inputElement === _this.range.startContainer) {\n                                var focusElem = _this.range.startContainer.childNodes[_this.range.startOffset];\n                                if (focusElem.nodeName === '#text' && focusElem.textContent.length === 0) {\n                                    _this.parent.formatter.editorManager.nodeSelection.setCursorPoint(_this.parent.contentModule.getDocument(), focusElem, focusElem.textContent.length === 0 ? 0 : focusElem.previousSibling.textContent.length);\n                                }\n                                else {\n                                    _this.parent.formatter.editorManager.nodeSelection.setCursorPoint(_this.parent.contentModule.getDocument(), focusElem, focusElem.textContent.length >= 0 ? 0 : 1);\n                                    if (focusElem.previousSibling.textContent.length === 0) {\n                                        detach(focusElem.previousSibling);\n                                        if (!shiftKey_1) {\n                                            var currentFocusElem = !isNOU(focusElem.lastChild) ? focusElem.lastChild : focusElem;\n                                            while (!isNOU(currentFocusElem) && currentFocusElem.nodeName !== '#text' && currentFocusElem.nodeName !== 'BR') {\n                                                currentFocusElem = currentFocusElem.lastChild;\n                                            }\n                                            if (currentFocusElem.nodeName !== 'BR' && currentFocusElem.parentElement.textContent.length === 0 && currentFocusElem.parentElement.innerHTML.length === 0 &&\n                                                currentFocusElem.parentElement.nodeName !== 'BR') {\n                                                currentFocusElem.parentElement.appendChild(_this.parent.createElement('BR'));\n                                            }\n                                            _this.parent.formatter.editorManager.nodeSelection.setCursorPoint(_this.parent.contentModule.getDocument(), currentFocusElem.nodeName === 'BR' ? currentFocusElem : currentFocusElem.parentElement, currentFocusElem.parentElement.textContent.length >= 0 || currentFocusElem.nodeName === 'BR' ? 0 : 1);\n                                        }\n                                    }\n                                    else if (focusElem.textContent.length === 0) {\n                                        var currentFocusElem = focusElem.previousSibling.nodeName === '#text' ? focusElem.previousSibling : focusElem.previousSibling.lastChild;\n                                        while (!isNOU(currentFocusElem) && currentFocusElem.nodeName !== '#text') {\n                                            currentFocusElem = currentFocusElem.lastChild;\n                                        }\n                                        _this.parent.formatter.editorManager.nodeSelection.setCursorPoint(_this.parent.contentModule.getDocument(), currentFocusElem, currentFocusElem.textContent.length);\n                                        detach(focusElem);\n                                    }\n                                    else if (_this.parent.enterKey !== 'BR' &&\n                                        focusElem.previousSibling.textContent.length !== 0 && focusElem.textContent.length !== 0) {\n                                        e.args.preventDefault();\n                                        return;\n                                    }\n                                }\n                                _this.getRangeNode();\n                            }\n                        }\n                        if (_this.range.startContainer === _this.range.endContainer &&\n                            _this.range.startOffset === _this.range.endOffset && _this.range.startContainer === _this.parent.inputElement) {\n                            if (!(_this.parent.inputElement.childNodes.length === 1 && _this.parent.inputElement.childNodes[0].nodeName === 'TABLE')) {\n                                if (isNOU(_this.range.startContainer.childNodes[_this.range.startOffset])) {\n                                    var currentLastElem = _this.range.startContainer.childNodes[_this.range.startOffset - 1];\n                                    while (currentLastElem.lastChild !== null && currentLastElem.nodeName !== '#text') {\n                                        currentLastElem = currentLastElem.lastChild;\n                                    }\n                                    _this.parent.formatter.editorManager.nodeSelection.setCursorPoint(_this.parent.contentModule.getDocument(), currentLastElem, (currentLastElem.nodeName === 'BR' ? 0 : currentLastElem.textContent.length));\n                                }\n                                else {\n                                    _this.parent.formatter.editorManager.nodeSelection.setCursorPoint(_this.parent.contentModule.getDocument(), _this.range.startContainer.childNodes[_this.range.startOffset], 0);\n                                }\n                            }\n                            _this.getRangeNode();\n                        }\n                        if ((_this.parent.enterKey === 'P' && !shiftKey_1) || (_this.parent.enterKey === 'DIV' && !shiftKey_1) ||\n                            (_this.parent.shiftEnterKey === 'P' && shiftKey_1) ||\n                            (_this.parent.shiftEnterKey === 'DIV' && shiftKey_1)) {\n                            if (_this.range.startOffset === 1 && _this.parent.inputElement.childNodes.length === 1 && _this.parent.inputElement.childNodes[0].nodeName === 'TABLE') {\n                                var newElem = _this.createInsertElement(shiftKey_1);\n                                newElem.appendChild(_this.parent.createElement('BR'));\n                                _this.parent.inputElement.appendChild(newElem);\n                                _this.parent.formatter.editorManager.nodeSelection.setCursorPoint(_this.parent.contentModule.getDocument(), newElem, 0);\n                            }\n                            else {\n                                var nearBlockNode = void 0;\n                                if (isTableEnter && _this.parent.formatter.editorManager.domNode.isBlockNode(_this.startNode)) {\n                                    nearBlockNode = _this.startNode;\n                                }\n                                else {\n                                    nearBlockNode = _this.parent.formatter.editorManager.domNode.blockParentNode(_this.startNode);\n                                }\n                                var isMediaNode = false; // To check the image audio and video node cases\n                                var isFocusedFirst = false;\n                                if (_this.range.startOffset !== 0 && _this.range.endOffset !== 0 &&\n                                    _this.range.startContainer === _this.range.endContainer && !(!isNOU(nearBlockNode.childNodes[0])\n                                    && (nearBlockNode.childNodes[0].nodeName === 'IMG' || nearBlockNode.querySelectorAll('img, audio, video').length > 0))) {\n                                    var startNodeText = _this.range.startContainer.textContent;\n                                    var splitFirstText = startNodeText.substring(0, _this.range.startOffset);\n                                    // eslint-disable-next-line max-len\n                                    if (splitFirstText.charCodeAt(_this.range.startOffset - 1) !== 160 && splitFirstText.trim().length === 0) {\n                                        isFocusedFirst = true;\n                                    }\n                                }\n                                else if (_this.range.startOffset === 0 && _this.range.endOffset === 0) {\n                                    isFocusedFirst = true;\n                                }\n                                _this.removeBRElement(nearBlockNode);\n                                var fireFoxEnterAtMiddle = Browser.userAgent.indexOf('Firefox') !== -1 && _this.range.startOffset === 0 && _this.range.startContainer === _this.range.endContainer &&\n                                    _this.range.startContainer.nodeName === '#text' && !_this.parent.formatter.editorManager.domNode.isBlockNode(_this.range.startContainer.previousSibling) &&\n                                    _this.range.startContainer.parentElement === _this.range.startContainer.previousSibling.parentElement;\n                                // eslint-disable-next-line max-len\n                                if (!fireFoxEnterAtMiddle && ((_this.range.startOffset === 0 && _this.range.endOffset === 0) || isFocusedFirst) &&\n                                    !(!isNOU(_this.range.startContainer.previousSibling) &&\n                                        (_this.range.startContainer.previousSibling.nodeName === 'IMG' || _this.range.startContainer.previousSibling.nodeName === 'BR'))) {\n                                    var isNearBlockLengthZero = void 0;\n                                    var newElem = void 0;\n                                    if (!isNOU(_this.range.startContainer.childNodes) &&\n                                        (_this.range.startContainer.textContent.length === 0 ||\n                                            (_this.range.startContainer.nodeName !== '#text' && !isNOU(_this.range.startContainer.querySelector('.e-video-clickelem')) &&\n                                                _this.range.startContainer.querySelector('.e-video-clickelem').textContent.length === 0)) &&\n                                        (_this.range.startContainer.querySelectorAll('img, audio, video').length > 0 ||\n                                            !isNOU(_this.range.startContainer.querySelector('.e-video-clickelem')) ||\n                                            _this.range.startContainer.nodeName === 'IMG' || _this.range.startContainer.nodeName === 'TABLE')) {\n                                        newElem = _this.createInsertElement(shiftKey_1);\n                                        isMediaNode = true;\n                                        isNearBlockLengthZero = false;\n                                    }\n                                    else {\n                                        if ((nearBlockNode.textContent.trim().length !== 0 ||\n                                            nearBlockNode.childNodes[0].nodeName === 'IMG' ||\n                                            (nearBlockNode.textContent.trim() === '' && nearBlockNode.querySelectorAll('img, audio, video').length > 0))) {\n                                            if ((_this.range.startOffset === _this.range.endOffset && _this.range.startOffset !== 0)) {\n                                                newElem = _this.parent.formatter.editorManager.nodeCutter.SplitNode(_this.range, nearBlockNode, false).cloneNode(true);\n                                            }\n                                            else {\n                                                newElem = _this.parent.formatter.editorManager.nodeCutter.SplitNode(_this.range, nearBlockNode, true).cloneNode(true);\n                                                isMediaNode = true;\n                                            }\n                                            isNearBlockLengthZero = false;\n                                        }\n                                        else {\n                                            newElem = _this.parent.formatter.editorManager.nodeCutter.SplitNode(_this.range, nearBlockNode, true).cloneNode(true);\n                                            isNearBlockLengthZero = true;\n                                        }\n                                    }\n                                    var insertElem = void 0;\n                                    if (_this.formatTags.indexOf(newElem.nodeName.toLocaleLowerCase()) < 0) {\n                                        insertElem = _this.createInsertElement(shiftKey_1);\n                                    }\n                                    else {\n                                        insertElem = _this.parent.createElement(newElem.nodeName);\n                                    }\n                                    while (newElem.firstChild) {\n                                        insertElem.appendChild(newElem.firstChild);\n                                    }\n                                    nearBlockNode.parentElement.insertBefore(insertElem, nearBlockNode);\n                                    if (!isNearBlockLengthZero) {\n                                        var currentFocusElem = insertElem;\n                                        var finalFocusElem = void 0;\n                                        if (_this.range.startOffset === _this.range.endOffset && _this.range.startOffset !== 0) {\n                                            while (!isNOU(currentFocusElem) && currentFocusElem.nodeName !== '#text' &&\n                                                currentFocusElem.nodeName !== 'BR') {\n                                                finalFocusElem = currentFocusElem;\n                                                currentFocusElem = currentFocusElem.lastChild;\n                                            }\n                                        }\n                                        else {\n                                            finalFocusElem = currentFocusElem;\n                                        }\n                                        finalFocusElem.innerHTML = '<br>';\n                                        if (!isMediaNode) {\n                                            detach(nearBlockNode);\n                                        }\n                                    }\n                                    _this.parent.formatter.editorManager.nodeSelection.setCursorPoint(_this.parent.contentModule.getDocument(), insertElem.nextElementSibling, 0);\n                                }\n                                else if (nearBlockNode.textContent.length === 0 && !(!isNOU(nearBlockNode.childNodes[0]) && nearBlockNode.childNodes[0].nodeName === 'IMG') && !(nearBlockNode.querySelectorAll('img').length > 0)) {\n                                    if (!isNOU(nearBlockNode.children[0]) && nearBlockNode.children[0].tagName !== 'BR') {\n                                        var newElem = _this.parent.formatter.editorManager.nodeCutter.SplitNode(_this.range, nearBlockNode, false).cloneNode(true);\n                                        _this.parent.formatter.editorManager.domNode.insertAfter(newElem, nearBlockNode);\n                                        _this.parent.formatter.editorManager.nodeSelection.setCursorPoint(_this.parent.contentModule.getDocument(), newElem, newElem.textContent.length >= 0 ? 0 : 1);\n                                    }\n                                    else {\n                                        var insertElem = _this.createInsertElement(shiftKey_1);\n                                        insertElem.innerHTML = '<br>';\n                                        _this.parent.formatter.editorManager.domNode.insertAfter(insertElem, nearBlockNode);\n                                        _this.parent.formatter.editorManager.nodeSelection.setCursorPoint(_this.parent.contentModule.getDocument(), insertElem, 0);\n                                    }\n                                }\n                                else if (_this.range.startContainer === _this.range.endContainer && _this.range.startContainer.nodeName === 'SPAN' &&\n                                    (_this.range.startContainer.classList.contains('e-video-wrap') ||\n                                        _this.range.startContainer.classList.contains('e-audio-wrap'))) {\n                                    if (nearBlockNode.textContent.trim().length > 0) {\n                                        var newElem = _this.parent.formatter.editorManager.nodeCutter.SplitNode(_this.range, nearBlockNode, true);\n                                        var audioVideoElem = !isNOU(newElem.previousSibling.querySelector('.e-video-wrap')) ?\n                                            newElem.previousSibling.querySelector('.e-video-wrap') : newElem.previousSibling.querySelector('.e-audio-wrap');\n                                        var isBRInserted = false;\n                                        var lastNode = audioVideoElem.previousSibling;\n                                        while (!isNOU(lastNode) && lastNode.nodeName !== '#text') {\n                                            lastNode = lastNode.lastChild;\n                                        }\n                                        if (isNOU(lastNode)) {\n                                            var brElm = _this.parent.createElement('br');\n                                            audioVideoElem.parentElement.appendChild(brElm);\n                                            isBRInserted = true;\n                                        }\n                                        if (isBRInserted) {\n                                            _this.parent.formatter.editorManager.nodeSelection.setCursorPoint(_this.parent.contentModule.getDocument(), audioVideoElem.parentElement, 0);\n                                        }\n                                        else {\n                                            _this.parent.formatter.editorManager.nodeSelection.setCursorPoint(_this.parent.contentModule.getDocument(), lastNode, lastNode.textContent.length);\n                                        }\n                                        detach(audioVideoElem);\n                                    }\n                                    else {\n                                        var newElem = _this.parent.formatter.editorManager.nodeCutter.SplitNode(_this.range, nearBlockNode, true);\n                                        var focusElem = newElem.previousSibling;\n                                        while (!isNOU(focusElem.firstChild)) {\n                                            detach(focusElem.firstChild);\n                                        }\n                                        var brElm = _this.parent.createElement('br');\n                                        focusElem.appendChild(brElm);\n                                        _this.parent.formatter.editorManager.nodeSelection.setCursorPoint(_this.parent.contentModule.getDocument(), focusElem, 0);\n                                    }\n                                    if (!isNOU(_this.parent.audioModule)) {\n                                        _this.parent.audioModule.hideAudioQuickToolbar();\n                                    }\n                                    if (!isNOU(_this.parent.videoModule)) {\n                                        _this.parent.videoModule.hideVideoQuickToolbar();\n                                    }\n                                }\n                                else {\n                                    var newElem = _this.parent.formatter.editorManager.nodeCutter.SplitNode(_this.range, nearBlockNode, true);\n                                    if (!isNOU(newElem.childNodes[0]) && newElem.childNodes[0].nodeName === '#text' &&\n                                        newElem.childNodes[0].textContent.length === 0) {\n                                        detach(newElem.childNodes[0]);\n                                    }\n                                    if (newElem.textContent.trim().length === 0) {\n                                        var brElm = _this.parent.createElement('br');\n                                        if (_this.startNode.nodeName === 'A') {\n                                            var startParentElem = _this.startNode.parentElement;\n                                            _this.startNode.parentElement.insertBefore(brElm, _this.startNode);\n                                            detach(_this.startNode);\n                                            _this.startNode = startParentElem;\n                                        }\n                                        else {\n                                            if (_this.startNode.nodeName !== 'BR') {\n                                                _this.startNode.appendChild(brElm);\n                                            }\n                                        }\n                                        if (newElem.childNodes[0].textContent === '\\n') {\n                                            detach(newElem.childNodes[0]);\n                                        }\n                                        _this.parent.formatter.editorManager.nodeSelection.setCursorPoint(_this.parent.contentModule.getDocument(), _this.startNode, 0);\n                                    }\n                                    if (((_this.parent.enterKey === 'P' || _this.parent.enterKey === 'DIV') && !shiftKey_1) || ((_this.parent.shiftEnterKey === 'DIV' ||\n                                        _this.parent.shiftEnterKey === 'P') && shiftKey_1)) {\n                                        var isHeadingTag = _this.formatTags.indexOf(newElem.nodeName.toLocaleLowerCase());\n                                        if ((isHeadingTag < 0) || (isHeadingTag >= 0 && newElem.textContent.trim().length === 0)) {\n                                            var insertElm = _this.createInsertElement(shiftKey_1);\n                                            while (newElem.firstChild) {\n                                                insertElm.appendChild(newElem.firstChild);\n                                            }\n                                            _this.parent.formatter.editorManager.domNode.insertAfter(insertElm, newElem);\n                                            detach(newElem);\n                                            _this.parent.formatter.editorManager.nodeSelection.setCursorPoint(_this.parent.contentModule.getDocument(), _this.parent.formatter.editorManager.domNode.isBlockNode(_this.startNode) ?\n                                                insertElm : _this.startNode, 0);\n                                        }\n                                    }\n                                }\n                            }\n                            e.args.preventDefault();\n                        }\n                        if ((_this.parent.enterKey === 'BR' && !shiftKey_1) || (_this.parent.shiftEnterKey === 'BR' && shiftKey_1)) {\n                            var currentParent = void 0;\n                            if (!_this.parent.formatter.editorManager.domNode.isBlockNode(_this.startNode)) {\n                                var currentNode = _this.startNode;\n                                var previousNode = currentNode;\n                                while (!_this.parent.formatter.editorManager.domNode.isBlockNode(currentNode)) {\n                                    previousNode = currentNode;\n                                    currentNode = currentNode.parentElement;\n                                }\n                                currentParent = currentNode === _this.parent.inputElement ?\n                                    previousNode : currentNode;\n                            }\n                            else {\n                                currentParent = _this.startNode;\n                            }\n                            _this.removeBRElement(currentParent);\n                            var isEmptyBrInserted = false;\n                            var currentParentLastChild = currentParent.lastChild;\n                            while (!isNOU(currentParentLastChild) && !(currentParentLastChild.nodeName === '#text' || currentParentLastChild.nodeName === 'BR'\n                                || currentParentLastChild.nodeName === 'IMG')) {\n                                currentParentLastChild = currentParentLastChild.lastChild;\n                            }\n                            var isLastNodeLength = _this.range.startContainer === currentParentLastChild ?\n                                _this.range.startContainer.textContent.length : currentParent.textContent.length;\n                            var isImageElement = (_this.range.startContainer.nodeName === 'IMG' || (_this.range.startContainer.childNodes.length > 0\n                                && _this.range.startContainer.childNodes[_this.range.startOffset].nodeName === 'IMG'));\n                            if (currentParent !== _this.parent.inputElement &&\n                                _this.parent.formatter.editorManager.domNode.isBlockNode(currentParent) &&\n                                _this.range.startOffset === _this.range.endOffset &&\n                                (_this.range.startOffset === isLastNodeLength ||\n                                    (currentParent.textContent.trim().length === 0 && isImageElement))) {\n                                var focusBRElem = _this.parent.createElement('br');\n                                if (_this.range.startOffset === 0 && _this.range.startContainer.nodeName === 'TABLE') {\n                                    _this.range.startContainer.parentElement.insertBefore(focusBRElem, _this.range.startContainer);\n                                }\n                                else {\n                                    if (currentParentLastChild.nodeName === 'BR' && currentParent.textContent.length === 0) {\n                                        _this.parent.formatter.editorManager.domNode.insertAfter(focusBRElem, currentParentLastChild);\n                                    }\n                                    else if (_this.range.startOffset === 0 && _this.range.endOffset === 0 && isImageElement) {\n                                        var imageElement = _this.range.startContainer.nodeName === 'IMG' ? _this.range.startContainer :\n                                            _this.range.startContainer.childNodes[_this.range.startOffset];\n                                        currentParent.insertBefore(focusBRElem, imageElement);\n                                        focusBRElem = imageElement;\n                                    }\n                                    else {\n                                        var lineBreakBRElem = _this.parent.createElement('br');\n                                        _this.parent.formatter.editorManager.domNode.insertAfter(focusBRElem, _this.range.startContainer);\n                                        _this.parent.formatter.editorManager.domNode.insertAfter(lineBreakBRElem, _this.range.startContainer);\n                                    }\n                                }\n                                _this.parent.formatter.editorManager.nodeSelection.setCursorPoint(_this.parent.contentModule.getDocument(), focusBRElem, 0);\n                            }\n                            else if (!isNOU(currentParent) && currentParent !== _this.parent.inputElement && currentParent.nodeName !== 'BR') {\n                                if (currentParent.textContent.trim().length === 0 || (currentParent.textContent.trim().length === 1 &&\n                                    currentParent.textContent.charCodeAt(0) === 8203)) {\n                                    var newElem = _this.parent.formatter.editorManager.nodeCutter.SplitNode(_this.range, currentParent, true).cloneNode(true);\n                                    _this.parent.formatter.editorManager.domNode.insertAfter(newElem, currentParent);\n                                    var outerBRElem = _this.parent.createElement('br');\n                                    newElem.parentElement.insertBefore(outerBRElem, newElem);\n                                    _this.parent.formatter.editorManager.nodeSelection.setCursorPoint(_this.parent.contentModule.getDocument(), newElem, 0);\n                                }\n                                else {\n                                    var newElem = void 0;\n                                    var outerBRElem = _this.parent.createElement('br');\n                                    if (_this.range.startOffset === 0 && _this.range.endOffset === 0 &&\n                                        !isNOU(currentParent.previousSibling) && currentParent.previousSibling.nodeName === 'BR' && currentParent.nodeName !== 'P' && currentParent.nodeName !== 'DIV') {\n                                        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                                        newElem = _this.parent.formatter.editorManager.nodeCutter.SplitNode(_this.range, currentParent, false).cloneNode(true);\n                                        _this.parent.formatter.editorManager.domNode.insertAfter(outerBRElem, currentParent);\n                                        _this.insertFocusContent();\n                                        var currentFocusElem = outerBRElem.nextSibling;\n                                        while (!isNOU(currentFocusElem) && currentFocusElem.nodeName !== '#text') {\n                                            currentFocusElem = currentFocusElem.lastChild;\n                                        }\n                                        _this.parent.formatter.editorManager.nodeSelection.setCursorPoint(_this.parent.contentModule.getDocument(), currentFocusElem, 0);\n                                        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                                        isEmptyBrInserted = true;\n                                    }\n                                    else {\n                                        _this.insertBRElement();\n                                    }\n                                }\n                            }\n                            else {\n                                _this.insertBRElement();\n                            }\n                            e.args.preventDefault();\n                        }\n                        _this.parent.trigger(events.actionComplete, { requestType: shiftKey_1 ? 'ShiftEnterAction' : 'EnterAction', args: e.args });\n                    }\n                });\n            }\n        }\n    };\n    EnterKeyAction.prototype.removeBRElement = function (currentElement) {\n        if (Browser.userAgent.indexOf('Firefox') !== -1 &&\n            this.range.endOffset === currentElement.textContent.length && (currentElement.textContent.length !== 0 ||\n            currentElement.querySelectorAll('BR').length > 1) &&\n            !isNOU(currentElement.lastChild) && currentElement.lastChild.nodeName === 'BR') {\n            detach(currentElement.lastChild);\n        }\n    };\n    EnterKeyAction.prototype.insertBRElement = function () {\n        var isEmptyBrInserted = false;\n        var isFocusTextNode = true;\n        if (this.range.endContainer.textContent.length === 0 && this.range.startContainer.nodeName === 'BR') {\n            isFocusTextNode = false;\n        }\n        var brElm = this.parent.createElement('br');\n        if (this.startNode.nodeName === 'BR' && this.endNode.nodeName === 'BR' && this.range.startOffset === 0 && this.range.startOffset === this.range.endOffset) {\n            this.parent.formatter.editorManager.domNode.insertAfter(brElm, this.startNode);\n            isEmptyBrInserted = true;\n        }\n        else {\n            if (this.startNode === this.parent.inputElement && !isNOU(this.range.startContainer.previousSibling) &&\n                this.range.startContainer.previousSibling.nodeName === 'BR' && this.range.startContainer.textContent.length === 0) {\n                isEmptyBrInserted = true;\n            }\n            this.range.insertNode(brElm);\n        }\n        if (isEmptyBrInserted || (!isNOU(brElm.nextElementSibling) && brElm.nextElementSibling.tagName === 'BR') || (!isNOU(brElm.nextSibling) && brElm.nextSibling.textContent.length > 0)) {\n            this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(), !isNOU(brElm.nextSibling) && isFocusTextNode ? brElm.nextSibling : brElm, 0);\n            isEmptyBrInserted = false;\n        }\n        else {\n            var brElm2 = this.parent.createElement('br');\n            this.range.insertNode(brElm2);\n            this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(), brElm, 0);\n        }\n    };\n    EnterKeyAction.prototype.insertFocusContent = function () {\n        if (this.range.startContainer.textContent.length === 0) {\n            if (this.range.startContainer.nodeName === '#text') {\n                this.range.startContainer.parentElement.innerHTML = '&#8203;';\n            }\n            else {\n                this.range.startContainer.innerHTML = '&#8203;';\n            }\n        }\n    };\n    EnterKeyAction.prototype.createInsertElement = function (shiftKey) {\n        var insertElem;\n        if ((this.parent.enterKey === 'DIV' && !shiftKey) || (this.parent.shiftEnterKey === 'DIV' && shiftKey)) {\n            insertElem = this.parent.createElement('div');\n        }\n        else if ((this.parent.enterKey === 'P' && !shiftKey) || (this.parent.shiftEnterKey === 'P' && shiftKey)) {\n            insertElem = this.parent.createElement('p');\n        }\n        var previousBlockNode = this.parent.formatter.editorManager.domNode.blockNodes()[0].previousSibling;\n        var nextBlockNode = this.parent.formatter.editorManager.domNode.blockNodes()[0].nextSibling;\n        if (!isNOU(previousBlockNode) && previousBlockNode.hasAttribute('style')) {\n            insertElem.setAttribute('style', previousBlockNode.getAttribute('style'));\n        }\n        if (isNOU(previousBlockNode) && !isNOU(nextBlockNode) && nextBlockNode.hasAttribute('style')) {\n            insertElem.setAttribute('style', nextBlockNode.getAttribute('style'));\n        }\n        return insertElem;\n    };\n    return EnterKeyAction;\n}());\nexport { EnterKeyAction };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, EventHandler, Complex, Browser, addClass, select, detach } from '@syncfusion/ej2-base';\nimport { Property, NotifyPropertyChanges, formatUnit, L10n, closest } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, Event, removeClass, print as printWindow, attributes } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, compile, append, extend, debounce } from '@syncfusion/ej2-base';\nimport { Touch as EJ2Touch } from '@syncfusion/ej2-base';\nimport { getScrollableParent } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { Render } from '../renderer/render';\nimport { ViewSource } from '../renderer/view-source';\nimport { executeGroup } from './interface';\nimport { ServiceLocator } from '../services/service-locator';\nimport { RendererFactory } from '../services/renderer-factory';\nimport { RenderType, ToolbarType, DialogType } from './enum';\nimport { ExecCommandCallBack } from '../actions/execute-command-callback';\nimport { KeyboardEvents } from '../actions/keyboard';\nimport { ToolbarSettings, ImageSettings, AudioSettings, VideoSettings, QuickToolbarSettings, FontFamily, FontSize, Format, NumberFormatList, BulletFormatList, FormatPainterSettings, EmojiSettings } from '../models/toolbar-settings';\nimport { FileManagerSettings } from '../models/toolbar-settings';\nimport { TableSettings, PasteCleanupSettings } from '../models/toolbar-settings';\nimport { FontColor, BackgroundColor } from '../models/toolbar-settings';\nimport { IFrameSettings } from '../models/iframe-settings';\nimport { InlineMode } from '../models/inline-mode';\nimport { defaultLocale } from '../models/default-locale';\nimport { setAttributes } from '../actions/html-attributes';\nimport { FullScreen } from '../actions/full-screen';\nimport { EnterKeyAction } from '../actions/enter-key';\nimport * as CONSTANT from '../../common/constant';\nimport { dispatchEvent, getEditValue, isIDevice, decode, isEditableValueEmpty, getDefaultValue } from '../base/util';\nimport { DialogRenderer } from '../renderer/dialog-renderer';\n/**\n * Represents the Rich Text Editor component.\n * ```html\n * <textarea id=\"rte\"></textarea>\n * <script>\n *  var rteObj = new RichTextEditor();\n *  rteObj.appendTo(\"#rte\");\n * </script>\n * ```\n */\nvar RichTextEditor = /** @class */ (function (_super) {\n    __extends(RichTextEditor, _super);\n    function RichTextEditor(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.needsID = true;\n        return _this;\n    }\n    /**\n     * To provide the array of modules needed for component rendering\n     *\n     * @returns {ModuleDeclaration[]} - specifies the declaration.\n     * @hidden\n     * @deprecated\n     */\n    RichTextEditor.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.toolbarSettings.enable) {\n            modules.push({ member: 'toolbar', args: [this, this.serviceLocator] });\n            modules.push({\n                member: 'link',\n                args: [this, this.serviceLocator]\n            });\n            modules.push({\n                member: 'table',\n                args: [this, this.serviceLocator]\n            });\n            modules.push({\n                member: 'image',\n                args: [this, this.serviceLocator]\n            });\n            if (this.quickToolbarSettings.enable) {\n                modules.push({ member: 'quickToolbar', args: [this, this.serviceLocator] });\n            }\n        }\n        if (this.showCharCount) {\n            modules.push({ member: 'count', args: [this, this.serviceLocator] });\n        }\n        if (this.editorMode === 'Markdown') {\n            modules.push({ member: 'markdownEditor', args: [this, this.serviceLocator] });\n        }\n        if (this.editorMode === 'HTML') {\n            modules.push({ member: 'htmlEditor', args: [this, this.serviceLocator] });\n            modules.push({ member: 'pasteCleanup', args: [this, this.serviceLocator] });\n            modules.push({\n                member: 'audio',\n                args: [this, this.serviceLocator]\n            });\n            modules.push({\n                member: 'video',\n                args: [this, this.serviceLocator]\n            });\n            modules.push({\n                member: 'formatPainter',\n                args: [this]\n            });\n            modules.push({\n                member: 'emojiPicker',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.fileManagerSettings.enable) {\n            modules.push({ member: 'fileManager', args: [this, this.serviceLocator] });\n        }\n        if (this.enableResize) {\n            modules.push({ member: 'resize', args: [this] });\n        }\n        return modules;\n    };\n    RichTextEditor.prototype.updateEnable = function () {\n        if (this.enabled) {\n            removeClass([this.element], classes.CLS_DISABLED);\n            this.element.setAttribute('aria-disabled', 'false');\n            if (!isNOU(this.htmlAttributes.tabindex)) {\n                this.inputElement.setAttribute('tabindex', this.htmlAttributes.tabindex);\n            }\n            else {\n                this.inputElement.setAttribute('tabindex', '0');\n            }\n        }\n        else {\n            if (this.getToolbar()) {\n                removeClass(this.getToolbar().querySelectorAll('.' + classes.CLS_ACTIVE), classes.CLS_ACTIVE);\n                removeClass([this.getToolbar()], [classes.CLS_TB_FLOAT, classes.CLS_TB_ABS_FLOAT]);\n            }\n            addClass([this.element], classes.CLS_DISABLED);\n            this.element.tabIndex = -1;\n            this.element.setAttribute('aria-disabled', 'true');\n            this.inputElement.setAttribute('tabindex', '-1');\n        }\n    };\n    /**\n     * setEnable method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    RichTextEditor.prototype.setEnable = function () {\n        this.updateEnable();\n        // eslint-disable-next-line\n        (this.enabled) ? this.eventInitializer() : this.unWireEvents();\n    };\n    RichTextEditor.prototype.initializeValue = function () {\n        this.isFocusOut = false;\n        this.isRTE = false;\n        this.isBlur = true;\n        this.defaultResetValue = null;\n        this.isResizeInitialized = false;\n    };\n    /**\n     * For internal use only - Initialize the event handler;\n     *\n     * @returns {void}\n     * @hidden\n     * @private\n     */\n    RichTextEditor.prototype.preRender = function () {\n        this.initializeValue();\n        this.onBlurHandler = this.blurHandler.bind(this);\n        this.onFocusHandler = this.focusHandler.bind(this);\n        this.onResizeHandler = this.resizeHandler.bind(this);\n        this.clickPoints = { clientX: 0, clientY: 0 };\n        this.initialValue = this.value;\n        this.serviceLocator = new ServiceLocator;\n        this.initializeServices();\n        this.setContainer();\n        this.persistData();\n        setStyleAttribute(this.element, { 'width': formatUnit(this.width) });\n        attributes(this.element, { role: 'application', 'aria-label': 'Rich Text Editor' });\n    };\n    RichTextEditor.prototype.persistData = function () {\n        if (this.enablePersistence && this.originalElement.tagName === 'TEXTAREA') {\n            this.element.id = this.originalElement.id + '_wrapper';\n            var data = window.localStorage.getItem(this.getModuleName() + this.element.id);\n            if (!(isNOU(data) || (data === ''))) {\n                this.setProperties(JSON.parse(data), true);\n            }\n        }\n    };\n    RichTextEditor.prototype.setContainer = function () {\n        this.originalElement = this.element.cloneNode(true);\n        if (this.value === null || this.valueTemplate !== null) {\n            this.setValue();\n        }\n        if (this.element.hasAttribute('tabindex')) {\n            this.htmlAttributes = { 'tabindex': this.element.getAttribute('tabindex') };\n            this.element.removeAttribute('tabindex');\n        }\n        this.element.innerHTML = '';\n        var invalidAttr = ['class', 'style', 'id', 'ejs-for'];\n        var htmlAttr = {};\n        for (var a = 0; a < this.element.attributes.length; a++) {\n            if (invalidAttr.indexOf(this.element.attributes[a].name) === -1 &&\n                !(/^data-val/.test(this.element.attributes[a].name))) { // data-val for asp.net core data annotation validation.\n                htmlAttr[this.element.attributes[a].name] = this.element.getAttribute(this.element.attributes[a].name);\n            }\n        }\n        extend(htmlAttr, this.htmlAttributes, htmlAttr);\n        this.setProperties({ htmlAttributes: htmlAttr }, true);\n        if (!isNOU(this.htmlAttributes.id)) {\n            this.element.id = this.htmlAttributes.id;\n        }\n        if (this.element.tagName === 'TEXTAREA') {\n            var rteOuterWrapper = this.createElement('div', {\n                className: this.element.getAttribute('class')\n            });\n            this.element.innerHTML = '';\n            this.element.parentElement.insertBefore(rteOuterWrapper, this.element);\n            this.valueContainer = this.element;\n            removeClass([this.valueContainer], this.element.getAttribute('class').split(' '));\n            this.element = rteOuterWrapper;\n        }\n        else {\n            this.valueContainer = this.createElement('textarea', {\n                id: this.getID() + '-value',\n                attrs: { 'aria-labelledby': this.getID() }\n            });\n        }\n        this.valueContainer.name = this.getID();\n        addClass([this.valueContainer], classes.CLS_RTE_HIDDEN);\n        if (!isNOU(this.cssClass)) {\n            var currentClassList = this.cssClass.split(' ');\n            for (var i = 0; i < currentClassList.length; i++) {\n                addClass([this.valueContainer], currentClassList[i]);\n            }\n        }\n        this.element.appendChild(this.valueContainer);\n    };\n    /**\n     * getPersistData method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    RichTextEditor.prototype.getPersistData = function () {\n        return this.addOnPersist(['value']);\n    };\n    /**\n     * Focuses the Rich Text Editor component\n     *\n     * @returns {void}\n     * @public\n     */\n    RichTextEditor.prototype.focusIn = function () {\n        if (this.enabled) {\n            this.inputElement.focus();\n            this.focusHandler({});\n        }\n    };\n    /**\n     * Blurs the Rich Text Editor component\n     *\n     * @returns {void}\n     * @public\n     */\n    RichTextEditor.prototype.focusOut = function () {\n        if (this.enabled) {\n            this.inputElement.blur();\n            this.blurHandler({});\n        }\n    };\n    /**\n     * Selects all the content in RichTextEditor\n     *\n     * @returns {void}\n     * @public\n     */\n    RichTextEditor.prototype.selectAll = function () {\n        this.notify(events.selectAll, {});\n    };\n    /**\n     * Selects a content range or an element\n     *\n     * @param {Range} range - Specify the range which you want to select within the content.\n     * The method used to select a particular sentence or word or entire document.\n     *\n     * @returns {void}\n     * @public\n     */\n    RichTextEditor.prototype.selectRange = function (range) {\n        this.notify(events.selectRange, { range: range });\n    };\n    /**\n     * Retrieves the HTML markup content from currently selected content of RichTextEditor.\n     *\n     * @returns {void}\n     * @public\n     */\n    RichTextEditor.prototype.getSelection = function () {\n        var str = '';\n        this.notify(events.getSelectedHtml, {\n            callBack: function (txt) {\n                str = txt;\n            }\n        });\n        return str;\n    };\n    /**\n     * Shows the emoji picker\n     *\n     * @param {number} x - specifies the number value.\n     * @param {number} y - specifies the number value.\n     * @returns {void}\n     * @public\n     */\n    RichTextEditor.prototype.showEmojiPicker = function (x, y) {\n        if (this.readonly) {\n            return;\n        }\n        this.notify(events.emojiPicker, { x: x, y: y });\n    };\n    /**\n     * Executes the commands\n     *\n     * @returns {void}\n     * @param {CommandName} commandName - Specifies the name of the command to be executed.\n     * @param {string | HTMLElement | ILinkCommandsArgs | IImageCommandsArgs} value - Specifies the value that you want to execute.\n     * @param {ExecuteCommandOption} option - specifies the command option\n     * @public\n     */\n    RichTextEditor.prototype.executeCommand = function (commandName, value, option) {\n        value = this.htmlPurifier(commandName, value);\n        var internalValue;\n        if (this.editorMode === 'HTML') {\n            var range = this.getRange();\n            if (this.iframeSettings.enable) {\n                this.formatter.editorManager.nodeSelection.Clear(this.element.ownerDocument);\n            }\n            var toFocus = (this.iframeSettings.enable &&\n                range.startContainer === this.inputElement) ? true : !this.inputElement.contains(range.startContainer);\n            if (toFocus) {\n                this.focusIn();\n            }\n        }\n        var tool = executeGroup[\"\" + commandName];\n        if (option && option.undo) {\n            if (option.undo && this.formatter.getUndoRedoStack().length === 0) {\n                this.formatter.saveData();\n            }\n        }\n        if (this.maxLength !== -1 && !isNOU(tool.command)) {\n            var currentInsertContentLength = 0;\n            if (tool.command === 'Links') {\n                currentInsertContentLength = value.text.length === 0 ?\n                    value.url.length : value.text.length;\n            }\n            if (tool.command === 'Images' || tool.command === 'Table' || tool.command === 'Files') {\n                currentInsertContentLength = 1;\n            }\n            if (tool.command === 'InsertHTML') {\n                if (!isNOU(value)) {\n                    var tempElem = this.createElement('div');\n                    tempElem.innerHTML = value;\n                    currentInsertContentLength = tempElem.textContent.length;\n                }\n                else if (!isNOU(tool.value) && (tool.value === '<hr/>' || tool.value === '<br/>')) {\n                    currentInsertContentLength = 1;\n                }\n            }\n            if (tool.command === 'InsertText') {\n                currentInsertContentLength = value.length;\n            }\n            var currentLength = this.getText().trim().length;\n            var selectionLength = this.getSelection().length;\n            var totalLength = (currentLength - selectionLength) + currentInsertContentLength;\n            if (!(this.maxLength === -1 || totalLength <= this.maxLength)) {\n                return;\n            }\n        }\n        internalValue = value;\n        if (tool.command === 'FormatPainter') {\n            if (!isNOU(value)) {\n                this.formatPainterSettings = value;\n            }\n            internalValue = {\n                formatPainterAction: tool.value\n            };\n        }\n        this.formatter.editorManager.execCommand(tool.command, tool.subCommand ? tool.subCommand : (internalValue ? internalValue : tool.value), null, null, (internalValue ? internalValue : tool.value), (internalValue ? internalValue : tool.value));\n        if (option && option.undo) {\n            this.formatter.saveData();\n            this.formatter.enableUndo(this);\n        }\n        this.setPlaceHolder();\n        this.notify(events.contentChanged, {});\n    };\n    RichTextEditor.prototype.htmlPurifier = function (command, value) {\n        if (this.editorMode === 'HTML') {\n            switch (command) {\n                case 'insertHTML':\n                    if (this.enableHtmlSanitizer) {\n                        if (typeof value === 'string') {\n                            value = this.htmlEditorModule.sanitizeHelper(value);\n                        }\n                        else {\n                            value = this.htmlEditorModule.sanitizeHelper(value.outerHTML);\n                        }\n                    }\n                    break;\n                case 'insertTable':\n                    if (isNOU(value.width)) {\n                        value.width = { minWidth: this.tableSettings.minWidth,\n                            maxWidth: this.tableSettings.maxWidth, width: this.tableSettings.width };\n                    }\n                    break;\n                case 'insertImage': {\n                    var temp = this.createElement('img', {\n                        attrs: {\n                            src: value.url\n                        }\n                    });\n                    var imageValue = temp.outerHTML;\n                    if (this.enableHtmlSanitizer) {\n                        imageValue = this.htmlEditorModule.sanitizeHelper(temp.outerHTML);\n                    }\n                    var url = (imageValue !== '' && (this.createElement('div', {\n                        innerHTML: imageValue\n                    }).firstElementChild).getAttribute('src')) || null;\n                    url = !isNOU(url) ? url : '';\n                    value.url = url;\n                    if (isNOU(value.width)) {\n                        value.width = { minWidth: this.insertImageSettings.minWidth,\n                            maxWidth: this.insertImageSettings.maxWidth, width: this.insertImageSettings.width };\n                    }\n                    if (isNOU(value.height)) {\n                        value.height = { minHeight: this.insertImageSettings.minHeight,\n                            maxHeight: this.insertImageSettings.maxHeight, height: this.insertImageSettings.height };\n                    }\n                    break;\n                }\n                case 'insertAudio': {\n                    var wrapTemp = this.createElement('audio', {\n                        attrs: {\n                            controls: ''\n                        }\n                    });\n                    var temp = this.createElement('source', {\n                        attrs: {\n                            src: value.url,\n                            type: value.url && value.url.split('.').length > 0\n                                ? 'audio/' + value.url.split('.')[value.url.split('.').length - 1] : ''\n                        }\n                    });\n                    wrapTemp.appendChild(temp);\n                    var audioValue = wrapTemp.outerHTML;\n                    if (this.enableHtmlSanitizer) {\n                        audioValue = this.htmlEditorModule.sanitizeHelper(wrapTemp.outerHTML);\n                    }\n                    var url = (audioValue !== '' && (this.createElement('div', {\n                        innerHTML: audioValue\n                    }).firstElementChild.firstElementChild).getAttribute('src')) || null;\n                    url = !isNOU(url) ? url : '';\n                    value.url = url;\n                    break;\n                }\n                case 'insertVideo': {\n                    var wrapTemp = this.createElement('video', {\n                        attrs: {\n                            controls: ''\n                        }\n                    });\n                    var temp = this.createElement('source', {\n                        attrs: {\n                            src: value.url,\n                            type: value.url && value.url.split('.').length > 0\n                                ? 'video/' + value.url.split('.')[value.url.split('.').length - 1] : ''\n                        }\n                    });\n                    wrapTemp.appendChild(temp);\n                    var audioValue = wrapTemp.outerHTML;\n                    if (this.enableHtmlSanitizer) {\n                        audioValue = this.htmlEditorModule.sanitizeHelper(temp.outerHTML);\n                    }\n                    var url = (audioValue !== '' && (this.createElement('div', {\n                        innerHTML: audioValue\n                    }).firstElementChild).getAttribute('src')) || null;\n                    url = !isNOU(url) ? url : '';\n                    value.url = url;\n                    if (isNOU(value.width)) {\n                        value.width = { minWidth: this.insertVideoSettings.minWidth,\n                            maxWidth: this.insertVideoSettings.maxWidth, width: this.insertVideoSettings.width };\n                    }\n                    if (isNOU(value.height)) {\n                        value.height = { minHeight: this.insertVideoSettings.minHeight,\n                            maxHeight: this.insertVideoSettings.maxHeight, height: this.insertVideoSettings.height };\n                    }\n                    break;\n                }\n                case 'createLink': {\n                    var tempNode = this.createElement('a', {\n                        attrs: {\n                            href: value.url\n                        }\n                    });\n                    var linkValue = tempNode.outerHTML;\n                    if (this.enableHtmlSanitizer) {\n                        linkValue = this.htmlEditorModule.sanitizeHelper(tempNode.outerHTML);\n                    }\n                    var href = (linkValue !== '' && (this.createElement('div', {\n                        innerHTML: linkValue\n                    }).firstElementChild).getAttribute('href')) || null;\n                    href = !isNOU(href) ? href : '';\n                    value.url = href;\n                    break;\n                }\n            }\n        }\n        return value;\n    };\n    RichTextEditor.prototype.encode = function (value) {\n        var divNode = this.createElement('div');\n        divNode.innerText = value.trim();\n        // eslint-disable-next-line\n        return divNode.innerHTML.replace(/<br\\s*[\\/]?>/gi, '\\n');\n    };\n    /**\n     * For internal use only - To Initialize the component rendering.\n     *\n     * @returns {void}\n     * @private\n     * @deprecated\n     */\n    RichTextEditor.prototype.render = function () {\n        if (this.value && !this.valueTemplate) {\n            this.setProperties({ value: this.serializeValue(this.value) }, true);\n        }\n        this.renderModule = new Render(this, this.serviceLocator);\n        this.sourceCodeModule = new ViewSource(this, this.serviceLocator);\n        this.notify(events.initialLoad, {});\n        this.trigger(events.load);\n        this.RTERender();\n        // eslint-disable-next-line\n        var execCommandCallBack = new ExecCommandCallBack(this);\n        this.notify(events.initialEnd, {});\n        if (this.enableXhtml) {\n            this.setProperties({ value: this.getXhtml() }, true);\n        }\n        if (this.toolbarSettings.enable && this.toolbarSettings.type === 'Expand' && !isNOU(this.getToolbar()) &&\n            (this.toolbarSettings.items.indexOf('Undo') > -1 && this.toolbarSettings.items.indexOf('Redo') > -1)) {\n            this.disableToolbarItem(['Undo', 'Redo']);\n        }\n        this.setContentHeight();\n        if (this.value !== null) {\n            this.valueContainer.defaultValue = this.value;\n        }\n        // eslint-disable-next-line\n        (this.enabled && !this.readonly) ? this.eventInitializer() : this.unWireEvents();\n        this.notify(events.bindCssClass, { cssClass: this.cssClass });\n        this.addAudioVideoWrapper();\n        this.notify(events.tableclass, {});\n        this.renderComplete();\n    };\n    /**\n     * addAudioVideoWrapper method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    RichTextEditor.prototype.addAudioVideoWrapper = function () {\n        var _this = this;\n        var insertElem;\n        var audioElm = this.element.querySelectorAll('audio');\n        for (var i = 0; i < audioElm.length; i++) {\n            if (!audioElm[i].classList.contains('e-rte-audio')) {\n                audioElm[i].classList.add('e-rte-audio');\n                audioElm[i].classList.add(classes.CLS_AUDIOINLINE);\n            }\n            // eslint-disable-next-line max-len\n            if (!audioElm[i].parentElement.classList.contains(classes.CLS_CLICKELEM) && !audioElm[i].parentElement.classList.contains(classes.CLS_AUDIOWRAP)) {\n                var audioWrapElem = this.createElement('span', { className: classes.CLS_AUDIOWRAP });\n                audioWrapElem.setAttribute('style', 'width:300px; margin:0 auto;');\n                audioWrapElem.contentEditable = 'false';\n                var audioInnerWrapElem = this.createElement('span', { className: classes.CLS_CLICKELEM });\n                audioWrapElem.appendChild(audioInnerWrapElem);\n                audioElm[i].parentNode.insertBefore(audioWrapElem, audioElm[i].nextSibling);\n                audioInnerWrapElem.appendChild(audioElm[i]);\n                if (audioWrapElem.nextElementSibling === null) {\n                    insertElem = this.createElement('br');\n                    audioWrapElem.parentNode.insertBefore(insertElem, audioWrapElem.nextSibling);\n                }\n            }\n        }\n        var videoElm = this.element.querySelectorAll('video');\n        for (var i = 0; i < videoElm.length; i++) {\n            if (!videoElm[i].classList.contains('e-rte-video')) {\n                videoElm[i].classList.add('e-rte-video');\n                videoElm[i].classList.add(classes.CLS_VIDEOINLINE);\n            }\n            // eslint-disable-next-line max-len\n            if (!videoElm[i].parentElement.classList.contains(classes.CLS_CLICKELEM) && !videoElm[i].parentElement.classList.contains(classes.CLS_VIDEOWRAP)) {\n                var videoWrapElem = this.createElement('span', { className: classes.CLS_VIDEOWRAP });\n                videoWrapElem.contentEditable = 'false';\n                videoElm[i].parentNode.insertBefore(videoWrapElem, videoElm[i].nextSibling);\n                videoWrapElem.appendChild(videoElm[i]);\n                if (videoWrapElem.nextElementSibling === null) {\n                    insertElem = this.createElement('br');\n                    videoWrapElem.parentNode.insertBefore(insertElem, videoWrapElem.nextSibling);\n                }\n            }\n            if (Browser.userAgent.indexOf('Firefox') !== -1) {\n                // eslint-disable-next-line\n                videoElm[i].addEventListener('play', function (args) {\n                    _this.notify(events.mouseDown, { args: args });\n                    _this.notify('editAreaClick', { args: args });\n                });\n                // eslint-disable-next-line\n                videoElm[i].addEventListener('pause', function (args) {\n                    _this.notify(events.mouseDown, { args: args });\n                    _this.notify('editAreaClick', { args: args });\n                });\n            }\n        }\n    };\n    /**\n     * For internal use only - Initialize the event handler\n     *\n     * @returns {void}\n     * @private\n     * @deprecated\n     * @hidden\n     */\n    RichTextEditor.prototype.eventInitializer = function () {\n        this.wireEvents();\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    RichTextEditor.prototype.cleanList = function (e) {\n        var range = this.getRange();\n        var currentStartContainer = range.startContainer;\n        var currentEndContainer = range.endContainer;\n        var currentStartOffset = range.startOffset;\n        var isSameContainer = currentStartContainer === currentEndContainer ? true : false;\n        // eslint-disable-next-line\n        var currentEndOffset = currentEndContainer.textContent.length;\n        var endNode = range.endContainer.nodeName === '#text' ? range.endContainer.parentElement :\n            range.endContainer;\n        var closestLI = closest(endNode, 'LI');\n        var isDetached = false;\n        if (!isNOU(closestLI) && endNode.textContent.length === range.endOffset &&\n            !range.collapsed && isNOU(endNode.nextElementSibling)) {\n            for (var i = 0; i < closestLI.childNodes.length; i++) {\n                if (closestLI.childNodes[i].nodeName === '#text' && closestLI.childNodes[i].textContent.trim().length === 0) {\n                    detach(closestLI.childNodes[i]);\n                    isDetached = true;\n                    i--;\n                }\n            }\n            var currentLastElem = closestLI;\n            while (currentLastElem.lastChild !== null && currentLastElem.nodeName !== '#text') {\n                currentLastElem = currentLastElem.lastChild;\n            }\n            if (isDetached) {\n                var currentLast = currentLastElem.nodeName === 'BR' && !isNOU(currentLastElem.previousSibling) ?\n                    currentLastElem.previousSibling : currentLastElem;\n                this.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(), isSameContainer ? currentLast : currentStartContainer, currentLast, currentStartOffset, (currentLast.nodeName === 'BR' ? 0 : currentLast.textContent.length));\n            }\n        }\n    };\n    /**\n     * For internal use only - keydown the event handler;\n     *\n     * @param {KeyboardEvent} e - specifies the event.\n     * @returns {void}\n     * @private\n     * @deprecated\n     * @hidden\n     */\n    RichTextEditor.prototype.keyDown = function (e) {\n        this.notify(events.keyDown, { member: 'keydown', args: e });\n        this.restrict(e);\n        if (this.editorMode === 'HTML') {\n            this.cleanList(e);\n        }\n        if (this.editorMode === 'HTML' && ((e.which === 8 && e.code === 'Backspace') || (e.which === 46 && e.code === 'Delete'))) {\n            var range = this.getRange();\n            var startNode = range.startContainer.nodeName === '#text' ? range.startContainer.parentElement :\n                range.startContainer;\n            if (closest(startNode, 'pre') &&\n                (e.which === 8 && range.startContainer.textContent.charCodeAt(range.startOffset - 1) === 8203) ||\n                (e.which === 46 && range.startContainer.textContent.charCodeAt(range.startOffset) === 8203)) {\n                // eslint-disable-next-line\n                var regEx = new RegExp(String.fromCharCode(8203), 'g');\n                var pointer = e.which === 8 ? range.startOffset - 1 : range.startOffset;\n                range.startContainer.textContent = range.startContainer.textContent.replace(regEx, '');\n                this.formatter.editorManager.nodeSelection.setCursorPoint(this.contentModule.getDocument(), range.startContainer, pointer);\n            }\n            else if ((e.code === 'Backspace' && e.which === 8) &&\n                range.startContainer.textContent.charCodeAt(0) === 8203 && range.collapsed) {\n                var parentEle = range.startContainer.parentElement;\n                var index = void 0;\n                var i = void 0;\n                for (i = 0; i < parentEle.childNodes.length; i++) {\n                    if (parentEle.childNodes[i] === range.startContainer) {\n                        index = i;\n                    }\n                }\n                var bool = true;\n                var removeNodeArray = [];\n                for (i = index; i >= 0; i--) {\n                    // eslint-disable-next-line max-len\n                    if (parentEle.childNodes[i].nodeType === 3 && parentEle.childNodes[i].textContent.charCodeAt(0) === 8203 && bool) {\n                        removeNodeArray.push(i);\n                    }\n                    else {\n                        bool = false;\n                    }\n                }\n                if (removeNodeArray.length > 0) {\n                    for (i = removeNodeArray.length - 1; i > 0; i--) {\n                        parentEle.childNodes[removeNodeArray[i]].textContent = '';\n                    }\n                }\n                this.formatter.editorManager.nodeSelection.setCursorPoint(this.contentModule.getDocument(), range.startContainer, range.startOffset);\n            }\n        }\n        var notFormatPainterCopy = isNOU(e.action) ? true : (e.action !== 'format-copy' ? true : false);\n        if (this.formatter.getUndoRedoStack().length === 0 && notFormatPainterCopy &&\n            !(e.altKey || e.shiftKey || (e.altKey && e.shiftKey && e.which === 67))) {\n            this.formatter.saveData();\n        }\n        if (e.action !== 'insert-link' &&\n            e.action !== 'format-copy' && e.action !== 'format-paste' &&\n            (!e.target || !(e.target.classList.contains('e-mention') && e.code === 'Tab')) &&\n            (e.action && e.action !== 'paste' && e.action !== 'space'\n                || e.which === 9 || (e.code === 'Backspace' && e.which === 8))) {\n            var FormatPainterEscapeAction = false;\n            if (!isNOU(this.formatPainterModule)) {\n                FormatPainterEscapeAction = this.formatPainterModule.previousAction === 'escape';\n            }\n            if (!FormatPainterEscapeAction) {\n                this.formatter.process(this, null, e);\n            }\n            switch (e.action) {\n                case 'toolbar-focus':\n                    if (this.toolbarSettings.enable && this.getToolbarElement()) {\n                        var firstActiveItem = this.getToolbarElement().querySelector('.e-toolbar-item:not(.e-overlay)[title]');\n                        firstActiveItem.firstElementChild.removeAttribute('tabindex');\n                        firstActiveItem.firstElementChild.focus();\n                    }\n                    break;\n                case 'escape':\n                    this.contentModule.getEditPanel().focus();\n                    break;\n            }\n        }\n        if (!isNOU(this.placeholder)) {\n            if ((!isNOU(this.placeHolderWrapper)) && (this.inputElement.textContent.length !== 1)) {\n                this.placeHolderWrapper.style.display = 'none';\n            }\n            else if (this.iframeSettings.enable && this.inputElement.classList.contains('e-rte-placeholder')) {\n                removeClass([this.inputElement], 'e-rte-placeholder');\n            }\n            else {\n                this.setPlaceHolder();\n            }\n        }\n        this.autoResize();\n    };\n    RichTextEditor.prototype.keyUp = function (e) {\n        if (this.editorMode === 'HTML') {\n            var range = this.getRange();\n            if (Browser.userAgent.indexOf('Firefox') !== -1 && range.startContainer.nodeName === '#text' &&\n                range.startContainer.parentElement === this.inputElement && this.enterKey !== 'BR') {\n                var range_1 = this.getRange();\n                var tempElem = this.createElement(this.enterKey);\n                range_1.startContainer.parentElement.insertBefore(tempElem, range_1.startContainer);\n                tempElem.appendChild(range_1.startContainer);\n                this.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(), tempElem.childNodes[0], tempElem.childNodes[0], tempElem.childNodes[0].textContent.length, tempElem.childNodes[0].textContent.length);\n            }\n        }\n        this.notify(events.keyUp, { member: 'keyup', args: e });\n        if (e.keyCode === 39 || e.keyCode === 37) {\n            this.notify(events.tableModulekeyUp, { member: 'tableModulekeyUp', args: e });\n        }\n        if (e.code === 'KeyX' && e.which === 88 && e.keyCode === 88 && e.ctrlKey && (this.inputElement.innerHTML === '' ||\n            this.inputElement.innerHTML === '<br>')) {\n            this.inputElement.innerHTML = getEditValue(getDefaultValue(this), this);\n        }\n        var allowedKeys = e.which === 32 || e.which === 13 || e.which === 8 || e.which === 46;\n        var formatPainterCopy = e.key === 'C' && e.altKey && e.shiftKey;\n        var formatPainterPaste = e.key === 'V' && e.altKey && e.shiftKey;\n        if ((!formatPainterCopy && !formatPainterPaste) && ((e.key !== 'shift' && !e.ctrlKey) && e.key && e.key.length === 1 || allowedKeys) || (this.editorMode === 'Markdown'\n            && ((e.key !== 'shift' && !e.ctrlKey) && e.key && e.key.length === 1 || allowedKeys)) && !this.inlineMode.enable) {\n            this.formatter.onKeyHandler(this, e);\n        }\n        if (this.inputElement && this.inputElement.textContent.length !== 0\n            || this.element.querySelectorAll('.e-toolbar-item.e-active').length > 0) {\n            this.notify(events.toolbarRefresh, { args: e });\n        }\n        if (!isNOU(this.placeholder)) {\n            if (!(e.key === 'Enter' && e.keyCode === 13) && (this.inputElement.innerHTML === '<p><br></p>' || this.inputElement.innerHTML === '<div><br></div>' ||\n                this.inputElement.innerHTML === '<br>')) {\n                this.setPlaceHolder();\n            }\n        }\n    };\n    /**\n     * @param {string} value - specifies the value.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    RichTextEditor.prototype.serializeValue = function (value) {\n        if (this.editorMode === 'HTML' && !isNOU(value)) {\n            if (this.enableHtmlEncode) {\n                value = this.htmlEditorModule.sanitizeHelper(decode(value));\n                value = this.encode(value);\n            }\n            else {\n                value = this.htmlEditorModule.sanitizeHelper(value);\n                value = this.enableXhtml ? this.htmlEditorModule.xhtmlValidation.selfEncloseValidation(value) : value;\n            }\n        }\n        return value;\n    };\n    /**\n     * This method will clean up the HTML against cross-site scripting attack and return the HTML as string.\n     * It's only applicable to editorMode as `HTML`.\n     *\n     * @param {string} value - Specifies the value that you want to sanitize.\n     * @returns {string} - specifies the the string value\n     */\n    RichTextEditor.prototype.sanitizeHtml = function (value) {\n        return this.serializeValue(value);\n    };\n    /**\n     * updateValue method\n     *\n     * @param {string} value - specifies the string value.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    RichTextEditor.prototype.updateValue = function (value) {\n        if (isNOU(value)) {\n            var inputVal = this.inputElement.innerHTML;\n            this.setProperties({ value: isEditableValueEmpty(inputVal) ? null : inputVal });\n        }\n        else {\n            this.setProperties({ value: value });\n        }\n    };\n    RichTextEditor.prototype.triggerEditArea = function (e) {\n        if (!isIDevice()) {\n            this.notify(events.editAreaClick, { member: 'editAreaClick', args: e });\n        }\n        else {\n            var touch = (e.touches ? e.changedTouches[0] : e);\n            if (this.clickPoints.clientX === touch.clientX && this.clickPoints.clientY === touch.clientY) {\n                this.notify(events.editAreaClick, { member: 'editAreaClick', args: e });\n            }\n        }\n    };\n    RichTextEditor.prototype.notifyMouseUp = function (e) {\n        var touch = (e.touches ? e.changedTouches[0] : e);\n        this.notify(events.mouseUp, { member: 'mouseUp', args: e,\n            touchData: { prevClientX: this.clickPoints.clientX, prevClientY: this.clickPoints.clientY,\n                clientX: touch.clientX, clientY: touch.clientY }\n        });\n        if (this.inputElement && ((this.editorMode === 'HTML' && this.inputElement.textContent.length !== 0) ||\n            (this.editorMode === 'Markdown' && this.inputElement.value.length !== 0)) || (e.target && (e.target.nodeName === 'VIDEO'\n            || e.target.querySelectorAll('.' + classes.CLS_VIDEOWRAP).length > 0) || (e.target && e.target.nodeName !== 'BR' &&\n            (e.target.classList.contains(classes.CLS_AUDIOWRAP) ||\n                e.target.classList.contains(classes.CLS_CLICKELEM) ||\n                e.target.classList.contains(classes.CLS_VID_CLICK_ELEM))))) {\n            this.notify(events.toolbarRefresh, { args: e });\n        }\n        this.triggerEditArea(e);\n    };\n    RichTextEditor.prototype.mouseUp = function (e) {\n        if (this.quickToolbarSettings.showOnRightClick && Browser.isDevice) {\n            var target = e.target;\n            var closestTable = closest(target, 'table');\n            if (target && target.nodeName === 'A' || target.nodeName === 'IMG' || (target.nodeName === 'TD' || target.nodeName === 'TH' ||\n                target.nodeName === 'TABLE' || (closestTable && this.contentModule.getEditPanel().contains(closestTable)))) {\n                return;\n            }\n        }\n        this.notifyMouseUp(e);\n        if (e.detail === 3) {\n            var range = this.getRange();\n            var selection = this.formatter.editorManager.domNode.getSelection();\n            if (/\\s+$/.test(selection.toString())) {\n                if (!isNOU(range.startContainer.parentElement) && (!isNOU(range.startContainer.parentElement.nextSibling) &&\n                    (range.startContainer.parentElement.nextSibling.nodeType !== 3 ||\n                        /\\s+$/.test(range.startContainer.parentElement.nextSibling.textContent)) || range.startOffset === range.endOffset)\n                    || range.startContainer.parentElement.tagName.toLocaleLowerCase() === 'li') {\n                    range.setStart(range.startContainer, range.startOffset);\n                    range.setEnd(range.startContainer, range.startContainer.textContent.length);\n                }\n            }\n        }\n    };\n    /**\n     * @param {Function} module - specifies the module function.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    RichTextEditor.prototype.ensureModuleInjected = function (module) {\n        return this.getInjectedModules().indexOf(module) >= 0;\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    RichTextEditor.prototype.onCopy = function () {\n        this.contentModule.getDocument().execCommand('copy', false, null);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    RichTextEditor.prototype.onCut = function () {\n        this.contentModule.getDocument().execCommand('cut', false, null);\n    };\n    /**\n     * @param {KeyboardEvent} e - specifies the keyboard event.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    RichTextEditor.prototype.onPaste = function (e) {\n        var _this = this;\n        var evenArgs = {\n            originalEvent: e,\n            cancel: false,\n            requestType: 'Paste'\n        };\n        this.trigger(events.actionBegin, evenArgs, function (pasteArgs) {\n            var currentLength = _this.inputElement.textContent.length;\n            var selectionLength = _this.getSelection().length;\n            var pastedContentLength = (isNOU(e) || isNOU(e.clipboardData))\n                ? 0 : e.clipboardData.getData('text/plain').length;\n            var totalLength = (currentLength - selectionLength) + pastedContentLength;\n            if (_this.editorMode === 'Markdown') {\n                var args_1 = { requestType: 'Paste', editorMode: _this.editorMode, event: e };\n                setTimeout(function () {\n                    _this.formatter.onSuccess(_this, args_1);\n                }, 0);\n                if (!(_this.maxLength === -1 || totalLength <= _this.maxLength)) {\n                    e.preventDefault();\n                }\n                return;\n            }\n            if (!pasteArgs.cancel && _this.inputElement.contentEditable === 'true' &&\n                (_this.maxLength === -1 || totalLength <= _this.maxLength)) {\n                if (!isNOU(_this.pasteCleanupModule)) {\n                    _this.notify(events.pasteClean, { args: e });\n                }\n                else {\n                    var args_2 = { requestType: 'Paste', editorMode: _this.editorMode, event: e };\n                    var value = null;\n                    var htmlValue = false;\n                    if (e && !isNOU(e.clipboardData)) {\n                        value = e.clipboardData.getData('text/plain');\n                        htmlValue = e.clipboardData.getData('text/html').indexOf('MsoNormal') > 0;\n                    }\n                    var file = e && e.clipboardData && e.clipboardData.items.length > 0 ?\n                        e.clipboardData.items[0].getAsFile() : null;\n                    if (value !== null) {\n                        _this.notify(events.paste, {\n                            file: file,\n                            args: e,\n                            text: value,\n                            isWordPaste: htmlValue\n                        });\n                    }\n                    setTimeout(function () {\n                        _this.formatter.onSuccess(_this, args_2);\n                    }, 0);\n                }\n            }\n            else {\n                e.preventDefault();\n            }\n        });\n    };\n    /**\n     * @param {string} action - specifies the string value.\n     * @param {MouseEvent} event - specifies the event.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    RichTextEditor.prototype.clipboardAction = function (action, event) {\n        switch (action.toLowerCase()) {\n            case 'cut':\n                this.onCut();\n                this.formatter.onSuccess(this, {\n                    requestType: 'Cut',\n                    editorMode: this.editorMode,\n                    event: event\n                });\n                break;\n            case 'copy':\n                this.onCopy();\n                this.formatter.onSuccess(this, {\n                    requestType: 'Copy',\n                    editorMode: this.editorMode,\n                    event: event\n                });\n                break;\n            case 'paste':\n                this.onPaste(event);\n                break;\n        }\n    };\n    /**\n     * Destroys the component (detaches/removes all event handlers, attributes, classes, and empties the component element).\n     *\n     * @returns {void}\n     */\n    RichTextEditor.prototype.destroy = function () {\n        if (this.isDestroyed || !this.isRendered) {\n            return;\n        }\n        if (!isNOU(this.timeInterval)) {\n            clearInterval(this.timeInterval);\n            this.timeInterval = null;\n        }\n        if (this.element.offsetParent === null) {\n            if (!isNOU(this.toolbarModule)) {\n                this.toolbarModule.destroy();\n            }\n            this.notify(events.moduleDestroy, {});\n            _super.prototype.destroy.call(this);\n            this.isRendered = false;\n            return;\n        }\n        this.notify(events.destroy, {});\n        this.destroyDependentModules();\n        this.unWireEvents();\n        if (this.originalElement.tagName === 'TEXTAREA') {\n            this.element.parentElement.insertBefore(this.valueContainer, this.element);\n            this.valueContainer.id = this.getID();\n            this.valueContainer.removeAttribute('name');\n            detach(this.element);\n            if (this.originalElement.innerHTML.trim() !== '') {\n                this.valueContainer.value = this.originalElement.innerHTML.trim();\n                this.setProperties({ value: (!isNOU(this.initialValue) ? this.initialValue : null) }, true);\n            }\n            else {\n                this.valueContainer.value = this.valueContainer.defaultValue;\n            }\n            this.element = this.valueContainer;\n            for (var i = 0; i < this.originalElement.classList.length; i++) {\n                addClass([this.element], this.originalElement.classList[i]);\n            }\n            if (!isNOU(this.cssClass)) {\n                var currentClassList = this.cssClass.split(' ');\n                for (var i = 0; i < currentClassList.length; i++) {\n                    addClass([this.element], currentClassList[i]);\n                }\n            }\n            removeClass([this.element], classes.CLS_RTE_HIDDEN);\n        }\n        else {\n            if (this.originalElement.innerHTML.trim() !== '') {\n                this.element.innerHTML = this.originalElement.innerHTML.trim();\n                this.setProperties({ value: (!isNOU(this.initialValue) ? this.initialValue : null) }, true);\n            }\n            else {\n                this.element.innerHTML = '';\n            }\n        }\n        if (this.placeholder && this.placeHolderWrapper) {\n            this.placeHolderWrapper = null;\n        }\n        if (!isNOU(this.cssClass)) {\n            var allClassName = this.cssClass.split(' ');\n            for (var i = 0; i < allClassName.length; i++) {\n                if (allClassName[i].trim() !== '') {\n                    removeClass([this.element], allClassName[i]);\n                }\n            }\n        }\n        this.removeHtmlAttributes();\n        this.removeAttributes();\n        _super.prototype.destroy.call(this);\n        this.isRendered = false;\n    };\n    RichTextEditor.prototype.removeHtmlAttributes = function () {\n        if (this.htmlAttributes) {\n            var keys = Object.keys(this.htmlAttributes);\n            for (var i = 0; i < keys.length && this.element.hasAttribute(keys[i]); i++) {\n                this.element.removeAttribute(keys[i]);\n            }\n        }\n    };\n    RichTextEditor.prototype.removeAttributes = function () {\n        if (!this.enabled) {\n            removeClass([this.element], classes.CLS_DISABLED);\n        }\n        if (this.enableRtl) {\n            removeClass([this.element], classes.CLS_RTL);\n        }\n        if (this.readonly) {\n            removeClass([this.element], classes.CLS_RTE_READONLY);\n        }\n        if (this.element.style.width !== '' && this.originalElement.style.width === '') {\n            this.element.style.removeProperty('width');\n        }\n        if (this.element.style.height !== '' && this.originalElement.style.height === '') {\n            this.element.style.removeProperty('height');\n        }\n        this.element.removeAttribute('aria-disabled');\n        this.element.removeAttribute('role');\n        this.element.removeAttribute('tabindex');\n    };\n    RichTextEditor.prototype.destroyDependentModules = function () {\n        /* destroy dependent modules */\n        this.renderModule.destroy();\n        this.formatter.editorManager.undoRedoManager.destroy();\n        this.sourceCodeModule.destroy();\n    };\n    /**\n     * Returns the HTML or Text inside the RichTextEditor.\n     *\n     * @returns {Element} - specifies the element.\n     */\n    RichTextEditor.prototype.getContent = function () {\n        return this.contentModule.getPanel();\n    };\n    /**\n     * Returns the text content as string.\n     *\n     * @returns {string} - specifies the string value.\n     */\n    RichTextEditor.prototype.getText = function () {\n        return this.contentModule.getText();\n    };\n    /**\n     * Returns the html value of the selected content as string.\n     *\n     * @returns {string} - specifies the string value.\n     */\n    RichTextEditor.prototype.getSelectedHtml = function () {\n        var range;\n        var wrapperElm = this.createElement('div');\n        var selection = this.contentModule.getDocument().getSelection();\n        if (selection.rangeCount > 0) {\n            range = selection.getRangeAt(0);\n            var selectedHtml = range.cloneContents();\n            wrapperElm.appendChild(selectedHtml);\n        }\n        return wrapperElm.innerHTML;\n    };\n    /**\n     * It shows the inline quick toolbar\n     *\n     * @returns {void}\n     */\n    RichTextEditor.prototype.showInlineToolbar = function () {\n        if (this.inlineMode.enable) {\n            var currentRange = this.getRange();\n            var targetElm = currentRange.endContainer.nodeName === '#text' ?\n                currentRange.endContainer.parentElement : currentRange.endContainer;\n            var x = currentRange.getClientRects()[0].left;\n            var y = currentRange.getClientRects()[0].top;\n            this.quickToolbarModule.showInlineQTBar(x, y, targetElm);\n        }\n    };\n    /**\n     * It hides the inline quick toolbar\n     *\n     * @returns {void}\n     */\n    RichTextEditor.prototype.hideInlineToolbar = function () {\n        this.quickToolbarModule.hideInlineQTBar();\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {void}\n     * @private\n     * @deprecated\n     */\n    RichTextEditor.prototype.getModuleName = function () {\n        return 'richtexteditor';\n    };\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {RichTextEditorModel} newProp - specifies the the property.\n     * @param {RichTextEditorModel} oldProp - specifies the old property.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    /* eslint-disable */\n    RichTextEditor.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'enterKey':\n                case 'value': {\n                    var nVal = void 0;\n                    if (prop === 'enterKey') {\n                        if (this.value === null || this.value === '<div><br></div>' || this.value === '<p><br></p>' ||\n                            this.value === '<br>') {\n                            nVal = null;\n                        }\n                        else {\n                            nVal = this.value;\n                        }\n                    }\n                    else {\n                        nVal = newProp[prop];\n                    }\n                    nVal = this.serializeValue(nVal);\n                    var val = this.editorMode === 'HTML' ? getEditValue(nVal, this) : nVal;\n                    if ((!isNOU(nVal) && nVal !== '') || prop === 'enterKey') {\n                        this.setProperties({ value: ((this.enableHtmlEncode) ? this.encode(decode(val)) : val) }, true);\n                    }\n                    this.updatePanelValue();\n                    if (this.inputElement) {\n                        this.notify(events.tableclass, {});\n                    }\n                    this.setPlaceHolder();\n                    this.notify(events.xhtmlValidation, { module: 'XhtmlValidation', newProp: newProp, oldProp: oldProp });\n                    if (this.enableXhtml) {\n                        this.setProperties({ value: this.getXhtml() }, true);\n                    }\n                    if (this.showCharCount) {\n                        this.countModule.refresh();\n                    }\n                    this.addAudioVideoWrapper();\n                    break;\n                }\n                case 'valueTemplate':\n                    this.setValue(true);\n                    if (this.showCharCount) {\n                        this.countModule.refresh();\n                    }\n                    break;\n                case 'width':\n                    this.setWidth(newProp[prop]);\n                    if (this.toolbarSettings.enable && !this.inlineMode.enable) {\n                        this.toolbarModule.refreshToolbarOverflow();\n                        this.resizeHandler();\n                    }\n                    break;\n                case 'height':\n                    this.setHeight(newProp[prop]);\n                    this.setContentHeight();\n                    this.autoResize();\n                    break;\n                case 'readonly':\n                    this.setReadOnly(false);\n                    break;\n                case 'cssClass':\n                    this.element.classList.remove(oldProp[prop]);\n                    this.setCssClass(newProp[prop]);\n                    this.notify(events.bindCssClass, { cssClass: newProp[prop], oldCssClass: oldProp[prop] });\n                    break;\n                case 'enabled':\n                    this.setEnable();\n                    break;\n                case 'enableRtl':\n                    this.updateRTL();\n                    break;\n                case 'placeholder':\n                    this.placeholder = newProp[prop];\n                    this.setPlaceHolder();\n                    break;\n                case 'htmlAttributes':\n                    setAttributes(this.htmlAttributes, this, false, false);\n                    break;\n                case 'iframeSettings': {\n                    var frameSetting = oldProp[prop];\n                    if (frameSetting.resources) {\n                        var iframe = this.contentModule.getDocument();\n                        var header = iframe.querySelector('head');\n                        var files = void 0;\n                        if (frameSetting.resources.scripts) {\n                            files = header.querySelectorAll('.' + classes.CLS_SCRIPT_SHEET);\n                            this.removeSheets(files);\n                        }\n                        if (frameSetting.resources.styles) {\n                            files = header.querySelectorAll('.' + classes.CLS_STYLE_SHEET);\n                            this.removeSheets(files);\n                        }\n                    }\n                    this.setIframeSettings();\n                    break;\n                }\n                case 'locale':\n                    _super.prototype.refresh.call(this);\n                    break;\n                case 'inlineMode':\n                    this.notify(events.modelChanged, { module: 'quickToolbar', newProp: newProp, oldProp: oldProp });\n                    this.setContentHeight();\n                    break;\n                case 'toolbarSettings':\n                    this.notify(events.modelChanged, { module: 'toolbar', newProp: newProp, oldProp: oldProp });\n                    this.setContentHeight();\n                    break;\n                case 'maxLength':\n                    if (this.showCharCount) {\n                        this.countModule.refresh();\n                    }\n                    break;\n                case 'showCharCount':\n                    if (newProp[prop] && this.countModule) {\n                        this.countModule.renderCount();\n                    }\n                    else if (newProp[prop] === false && this.countModule) {\n                        this.countModule.destroy();\n                    }\n                    break;\n                case 'enableHtmlEncode':\n                    this.updateValueData();\n                    this.updatePanelValue();\n                    this.setPlaceHolder();\n                    if (this.showCharCount) {\n                        this.countModule.refresh();\n                    }\n                    break;\n                case 'undoRedoSteps':\n                case 'undoRedoTimer':\n                    this.formatter.editorManager.observer.notify(CONSTANT.MODEL_CHANGED, { newProp: newProp, oldProp: oldProp });\n                    break;\n                case 'enableXhtml':\n                    this.notify(events.xhtmlValidation, { module: 'XhtmlValidation', newProp: newProp, oldProp: oldProp });\n                    break;\n                case 'quickToolbarSettings':\n                    newProp.quickToolbarSettings.showOnRightClick ? this.wireContextEvent() : this.unWireContextEvent();\n                    this.notify(events.modelChanged, { newProp: newProp, oldProp: oldProp });\n                    break;\n                case 'formatPainterSettings':\n                    this.formatter.editorManager.observer.notify(CONSTANT.MODEL_CHANGED, { module: 'formatPainter', newProp: newProp });\n                    break;\n                default:\n                    this.notify(events.modelChanged, { newProp: newProp, oldProp: oldProp });\n                    break;\n            }\n        }\n    };\n    /* eslint-enable */\n    /**\n     * @hidden\n     * @returns {void}\n     * @deprecated\n     */\n    RichTextEditor.prototype.updateValueData = function () {\n        if (this.enableHtmlEncode) {\n            this.setProperties({ value: this.encode(decode(this.inputElement.innerHTML)) }, true);\n        }\n        else {\n            this.setProperties({\n                value: /<[a-z][\\s\\S]*>/i.test(this.inputElement.innerHTML) ? this.inputElement.innerHTML :\n                    decode(this.inputElement.innerHTML)\n            });\n        }\n    };\n    RichTextEditor.prototype.removeSheets = function (srcList) {\n        var i;\n        for (i = 0; i < srcList.length; i++) {\n            detach(srcList[i]);\n        }\n    };\n    RichTextEditor.prototype.updatePanelValue = function () {\n        var value = this.value;\n        value = (this.enableHtmlEncode && this.value) ? decode(value) : value;\n        var getTextArea = this.element.querySelector('.e-rte-srctextarea');\n        if (value) {\n            if (getTextArea && getTextArea.style.display === 'block') {\n                getTextArea.value = this.value;\n            }\n            if (this.valueContainer) {\n                this.valueContainer.value = (this.enableHtmlEncode) ? this.value : value;\n            }\n            if (this.editorMode === 'HTML' && this.inputElement && this.inputElement.innerHTML.replace('&amp;', '&').trim() !== value.trim()) {\n                this.inputElement.innerHTML = value;\n            }\n            else if (this.editorMode === 'Markdown' && this.inputElement\n                && this.inputElement.value.trim() !== value.trim()) {\n                this.inputElement.value = value;\n            }\n        }\n        else {\n            if (getTextArea && getTextArea.style.display === 'block') {\n                getTextArea.value = '';\n            }\n            if (this.editorMode === 'HTML') {\n                if (this.enterKey === 'DIV') {\n                    this.inputElement.innerHTML = '<div><br/></div>';\n                }\n                else if (this.enterKey === 'BR') {\n                    this.inputElement.innerHTML = '<br/>';\n                }\n                else {\n                    this.inputElement.innerHTML = '<p><br/></p>';\n                    if (value === '' && this.formatter && this.inputElement) {\n                        this.formatter.editorManager.nodeSelection.setCursorPoint(this.contentModule.getDocument(), this.inputElement.firstElementChild, this.inputElement.firstElementChild.childElementCount);\n                    }\n                }\n            }\n            else {\n                this.inputElement.value = '';\n            }\n            if (this.valueContainer) {\n                this.valueContainer.value = '';\n            }\n        }\n        if (this.showCharCount) {\n            this.countModule.refresh();\n        }\n    };\n    RichTextEditor.prototype.setHeight = function (height) {\n        if (height !== 'auto') {\n            this.element.style.height = formatUnit(height);\n        }\n        else {\n            this.element.style.height = 'auto';\n        }\n        if (this.toolbarSettings.type === 'Expand' && (typeof (this.height) === 'string' &&\n            this.height.indexOf('px') > -1 || typeof (this.height) === 'number')) {\n            this.element.classList.add(classes.CLS_RTE_FIXED_TB_EXPAND);\n        }\n        else {\n            this.element.classList.remove(classes.CLS_RTE_FIXED_TB_EXPAND);\n        }\n    };\n    /**\n     * setPlaceHolder method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    RichTextEditor.prototype.setPlaceHolder = function () {\n        if (this.inputElement && this.placeholder && this.iframeSettings.enable !== true) {\n            if (this.editorMode !== 'Markdown') {\n                if (!this.placeHolderWrapper) {\n                    this.placeHolderWrapper = this.createElement('span', { className: 'rte-placeholder e-rte-placeholder' + ' ' + this.cssClass });\n                    if (this.inputElement) {\n                        this.inputElement.parentElement.insertBefore(this.placeHolderWrapper, this.inputElement);\n                    }\n                    attributes(this.placeHolderWrapper, {\n                        'style': 'font-size: 14px; margin-left: 0px; margin-right: 0px;'\n                    });\n                }\n                this.placeHolderWrapper.innerHTML = this.placeholder;\n                if (this.inputElement.textContent.length === 0 && this.inputElement.childNodes.length < 2 && !isNOU(this.inputElement.firstChild) && (this.inputElement.firstChild.nodeName === 'BR' ||\n                    ((this.inputElement.firstChild.nodeName === 'P' || this.inputElement.firstChild.nodeName === 'DIV') && !isNOU(this.inputElement.firstChild.firstChild) &&\n                        this.inputElement.firstChild.firstChild.nodeName === 'BR'))) {\n                    this.placeHolderWrapper.style.display = 'block';\n                }\n                else {\n                    this.placeHolderWrapper.style.display = 'none';\n                }\n            }\n            else {\n                this.inputElement.setAttribute('placeholder', this.placeholder);\n            }\n        }\n        if (this.placeholder && this.iframeSettings.enable) {\n            if (this.inputElement.textContent.length === 0 && this.inputElement.childNodes.length < 2 && !isNOU(this.inputElement.firstChild) && (this.inputElement.firstChild.nodeName === 'BR' ||\n                ((this.inputElement.firstChild.nodeName === 'P' || this.inputElement.firstChild.nodeName === 'DIV') && !isNOU(this.inputElement.firstChild.firstChild) &&\n                    this.inputElement.firstChild.firstChild.nodeName === 'BR'))) {\n                addClass([this.inputElement], 'e-rte-placeholder');\n                this.inputElement.setAttribute('placeholder', this.placeholder);\n            }\n            else {\n                removeClass([this.inputElement], 'e-rte-placeholder');\n            }\n        }\n    };\n    RichTextEditor.prototype.setWidth = function (width) {\n        if (width !== 'auto') {\n            setStyleAttribute(this.element, { 'width': formatUnit(this.width) });\n        }\n        else {\n            this.element.style.width = 'auto';\n        }\n    };\n    RichTextEditor.prototype.setCssClass = function (cssClass) {\n        if (!isNOU(cssClass)) {\n            var allClassName = cssClass.split(' ');\n            for (var i = 0; i < allClassName.length; i++) {\n                if (allClassName[i].trim() !== '') {\n                    this.element.classList.add(allClassName[i]);\n                }\n            }\n        }\n    };\n    RichTextEditor.prototype.updateRTL = function () {\n        this.notify(events.rtlMode, { enableRtl: this.enableRtl });\n        if (this.enableRtl) {\n            this.element.classList.add(classes.CLS_RTL);\n            this.inputElement.classList.add(classes.CLS_RTL);\n        }\n        else {\n            this.element.classList.remove(classes.CLS_RTL);\n            this.inputElement.classList.remove(classes.CLS_RTL);\n        }\n    };\n    RichTextEditor.prototype.updateReadOnly = function () {\n        this.notify(events.readOnlyMode, { editPanel: this.inputElement, mode: this.readonly });\n    };\n    /**\n     * setReadOnly method\n     *\n     * @param {boolean} initial - specifies the boolean value\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    RichTextEditor.prototype.setReadOnly = function (initial) {\n        this.updateReadOnly();\n        if (!initial) {\n            if (this.readonly && this.enabled) {\n                this.unbindEvents();\n                this.unWireEvents();\n            }\n            else if (this.enabled) {\n                this.wireEvents();\n            }\n        }\n    };\n    /**\n     * By default, prints all the pages of the RichTextEditor.\n     *\n     * @returns {void}\n     */\n    RichTextEditor.prototype.print = function () {\n        var _this = this;\n        var printWind;\n        var printArgs = {\n            element: this.inputElement,\n            requestType: 'print',\n            cancel: false\n        };\n        this.trigger(events.actionBegin, printArgs, function (printingArgs) {\n            printWind = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth);\n            if (Browser.info.name === 'msie') {\n                printWind.resizeTo(screen.availWidth, screen.availHeight);\n            }\n            printWind = printWindow(_this.inputElement, printWind);\n            if (!printingArgs.cancel) {\n                var actionArgs = {\n                    requestType: 'print'\n                };\n                _this.trigger(events.actionComplete, actionArgs);\n            }\n        });\n    };\n    /**\n     * Refresh the view of the editor.\n     *\n     * @returns {void}\n     * @public\n     */\n    RichTextEditor.prototype.refreshUI = function () {\n        this.renderModule.refresh();\n    };\n    /**\n     * Shows the Rich Text Editor component in full-screen mode.\n     *\n     * @returns {void}\n     */\n    RichTextEditor.prototype.showFullScreen = function () {\n        this.fullScreenModule.showFullScreen();\n    };\n    /**\n     * Enables the give toolbar items in the Rich Text Editor component.\n     *\n     * @returns {void}\n     * @param {string | string[]} items - Specifies the single or collection of items\n     * @param {boolean} muteToolbarUpdate enable/disables the toolbar item status in RichTextEditor.\n     * that you want to be enable in Rich Text Editor’s Toolbar.\n     *\n     * @public\n     */\n    RichTextEditor.prototype.enableToolbarItem = function (items, muteToolbarUpdate) {\n        this.toolbarModule.enableTBarItems(this.getBaseToolbarObject(), items, true, muteToolbarUpdate);\n    };\n    /**\n     * Disables the given toolbar items in the Rich Text Editor component.\n     *\n     * @returns {void}\n     * @param {string | string[]} items - Specifies the single or collection of items\n     * @param {boolean} muteToolbarUpdate enable/disables the toolbar item status in RichTextEditor.\n     * that you want to be disable in Rich Text Editor’s Toolbar.\n     *\n     * @public\n     */\n    RichTextEditor.prototype.disableToolbarItem = function (items, muteToolbarUpdate) {\n        this.toolbarModule.enableTBarItems(this.getBaseToolbarObject(), items, false, muteToolbarUpdate);\n    };\n    /**\n     * Removes the give toolbar items from the Rich Text Editor component.\n     *\n     * @returns {void}\n     * @param {string | string[]} items - Specifies the single or collection of items\n     * that you want to be remove from Rich Text Editor’s Toolbar.\n     *\n     * @public\n     */\n    RichTextEditor.prototype.removeToolbarItem = function (items) {\n        this.toolbarModule.removeTBarItems(items);\n    };\n    /**\n     * Get the selected range from the RichTextEditor's content.\n     *\n     * @returns {void}\n     * @public\n     * @deprecated\n     */\n    RichTextEditor.prototype.getRange = function () {\n        return this.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n    };\n    RichTextEditor.prototype.initializeServices = function () {\n        this.serviceLocator.register('rendererFactory', new RendererFactory);\n        this.serviceLocator.register('rteLocale', this.localeObj = new L10n(this.getModuleName(), defaultLocale, this.locale));\n        this.serviceLocator.register('dialogRenderObject', new DialogRenderer(this));\n    };\n    RichTextEditor.prototype.RTERender = function () {\n        var rendererFactory = this.serviceLocator.getService('rendererFactory');\n        this.contentModule = rendererFactory.getRenderer(RenderType.Content);\n        this.fullScreenModule = new FullScreen(this);\n        this.enterKeyModule = new EnterKeyAction(this);\n        this.renderModule.render();\n        this.inputElement = this.contentModule.getEditPanel();\n        this.setHeight(this.height);\n        setAttributes(this.htmlAttributes, this, false, true);\n        if (this.iframeSettings) {\n            this.setIframeSettings();\n        }\n        this.setCssClass(this.cssClass);\n        this.updateEnable();\n        this.setPlaceHolder();\n        this.updateRTL();\n        this.updateReadOnly();\n        this.updatePanelValue();\n        if (this.enableHtmlEncode && !isNOU(this.value)) {\n            this.setProperties({ value: this.encode(decode(this.value)) });\n        }\n    };\n    RichTextEditor.prototype.setIframeSettings = function () {\n        if (this.iframeSettings.resources) {\n            var styleSrc = this.iframeSettings.resources.styles;\n            var scriptSrc = this.iframeSettings.resources.scripts;\n            if (this.iframeSettings.resources.scripts.length > 0) {\n                this.InjectSheet(true, scriptSrc);\n            }\n            if (this.iframeSettings.resources.styles.length > 0) {\n                this.InjectSheet(false, styleSrc);\n            }\n        }\n        if (this.iframeSettings.attributes) {\n            setAttributes(this.iframeSettings.attributes, this, true, false);\n        }\n    };\n    RichTextEditor.prototype.InjectSheet = function (scriptSheet, srcList) {\n        try {\n            if (srcList && srcList.length > 0) {\n                var iFrame = this.contentModule.getDocument();\n                var target = iFrame.querySelector('head');\n                for (var i = 0; i < srcList.length; i++) {\n                    if (scriptSheet) {\n                        var scriptEle = this.createScriptElement();\n                        scriptEle.src = srcList[i];\n                        target.appendChild(scriptEle);\n                    }\n                    else {\n                        var styleEle = this.createStyleElement();\n                        styleEle.href = srcList[i];\n                        target.appendChild(styleEle);\n                    }\n                }\n            }\n        }\n        catch (e) {\n            return;\n        }\n    };\n    RichTextEditor.prototype.createScriptElement = function () {\n        var scriptEle = this.createElement('script', {\n            className: classes.CLS_SCRIPT_SHEET\n        });\n        scriptEle.type = 'text/javascript';\n        return scriptEle;\n    };\n    RichTextEditor.prototype.createStyleElement = function () {\n        var styleEle = this.createElement('link', {\n            className: classes.CLS_STYLE_SHEET\n        });\n        styleEle.rel = 'stylesheet';\n        return styleEle;\n    };\n    RichTextEditor.prototype.setValue = function (isPropertyChange) {\n        var _this = this;\n        if (this.valueTemplate) {\n            var regEx = new RegExp(/<(?=.*? .*?\\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\\/\\1>/i);\n            if (typeof this.valueTemplate === 'string' && regEx.test(this.valueTemplate)) {\n                this.setProperties({ value: this.valueTemplate });\n            }\n            else {\n                var compiledTemplate = compile(this.valueTemplate)('', this, 'valueTemplate');\n                // eslint-disable-next-line\n                if (typeof this.valueTemplate !== 'string' && this.isReact) {\n                    this.displayTempElem = this.createElement('div');\n                    for (var i = 0; i < compiledTemplate.length; i++) {\n                        var item = compiledTemplate[i];\n                        append([item], this.displayTempElem);\n                    }\n                    this.renderTemplates(function () {\n                        _this.inputElement.innerHTML = _this.displayTempElem.childNodes[0].innerHTML;\n                        _this.setProperties({ value: _this.inputElement.innerHTML.trim() });\n                    });\n                }\n                else {\n                    var appendElem = this.element;\n                    if (isPropertyChange) {\n                        this.inputElement.innerHTML = '';\n                        appendElem = this.inputElement;\n                    }\n                    for (var i = 0; i < compiledTemplate.length; i++) {\n                        var item = compiledTemplate[i];\n                        append([item], appendElem);\n                    }\n                    this.setProperties({ value: appendElem.innerHTML.trim() });\n                    this.renderReactTemplates();\n                }\n            }\n        }\n        else {\n            // eslint-disable-next-line\n            var innerHtml = !isNOU(this.element.innerHTML) && this.element.innerHTML.replace(/<(\\/?|\\!?)(!--!--)>/g, '').trim();\n            if (innerHtml !== '') {\n                if (this.element.tagName === 'TEXTAREA') {\n                    this.setProperties({ value: decode(innerHtml) });\n                }\n                else {\n                    this.setProperties({ value: innerHtml });\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    RichTextEditor.prototype.renderTemplates = function (callBack) {\n        this.renderReactTemplates(callBack);\n    };\n    RichTextEditor.prototype.updateResizeFlag = function () {\n        this.isResizeInitialized = true;\n    };\n    /**\n     * Image max width calculation method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    RichTextEditor.prototype.getInsertImgMaxWidth = function () {\n        var maxWidth = this.insertImageSettings.maxWidth;\n        // eslint-disable-next-line\n        var imgPadding = 12;\n        var imgResizeBorder = 2;\n        var editEle = this.contentModule.getEditPanel();\n        var eleStyle = window.getComputedStyle(editEle);\n        var editEleMaxWidth = editEle.offsetWidth - (imgPadding + imgResizeBorder +\n            parseFloat(eleStyle.paddingLeft.split('px')[0]) + parseFloat(eleStyle.paddingRight.split('px')[0]) +\n            parseFloat(eleStyle.marginLeft.split('px')[0]) + parseFloat(eleStyle.marginRight.split('px')[0]));\n        return isNOU(maxWidth) ? editEleMaxWidth : maxWidth;\n    };\n    /**\n     * Video max width calculation method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    RichTextEditor.prototype.getInsertVidMaxWidth = function () {\n        var maxWidth = this.insertVideoSettings.maxWidth;\n        // eslint-disable-next-line\n        var vidPadding = 12;\n        var vidResizeBorder = 2;\n        var editEle = this.contentModule.getEditPanel();\n        var eleStyle = window.getComputedStyle(editEle);\n        var editEleMaxWidth = editEle.offsetWidth - (vidPadding + vidResizeBorder +\n            parseFloat(eleStyle.paddingLeft.split('px')[0]) + parseFloat(eleStyle.paddingRight.split('px')[0]) +\n            parseFloat(eleStyle.marginLeft.split('px')[0]) + parseFloat(eleStyle.marginRight.split('px')[0]));\n        return isNOU(maxWidth) ? editEleMaxWidth : maxWidth;\n    };\n    /**\n     * setContentHeight method\n     *\n     * @param {string} target - specifies the target value.\n     * @param {boolean} isExpand - specifies  the bollean value.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    RichTextEditor.prototype.setContentHeight = function (target, isExpand) {\n        var heightValue;\n        var topValue = 0;\n        var rteHeightPercent;\n        var heightPercent = typeof (this.height) === 'string' && this.height.indexOf('%') > -1;\n        var cntEle = (this.sourceCodeModule.getPanel() &&\n            this.sourceCodeModule.getPanel().parentElement.style.display === 'block') ? this.sourceCodeModule.getPanel().parentElement :\n            this.contentModule.getPanel();\n        var rteHeight = this.element.offsetHeight;\n        if (rteHeight === 0 && this.height !== 'auto' && !this.getToolbar()) {\n            rteHeight = parseInt(this.height, 10);\n            if (heightPercent) {\n                rteHeightPercent = this.height;\n            }\n        }\n        var tbHeight = this.getToolbar() ? this.toolbarModule.getToolbarHeight() : 0;\n        var rzHandle = this.element.querySelector('.' + classes.CLS_RTE_RES_HANDLE);\n        var rzHeight = this.enableResize ? (!isNOU(rzHandle) ? (rzHandle.offsetHeight + 8) : 0) : 0;\n        var expandPopHeight = this.getToolbar() ? this.toolbarModule.getExpandTBarPopHeight() : 0;\n        if (this.toolbarSettings.type === ToolbarType.Expand && isExpand) {\n            heightValue = (this.height === 'auto' && rzHeight === 0) ? 'auto' : rteHeight - (tbHeight + expandPopHeight + rzHeight) + 'px';\n            topValue = (!this.toolbarSettings.enableFloating) ? expandPopHeight : 0;\n        }\n        else {\n            if (this.height === 'auto' && !(this.element.classList.contains('e-rte-full-screen')) && !this.isResizeInitialized) {\n                heightValue = 'auto';\n            }\n            else {\n                heightValue = heightPercent && rteHeightPercent ? rteHeightPercent : rteHeight - (tbHeight + rzHeight) + 'px';\n            }\n        }\n        if (target !== 'windowResize' || heightPercent) {\n            if (this.iframeSettings.enable) {\n                if (heightValue !== 'auto') {\n                    setStyleAttribute(cntEle, { height: heightValue, marginTop: topValue + 'px' });\n                }\n            }\n            else {\n                if (target === 'windowResize' && heightPercent) {\n                    //cntEle hide the borderBottom of RichTextEditor. so removed the 2px of cntEle height.\n                    heightValue = parseInt(heightValue, 10) - 2 + 'px';\n                }\n                setStyleAttribute(cntEle, { height: heightValue, marginTop: topValue + 'px' });\n            }\n        }\n        if (this.iframeSettings.enable && target === 'sourceCode') {\n            var codeElement = select('.' + classes.CLS_RTE_CONTENT, this.element);\n            setStyleAttribute(codeElement, { height: heightValue, marginTop: topValue + 'px' });\n        }\n        if (this.toolbarSettings.enableFloating && this.getToolbar() && !this.inlineMode.enable) {\n            var tbWrapHeight = (isExpand ? (tbHeight + expandPopHeight) : tbHeight) + 'px';\n            setStyleAttribute(this.getToolbar().parentElement, { height: tbWrapHeight });\n        }\n        if (rzHeight === 0) {\n            this.autoResize();\n        }\n    };\n    /**\n     * Retrieves the HTML from RichTextEditor.\n     *\n     * @returns {void}\n     * @public\n     */\n    RichTextEditor.prototype.getHtml = function () {\n        var htmlValue = this.removeResizeElement(this.contentModule.getEditPanel().innerHTML);\n        return (this.enableXhtml && (htmlValue === '<p><br></p>' || htmlValue === '<div><br></div>' ||\n            htmlValue === '<br>') ? null : this.serializeValue(htmlValue));\n    };\n    /**\n     * Retrieves the Rich Text Editor's XHTML validated HTML content when `enableXhtml` property is enabled.\n     *\n     * @returns {void}\n     * @public\n     */\n    RichTextEditor.prototype.getXhtml = function () {\n        var currentValue = this.removeResizeElement(this.value);\n        if (!isNOU(currentValue) && this.enableXhtml) {\n            currentValue = this.htmlEditorModule.xhtmlValidation.selfEncloseValidation(currentValue);\n        }\n        return currentValue;\n    };\n    /**\n     * Shows the source HTML/MD markup.\n     *\n     * @returns {void}\n     * @public\n     */\n    RichTextEditor.prototype.showSourceCode = function () {\n        if (this.readonly) {\n            return;\n        }\n        this.notify(events.sourceCode, {});\n    };\n    /**\n     * Returns the maximum number of characters in the Rich Text Editor.\n     *\n     * @returns {void}\n     * @public\n     */\n    RichTextEditor.prototype.getCharCount = function () {\n        var htmlText = this.editorMode === 'Markdown' ? this.inputElement.value.trim() :\n            this.inputElement.textContent.trim();\n        var htmlLength;\n        if (this.editorMode !== 'Markdown' && htmlText.indexOf('\\u200B') !== -1) {\n            htmlLength = htmlText.replace(/\\u200B/g, '').length;\n        }\n        else {\n            htmlLength = htmlText.length;\n        }\n        return htmlLength;\n    };\n    /**\n     * Show the dialog in the Rich Text Editor.\n     *\n     * @param {DialogType} type - specifies the dialog type.\n     * @returns {void}\n     * @public\n     */\n    RichTextEditor.prototype.showDialog = function (type) {\n        if (type === DialogType.InsertLink) {\n            this.notify(events.showLinkDialog, {});\n        }\n        else if (type === DialogType.InsertImage) {\n            this.notify(events.showImageDialog, {});\n        }\n        else if (type === DialogType.InsertAudio) {\n            this.notify(events.showAudioDialog, {});\n        }\n        else if (type === DialogType.InsertVideo) {\n            this.notify(events.showVideoDialog, {});\n        }\n        else if (type === DialogType.InsertTable) {\n            this.notify(events.showTableDialog, {});\n        }\n    };\n    /**\n     * Close the dialog in the Rich Text Editor.\n     *\n     * @param {DialogType} type - specifies the dialog type.\n     * @returns {void}\n     * @public\n     */\n    RichTextEditor.prototype.closeDialog = function (type) {\n        if (type === DialogType.InsertLink) {\n            this.notify(events.closeLinkDialog, {});\n        }\n        else if (type === DialogType.InsertImage) {\n            this.notify(events.closeImageDialog, {});\n        }\n        else if (type === DialogType.InsertAudio) {\n            this.notify(events.closeAudioDialog, {});\n        }\n        else if (type === DialogType.InsertVideo) {\n            this.notify(events.closeVideoDialog, {});\n        }\n        else if (type === DialogType.InsertTable) {\n            this.notify(events.closeTableDialog, {});\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    RichTextEditor.prototype.getBaseToolbarObject = function () {\n        var tbObj;\n        if (this.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            tbObj = this.quickToolbarModule && this.quickToolbarModule.getInlineBaseToolbar();\n        }\n        else {\n            tbObj = this.toolbarModule && this.toolbarModule.getBaseToolbar();\n        }\n        return tbObj;\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    RichTextEditor.prototype.getToolbar = function () {\n        return this.toolbarModule ? this.toolbarModule.getToolbarElement() : null;\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    RichTextEditor.prototype.getToolbarElement = function () {\n        return this.toolbarModule && this.toolbarModule.getToolbarElement();\n    };\n    /**\n     * @returns {void}\n     * getID method\n     *\n     * @hidden\n     * @deprecated\n     */\n    RichTextEditor.prototype.getID = function () {\n        return (this.originalElement.tagName === 'TEXTAREA' ? this.valueContainer.id : this.element.id);\n    };\n    RichTextEditor.prototype.mouseDownHandler = function (e) {\n        var touch = (e.touches ? e.changedTouches[0] : e);\n        addClass([this.element], [classes.CLS_FOCUS]);\n        this.preventDefaultResize(e);\n        this.notify(events.mouseDown, { args: e });\n        this.clickPoints = { clientX: touch.clientX, clientY: touch.clientY };\n    };\n    RichTextEditor.prototype.preventImgResize = function (e) {\n        if (e.target.nodeName.toLocaleLowerCase() === 'img') {\n            e.preventDefault();\n        }\n    };\n    /**\n     * preventDefaultResize method\n     *\n     * @param {FocusEvent} e - specifies the event.\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    // eslint-disable-next-line\n    RichTextEditor.prototype.preventDefaultResize = function (e) {\n        if (Browser.info.name === 'msie') {\n            this.contentModule.getEditPanel().addEventListener('mscontrolselect', this.preventImgResize);\n        }\n        else if (Browser.info.name === 'mozilla') {\n            this.contentModule.getDocument().execCommand('enableObjectResizing', false, 'false');\n            this.contentModule.getDocument().execCommand('enableInlineTableEditing', false, 'false');\n        }\n    };\n    // eslint-disable-next-line\n    RichTextEditor.prototype.defaultResize = function (e) {\n        if (Browser.info.name === 'msie') {\n            this.contentModule.getEditPanel().removeEventListener('mscontrolselect', this.preventImgResize);\n        }\n        else if (Browser.info.name === 'mozilla') {\n            this.contentModule.getDocument().execCommand('enableObjectResizing', true, 'true');\n            this.contentModule.getDocument().execCommand('enableInlineTableEditing', true, 'true');\n        }\n    };\n    RichTextEditor.prototype.resizeHandler = function () {\n        var isExpand = false;\n        if (!document.body.contains(this.element)) {\n            document.defaultView.removeEventListener('resize', this.onResizeHandler, true);\n            return;\n        }\n        if (this.toolbarSettings.enable && !this.inlineMode.enable) {\n            this.toolbarModule.refreshToolbarOverflow();\n            isExpand = this.toolbarModule.baseToolbar.toolbarObj.element.classList.contains(classes.CLS_EXPAND_OPEN);\n        }\n        if (this.iframeSettings.enable !== true) {\n            // When resize the window,border bottom of cntEle and this.element border visible separatly.so none the cntEle borderBottom.\n            this.contentModule.getPanel().style.borderBottom = 'none';\n        }\n        this.setContentHeight('windowResize', isExpand);\n        this.notify(events.windowResize, null);\n    };\n    RichTextEditor.prototype.scrollHandler = function (e) {\n        if (this.element) {\n            this.notify(events.scroll, { args: e });\n        }\n    };\n    RichTextEditor.prototype.contentScrollHandler = function (e) {\n        this.notify(events.contentscroll, { args: e });\n    };\n    RichTextEditor.prototype.focusHandler = function (e) {\n        if ((!this.isRTE || this.isFocusOut)) {\n            this.isRTE = this.isFocusOut ? false : true;\n            this.isFocusOut = false;\n            addClass([this.element], [classes.CLS_FOCUS]);\n            if (this.editorMode === 'HTML') {\n                this.cloneValue = (this.inputElement.innerHTML === '<p><br></p>' || this.inputElement.innerHTML === '<div><br></div>' ||\n                    this.inputElement.innerHTML === '<br>') ? null : this.enableHtmlEncode ?\n                    this.encode(decode(this.inputElement.innerHTML)) : this.inputElement.innerHTML;\n            }\n            else {\n                this.cloneValue = this.inputElement.value === '' ? null :\n                    this.inputElement.value;\n            }\n            var active = document.activeElement;\n            if (active === this.element || active === this.getToolbarElement() || active === this.contentModule.getEditPanel()\n                || ((this.iframeSettings.enable && active === this.contentModule.getPanel()) &&\n                    e.target && !e.target.classList.contains('e-img-inner')\n                    && (e.target && e.target.parentElement\n                        && !e.target.parentElement.classList.contains('e-img-wrap')))\n                || closest(active, '.e-rte-toolbar') === this.getToolbarElement()) {\n                this.contentModule.getEditPanel().focus();\n                if (!isNOU(this.getToolbarElement())) {\n                    this.getToolbarElement().setAttribute('tabindex', '-1');\n                    var items = this.getToolbarElement().querySelectorAll('[tabindex=\"0\"]');\n                    for (var i = 0; i < items.length; i++) {\n                        items[i].setAttribute('tabindex', '-1');\n                    }\n                }\n            }\n            this.preventDefaultResize(e);\n            this.trigger('focus', { event: e, isInteracted: Object.keys(e).length === 0 ? false : true });\n            if (!isNOU(this.saveInterval) && this.saveInterval > 0 && !this.autoSaveOnIdle) {\n                this.timeInterval = setInterval(this.updateValueOnIdle.bind(this), this.saveInterval);\n            }\n            EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n        }\n        if (!this.readonly) {\n            var currentFocus = this.getCurrentFocus(e);\n            if (currentFocus === 'editArea' || currentFocus === 'textArea' || currentFocus === 'sourceCode') {\n                this.resetToolbarTabIndex();\n            }\n        }\n    };\n    RichTextEditor.prototype.getUpdatedValue = function () {\n        var value;\n        var getTextArea = this.element.querySelector('.e-rte-srctextarea');\n        if (this.editorMode === 'HTML') {\n            value = (this.inputElement.innerHTML === '<p><br></p>' || this.inputElement.innerHTML === '<div><br></div>' ||\n                this.inputElement.innerHTML === '<br>') ? null : this.enableHtmlEncode ?\n                this.encode(decode(this.removeResizeElement(this.inputElement.innerHTML))) : this.inputElement.innerHTML;\n            if (getTextArea && getTextArea.style.display === 'block') {\n                value = getTextArea.value;\n            }\n        }\n        else {\n            value = this.inputElement.value === '' ? null :\n                this.inputElement.value;\n        }\n        if (value != null && !this.enableHtmlEncode) {\n            value = this.removeResizeElement(value);\n        }\n        return value;\n    };\n    RichTextEditor.prototype.updateValueOnIdle = function () {\n        if (!isNOU(this.tableModule) && !isNOU(this.inputElement.querySelector('.e-table-box.e-rbox-select'))) {\n            return;\n        }\n        this.setProperties({ value: this.getUpdatedValue() }, true);\n        this.valueContainer.value = this.value;\n        this.isValueChangeBlurhandler = false;\n        this.invokeChangeEvent();\n    };\n    RichTextEditor.prototype.updateIntervalValue = function () {\n        clearTimeout(this.idleInterval);\n        this.idleInterval = setTimeout(this.updateValueOnIdle.bind(this), 0);\n    };\n    RichTextEditor.prototype.removeResizeElement = function (value) {\n        var valueElementWrapper = document.createElement(\"div\");\n        valueElementWrapper.innerHTML = value;\n        var item = valueElementWrapper.querySelectorAll('.e-column-resize, .e-row-resize, .e-table-box, .e-table-rhelper, .e-img-resize');\n        if (item.length > 0) {\n            for (var i = 0; i < item.length; i++) {\n                detach(item[i]);\n            }\n        }\n        return valueElementWrapper.innerHTML;\n    };\n    RichTextEditor.prototype.updateStatus = function (e) {\n        if (!isNOU(e.html) || !isNOU(e.markdown)) {\n            var status_1 = this.formatter.editorManager.undoRedoManager.getUndoStatus();\n            var eventArgs = {\n                undo: status_1.undo,\n                redo: status_1.redo,\n                html: e.html,\n                markdown: e.markdown\n            };\n            this.trigger(events.updatedToolbarStatus, eventArgs);\n        }\n    };\n    RichTextEditor.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        var rteElement = closest(target, '.' + classes.CLS_RTE);\n        if (!this.element.contains(e.target) && document !== e.target && rteElement !== this.element &&\n            !closest(target, '[aria-owns=\"' + this.getID() + '\"]')) {\n            this.isBlur = true;\n            this.isRTE = false;\n        }\n        this.notify(events.docClick, { args: e });\n        if (Browser.info.name !== 'msie' && e.detail > 3) {\n            e.preventDefault();\n        }\n    };\n    RichTextEditor.prototype.blurHandler = function (e) {\n        var trg = e.relatedTarget;\n        if (trg) {\n            var rteElement = closest(trg, '.' + classes.CLS_RTE);\n            if (rteElement && rteElement === this.element) {\n                this.isBlur = false;\n                if (trg === this.getToolbarElement()) {\n                    trg.setAttribute('tabindex', '-1');\n                }\n            }\n            else if (closest(trg, '[aria-owns=\"' + this.getID() + '\"]') || closest(trg, '.' + classes.CLS_RTE_ELEMENTS)) {\n                this.isBlur = false;\n            }\n            else {\n                this.isBlur = true;\n                trg = null;\n            }\n        }\n        if (this.isBlur && isNOU(trg)) {\n            removeClass([this.element], [classes.CLS_FOCUS]);\n            this.notify(events.focusChange, {});\n            var value = this.getUpdatedValue();\n            this.setProperties({ value: value });\n            this.valueContainer.value = this.value;\n            this.notify(events.toolbarRefresh, { args: e, documentNode: document });\n            this.isValueChangeBlurhandler = true;\n            this.invokeChangeEvent();\n            this.isFocusOut = true;\n            this.isBlur = false;\n            dispatchEvent(this.valueContainer, 'focusout');\n            this.defaultResize(e);\n            this.trigger('blur', { event: e, isInteracted: Object.keys(e).length === 0 ? false : true });\n            if (!isNOU(this.timeInterval)) {\n                clearInterval(this.timeInterval);\n                this.timeInterval = null;\n            }\n            if (!isNOU(this.placeHolderWrapper) && this.element.querySelector('[title = Preview]')) {\n                this.placeHolderWrapper.style.display = 'none';\n            }\n            EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n        }\n        else {\n            this.isRTE = true;\n        }\n        if (!this.readonly && this.getCurrentFocus(e) === 'outside') {\n            this.resetToolbarTabIndex();\n        }\n    };\n    /**\n     * invokeChangeEvent method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    RichTextEditor.prototype.contentChanged = function () {\n        if (this.autoSaveOnIdle) {\n            if (!isNOU(this.saveInterval)) {\n                clearTimeout(this.timeInterval);\n                this.timeInterval = setTimeout(this.updateIntervalValue.bind(this), this.saveInterval);\n            }\n        }\n    };\n    /**\n     * invokeChangeEvent method\n     *\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    RichTextEditor.prototype.invokeChangeEvent = function () {\n        var currentValue;\n        if (this.enableXhtml) {\n            currentValue = this.getXhtml();\n        }\n        else {\n            currentValue = this.value;\n        }\n        var eventArgs = {\n            value: currentValue,\n            isInteracted: this.isValueChangeBlurhandler\n        };\n        if (this.value !== this.cloneValue) {\n            this.trigger('change', eventArgs);\n            this.cloneValue = this.value;\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    RichTextEditor.prototype.wireScrollElementsEvents = function () {\n        this.scrollParentElements = getScrollableParent(this.element);\n        for (var _i = 0, _a = this.scrollParentElements; _i < _a.length; _i++) {\n            var element = _a[_i];\n            EventHandler.add(element, 'scroll', this.scrollHandler, this);\n        }\n        if (!this.iframeSettings.enable) {\n            // Add the scroll event handler from the inputElement\n            EventHandler.add(this.inputElement, 'scroll', this.contentScrollHandler, this);\n        }\n    };\n    RichTextEditor.prototype.wireContextEvent = function () {\n        if (this.quickToolbarSettings.showOnRightClick) {\n            EventHandler.add(this.inputElement, 'contextmenu', this.contextHandler, this);\n            if (Browser.isDevice) {\n                this.touchModule = new EJ2Touch(this.inputElement, { tapHold: this.touchHandler.bind(this), tapHoldThreshold: 500 });\n            }\n        }\n    };\n    RichTextEditor.prototype.unWireContextEvent = function () {\n        EventHandler.remove(this.inputElement, 'contextmenu', this.contextHandler);\n        if (Browser.isDevice && this.touchModule) {\n            this.touchModule.destroy();\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    RichTextEditor.prototype.unWireScrollElementsEvents = function () {\n        this.scrollParentElements = getScrollableParent(this.element);\n        for (var _i = 0, _a = this.scrollParentElements; _i < _a.length; _i++) {\n            var element = _a[_i];\n            EventHandler.remove(element, 'scroll', this.scrollHandler);\n        }\n        if (!this.iframeSettings.enable) {\n            // Remove the scroll event handler from the inputElement\n            EventHandler.remove(this.inputElement, 'scroll', this.contentScrollHandler);\n        }\n    };\n    RichTextEditor.prototype.touchHandler = function (e) {\n        this.notifyMouseUp(e.originalEvent);\n        this.triggerEditArea(e.originalEvent);\n    };\n    RichTextEditor.prototype.contextHandler = function (e) {\n        var closestElem = closest(e.target, 'a, table, img');\n        if (this.inlineMode.onSelection === false || (!isNOU(closestElem) && this.inputElement.contains(closestElem)\n            && (closestElem.tagName === 'IMG' || closestElem.tagName === 'TABLE' || closestElem.tagName === 'A'))) {\n            e.preventDefault();\n        }\n    };\n    RichTextEditor.prototype.resetHandler = function () {\n        var defaultValue = this.valueContainer.defaultValue.trim();\n        this.setProperties({ value: defaultValue === '' ? null : defaultValue });\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     * @deprecated\n     */\n    RichTextEditor.prototype.autoResize = function () {\n        var _this = this;\n        if (this.height === 'auto') {\n            if (this.editorMode === 'Markdown') {\n                setTimeout(function () {\n                    _this.setAutoHeight(_this.inputElement);\n                }, 0);\n            }\n            else if (this.iframeSettings.enable) {\n                var iframeElement_1 = this.element.querySelector('#' + this.getID() + '_rte-view');\n                setTimeout(function () {\n                    _this.setAutoHeight(iframeElement_1);\n                }, 100);\n                this.inputElement.style.overflow = 'hidden';\n            }\n        }\n        else {\n            this.inputElement.style.overflow = null;\n        }\n    };\n    RichTextEditor.prototype.setAutoHeight = function (element) {\n        if (!isNOU(element)) {\n            element.style.height = this.inputElement.scrollHeight + 'px';\n            element.style.overflow = 'hidden';\n        }\n    };\n    RichTextEditor.prototype.wireEvents = function () {\n        this.element.addEventListener('focusin', this.onFocusHandler, true);\n        this.element.addEventListener('focusout', this.onBlurHandler, true);\n        this.on(events.contentChanged, this.contentChanged, this);\n        this.on(events.resizeInitialized, this.updateResizeFlag, this);\n        this.on(events.updateTbItemsStatus, this.updateStatus, this);\n        if (this.readonly && this.enabled) {\n            return;\n        }\n        this.bindEvents();\n    };\n    RichTextEditor.prototype.restrict = function (e) {\n        if (this.maxLength >= 0) {\n            var element = this.editorMode === 'Markdown' ? this.contentModule.getText() :\n                (e && e.currentTarget.textContent);\n            if (!element) {\n                return;\n            }\n            var array = [8, 16, 17, 37, 38, 39, 40, 46, 65];\n            var arrayKey = void 0;\n            for (var i = 0; i <= array.length - 1; i++) {\n                if (e.which === array[i]) {\n                    if (e.ctrlKey && e.which === 65) {\n                        return;\n                    }\n                    else if (e.which !== 65) {\n                        arrayKey = array[i];\n                        return;\n                    }\n                }\n            }\n            if ((element.length >= this.maxLength && this.maxLength !== -1) && e.which !== arrayKey) {\n                e.preventDefault();\n            }\n        }\n    };\n    RichTextEditor.prototype.bindEvents = function () {\n        this.keyboardModule = new KeyboardEvents(this.inputElement, {\n            keyAction: this.keyDown.bind(this), keyConfigs: __assign({}, this.formatter.keyConfig, this.keyConfig), eventName: 'keydown'\n        });\n        var formElement = closest(this.valueContainer, 'form');\n        if (formElement) {\n            EventHandler.add(formElement, 'reset', this.resetHandler, this);\n        }\n        EventHandler.add(this.inputElement, 'keyup', this.keyUp, this);\n        EventHandler.add(this.inputElement, 'paste', this.onPaste, this);\n        EventHandler.add(this.inputElement, Browser.touchEndEvent, debounce(this.mouseUp, 30), this);\n        EventHandler.add(this.inputElement, Browser.touchStartEvent, this.mouseDownHandler, this);\n        this.wireContextEvent();\n        this.formatter.editorManager.observer.on(CONSTANT.KEY_DOWN_HANDLER, this.editorKeyDown, this);\n        this.element.ownerDocument.defaultView.addEventListener('resize', this.onResizeHandler, true);\n        if (this.iframeSettings.enable) {\n            EventHandler.add(this.inputElement, 'focusin', this.focusHandler, this);\n            EventHandler.add(this.inputElement, 'focusout', this.blurHandler, this);\n            EventHandler.add(this.inputElement.ownerDocument, 'scroll', this.contentScrollHandler, this);\n            EventHandler.add(this.inputElement.ownerDocument, Browser.touchStartEvent, this.onIframeMouseDown, this);\n        }\n        this.wireScrollElementsEvents();\n    };\n    RichTextEditor.prototype.onIframeMouseDown = function (e) {\n        this.isBlur = false;\n        this.currentTarget = e.target;\n        this.notify(events.iframeMouseDown, e);\n    };\n    RichTextEditor.prototype.editorKeyDown = function (e) {\n        switch (e.event.action) {\n            case 'copy':\n                this.onCopy();\n                break;\n            case 'cut':\n                this.onCut();\n                break;\n            case 'tab':\n                if (this.iframeSettings.enable) {\n                    this.isBlur = true;\n                }\n                break;\n        }\n        if (e.callBack && (e.event.action === 'copy' || e.event.action === 'cut' || e.event.action === 'delete')) {\n            e.callBack({\n                requestType: e.event.action,\n                editorMode: 'HTML',\n                event: e.event\n            });\n        }\n    };\n    RichTextEditor.prototype.unWireEvents = function () {\n        this.element.removeEventListener('focusin', this.onFocusHandler, true);\n        this.element.removeEventListener('focusout', this.onBlurHandler, true);\n        this.off(events.contentChanged, this.contentChanged);\n        this.off(events.resizeInitialized, this.updateResizeFlag);\n        this.off(events.updateTbItemsStatus, this.updateStatus);\n        if (this.readonly && this.enabled) {\n            return;\n        }\n        this.unbindEvents();\n    };\n    RichTextEditor.prototype.unbindEvents = function () {\n        if (this.keyboardModule) {\n            this.keyboardModule.destroy();\n        }\n        var formElement = closest(this.valueContainer, 'form');\n        if (formElement) {\n            EventHandler.remove(formElement, 'reset', this.resetHandler);\n        }\n        EventHandler.remove(this.inputElement, 'keyup', this.keyUp);\n        EventHandler.remove(this.inputElement, 'paste', this.onPaste);\n        EventHandler.remove(this.inputElement, Browser.touchEndEvent, debounce(this.mouseUp, 30));\n        EventHandler.remove(this.inputElement, Browser.touchStartEvent, this.mouseDownHandler);\n        this.unWireContextEvent();\n        if (this.formatter) {\n            this.formatter.editorManager.observer.off(CONSTANT.KEY_DOWN_HANDLER, this.editorKeyDown);\n        }\n        this.element.ownerDocument.defaultView.removeEventListener('resize', this.onResizeHandler, true);\n        if (this.iframeSettings.enable) {\n            EventHandler.remove(this.inputElement, 'focusin', this.focusHandler);\n            EventHandler.remove(this.inputElement, 'focusout', this.blurHandler);\n            EventHandler.remove(this.inputElement.ownerDocument, 'scroll', this.contentScrollHandler);\n            EventHandler.remove(this.inputElement.ownerDocument, Browser.touchStartEvent, this.onIframeMouseDown);\n        }\n        this.unWireScrollElementsEvents();\n    };\n    /**\n     *\n     * @param e Focus event\n     * @returns string Returns the current focus either `editArea` or `toolbar` or `textArea` or `sourceCode` or `outside` of the RichTextEditor.\n     * @hidden\n     */\n    RichTextEditor.prototype.getCurrentFocus = function (e) {\n        if (e.target === this.inputElement && document.activeElement === this.inputElement) {\n            return 'editArea';\n        }\n        else if (e.target === this.getToolbarElement() || (!isNOU(e.relatedTarget) && closest(e.relatedTarget, '.e-rte-toolbar') === this.getToolbarElement())) {\n            return 'toolbar';\n        }\n        else if (e.target === this.valueContainer && document.activeElement === this.valueContainer) {\n            return 'textArea';\n        }\n        else if (!isNOU(e.target) && e.target.classList.contains(classes.CLS_RTE_SOURCE_CODE_TXTAREA) && document.activeElement === e.target) {\n            return 'sourceCode';\n        }\n        return 'outside';\n    };\n    /**\n     * @param {FocusEvent} e - specifies the event.\n     * @hidden\n     */\n    RichTextEditor.prototype.resetToolbarTabIndex = function () {\n        if (this.getToolbarElement()) {\n            var toolbarItem = this.getToolbarElement().querySelectorAll('input,select,button,a,[tabindex]');\n            for (var i = 0; i < toolbarItem.length; i++) {\n                if ((!toolbarItem[i].classList.contains('e-rte-dropdown-btn') &&\n                    !toolbarItem[i].classList.contains('e-insert-table-btn')) &&\n                    (!toolbarItem[i].hasAttribute('tabindex') ||\n                        toolbarItem[i].getAttribute('tabindex') !== '-1')) {\n                    toolbarItem[i].setAttribute('tabindex', '-1');\n                }\n            }\n        }\n    };\n    __decorate([\n        Complex({}, ToolbarSettings)\n    ], RichTextEditor.prototype, \"toolbarSettings\", void 0);\n    __decorate([\n        Complex({}, QuickToolbarSettings)\n    ], RichTextEditor.prototype, \"quickToolbarSettings\", void 0);\n    __decorate([\n        Complex({}, PasteCleanupSettings)\n    ], RichTextEditor.prototype, \"pasteCleanupSettings\", void 0);\n    __decorate([\n        Complex({}, FormatPainterSettings)\n    ], RichTextEditor.prototype, \"formatPainterSettings\", void 0);\n    __decorate([\n        Complex({}, EmojiSettings)\n    ], RichTextEditor.prototype, \"emojiPickerSettings\", void 0);\n    __decorate([\n        Complex({}, IFrameSettings)\n    ], RichTextEditor.prototype, \"iframeSettings\", void 0);\n    __decorate([\n        Complex({}, ImageSettings)\n    ], RichTextEditor.prototype, \"insertImageSettings\", void 0);\n    __decorate([\n        Complex({}, AudioSettings)\n    ], RichTextEditor.prototype, \"insertAudioSettings\", void 0);\n    __decorate([\n        Complex({}, VideoSettings)\n    ], RichTextEditor.prototype, \"insertVideoSettings\", void 0);\n    __decorate([\n        Complex({}, TableSettings)\n    ], RichTextEditor.prototype, \"tableSettings\", void 0);\n    __decorate([\n        Property(0)\n    ], RichTextEditor.prototype, \"floatingToolbarOffset\", void 0);\n    __decorate([\n        Complex({}, InlineMode)\n    ], RichTextEditor.prototype, \"inlineMode\", void 0);\n    __decorate([\n        Complex({}, FileManagerSettings)\n    ], RichTextEditor.prototype, \"fileManagerSettings\", void 0);\n    __decorate([\n        Property('100%')\n    ], RichTextEditor.prototype, \"width\", void 0);\n    __decorate([\n        Property(false)\n    ], RichTextEditor.prototype, \"enablePersistence\", void 0);\n    __decorate([\n        Property(true)\n    ], RichTextEditor.prototype, \"showTooltip\", void 0);\n    __decorate([\n        Property(false)\n    ], RichTextEditor.prototype, \"enableResize\", void 0);\n    __decorate([\n        Property({})\n    ], RichTextEditor.prototype, \"htmlAttributes\", void 0);\n    __decorate([\n        Property(null)\n    ], RichTextEditor.prototype, \"placeholder\", void 0);\n    __decorate([\n        Property(false)\n    ], RichTextEditor.prototype, \"autoSaveOnIdle\", void 0);\n    __decorate([\n        Property(false)\n    ], RichTextEditor.prototype, \"readonly\", void 0);\n    __decorate([\n        Property(true)\n    ], RichTextEditor.prototype, \"enabled\", void 0);\n    __decorate([\n        Property(true)\n    ], RichTextEditor.prototype, \"enableHtmlSanitizer\", void 0);\n    __decorate([\n        Property(false)\n    ], RichTextEditor.prototype, \"enableHtmlEncode\", void 0);\n    __decorate([\n        Property(false)\n    ], RichTextEditor.prototype, \"enableXhtml\", void 0);\n    __decorate([\n        Property('auto')\n    ], RichTextEditor.prototype, \"height\", void 0);\n    __decorate([\n        Property(null)\n    ], RichTextEditor.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(null)\n    ], RichTextEditor.prototype, \"value\", void 0);\n    __decorate([\n        Property('P')\n    ], RichTextEditor.prototype, \"enterKey\", void 0);\n    __decorate([\n        Property('BR')\n    ], RichTextEditor.prototype, \"shiftEnterKey\", void 0);\n    __decorate([\n        Property(30)\n    ], RichTextEditor.prototype, \"undoRedoSteps\", void 0);\n    __decorate([\n        Property(300)\n    ], RichTextEditor.prototype, \"undoRedoTimer\", void 0);\n    __decorate([\n        Property('HTML')\n    ], RichTextEditor.prototype, \"editorMode\", void 0);\n    __decorate([\n        Property(null)\n    ], RichTextEditor.prototype, \"keyConfig\", void 0);\n    __decorate([\n        Property(false)\n    ], RichTextEditor.prototype, \"showCharCount\", void 0);\n    __decorate([\n        Property(false)\n    ], RichTextEditor.prototype, \"enableTabKey\", void 0);\n    __decorate([\n        Property(false)\n    ], RichTextEditor.prototype, \"enableAutoUrl\", void 0);\n    __decorate([\n        Property(-1)\n    ], RichTextEditor.prototype, \"maxLength\", void 0);\n    __decorate([\n        Complex({}, Format)\n    ], RichTextEditor.prototype, \"format\", void 0);\n    __decorate([\n        Complex({}, NumberFormatList)\n    ], RichTextEditor.prototype, \"numberFormatList\", void 0);\n    __decorate([\n        Complex({}, BulletFormatList)\n    ], RichTextEditor.prototype, \"bulletFormatList\", void 0);\n    __decorate([\n        Complex({}, FontFamily)\n    ], RichTextEditor.prototype, \"fontFamily\", void 0);\n    __decorate([\n        Complex({}, FontSize)\n    ], RichTextEditor.prototype, \"fontSize\", void 0);\n    __decorate([\n        Complex({}, FontColor)\n    ], RichTextEditor.prototype, \"fontColor\", void 0);\n    __decorate([\n        Complex({}, BackgroundColor)\n    ], RichTextEditor.prototype, \"backgroundColor\", void 0);\n    __decorate([\n        Property(null)\n    ], RichTextEditor.prototype, \"valueTemplate\", void 0);\n    __decorate([\n        Property(10000)\n    ], RichTextEditor.prototype, \"saveInterval\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"beforeDialogOpen\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"dialogOpen\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"beforeDialogClose\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"dialogClose\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"beforeQuickToolbarOpen\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"quickToolbarOpen\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"quickToolbarClose\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"toolbarStatusUpdate\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"updatedToolbarStatus\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"imageSelected\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"beforeImageUpload\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"imageUploading\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"imageUploadSuccess\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"imageUploadFailed\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"imageRemoving\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"afterImageDelete\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"fileSelected\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"beforeFileUpload\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"fileUploading\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"fileUploadSuccess\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"fileUploadFailed\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"fileRemoving\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"afterMediaDelete\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"beforeSanitizeHtml\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"blur\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"toolbarClick\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"focus\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"change\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"resizing\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"resizeStart\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"resizeStop\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"beforePasteCleanup\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"afterPasteCleanup\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"beforeImageDrop\", void 0);\n    __decorate([\n        Property(null)\n    ], RichTextEditor.prototype, \"formatter\", void 0);\n    RichTextEditor = __decorate([\n        NotifyPropertyChanges\n    ], RichTextEditor);\n    return RichTextEditor;\n}(Component));\nexport { RichTextEditor };\n"],"names":["getLocale","self","localeItems","item","i","length","value","subCommand","localeObj","getConstant","locale","text","getIndex","val","items","index","some","toLocaleLowerCase","hasClass","element","className","classList","contains","getDropDownValue","type","returnType","data","result","k","isNOU","iconCss","isIDevice","Browser","isDevice","isIos","getFormattedFontSize","pageYOffset","e","parentElement","isIFrame","window","getBoundingClientRect","top","clientY","pageY","getTooltipText","serviceLocator","i10n","getService","itemLocale","toolsLocale","setToolbarStatus","isPopToolbar","updateDropDownFontFormatLocale","dropDown","dropDownModule","args","_i","keys_1","Object","keys","key","j","tbItems","itemStr","addClass","tbElements","classes.CLS_ACTIVE","removeClass","parent","toolbarSettings","formatDropDown","isDestroyed","formatItems","format","types","formatContent","default","content","width","cssClass","dataBind","alignDropDown","model.alignmentItems","fontNameDropDown","fontNameItems","fontFamily","fontNameContent","name_1","fontSizeDropDown","fontSizeItems","fontSize","fontSizeContent","replace","getCollection","getTBarItemsIndex","toolbarItems","itemsIndex","push","command","updateUndoRedoStatus","baseToolbar","undoRedoStatus","trgItems","undoRedoItems","toolbarObj","selectAll","classes.CLS_TB_ITEM","keys_2","target","enableItems","dispatchEvent","evt","document","createEvent","initEvent","parseHtml","tempNode","createElement","innerHTML","DocumentFragment","createRange","createContextualFragment","getTextNodesUnder","docElement","node","nodes","firstChild","nextSibling","nodeType","concat","toObjectLowerCase","obj","convertedValue","getEditValue","rteObj","enableHtmlEncode","updateTextNode","decode","setProperties","enterKey","resultElm","childNodes","setAttribute","isPreviousInlineElem","previousParent","insertElem","emptyBlockElem","querySelectorAll","CONSTANT.blockEmptyNodes","emptyInlineElem","CONSTANT.inlineEmptyNodes","nodeName","textContent","indexOf","trim","inlineNode","appendChild","detach","imageElm","classes.CLS_RTE_IMAGE","add","classes.CLS_IMGINLINE","classes.CLS_IMGBREAK","getDefaultValue","isEditableValueEmpty","sanitizeHelper","enableHtmlSanitizer","SanitizeHtmlHelper","beforeSanitize","selectors","tags","extend","cancel","helper","trigger","serializeValue","convertToBlob","dataUrl","arr","split","mime","match","bstr","atob","n","u8arr","Uint8Array","charCodeAt","Blob","getLocaleFontFormat","model.fontFamily","forEach","fontNameLocale","model.formatItems","formatsLocale","model.numberFormatList","numberFormatListLocale","model.bulletFormatList","bulletFormatListLocale","setEditFrameFocus","editableElement","selector","isNullOrUndefined","iframe","querySelector","contentWindow","focus","setAttributes","htmlAttributes","rte","isFrame","initial","contentModule","getDocument","_a","htmlAttr","enabled","setEnable","readonly","setReadOnly","inputElement","placeholder","setPlaceHolder","valueContainer","tableclass","initialLoad","contentChanged","initialEnd","iframeMouseDown","destroy","toolbarClick","toolbarRefresh","refreshBegin","toolbarUpdated","bindOnEnd","renderColorPicker","htmlToolbarClick","markdownToolbarClick","destroyColorPicker","modelChanged","tableModulekeyUp","keyUp","keyDown","mouseUp","toolbarCreated","toolbarRenderComplete","enableFullScreen","disableFullScreen","dropDownSelect","beforeDropDownItemRender","execCommandCallBack","imageToolbarAction","audioToolbarAction","videoToolbarAction","linkToolbarAction","windowResize","resizeStart","onResize","resizeStop","insertLink","unLink","editLink","openLink","actionBegin","actionComplete","updatedToolbarStatus","updateToolbarItem","insertImage","insertAudio","insertVideo","insertCompleted","imageLink","imageAlt","imageDelete","audioDelete","videoDelete","imageCaption","imageSize","videoSize","sourceCode","updateSource","beforeDropDownOpen","selectionSave","selectionRestore","expandPopupClick","count","mouseDown","sourceCodeMouseDown","editAreaClick","scroll","contentscroll","colorPickerChanged","tableColorPickerChanged","focusChange","selectRange","getSelectedHtml","renderInlineToolbar","paste","rtlMode","createTable","docClick","tableToolbarAction","checkUndo","readOnlyMode","moduleDestroy","pasteClean","enterHandler","beforeDialogOpen","clearDialogObj","beforeDialogClose","beforeQuickToolbarOpen","quickToolbarOpen","quickToolbarClose","imageSelected","imageUploading","imageUploadSuccess","imageUploadFailed","imageRemoving","fileSelected","fileUploading","fileUploadSuccess","fileUploadFailed","fileRemoving","afterImageDelete","afterMediaDelete","xhtmlValidation","beforeImageUpload","beforeFileUpload","resizeInitialized","renderFileManager","beforeImageDrop","dynamicModule","beforePasteCleanup","afterPasteCleanup","updateTbItemsStatus","showLinkDialog","closeLinkDialog","showImageDialog","showAudioDialog","showVideoDialog","closeImageDialog","closeAudioDialog","closeVideoDialog","showTableDialog","closeTableDialog","bindCssClass","formatPainterClick","formatPainterDoubleClick","emojiPicker","maximizeMinimizeClick","hidePopup","blockEmptyNodes","inlineEmptyNodes","CLS_RTE","CLS_RTL","CLS_DISABLED","CLS_SCRIPT_SHEET","CLS_STYLE_SHEET","CLS_TOOLBAR","CLS_TB_FIXED","CLS_TB_FLOAT","CLS_TB_ABS_FLOAT","CLS_INLINE","CLS_RTE_EXPAND_TB","CLS_FULL_SCREEN","CLS_QUICK_TB","CLS_POP","CLS_QUICK_POP","CLS_QUICK_DROPDOWN","CLS_IMAGE_POP","CLS_TEXT_POP","CLS_INLINE_POP","CLS_INLINE_DROPDOWN","CLS_DROPDOWN_POPUP","CLS_DROPDOWN_ICONS","CLS_DROPDOWN_ITEMS","CLS_DROPDOWN_BTN","CLS_RTE_CONTENT","CLS_TB_ITEM","CLS_TB_WRAP","CLS_HIDE","CLS_VISIBLE","CLS_FOCUS","CLS_RM_WHITE_SPACE","CLS_IMGRIGHT","CLS_IMGLEFT","CLS_IMGCENTER","CLS_IMGBREAK","CLS_AUDIOBREAK","CLS_CLICKELEM","CLS_VID_CLICK_ELEM","CLS_AUDIOWRAP","CLS_VIDEOWRAP","CLS_VIDEOBREAK","CLS_CAPTION","CLS_RTE_CAPTION","CLS_CAPINLINE","CLS_IMGINLINE","CLS_AUDIOINLINE","CLS_VIDEOINLINE","CLS_COUNT","CLS_WARNING","CLS_ERROR","CLS_ICONS","CLS_ACTIVE","CLS_EXPAND_OPEN","CLS_RTE_ELEMENTS","CLS_TB_BTN","CLS_HR_SEPARATOR","CLS_TB_IOS_FIX","CLS_LIST_PRIMARY_CONTENT","CLS_NUMBERFORMATLIST_TB_BTN","CLS_BULLETFORMATLIST_TB_BTN","CLS_FORMATS_TB_BTN","CLS_FONT_NAME_TB_BTN","CLS_FONT_SIZE_TB_BTN","CLS_ALIGN_TB_BTN","CLS_FONT_COLOR_TARGET","CLS_BACKGROUND_COLOR_TARGET","CLS_COLOR_CONTENT","CLS_FONT_COLOR_DROPDOWN","CLS_BACKGROUND_COLOR_DROPDOWN","CLS_COLOR_PALETTE","CLS_FONT_COLOR_PICKER","CLS_BACKGROUND_COLOR_PICKER","CLS_RTE_READONLY","CLS_TABLE_SEL","CLS_TB_DASH_BOR","CLS_TB_ALT_BOR","CLS_TB_COL_RES","CLS_TB_ROW_RES","CLS_TB_BOX_RES","CLS_RTE_HIDDEN","CLS_RTE_PASTE_KEEP_FORMAT","CLS_RTE_PASTE_REMOVE_FORMAT","CLS_RTE_PASTE_PLAIN_FORMAT","CLS_RTE_PASTE_OK","CLS_RTE_PASTE_CANCEL","CLS_RTE_DIALOG_MIN_HEIGHT","CLS_RTE_RES_HANDLE","CLS_RTE_IMAGE","CLS_AUD_FOCUS","CLS_VID_FOCUS","CLS_RTE_DRAG_IMAGE","CLS_RTE_UPLOAD_POPUP","CLS_POPUP_OPEN","CLS_UPLOAD_FILES","CLS_RTE_DIALOG_UPLOAD","CLS_RTE_RES_CNT","CLS_CUSTOM_TILE","CLS_NOCOLOR_ITEM","CLS_TABLE_BORDER","CLS_RTE_TABLE_RESIZE","CLS_RTE_FIXED_TB_EXPAND","CLS_RTE_TB_ENABLED","CLS_RTE_SOURCE_CODE_TXTAREA","RenderType","ToolbarType","DialogType","templateItems","tools","alignments","id","icon","tooltip","justifyleft","justifycenter","justifyright","justifyfull","fontname","fontsize","fontcolor","backgroundcolor","bold","italic","underline","strikethrough","clearformat","clearall","cut","copy","unorderedlist","orderedlist","numberformatlist","bulletformatlist","indent","outdent","undo","redo","superscript","subscript","createlink","openlink","editlink","removelink","image","audio","video","filemanager","createtable","removetable","audioreplace","audioremove","audiolayoutoption","videoreplace","videoalign","videoremove","videolayoutoption","videodimension","align","caption","remove","openimagelink","editimagelink","removeimagelink","insertlink","display","alttext","dimension","fullscreen","maximize","minimize","lowercase","uppercase","print","formats","sourcecode","preview","viewside","insertcode","tableheader","tableremove","tablerows","tablecolumns","tablecell","tablecellbackground","tablecellhorizontalalign","tablecellverticalalign","tableeditproperties","styles","formatpainter","emojipicker","alignmentLocale","alignmentItems","imageAlignItems","videoAlignItems","displayLocale","audioLayoutOptionLocale","videoLayoutOptionLocale","imageDisplayItems","audioLayoutOptionItems","videoLayoutOptionItems","tableCellItems","tableRowLocale","tableRowsItems","tableColumnLocale","tableColumnsItems","tableVerticalLocale","TableCellVerticalAlignItems","tableStyleLocale","TableStyleItems","predefinedItems","fontColor","Custom","backgroundColor","numberFormatList","bulletFormatList","windowKeys","Insert Link","Insert Image","Create Table","Undo","Redo","Copy","Cut","Paste","Bold","Italic","Underline","Strikethrough","Upper Case","Lower Case","Superscript","Subscript","Code View","Maximize","Minimize","Clear Format","Numbered List","Bulleted List","Number Format List","Bullet Format List","Insert Audio","Insert Video","Increase Indent","Decrease Indent","Decrease Fontsize","Increase Fontsize","Justify Center","Justify Full","Justify Left","Justify Right","Format Painter","defaultEmojiIcons","name","code","icons","desc","defaultLocale","justifyLeft","justifyCenter","justifyRight","justifyFull","fontName","clearFormat","clearAll","unorderedList","orderedList","createLink","removeLink","audioReplace","videoReplace","videoAlign","videoDimension","audioRemove","videoRemove","audioLayoutOption","videoLayoutOption","altText","lowerCase","upperCase","insertCode","linkText","linkTooltipLabel","linkWebUrl","linkTitle","linkurl","linkOpenInNewWindow","linkHeader","dialogInsert","dialogCancel","dialogUpdate","imageHeader","audioHeader","videoHeader","imageLinkHeader","audioLinkHeader","videoLinkHeader","embedVideoLinkHeader","mdimageLink","imageUploadMessage","audioUploadMessage","videoUploadMessage","imageDeviceUploadMessage","audioDeviceUploadMessage","videoDeviceUploadMessage","imageAlternateText","alternateHeader","browse","imageUrl","audioUrl","videoUrl","webUrl","embedUrl","imageSizeHeader","videoSizeHeader","imageHeight","imageWidth","videoHeight","videoWidth","textPlaceholder","inserttablebtn","tabledialogHeader","tableWidth","cellpadding","cellspacing","columns","rows","tableRows","tableColumns","tableCellHorizontalAlign","tableCellVerticalAlign","removeTable","tableHeader","tableRemove","tableCellBackground","tableEditProperties","insertColumnLeft","insertColumnRight","deleteColumn","insertRowBefore","insertRowAfter","deleteRow","tableEditHeader","TableHeadingText","TableColText","imageInsertLinkHeader","editImageHeader","editAudioHeader","editVideoHeader","alignmentsDropDownLeft","alignmentsDropDownCenter","alignmentsDropDownRight","alignmentsDropDownJustify","imageDisplayDropDownInline","imageDisplayDropDownBreak","audioLayoutOptionDropDownInline","audioLayoutOptionDropDownBreak","videoLayoutOptionDropDownInline","videoLayoutOptionDropDownBreak","tableInsertRowDropDownBefore","tableInsertRowDropDownAfter","tableInsertRowDropDownDelete","tableInsertColumnDropDownLeft","tableInsertColumnDropDownRight","tableInsertColumnDropDownDelete","tableVerticalAlignDropDownTop","tableVerticalAlignDropDownMiddle","tableVerticalAlignDropDownBottom","tableStylesDropDownDashedBorder","tableStylesDropDownAlternateRows","pasteFormat","pasteFormatContent","plainText","cleanFormat","keepFormat","pasteDialogOk","pasteDialogCancel","fileManager","fileDialogHeader","formatsDropDownParagraph","formatsDropDownCode","formatsDropDownQuotation","formatsDropDownHeading1","formatsDropDownHeading2","formatsDropDownHeading3","formatsDropDownHeading4","fontNameSegoeUI","fontNameArial","fontNameGeorgia","fontNameImpact","fontNameTahoma","fontNameTimesNewRoman","fontNameVerdana","numberFormatListNumber","numberFormatListLowerAlpha","numberFormatListUpperAlpha","numberFormatListLowerRoman","numberFormatListUpperRoman","numberFormatListLowerGreek","bulletFormatListDisc","bulletFormatListCircle","bulletFormatListSquare","numberFormatListNone","bulletFormatListNone","formatPainter","embeddedCode","pasteEmbeddedCodeHere","emojiPickerTypeToFind","emojiPickerNoResultFound","emojiPickerTrySomethingElse","linkAriaLabel","insertcolumnleft","insertcolumnright","deletecolumn","aligntop","alignmiddle","alignbottom","insertrowbefore","insertrowafter","deleterow","ToolbarRenderer","this","l10n","wireEvent","prototype","on","events.destroy","unWireEvent","events.maximizeMinimizeClick","destroyTooltip","tooltipTargetEle","event_1","MouseEvent","bubbles","cancelable","off","popupOverlay","EventHandler","onPopupOverlay","removePopupContainer","toolbarBeforeCreate","mode","enableCollision","notify","events.toolbarCreated","toolbarClicked","events.toolbarClick","dropDownSelected","events.dropDownSelect","events.beforeDropDownItemRender","tooltipBeforeRender","getAttribute","tooltipText","dropDownOpen","listEle","classes.CLS_QUICK_DROPDOWN","popupModal","events.selectionSave","dropDownClose","events.selectionRestore","popupContainer","popupEle","parentNode","insertBefore","style","removeProperty","undefined","renderToolbar","setPanel","renderPanel","overflowMode","rteToolbarObj","Toolbar","beforeCreate","bind","created","clicked","enablePersistence","enableRtl","isStringTemplate","appendTo","showTooltip","Tooltip","getID","showTipPointer","openDelay","opensOn","beforeRender","windowCollision","position","renderDropDownButton","css","_this","inlineMode","enable","proxy","DropDownButton","select","beforeOpen","editorMode","startNode","getRange","startContainer","tableEle","closest","trow","getComputedStyle","alignEle","alignStyle","textAlign","imageEle","divNode","events.beforeDropDownOpen","close","open","beforeItemRender","tabIndex","getElementById","renderListDropDown","itemName","inlineEle","event","currentElement","currentDropdown","childElementCount","removeAttribute","onmousedown","onkeydown","setIsModel","nextElementSibling","zIndex","parseInt","toString","paletteSelection","dropDownArgs","ele","colorbox","slice","call","borderBottomColor","filter","renderColorPickerDropDown","colorPicker","defaultColor","range","initialBackgroundColor","inline","colorpickerValue","formatter","editorManager","nodeSelection","closestElement","iframeSettings","ownerDocument","collapsed","classes.CLS_RTE","events.tableColorPickerChanged","events.colorPickerChanged","inst","getInstance","ColorPicker","showButtons","onclick","toggle","setColorPickerContentWidth","focusEle","pickerRefresh","beforeClose","dropElement","lastElementChild","popupElem","offsetWidth","Popup","refreshPosition","popupInst","relateTo","body","X","Y","targetType","collision","offsetY","colorPickerContent","borderWidth","borderBottomWidth","formatUnit","children","modeSwitcher","beforeTileRender","allClassName","change","colorPickerArgs","currentValue","rgba","beforeModeSwitch","presetColors","colorCode","getPanel","toolbarPanel","panel","BaseToolbar","locator","renderFactory","addEventListener","itemConfigs","events.rtlMode","setRtl","events.bindCssClass","setCssClass","removeEventListener","oldCssClass","getClass","classes","getTemplateObject","container","tagName","template","outerHTML","getObject","toLowerCase","prefixIcon","getItems","_loop_1","this_1","click","proxy_1","callback_1","getUndoRedoStack","saveData","currentContentElem","tbItems_1","num","shortCutKey","getToolbarOptions","render","toolbarRenderer","getRenderer","DropDownButtons","initializeInstance","dropdownContent","renderDropDowns","containerType","tbElement","model.templateItems","targetElement","classes.CLS_DROPDOWN_BTN","formatOLItem","defineProperties","enumerable","numberFormatListDropDown","classes.CLS_RTE_ELEMENTS","classes.CLS_ICONS","formatULItem","bulletFormatListDropDown","formatItem","classes.CLS_DROPDOWN_POPUP","classes.CLS_DROPDOWN_ITEMS","classes.CLS_FORMATS_TB_BTN","fontItem","classes.CLS_FONT_NAME_TB_BTN","getEditNode","classes.CLS_FONT_SIZE_TB_BTN","classes.CLS_ALIGN_TB_BTN","renderAlignmentDropDown","renderDisplayDropDown","rowDropDown","columnDropDown","cellDropDown","verticalAlignDropDown","tableStylesDropDown","getUpdateItems","dropDownItems","onPropertyChanged","model","newProp","_b","_c","fontItems","classes.CLS_QUICK_TB","_d","_e","_f","_g","getEditPanel","tableRowsDropDown","model.tableRowsItems","tableColumnsDropDown","model.tableColumnsItems","model.tableCellItems","tableCellVerticalAlignDropDown","model.TableCellVerticalAlignItems","displayDropDown","model.imageDisplayItems","model.videoLayoutOptionItems","model.audioLayoutOptionItems","imageAlignDropDown","classes.CLS_DROPDOWN_ICONS","model.imageAlignItems","model.videoAlignItems","tableSettings","removeDropDownClasses","destroyDropDowns","updateCss","dropDownObj","events.iframeMouseDown","onIframeMouseDown","events.modelChanged","ServiceLocator","services","register","RendererFactory","rendererMap","addRenderer","rName","getEnumValue","ToolbarAction","renderSelection","controlParent","activeEle","originalEvent","events.htmlToolbarClick","events.markdownToolbarClick","quickToolbarModule","tableQTBar","listItem","listStyle","listImage","process","isToolbar","isTransformChild","model.updateDropDownLocale","model.tools","contentRenderer","Content","editPanel","toolbarBindEvent","keyBoardModule","KeyboardEvents","getToolbarElement","keyAction","toolBarKeyDown","keyConfigs","keyConfig","eventName","action","createToolbarElement","enableFloating","tbWrapper","classes.CLS_TB_WRAP","firstElementChild","getToolbarMode","tbMode","Expand","Scrollable","checkToolbarResponsive","tBarMode","MultiRow","addFixedTBarClass","wireEvents","events.renderColorPicker","checkIsTransformChild","transformElements","toggleFloatClass","topValue","scrollParent","isBody","isFloat","floatOffset","floatingToolbarOffset","tbHeight","getToolbarHeight","getExpandTBarPopHeight","scrollParentRelativeTop","trgHeight","offsetHeight","bodyStyle","parseFloat","marginTop","paddingTop","targetTop","scrollParentYOffset","isMSPointer","scrollTop","scrollParentRect","scrollParentTop","classes.CLS_TB_ABS_FLOAT","parent_1","innerHeight","bottom","classes.CLS_TB_FLOAT","setStyleAttribute","events.renderInlineToolbar","classes.CLS_RTE_TB_ENABLED","classes.CLS_RTE_EXPAND_TB","refreshToolbarOverflow","divEle","iframeEle","events.updateToolbarItem","targetItem","updateItem","getBaseToolbarObject","disableToolbarItem","classes.CLS_TB_FIXED","removeFixedTBarClass","showFixedTBar","classes.CLS_TB_IOS_FIX","hideFixedTBar","addTBarItem","prefixId","refreshOverflow","updateToolbarStatus","fullScreen","fullScreenModule","showFullScreen","hideScreen","hideFullScreen","getBaseToolbar","addItems","enableTBarItems","isEnable","muteToolbarUpdate","undoRedoManager","getUndoStatus","removeTBarItems","removeItems","popHeight","expandPopup","classes.CLS_VISIBLE","classes.CLS_EXPAND_OPEN","classes.CLS_TOOLBAR","classes.CLS_RTL","isToolbarDestroyed","destroyToolbar","unWireScrollElementsEvents","unWireEvents","events.destroyColorPicker","toolbarActionModule","scrollHandler","getDOMVisibility","el","offsetParent","mouseDownHandler","focusChangeHandler","dropDownBeforeOpenHandler","tbFocusHandler","activeElm","activeElement","isToolbaractive","toolbarItem","toolbarClickHandler","trg","extendedTbar","maxHeight","setContentHeight","events.initialEnd","events.scroll","events.bindOnEnd","events.toolbarUpdated","events.refreshBegin","onRefresh","events.enableFullScreen","events.disableFullScreen","events.expandPopupClick","events.focusChange","events.mouseDown","events.sourceCodeMouseDown","events.moduleDestroy","refreshToolbar","module","getModuleName","wireScrollElementsEvents","events.dynamicModule","__extends","extendStatics","d","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","create","__decorate","decorators","c","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","keyCode","backspace","tab","enter","shift","control","alt","pause","capslock","space","escape","pageup","pagedown","end","home","leftarrow","uparrow","rightarrow","downarrow","insert","delete","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","semicolon","plus","comma","minus","dot","forwardslash","graveaccent","openbracket","backslash","closebracket","singlequote","]","[","=","_super","options","keyPressHandler","isAltKey","altKey","isCtrlKey","ctrlKey","isShiftKey","shiftKey","isMetaKey","metaKey","curkeyCode","which","configCollection_1","rconfig","rKeyObj","KeyboardEvents_1","getKeyConfigData","unwireEvents","oldProp","config","configCache","keyData","Number","getKeyCode","keyVal","toUpperCase","Property","Event","NotifyPropertyChanges","Base","ColorPickerInput","renderColorPickerInput","targetID","suffixID","fontNode","classes.CLS_FONT_COLOR_TARGET","fontColorPicker","fontColorDropDown","backNode","classes.CLS_BACKGROUND_COLOR_TARGET","backgroundColorPicker","backgroundColorDropDown","defaultColorPicker","innerEle","colorPickerObj","events.toolbarRenderComplete","BaseQuickToolbar","isDOMElement","popupRenderer","dropDownButtons","appendPopupContent","toolbarElement","popupType","classes.CLS_IMAGE_POP","classes.CLS_INLINE_POP","classes.CLS_TEXT_POP","popupId","getUniqueID","stringItems","createToolbar","renderPopup","quickTBarObj","refresh","setPosition","x","y","imgWrapper","isAligned","classes.CLS_RM_WHITE_SPACE","targetOffsetTop","offsetTop","parentOffsetTop","parentData","editTop","tBarElementHeight","editHeight","popWidth","left","offsetLeft","popupObj","right","checkCollision","viewPort","parentTop","contentTop","windowY","isCollide","popup","windowHeight","pageXOffset","windowWidth","bodyRightSpace","showPopup","eventArgs","positionX","positionY","events.beforeQuickToolbarOpen","beforeQuickToolbarArgs","editPanelTop","editPanelHeight","bodyRight","marginRight","paddingRight","innerWidth","toolbarAvail","getToolbar","toolbarModule","expTBHeight","tBarHeight","classes.CLS_HIDE","cntEle","classes.CLS_RTE_CONTENT","enableToolbarItem","append","showPopupData","classes.CLS_AUDIOWRAP","classes.CLS_CLICKELEM","classes.CLS_VID_CLICK_ELEM","show","duration","isIE","maxWidth","outerWidth","classes.CLS_POP","viewSourcePanel","sourceCodeModule","getViewPanel","dataContent","removeEleFromDOM","addQTBarItem","removeQTBarItem","events.quickToolbarClose","updateStatus","PopupRenderer","events.quickToolbarOpen","hide","popupPanel","QuickToolbar","formattedItems","getQTBarOptions","popType","renderType","createQTBar","qTBar","initializeQuickToolbars","onSelection","selectionChangeHandler","onMouseDown","isBlur","isRTE","keyUpQT","hideQuickToolbars","renderQuickToolbars","linkQTBar","imageQTBar","audioQTBar","videoQTBar","textQTBar","quickToolbarSettings","link","LinkToolbar","TextToolbar","ImageToolbar","AudioToolbar","VideoToolbar","table","TableToolbar","renderInlineQuickToolbar","inlineQTBar","InlineToolbar","showInlineQTBar","hideInlineQTBar","deBounce","clearTimeout","deBouncer","setTimeout","mouseUpHandler","touches","changedTouches","touchData","prevClientX","clientX","prevClientY","parentLeft","offsetX","pageX","closestAnchor","endNode","endContainer","startOffset","endOffset","documentElement","scrollLeft","keyDownHandler","inlineQTBarMouseDownHandler","keyUpHandler","getSelection","onSelectionChange","isCollapsed","getInlineBaseToolbar","wireInlineQTBarEvents","events.mouseUp","events.keyDown","events.keyUp","unWireInlineQTBarEvents","actionOnScroll","events.contentscroll","onKeyDown","events.hidePopup","baseQTObj","baseQuickToolbarObj","Count","renderCount","appendCount","maxLength","charCountBackground","htmlLength","htmlText","string","percentage","member","events.count","events.sourceCode","events.updateSource","MarkdownSelection","getLineNumber","textarea","point","substr","getSelectedText","start","selectionStart","selectionEnd","substring","getAllParents","getSelectedLine","getLine","getSelectedParentPoints","lines","parents","selectedPoints","selectedLine","startLength","join","firstPoint","line","points","lastPoint","setSelection","setSelectionRange","save","restore","textArea","isStartWith","isStart","RegExp","replaceSpecialChar","test","isClear","regex","getSelectedInlinePoints","MarkdownToolbarStatus","toolbarStatus","prevToolbarStatus","inlinecode","selection","events.toolbarRefresh","onRefreshHandler","parentsLines","documentNode","isListsApplied","currentFormat","mdSelectionFormats","isAppliedCommand","tbStatusString","JSON","stringify","events.updateTbItemsStatus","html","markdown","parse","isApply","lineSplit","listTags","formatTags","checkLine","selectionDirection","codeFormat","isFormat","splitText","splitAt","cmdPre","pre","selectedText","toLocaleUpperCase","beforeText","afterText","isCode","multiCharRegx","cmd","search","ExecCommandCallBack","events.execCommandCallBack","commandCallBack","formatPainterCopy","requestType","ACTION","FORMAT_TYPE","KEY_DOWN_HANDLER","KEY_UP_HANDLER","MODEL_CHANGED_PLUGIN","MODEL_CHANGED","MS_WORD_CLEANUP_PLUGIN","MS_WORD_CLEANUP","SPACE_ACTION","FORMAT_PAINTER_ACTIONS","EMOJI_PICKER_ACTIONS","Formatter","saveSelection","rangeCount","getRangeAt","isKeyboardVideoInsert","getAncestorNode","commonAncestorContainer","currentInsertContentLength","url","totalLength","getText","action_1","itemCollection","headingText","colText","CONSTANT.actionBegin","actionBeginArgs","preventDefault","isTableModule","tableModule","ensureInsideTableList","enterAction","observer","callBack","onSuccess","selectType","formatPainterPaste","clipboardAction","CONSTANT.checkUndo","execCommand","enableUndo","onKeyHandler","CONSTANT.contentChanged","events","CONSTANT.execCommandCallBack","CONSTANT.actionComplete","callbackArgs","CONSTANT.insertCompleted","isNotify","elements","autoResize","undoRedoStack","status","LISTS_COMMAND","selectionCommand","LINK_COMMAND","CLEAR_COMMAND","MD_TABLE","INSERT_TEXT_COMMAND","MDLists","markdownSelection","CONSTANT.LISTS_COMMAND","applyListsHandler","EVENTS.KEY_DOWN_HANDLER","EVENTS.KEY_UP_HANDLER","tabKey","addedLength","isNotFirst","isNotFirstLine","listFormat","olListType","getListRegex","currentAction","getAction","prevIndex","prevLine","prevLineSplit","tabSpaceLength","splitTab","splice","curTabSpace","getTabSpace","prevTabSpace","changeTextAreaValue","nextOrderedListValue","prevLineSplit_1","prefixValue","prefix","curTabSpaceLength","textAreaLength","changedList","prefixNumber","nestedTabSpace","nestedlistorder","nestedListStart","nextPrefixValue","traversIncreased","nextLineLength","lineBreak","nextLine","nextTabSpace","nextLineSplit","shiftTabTargetList","nextPrefix","previousOrderedListValue","tabs","regexFirstCondition","currentLine","ol","currentState","ul","syntax","UL","previousLine","tabSpace","nestedListOrder","olSyntaxList","OL","endLength","perfixObj","preLineTabSpaceLength","appliedLine","prefixPattern","preTabSpaceLength","currentPrefix","isExist","valueOf","pattern","configKey","MDFormats","EVENTS.FORMAT_TYPE","applyFormats","isAppliedFormat","applyCodeBlock","CONSTANT.selectionCommand","clearRegex","removeLength","removeText","parentLines","firstPrevText","lastNextText","startNo","lastIndexOf","endNo","repStartText","replaceAt","repEndText","lastLine","input","MDSelectionFormats","applyCommands","isBold","isItalic","isMatch","matchText","InlineCode","StrikeThrough","singleCharRegx","cmdB","cmdI","startCmd","endCmd","isApplied","textReplace","repStart","repEnd","regx","regxB","repText","regxTemp","regTest","markdownFormatTags","h6","h5","h4","h3","h2","h1","blockquote","markdownSelectionTags","SubScript","SuperScript","UpperCase","LowerCase","markdownListsTags","htmlKeyConfig","toolbar-focus","insert-link","insert-image","insert-audio","insert-video","insert-table","indents","outdents","html-source","full-screen","decrease-fontsize","increase-fontsize","justify-center","justify-full","justify-left","justify-right","clear-format","ordered-list","unordered-list","format-copy","format-paste","markdownKeyConfig","pasteCleanupGroupingTags","strong","emp","cite","selfClosingTags","UndoRedoCommands","undoRedoSteps","undoRedoTimer","debounceListener","debounce","EVENTS.ACTION","onAction","EVENTS.MODEL_CHANGED_PLUGIN","props","changEle","steps","removedContent","MDLink","CONSTANT.LINK_COMMAND","MDTable","CONSTANT.MD_TABLE","textAreaInitial","insertTable","getTable","textNonEmpty","tableCell","insertLine","convertToLetters","dummyElement","parentText","lastLineSplit","syntaxArr","getFormatTag","updateValue","makeSelection","ensureFormatApply","checkValid","syntaxFormatKey","syntaxTag","Formats","syntaxListKey","List","formatSplitZero","ensureStartValid","firstLine","firstLineSplit","ensureEndValid","formatSplitLength","updateValueWithFormat","formatSplit","textApplyFormat","rowNumber","baseChar","letters","String","fromCharCode","emptyText","isCursorBased","isSelectionBased","ClearFormat","CONSTANT.CLEAR_COMMAND","clear","replaceRegex","clearSelectionTags","selectionTags","expString","regExp","startExp","endExp","clearFormatTags","clearFormatLines","str","len","MDInsertText","CONSTANT.INSERT_TEXT_COMMAND","InsertTextExec","MarkdownParser","initialize","Observer","listObj","formatObj","linkObj","tableObj","clearObj","insertTextObj","editorKeyDown","editorKeyUp","EVENTS.MODEL_CHANGED","exeValue","MarkdownFormatter","updateFormatter","editElement","doc","MarkdownRender","div","attrs","aria-labelledby","contentPanel","MarkdownEditor","toolbarUpdate","events.initialLoad","instantiateRenderer","onToolbarClick","events.selectAll","events.getSelectedHtml","onSelectionSave","onSelectionRestore","events.readOnlyMode","updateReadOnly","classes.CLS_RTE_READONLY","events.insertLink","events.insertImage","tableConstant","option","IMAGE","AUDIO","VIDEO","TABLE","LINK","INSERT_ROW","INSERT_COLUMN","DELETEROW","DELETECOLUMN","REMOVETABLE","TABLEHEADER","TABLE_VERTICAL_ALIGN","TABLE_MERGE","TABLE_VERTICAL_SPLIT","TABLE_HORIZONTAL_SPLIT","ALIGNMENT_TYPE","INDENT_TYPE","BLOCK_TAGS","IGNORE_BLOCK_TAGS","TABLE_BLOCK_TAGS","SELECTION_TYPE","INSERTHTML_TYPE","INSERT_TEXT_TYPE","CLEAR_TYPE","SELF_CLOSING_TAGS","NodeSelection","startNodeName","endNodeName","saveInstance","cloneRange","rootNode","documentFromRange","getNodeArray","get","setStart","collapse","defaultView","previousSibling","isChildNode","nodeCollection","getNode","getNodeCollection","getParentNodeCollection","getParentNodes","reverse","getSelectionNodeCollection","getSelectionNodes","getSelectionNodeCollectionBr","getSelectionNodesBr","regEx","getInsertNodeCollection","getInsertNodes","root","array","setRangePoint","isvalid","size","constant","nodeValue","setRange","removeAllRanges","addRange","setSelectionText","startIndex","endIndex","setEnd","setSelectionContents","selectNode","setSelectionNode","selectNodeContents","getSelectedNodes","Clear","insertParentNode","newNode","surroundContents","setCursorPoint","markerClassName","startSelection","endSelection","DOMNode","currentDocument","contents","isBlockNode","Node","ELEMENT_NODE","CONSTANT.BLOCK_TAGS","isLink","blockParentNode","rawAttributes","rawAttr","attributes","attr","orderRawAttr","sort","attrKey","attrValue","clearAttributes","openTagString","closeTagString","createTagString","relativeElement","isList","isElement","isEditable","replaceWith","parseHTMLFragment","temp","wrap","wrapper","insertAfter","referenceNode","wrapInner","unWrap","unWrapNode","removeChild","getSelectedNode","TEXT_NODE","nodeFinds","existNodes","isEditorArea","getRangePoint","ranges","f","getPreviousNode","previousElementSibling","encode","innerText","saveMarker","startTextNode","endTextNode","marker","setMarker","startChildNodes","finalNode","getLastTextNode","existNode","textNodes","CONSTANT.IGNORE_BLOCK_TAGS","ensureSelfClosingTag","isTable","parNode","tdNode","lastNode","lastChild","createTempNode","getImageTagInSelection","focusNode","blockNodes","collectionNodes","ignoreTableTag","contentEditable","listNodes","CONSTANT.TABLE_BLOCK_TAGS","Lists","domNode","onKeyUp","EVENTS.SPACE_ACTION","spaceKeyAction","testList","elem","olListRegex","elementStart","testCurrentList","olListStartRegex","currentContent","spaceList","preElement","nextElement","preElemULStart","nextElemULStart","startElementOLTest","preElementOLTest","nextElementOLTest","enterList","hasMediaElem","videoElemList","embedVideoElem","startNodeParent","nearBlockNode","nodeCutter","GetSpliceNode","insertTag","backspaceList","parentList","removeList","firstListBackSpace","userAgent","commonLIParent","currentLIElem","currentElem","commonAncestor","startEle","endEle","isNested","ignoreDefault","stopPropagation","revertList","revertClean","nestedList","cleanNode","prevSibling","noPreviousElement","firstNode","firstNodeOL","siblingListOL","siblingListLI","siblingListLIFirst","h","prepend","list-style-type","nestedElement","nestedElementLI","firstNodeLI","lastSelectionNode","listsNodes","setSelectionBRConfig","allSelectedNode","selectedNodes","currentFormatNodes","currentNode","previousCurrentNode","previousNode","tempElem","preNode","postNode","applyLists","startElem","endElem","isRevert","removeEmptyListElements","checkLists","list-style-image","openTag","closeTag","newTag","replaceHTML","collectionString","listElem","listStyleType","nodesTemp","hasAttribute","liParents","contentNodes","findUnSelected","rightIndent","indentElements","childElements","z","childLI","viewNode","childNode","class","nodeInnerHtml","emptyUl","emptyLi","InsertMethods","WrapBefore","textNode","isAfter","AppendBefore","Wrap","unwrap","child","NodeCutter","SplitNode","clone","setStartBefore","setEndAfter","fragment","extractContents","spliceEmptyNode","isRteElm","GetCursorStart","indexes","GetCursorRange","cursorRange","TrimLineBreak","GetCursorNode","getParentNode","endCon","pTag","replaceChild","brNode","startCon","preElem","endPreElem","deleteContent","removeCodeContent","lastEmpty","lastBeforeBr","startParent","paraFocus","isNotEndCursor","pointer","deleteContents","referNode","isEnd","insertMarker","brTag","cloneNode","previousSib","insertAdjacentHTML","setCursorPosition","isEmpty","markerElem","mrkParentElem","focusSelectionParent","brElm","tempSpanPElem","tempSpan","isSelectAll","formatsNodes","cleanFormats","replaceNode","replaceTag","preFormatMerge","preNodes","ignoreAttr","InsertHtml","Insert","insertNode","editNode","isExternal","findFirstTextNode","currentIndex","isCursor","closestParentNode","closestEle","pasteInsertHTML","sibNode","lasNode","removeEmptyElements","imageFocus","frag","createDocumentFragment","paraElem","currentBlockNode","getImmediateBlockNode","isSingleNode","containsBlockNode","removingComments","allChildNodes","parentElem","insertTempNode","isFirstTextNode","paraElm","contentsDeleted","firstParaElm","nearestAnchor","immediateBlockNode","placeCursorEnd","cursorPos","blockNode","liNode","insertAdjacentElement","splitedElm","tableElm","tdElm","borderLeft","borderRight","borderBottom","borderTop","border","createTextNode","elm","innerElement","findDetachEmptyElem","removableElement","emptyElements","nonSvgEmptyElements","from","lineWithDiv","CONSTANT.SELF_CLOSING_TAGS","detachableElement","LinkCommand","CONSTANT.LINK","linkCommand","selectParent","domSelection","charAt","localeCompare","anchor","createAchorNode","modifiedText","repeat","createLinkNode","anchorEle","title","ariaLabel","txtArray","inlineNodes","removeNodes","anchorNodes","finalinlineNodes","check","j_1","cln","j_2","href","linkNode","containsNode","Alignments","JustifyLeft","JustifyCenter","JustifyRight","JustifyFull","CONSTANT.ALIGNMENT_TYPE","applyAlignment","getTableNode","isTableAlign","text-align","alignmentNodes","imageTags","elementNode","imgObj","imageCommand","Indents","indentValue","CONSTANT.INDENT_TYPE","applyIndents","editEle","isRtl","indentsNodes","parentNodes","marginLeftOrRight","marginLeft","indentsValue","CLASS_IMAGE_RIGHT","CLASS_IMAGE_LEFT","CLASS_IMAGE_CENTER","CLASS_IMAGE_BREAK","CLASS_CAPTION","CLASS_CAPTION_INLINE","CLASS_AUDIO_INLINE","CLASS_CLICK_ELEM","CLASS_VIDEO_CLICK_ELEM","CLASS_AUDIO","CLASS_VIDEO","CLASS_AUDIO_WRAP","CLASS_EMBED_VIDEO_WRAP","CLASS_AUDIO_FOCUS","CLASS_VIDEO_FOCUS","CLASS_VIDEO_INLINE","ImageCommand","CONSTANT.IMAGE","createImage","insertImageLink","openImageLink","editImageLink","removeImageLink","removeImage","insertAltTextImage","imageDimension","imageJustifyLeft","imageJustifyCenter","imageJustifyRight","imageInline","imageBreak","isReplaced","src","imgElement","setStyle","imgEle","selectedNode","imgElm_1","calculateStyleValue","height","minWidth","minHeight","capImgWrap","textEle","newTextEle","insertElement","classes.CLASS_CAPTION","classes.CLASS_IMAGE_RIGHT","classes.CLASS_IMAGE_LEFT","classes.CLASS_IMAGE_CENTER","classes.CLASS_IMAGE_BREAK","classes.CLASS_CAPTION_INLINE","AudioCommand","CONSTANT.AUDIO","audioCommand","createAudio","classes.CLASS_AUDIO_WRAP","classes.CLASS_AUDIO","classes.CLASS_AUDIO_INLINE","classes.CLASS_AUDIO_FOCUS","wrapElement","classes.CLASS_CLICK_ELEM","audioEle","fileName","audElement","controls","sourceElement","clickElement","audioElm_1","load","VideoCommand","CONSTANT.VIDEO","videoCommand","videoWrapNode","videoClickElem","classes.CLASS_EMBED_VIDEO_WRAP","classes.CLASS_VIDEO_CLICK_ELEM","createVideo","cssFloat","classes.CLASS_VIDEO","classes.CLASS_VIDEO_INLINE","classes.CLASS_VIDEO_FOCUS","vidElement","isEmbedUrl","videoEle","videoElm_1","editAreaVideoClick","TableCommand","CONSTANT.TABLE","CONSTANT.INSERT_ROW","insertRow","CONSTANT.INSERT_COLUMN","insertColumn","CONSTANT.DELETEROW","CONSTANT.DELETECOLUMN","CONSTANT.REMOVETABLE","CONSTANT.TABLEHEADER","CONSTANT.TABLE_VERTICAL_ALIGN","tableVerticalAlign","CONSTANT.TABLE_MERGE","cellMerge","CONSTANT.TABLE_HORIZONTAL_SPLIT","HorizontalSplit","CONSTANT.TABLE_VERTICAL_SPLIT","VerticalSplit","tableMove","tblBody","tdWid","row","cell","removeEmptyNode","emptyLiChild","getSelectedCellMinMaxIndex","selectedCells","curTable","a","minI","maxI","minJ","maxJ","selectedCellIndex","getCorrespondingIndex","minMaxIndex","FindIndex","Math","min","max","startRow","endRow","startColumn","endColumn","isBelow","selectedCell","lastRow","cloneRow","allCells","getCorrespondingColumns","minVal","newRow","isHeaderSelect","tdElement","selectedRow","curCell","curRow","allRows","colIndex","previousWidth","currentWidth","currentTabElm","thTdElm","dataset","oldWidth","colTemplate","toFixed","tBodyHeadEle","rowIndex","deleteIndex","selectedMinMaxIndex","minCol","maxCol","currentRow","currentCell","currentCellIndex","colSpanVal","rowHeadEle","nextFocusCell","sContainer","startChildLength","rowSpanVal","getMergedRow","focusTrEle","cells","mergedRow","selectedTable","headerExit","cellCount","colSpanCount","createTHead","th","deleteTHead","verticalAlign","mergeCellContent","minMaxIndexes","getSelectedMinMaxIndexes","firstCell","rowSelectedCells","totalWidth","updateRowSpanStyle","updateColSpanStyle","colValue","colMin","eleArray","updateCellAttribute","rowValue","rowMin","firstIndex","spanCount","innerHtml","correspondingCells","minRow","maxRow","currentRowCol","targetRowCol","activeCell","newCell","activeCellIndex","activeCellRowSpan","avgCount","ceil","avgRowIndex","newTrEle","avgWidth","isNaN","correspondingColumns","activeCellcolSpan","elementArray","colEle","ele_1","colspan_1","rowSpan","columnIndex","nextIndex","nextCol","highlightCells","startCell","endCell","minRowIndex","maxRowIndex","minColIndex","maxColIndex","minMaxValues","MinMax","activeCellTag","targetCellTag","activeRowIndex","activeColumnIndex","targetRowIndex","targetColumnIndex","activeCellList","activeIndexes","targetIndexes","IsFormatted","getFormattedNode","getFormatParent","isFormattedNode","isUnderline","isStrikethrough","isSuperscript","isSubscript","isFontColor","isFontName","isFontSize","isBackgroundColor","inlineTags","fontWeight","fontStyle","textDecoration","textDecorationLine","color","backColor","SelectionCommands","applyFormat","painterValues","isFormatted","preventRestore","isFontStyle","currentFormatNode","currentSelector","cursorNode","insertCursorNode","isSubSup","formatNode","insertFormat","removeFormat","applySelection","cursorNodes","cursorFormat","getCursorFormat","emptySpaceNode","brElem","getInsertNode","splitNode","startText","nodeText","nodeIndex","pop","isFullNodeSelected","wholeText","nodeTraverse","styleElement","GetFormatNode","nodeArray","priorityNode","getPriorityFormatNode","applyStyles","bgStyle","bg","formatNodeStyles","formatNodeTagName","nodeTraverseCondition","currentNodeElem","curParentElem","liElement","liChildContent","includes","isNestedList","nestedListCount","isNestedListItem","num_1","num_2","num_3","insertFormatPainterElem","isSameTextContent","nodeList","getChildNode","fontColorNode","backgroundColorNode","fontNameNode","fontSizeNode","updateStyles","tag","formatPainterCleanup","clonedElement","elemList","lastElement","INVALID_TAGS","childELemList","blockChildNodes","currentChild","SelectionBasedExec","CONSTANT.SELECTION_TYPE","InsertHtmlExec","CONSTANT.INSERTHTML_TYPE","applyHtml","pastedElements","allPastedElements","imgElements","allImgElm","imgElem","defaultTag","lastText","exactNodes","cloneSelectNodes","clearInlines","reSelection","cloneParentNodes","clearBlocks","selectionNodes","endIndexNode","spliceParent","removeParent","index1","index2","index3","parentIndex","elementIndex","NONVALID_TAGS","NONVALID_PARENT_TAGS","IGNORE_PARENT_TAGS","currentInlineNode","removeInlineParent","ClearFormatExec","CONSTANT.CLEAR_TYPE","applyClear","UndoRedoManager","getTextContentFromFragment","currentContainer","addedContent","MsWordPaste","olData","ulData","ignorableNodes","borderStyle","upperRomanNumber","lowerRomanNumber","lowerGreekNumber","removableElements","listContents","cropImageDimensions","EVENTS.MS_WORD_CLEANUP_PLUGIN","wordCleanup","wordPasteStyleConfig","allowedStylePropertiesArray","tempHTMLContent","clipboardData","getData","rtfData","pattern4","imageConversion","addListClass","cleanUp","listConverter","cleanList","styleCorrection","removeUnwantedElements","removeEmptyAnchorTag","breakLineAddition","removeClassName","addTableBorderClass","liChildren","listTag","replacableElem","closestListElem","findClosestListElem","allNodes","allTableElm","hasTableBorder","checkVShape","imgSrc","base64Src","imgName","linkRegex","hexValue","hexConversion","base64Data","hex","convertToBase64","isCroppedImage","goalWidth","goalHeight","cropLength","cropTop","cropR","cropB","byteArr","conHexStringToBytes","base64String","conBytesToBase64","base64Str","byteArrLen","array3","array3length","array4","imgType","picHead","pic","source","fullImg","extractCropValue","crop","exec","elmWithClass","allElements","findDetachElem","brElement","styleElm","regExpStartElem","regExpEndElem","hasParentWithClass","currentParentElem","styleClassObject_1","findStyleObject","values","map","removeUnwantedStyle","filterStyles","resultElem","fromClass","getElementsByClassName","getElementsByTagName","styleProperty","valueSplit","changedValue","listClass","olULElems","classStyle","inlineStyle","elmWithStyles","elemStyleProperty","styleValue","styleValues","styleClassObject","tempStyle","classNameCollection","stylesCollection","classNames","prevflagState","tempCleaner","level","stNode","collection","currentListStyle","getListContent","startAttr","styleMarginLeft","getlistStyleType","startString","currentClassName","textIndent","listType","nestedLevel","listStyleTypeName","makeConversion","elemColl","temp1","listContent","currentListClass","charCode","prevList","pLevel","listCount","isNormalList","pElement","initialNode","getNamedItem","pushContent","listIgnoreTag","listOrder","CONSTANT.INSERT_TEXT_TYPE","insertText","statusCollection","ToolbarStatus","targetNode","formatCollection","nodesLength","isNodeChanged","isOrderedList","isUnorderedList","isAlignment","isFormats","isNumberFormatList","isBulletFormatList","pos","prop","getPropertyValue","list","EmojiPickerAction","EVENTS.EMOJI_PICKER_ACTIONS","emojiInsert","prevChar_1","beforeApplyFormat","colon","prevChar","isPrevSpace","focusOffset","isBlockFormat","range1","startPoint","range2","node2","FormatPainterActions","settings","setDeniedFormats","EVENTS.FORMAT_PAINTER_ACTIONS","actionHandler","formatPainterSettings","allowedFormats","deniedFormats","copyCollection","deniedFormatsCollection","newElem","newElemLastChild","allowedContext","formatPainterAction","copyAction","pasteAction","escapeAction","generateElement","lastAppendChild","elemCollection","i_1","property","i_2","priority","setProperty","elemChild","removeDeniedFormats","paintPlainTextFormat","insertFormatNode","deniedPropArray","length_1","elementsList","classLength","styleLength","attributeLength","currentContext","findCurrentContext","allowedRulesArray","getRangeParentElem","rangeParentElem","context","allAttributes","attribute","allStyles","styleProp","getPropertyPriority","rangeParent","rangeParentELem","nearBlockParentName","getNearestBlockParentElement","isBlockElement","isInValid","validateELementTag","closestParagraph","closestList","clonedElem","newBlockElem","inlineElement","childElem","formatValues","insertBlockNode","listElement","cloneListParentNode","sameListType","cloneElementNode","cloneParentNode","isSameListType","insertSameList","insertNewList","after","cleanEmptyLists","parent_2","currentParent","detachEmptyBlockNodes","nearestListNode","formatString","makeDeniedFormatsCollection","openParenIndex","closeParenIndex","openBracketIndex","closeBracketIndex","openBraceIndex","closeBraceIndex","attributesList","stylesList","openIndexArray","EditorManager","alignmentObj","indentsObj","audioObj","videoObj","selectionObj","inserthtmlObj","msWordPaste","formatPainterEditor","emojiPickerObj","EVENTS.MS_WORD_CLEANUP","onWordPaste","onBegin","HTMLFormatter","HtmlToolbarStatus","ContentRender","rteContent","contenteditable","textString","IframeContentRender","apply","iFrameContent","srcdoc","contentDocument","setThemeColor","write","XhtmlValidation","events.xhtmlValidation","enableXhtmlValidation","enableXhtml","clean","ImageTags","removeTags","RemoveUnsupported","selfEncloseValidation","valueLength","arrayValue","valueTemp","valueDupe","valueOriginal","imgRegexp","g","imgNodes","RemoveElementNode","rmvNode","parentArray","rmvArray","underlineEle","spanEle","strongEle","boldEle","attrArray","RemoveAttributeByName","attrName","hasChildNodes","childEle","HtmlEditor","rangeCollection","isImageDelete","nodeSelectionObj","colorPickerModule","events.selectRange","events.paste","onPaste","events.tableclass","isTableClassAdded","tableElement","isRootParent","previousLength_1","previousRange","previousLength","currentLength","tempSpanToRemove","currentChildNode","currentRange","info","backSpaceCleanup","deleteCleanup","enableTabKey","textCont","spaceLink","events.enterHandler","currentRange_1","editorValue","orderedList_1","unOrderedList","isUnOrderedList","eventArgs_1","events.actionBegin","events.actionComplete","rangeElement","oldRangeElement","deleteRangeElement","deleteOldRangeElement","ulListStartRegex","isLiElement","isPreviousNotContentEditable","checkNode","getRootBlockNode","getRangeLiNode","normalize","rootElement","getRangeElement","getCaretIndex","preCaretRange","rangeBlockNode","rangeLiNode","isWordPaste","httpRegex","wwwRegex","enterSplitText","contentInnerElem","contentWithSpace","spaceBetweenContent","spaceSplit","divElement","splitTextContent","resultSplitContent","pasteCleanupModule","selectNodeEle","urlText","urlTextRange","selectParentEle","linkDialog","imageDialog","events.unLink","events.insertAudio","events.insertVideo","events.createTable","events.renderFileManager","events.emojiPicker","events.imageToolbarAction","events.audioToolbarAction","events.videoToolbarAction","events.linkToolbarAction","events.tableToolbarAction","detail","clickTimeout","events.formatPainterClick","events.formatPainterDoubleClick","formatterClass","PasteCleanup","isNotFromHtml","containsHtml","cropImageData","dialogRenderObj","events.pasteClean","imageproperties","events.beforePasteCleanup","file","htmlRegex","getAsFile","imageFormatting","splitBreakLine","pasteCleanupSettings","allowedStyleProps","tempDivElem","isValueNotEmpty","prompt","pasteDialog","fireFoxImageUpload","plainFormatting","formatting","currentFocusNode","insertImageSettings","setImageProperties","imgUploading","makeSpace","saveUrl","uploadImg","fileList","base64ToFile","uploadMethod","path","saveFormat","getBlob","allImgElmId","blopUrl","URL","createObjectURL","toolbarEnableDisable","state","disable","uploadEle","opacity","contentEle","viewPortElement","classes.CLS_POPUP_OPEN","classes.CLS_RTE_UPLOAD_POPUP","timeOut","refreshPopup","uploadObj","Uploader","asyncSettings","removeUrl","classes.CLS_RTE_DIALOG_UPLOAD","dropArea","allowedExtensions","allowedTypes","success","popupClose","uploading","isServerRendered","events.imageUploading","imageUploadingArgs","beforeUpload","events.beforeImageUpload","failure","uploadFailure","canceling","selected","removing","fileData","rawFile","validationMessages","minSize","maxSize","statusCode","createFileList","upload","events.imageUploadFailed","events.imageUploadSuccess","imageElement","base64","filename","baseStr","extension","decodeStr","strLen","decodeArr","navigator","appVersion","blob","File","pasteArgs","imageValue","radioRender","keepRadioButton","RadioButton","label","checked","keepFormatElement","cleanRadioButton","cleanFormatElement","plainTextRadioButton","plainTextElement","selectFormatting","keepChecked","cleanChecked","isHeight","preRTEHeight","dialogModel","buttons","dialogObj","argument","buttonModel","isPrimary","args_1","header","isModal","visible","rteDialogWrapper","destroyDialog","currentObj","rteDialogContainer","rteDialogWrapperChildLength","cleanAppleClass","appleClassElem","clipBoardElem","deniedTags","deniedAttributes","deniedAttrs","allowedStyle","allImg","addTempClass","tempWrapperElem","filesData","currentData","events.afterPasteCleanup","updatedArgs","addTableClass","returnArgs","imageElements","removeTempClass","cropImageHandler","image_1","Image","canvas_1","ctx_1","getContext","onload","wGoalWidth","naturalWidth","hGoalHeight","naturalHeight","cropWidth","cropHeight","drawImage","croppedBase64","toDataURL","getInsertImgMaxWidth","allChild","classElm","detachInlineElements","getTextContent","firstElm","spanElm","inElem","parElem","l","allElems","allAtr","tagGrouping","groupingTags","addTags","attributesfilter","userAttributes","allowedAttributeArray","deniedAttributeArray","allowedAttribute","deniedAttribute","removableAttrElement","allowedStyleValue","allowedStyleValueArray","Resize","renderResizable","enableRtlClass","resizer","classes.CLS_RTE_RES_HANDLE","classes.CLS_RTE_RES_CNT","touchStartEvent","wireResizeEvents","events.resizeInitialized","events.resizeStart","resizeStartArgs","unwireResizeEvents","performResize","events.onResize","resizingArgs","boundRect","isMouseEvent","toolBarEle","contentPanelWidth","eventType","refreshUI","stopResize","events.resizeStop","getEventType","isMouse","pointerType","touchMoveEvent","touchEndEvent","FileManager","EJ2FileManager","Inject","ContextMenu","DetailsView","NavigationPane","rendererFactory","fileManagerModule","dlgInsert","dlgHeader","dlgCancel","dlgButtons","insertImageUrl","cancelDialog","disabled","selectObj","dlgTarget","aria-owns","fileWrap","getInputUrlElement","animationSettings","effect","showCloseIcon","closeOnEscape","returnValue","destroyComponents","fileObj","allowMultiSelection","fileManagerSettings","view","sortOrder","ajaxSettings","showThumbnail","rootAliasName","uploadSettings","searchSettings","showHiddenItems","allowDragAndDrop","showFileExtension","detailsViewSettings","contextMenuSettings","navigationPaneSettings","beforeSend","fileSelect","selectedFile","fileDetails","isFile","inputUrl","getImageUrl","filterPath","refreshLayout","onDocumentClick","imgUrl","urlLabel","placeUrl","spellcheck","matchUrl","prevEle","FullScreen","scrollableParent","getScrollableParent","classes.CLS_FULL_SCREEN","evenArgs","beginEventArgs","toggleParentOverflow","isExpand","properties","isAdd","FormatPainter","isSticky","isActive","toolbarDoubleClick","events.editAreaClick","clickargs","focusIn","previousAction","isKeyboard","updateCursor","updateToolbarBtn","toolbarBtn","EmojiPicker","events.docClick","onkeyPress","onkeyUp","spanElement","clickEvent","emojiPickerSettings","iconsSet","showSearchBox","popDiv","searchFilter","extendEle","xValue","yValue","coordinates","getCoordinates","inputEle","TextBox","showClearButton","closeIcon","emojiToolBar","pushToolBar","emojiToolbarClick","emojiBtnDiv","popupBorder","inputELe","getComputedStyle_1","marginBottom","emojiGroupDiv","emojiName","emojiBtn","button","buttoncode","scrollEvent","emojiBtnClick","emojiButtons","toolbarName","round","cp","fromCodePoint","emojiSet","firstSetWidth","currentEleName","emojiGroups","emojiGroupsheight","emojiHeight","group","focusBtn","scrollHeight","searchKeyHandler","srcElement","focusIndex","lastRowIndex","floor","lastEleLength","lastEleIndex","nextRowIndex","firstFocusEle","previousRowLength","previousRowIndex","filterKeyHandler","firstFocusEle_1","firstFocusEle_2","firstFocusEle_3","firstFocusEle_4","firstFocusEle_5","contentELe","trimmedStr","inputValue","emojipickerAll","toolbarGroup","excludedDiv_1","getComputedStyle_2","inputHeight","filteredButtons","emojis","noEmojiObj","noEMoji","titleLength","startsWith","emoji","margin","emotePickerTooltips","targetEle","previousText","isPrevColon","showEmojiPicker","selectedValue","rect","rteEle","toolbarHeight","cursorTop","cursorLeft","screenHeight","popupTop","popupLeft","popupHeight","Render","renderer","Link","rteID","events.showLinkDialog","showDialog","events.closeLinkDialog","closeDialog","events.insertCompleted","showLinkQuickToolbar","events.clearDialogObj","onToolbarAction","events.editLink","events.openLink","editAreaClickHandler","checkBoxObj","quickToolObj","target_1","linkTop","linkLeft","linkPos","hideLinkQuickToolbar","showOnRightClick","getAnchorNode","isPopupOpen","openDialog","isInternal","inputDetails","linkWebAddress","linkDisplayText","linkTooltip","urlPlace","textPlace","linkDialogEle","linkContent","htmlTextbox","contentElem","linkTarget","linkUrl","linkOpenLabel","CheckBox","selectText","linkInsert","linkCancel","selfLink","btnText","checkUrl","linkEle","linkLabel","isUrl","enableAutoUrl","argsValue","linkUpdate","isImgUploaded","isAllowedTypes","mouseX","deletedImg","events.showImageDialog","events.closeImageDialog","events.windowResize","onWindowResize","showImageQuickToolbar","events.imageCaption","events.imageDelete","deleteImg","events.imageLink","insertImgLink","events.imageAlt","insertAltText","events.imageSize","alignmentSelect","afterRender","imagePaste","dragDrop","dragStart","dragEnter","dragOver","imageClick","events.checkUndo","undoStack","resize","onCutHandler","resizing","widthNum","heightNum","img","outline","resizeEnd","resizeBtnInit","cursor","getPointX","prevSelectedImgEle","preventDefaultResize","imgResizeDiv","imageResize","getPointY","stopImmediatePropagation","resizeBtnStat","topLeft","topRight","botLeft","botRight","cancelResizeAction","imgResizePos","resizeImgDupPos","calcPos","imgWid","imgHgt","borWid","devWid","elementOffset","parentOffset","setAspectRatio","expectedX","expectedY","resizeByPercent","finalWidthByPerc","pixToPerc","outlineWidth","expected","parentEle","imgDupMouseMove","mouseY","imgDupPos","openImgLink","editImgLink","removeImgLink","isCapLink","captionEle","isCursor_1","checkImageBack","checkImageDel","prev","removeResizeEle","imageRemovePost","classes.CLS_CAPTION","classes.CLS_CAPINLINE","events.afterImageDelete","alignImage","break","imageWithLinkQTBarItemUpdate","newItems","hideImageQuickToolbar","imagDialog","linkWrap","inputLink","linkargs_1","selfImage","altWrap","altHeader","getAlt","inputAlt","altArgs_1","insertAlt","captionClass","absoluteUrl","baseURI","removingImgName","xhr","XMLHttpRequest","readyState","triggerPost","response","responseType","send","ajax","Ajax","formData","FormData","classes.CLS_RTE_CAPTION","draggable","imgWrap","imgInner","imgCaption","classes.CLS_IMGLEFT","classes.CLS_IMGRIGHT","classes.CLS_IMGCENTER","imgSizeHeader","dialogContent","imgsizeInput","selectObj_1","insertSize","imgDialog","imgInsert","imglinkCancel","imgHeader","imgUpload","linkHeaderText","imageUrlPopup","currentTarget","clientWidth","clientHeight","aria-label","getButtons","uploadUrl","imgHeight","imgWidth","imgSizeWrap","widthVal","changedWidthValue","getClientRects","heightVal","changedHeightValue","inputWidthValue","inputHeightValue","dialogEle","uploadParentEle","deviceImgUpMsg","imgUpMsg","span","spanMsg","btnEle","autofocus","browserMsg","browseButton","Button","btnClick","selectArgs","multiple","events.imageSelected","checkExtension","reader_1","FileReader","readAsDataURL","operation","events.imageRemoving","dataTransfer","effectAllowed","classes.CLS_RTE_DRAG_IMAGE","dropEffect","events.beforeImageDrop","isImgOrFileDrop","files","caretRangeFromPoint","rangeOffset","getDropRange","insertDragImage","startRange","elementFromPoint","startCharIndexCharacter","rangeRect","activePopupElement","imgFiles","onSelect","imgArgs_1","classes.CLS_UPLOAD_FILES","validFiles","imageTag","reader","dragEvent","isUploading","uploadSuccess","reader_2","showPopupToolBar","imageSrc","Audio","isAudioUploaded","deletedAudio","insertingAudio","events.showAudioDialog","events.closeAudioDialog","events.audioDelete","deleteAudio","showAudioQuickToolbar","touchStart","audioClick","checkAudioBack","isAudioElem","checkAudioDel","prevSelectedAudEle","audEle","events.afterMediaDelete","classes.CLS_AUD_FOCUS","audioRemovePost","insertAudioSettings","removingAudioName","hideAudioQuickToolbar","audioDialog","audioInsert","audiolinkCancel","selfAudio","insertAudioUrl","audioUpload","audioUrlPopup","deviceAudioUpMsg","audioUpMsg","events.fileSelected","events.beforeFileUpload","events.fileUploading","events.fileUploadSuccess","events.fileUploadFailed","events.fileRemoving","layoutOption","classes.CLS_AUDIOINLINE","classes.CLS_AUDIOBREAK","Video","isVideoUploaded","deletedVid","insertingVideo","events.showVideoDialog","events.closeVideoDialog","events.videoDelete","deleteVideo","events.videoSize","showVideoQuickToolbar","videoClick","insertVideoSettings","vid","isEmbedVidElem","vidSizeHeader","vidsizeInput","selfVideo","vidHeight","vidWidth","vidSizeWrap","vidResizeDiv","vidResizePos","prevSelectedVidEle","videoElem","videoResize","resizeVidDupPos","vidWid","vidHgt","vidEleStyle","percentageValue","vidDupMouseMove","getInsertVidMaxWidth","vidDupPos","checkVideoBack","checkVideoDel","classes.CLS_VID_FOCUS","videoRemovePost","classes.CLS_VIDEOWRAP","alignVideo","removingVideoName","hideVideoQuickToolbar","videoDialog","videoInsert","videolinkCancel","insertVideoUrl","videoUpload","embedLinkHeader","embedLinkHeaderText","urlPopup","urlContent","embedInputUrl","tabindex","deviceVideoUpMsg","videoUpMsg","classes.CLS_VIDEOINLINE","classes.CLS_VIDEOBREAK","ViewSource","onInitialEnd","updateSourceCode","CONSTANT.KEY_DOWN_HANDLER","getSourceCode","keyboardModule","previewKeyDown","previewElement","wireBaseKeyDown","unWireBaseKeyDown","firstActiveItem","updateValueData","getTextAreaValue","invokeChangeEvent","editHTML","addAudioVideoWrapper","Table","moveEle","currentColumnResize","currentMarginLeft","renderDlgContent","events.showTableDialog","events.closeTableDialog","dropdownSelect","selectionTable","events.tableModulekeyUp","cellSelect","setBGColor","resizeHelper","createTableButton","editdlgObj","numericTextBoxObj","columnTextBox","rowTextBox","tableWidthNum","tableCellPadding","tableCellSpacing","addRow","addColumn","removeRowColumn","tableStyles","UpdateCells","selectCell","hideTableQuickToolbar","removeResizeElement","closestTd","tabSelection","tableArrowNavigation","previousTableElement","classes.CLS_TABLE_SEL","insertTableDialog","editTable","tdEle","classes.CLS_TB_DASH_BOR","classes.CLS_TB_ALT_BOR","insideList","prevElement","cellIndex","tHead","clsTble","selText","closestTable","range_1","tableCellSelect","col","dlgDiv","tblHeader","tableMouseUp","tableCellLeave","tableCellClick","tableInsert","targetTouches","removeHelper","tableResizeEleCreation","calMaxCol","colReEle","data-col","unselectable","classes.CLS_RTE_TABLE_RESIZE","classes.CLS_TB_COL_RES","cssText","rowReEle","data-row","classes.CLS_TB_ROW_RES","rowPosLeft","tableReBox","classes.CLS_TB_BOX_RES","offset","isNestedTable","column","columnEle","appendHelper","rowEle","tableBox","setHelperHeight","updateHelper","top_1","maxiumWidth","mergedCellIndex","mergedElement","currentTdElement","isRowCellsMerged","isColCellsMerged","tableHeight","paddingSize","rteWidth","widthCompare","currentTd","currentTDPad","cellRow","currentTableWidth","getCurrentTableWidth","currentColumnCellWidth","convertPixelToPercentage","firstColumnsCell","findFirstLastColCells","differenceWidth","lastColumnsCell","cellColl","actualwid","totalwid","leftColumnWidth","rightColWidth","isMergedEleResize","leftTableCell","rightTableCell","currentResizeRow","tableBoxPosition","abs","widthType","parentWidth","isFirst","resultColumns","offsetValue","tabkey","delKey","argsTarget","insertbtn","tableDiv","drawTable","rowDiv","data-column","data-cell","createDialog","editContent","tableDlgContent","update","editHeader","applyProperties","dlgContent","tableCellDlgContent","customTable","tableColumn","tableRow","tableWrap","NumericTextBox","floatLabelType","tableDialog","padVal","padding","cellSpacing","classes.CLS_TABLE_BORDER","cellPadding","brdSpcVal","DialogRenderer","dlgObj","getDialogPosition","Dialog","formEle","handleEnterKeyDown","events.beforeDialogOpen","beforeOpenCallback","events.beforeDialogClose","closeArgs","distanceFromVisibleTop","executeGroup","strikeThrough","formatBlock","heading","insertHTML","insertHorizontalRule","editImage","insertBrOnReturn","insertOrderedList","insertUnorderedList","insertParagraph","copyFormatPainter","applyFormatPainter","escapeFormatPainter","ToolbarSettings","ChildProperty","ImageSettings","AudioSettings","VideoSettings","FileManagerSettings","Complex","AjaxSettings","folder","layout","ContextMenuSettings","DetailsViewSettings","NavigationPaneSettings","SearchSettings","FileToolbarSettings","autoUpload","minFileSize","maxFileSize","autoClose","UploadSettings","TableSettings","QuickToolbarSettings","FormatPainterSettings","EmojiSettings","PasteCleanupSettings","FontFamily","FontSize","Format","FontColor","BackgroundColor","NumberFormatList","BulletFormatList","Resources","IFrameSettings","InlineMode","EnterKeyAction","getRangeNode","isTableEnter","curElement","blockElement","shiftKey_1","focusElem","currentFocusElem","currentLastElem","shiftEnterKey","createInsertElement","isMediaNode","isFocusedFirst","splitFirstText","removeBRElement","isNearBlockLengthZero","finalFocusElem","audioVideoElem","isBRInserted","audioModule","videoModule","startParentElem","isHeadingTag","insertElm","currentParentLastChild","isLastNodeLength","isImageElement","focusBRElem","lineBreakBRElem","insertBRElement","outerBRElem","insertFocusContent","isEmptyBrInserted","isFocusTextNode","brElm2","previousBlockNode","nextBlockNode","__assign","assign","t","s","RichTextEditor","needsID","requiredModules","modules","showCharCount","enableResize","updateEnable","classes.CLS_DISABLED","eventInitializer","initializeValue","isFocusOut","defaultResetValue","isResizeInitialized","preRender","onBlurHandler","blurHandler","onFocusHandler","focusHandler","onResizeHandler","resizeHandler","clickPoints","initialValue","initializeServices","setContainer","persistData","role","originalElement","localStorage","getItem","valueTemplate","setValue","invalidAttr","rteOuterWrapper","classes.CLS_RTE_HIDDEN","currentClassList","getPersistData","addOnPersist","focusOut","blur","txt","executeCommand","commandName","htmlPurifier","internalValue","tool","events.contentChanged","htmlEditorModule","wrapTemp","audioValue","linkValue","renderModule","RTERender","getXhtml","defaultValue","renderComplete","audioElm","audioWrapElem","audioInnerWrapElem","videoElm","videoWrapElem","currentStartContainer","currentEndContainer","currentStartOffset","isSameContainer","closestLI","isDetached","currentLast","restrict","bool","removeNodeArray","notFormatPainterCopy","FormatPainterEscapeAction","formatPainterModule","placeHolderWrapper","allowedKeys","sanitizeHtml","inputVal","triggerEditArea","touch","notifyMouseUp","ensureModuleInjected","getInjectedModules","onCopy","onCut","args_2","htmlValue","isRendered","timeInterval","clearInterval","destroyDependentModules","removeHtmlAttributes","removeAttributes","getContent","wrapperElm","selectedHtml","cloneContents","showInlineToolbar","targetElm","hideInlineToolbar","nVal","updatePanelValue","countModule","setWidth","setHeight","updateRTL","frameSetting","resources","scripts","classes.CLS_SCRIPT_SHEET","removeSheets","classes.CLS_STYLE_SHEET","setIframeSettings","CONSTANT.MODEL_CHANGED","wireContextEvent","unWireContextEvent","srcList","getTextArea","classes.CLS_RTE_FIXED_TB_EXPAND","unbindEvents","printWind","printArgs","printingArgs","outerHeight","resizeTo","screen","availWidth","availHeight","printWindow","removeToolbarItem","L10n","enterKeyModule","styleSrc","scriptSrc","InjectSheet","scriptSheet","scriptEle","createScriptElement","styleEle","createStyleElement","rel","isPropertyChange","compiledTemplate","compile","isReact","displayTempElem","renderTemplates","appendElem","renderReactTemplates","updateResizeFlag","eleStyle","editEleMaxWidth","imgPadding","paddingLeft","vidPadding","heightValue","rteHeightPercent","heightPercent","rteHeight","rzHandle","rzHeight","expandPopHeight","codeElement","tbWrapHeight","getHtml","showSourceCode","getCharCount","InsertLink","InsertImage","InsertAudio","InsertVideo","InsertTable","classes.CLS_FOCUS","preventImgResize","defaultResize","contentScrollHandler","cloneValue","active","isInteracted","saveInterval","autoSaveOnIdle","setInterval","updateValueOnIdle","currentFocus","getCurrentFocus","resetToolbarTabIndex","getUpdatedValue","isValueChangeBlurhandler","updateIntervalValue","idleInterval","valueElementWrapper","status_1","events.updatedToolbarStatus","rteElement","relatedTarget","scrollParentElements","contextHandler","touchModule","EJ2Touch","tapHold","touchHandler","tapHoldThreshold","closestElem","resetHandler","setAutoHeight","iframeElement_1","overflow","bindEvents","arrayKey","formElement","classes.CLS_RTE_SOURCE_CODE_TXTAREA","Component","first","middle","last"],"mappings":"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UAAW,cAAU,GACxC4c,IACImF,YAAS,IACVqqF,EAAgBpsG,UAAW,sBAAkB,GAChD4c,IACImF,WAAS71B,cAAYsoB,SACtB43F,EAAgBpsG,UAAW,YAAQ,GACtC4c,IACImF,WAASrvB,KACV05G,EAAgBpsG,UAAW,aAAS,GACvC4c,IACImF,gBACDqqF,EAAgBpsG,UAAW,mBAAe,GACtCosG,GACTC,iBAKEC,GAA+B,SAAUlsF,GAEzC,SAASksF,IACL,OAAkB,OAAXlsF,GAAmBA,EAAOuqD,MAAM9qE,KAAMkd,YAAcld,KA4C/D,OA9CAmc,GAAUswF,EAAelsF,GAIzBxD,IACImF,YAAU,QAAS,OAAQ,UAC5BuqF,EAActsG,UAAW,oBAAgB,GAC5C4c,IACImF,WAAS,WACVuqF,EAActsG,UAAW,eAAW,GACvC4c,IACImF,WAAS,SACVuqF,EAActsG,UAAW,kBAAc,GAC1C4c,IACImF,WAAS,SACVuqF,EAActsG,UAAW,aAAS,GACrC4c,IACImF,WAAS,SACVuqF,EAActsG,UAAW,cAAU,GACtC4c,IACImF,WAAS,OACVuqF,EAActsG,UAAW,eAAW,GACvC4c,IACImF,WAAS,OACVuqF,EAActsG,UAAW,YAAQ,GACpC4c,IACImF,YAAS,IACVuqF,EAActsG,UAAW,cAAU,GACtC4c,IACImF,WAAS,OACVuqF,EAActsG,UAAW,iBAAa,GACzC4c,IACImF,WAAS,IACVuqF,EAActsG,UAAW,gBAAY,GACxC4c,IACImF,WAAS,OACVuqF,EAActsG,UAAW,gBAAY,GACxC4c,IACImF,WAAS,IACVuqF,EAActsG,UAAW,iBAAa,GACzC4c,IACImF,WAAS,OACVuqF,EAActsG,UAAW,iBAAa,GACzC4c,IACImF,YAAS,IACVuqF,EAActsG,UAAW,uBAAmB,GACxCssG,GACTD,iBAKEE,GAA+B,SAAUnsF,GAEzC,SAASmsF,IACL,OAAkB,OAAXnsF,GAAmBA,EAAOuqD,MAAM9qE,KAAMkd,YAAcld,KAoB/D,OAtBAmc,GAAUuwF,EAAensF,GAIzBxD,IACImF,YAAU,OAAQ,OAAQ,OAAQ,UACnCwqF,EAAcv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AClD4c,IACImF,YAAS,IACVivF,EAAehxG,UAAW,mBAAe,GAC5C4c,IACImF,YAAS,IACVivF,EAAehxG,UAAW,oBAAgB,GAC7C4c,IACImF,gBACDivF,EAAehxG,UAAW,sBAAkB,GAC/C4c,IACImF,WAAS,OACVivF,EAAehxG,UAAW,mBAAe,GAC5C4c,IACImF,YAAS,IACVivF,EAAehxG,UAAW,sBAAkB,GAC/C4c,IACImF,YAAS,IACVivF,EAAehxG,UAAW,gBAAY,GACzC4c,IACImF,YAAS,IACVivF,EAAehxG,UAAW,eAAW,GACxC4c,IACImF,YAAS,IACVivF,EAAehxG,UAAW,2BAAuB,GACpD4c,IACImF,YAAS,IACVivF,EAAehxG,UAAW,wBAAoB,GACjD4c,IACImF,YAAS,IACVivF,EAAehxG,UAAW,mBAAe,GAC5C4c,IACImF,WAAS,SACVivF,EAAehxG,UAAW,cAAU,GACvC4c,IACImF,WAAS,OACVivF,EAAehxG,UAAW,gBAAY,GACzC4c,IACImF,WAAS,OACVivF,EAAehxG,UAAW,aAAS,GACtC4c,IACImF,WAAS,MACVivF,EAAehxG,UAAW,gBAAY,GACzC4c,IACImF,WAAS,OACVivF,EAAehxG,UAAW,qBAAiB,GAC9C4c,IACImF,WAAS,KACVivF,EAAehxG,UAAW,qBAAiB,GAC9C4c,IACImF,WAAS,MACVivF,EAAehxG,UAAW,qBAAiB,GAC9C4c,IACImF,WAAS,SACVivF,EAAehxG,UAAW,kBAAc,GAC3C4c,IACImF,WAAS,OACVivF,EAAehxG,UAAW,iBAAa,GAC1C4c,IACImF,YAAS,IACVivF,EAAehxG,UAAW,qBAAiB,GAC9C4c,IACImF,YAAS,IACVivF,EAAehxG,UAAW,oBAAgB,GAC7C4c,IACImF,YAAS,IACVivF,EAAehxG,UAAW,qBAAiB,GAC9C4c,IACImF,YAAU,IACXivF,EAAehxG,UAAW,iBAAa,GAC1C4c,IACI8vF,aAAYqB,KACbiD,EAAehxG,UAAW,cAAU,GACvC4c,IACI8vF,aAAYwB,KACb8C,EAAehxG,UAAW,wBAAoB,GACjD4c,IACI8vF,aA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"}